"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[6498,13001,31299,35382,38574,53680,75166,85685],{770:(e,n,a)=>{a.d(n,{bG:()=>o,Ty:()=>s,YJ:()=>u,Fq:()=>c,vt:()=>t});var i=a(53084),l=a(42633);class r{constructor(e){const{name:n,label:a,description:i,schemes:r}=e;this.name=n,this.label=a,this.description=i,this.schemes=r;const o=e.basemapGroups||l.Np;let t=[];Object.keys(o).forEach((e=>{t=t.concat(o[e])})),this.supportedBasemaps=t,this.basemapGroups=o}isBasemapSupported(e){const n=(0,l.T1)(e,this.supportedBasemaps);return!(!n||!this.supportedBasemaps.includes(n))}getRawSchemes(e){const{basemapId:n,basemapTheme:a}=function(e,n,a){let i=null,r=null;if(n&&(i=(0,l.T1)(n,e,!1),i)){const e=(0,l.BV)(i);null!=e&&(r=e)}return!i&&a&&(i="dark"===a?"dark-gray":"gray",r=a),i||r||(i="gray",r="light"),{basemapId:i,basemapTheme:r}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let r=a;if(n){const e=(0,l.BV)(n,this.basemapGroups);null!=e&&(r=e)}let o=e.geometryType;"multipoint"===o?o="point":"mesh"===o&&(o="polygon");const t=this.schemes[o]||this.schemes.default;return{schemesInfo:(0,i.clone)(t[r]),basemapId:n,basemapTheme:a}}}function o(e){const n=e.themeDictionary,a=new Map;for(const i in n){const e=n[i];a.set(i,new r(e))}return a}function t(e,n){const a=[];return e.forEach((e=>{e.isBasemapSupported(n)&&a.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),a}function s(e,n){if(!e)return;if(!n)return;let a=null;const i=[n.primaryScheme,...n.secondarySchemes];for(const r of i){var l;if((null===(l=r.name)||void 0===l?void 0:l.toLowerCase())===e.toLowerCase()){a=r;break}}return a}function u(e,n,a){if(!e&&!n)return[];if(!a)return[];const i=!(null!==e&&void 0!==e&&e.length),l=!(null!==n&&void 0!==n&&n.length),r=[a.primaryScheme,...a.secondarySchemes],o=[];for(const t of r){const a=!!i||e.some((e=>t.tags.includes(e))),r=!l&&n.some((e=>t.tags.includes(e)));a&&!r&&o.push(t)}return o}function c(e){const n=e.theme;if(n)return n.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},13001:(e,n,a)=>{a.r(n),a.d(n,{createRenderer:()=>V,regenerateRenderer:()=>E,updateRenderer:()=>F});var i=a(89379),l=a(59784),r=a(50076),o=a(53084),t=a(63860),s=a(9922),u=a(76841),c=a(44884),d=a(33766),p=a(31650),m=a(53151),f=a(53680),h=a(51006),v=a(90494),y=a(11563),g=a(38574),w=a(94439);const b=new Set(["equal-interval","natural-breaks","quantile"]),z=new Set(["HH","HL","LH","LL"]),k={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]},S={2:["L","H"],3:["L","M","H"],4:["L","M1","M2","H"]},C=e=>({minValue:e.minValue,maxValue:e.maxValue});async function B(e){var n,a,l,o,t;if(!(null!==e&&void 0!==e&&e.layer&&e.view&&e.field1&&e.field2))throw new r.default("relationship-renderer:missing-parameters","'layer', 'view', 'field1' and 'field2' parameters are required");e.forBinning&&(0,v.p)(e,"relationship-renderer");const s=(0,i.A)((0,i.A)({},e),{},{layer:e.layer,field1:e.field1,field2:e.field2});if(null!==(n=s.symbolType)&&void 0!==n||(s.symbolType="2d"),null!==(a=s.defaultSymbolEnabled)&&void 0!==a||(s.defaultSymbolEnabled=!0),null!==(l=s.classificationMethod)&&void 0!==l||(s.classificationMethod="quantile"),null!==(o=s.numClasses)&&void 0!==o||(s.numClasses=3),null!==(t=s.focus)&&void 0!==t||(s.focus=null),!b.has(s.classificationMethod))throw new r.default("relationship-renderer:invalid-parameters","classification method ".concat(s.classificationMethod," is not supported"));if(s.numClasses<2||s.numClasses>4)throw new r.default("relationship-renderer:invalid-parameters","'numClasses' must be 2, 3 or 4");if(e.focus&&!z.has(e.focus))throw new r.default("relationship-renderer:invalid-parameters","'focus' must be 'HH', 'HL', 'LH', 'LL' or null");const u=e.forBinning?y.Mi:y.J4,c=(0,y.Jg)(s.layer,u,e.forBinning);if(!c)throw new r.default("relationship-renderer:invalid-parameters","'layer' must be one of these types: "+(0,y.Ho)(u).join(", "));const d=null!=s.signal?{signal:s.signal}:null;await c.load(d);const p=c.geometryType,m=s.symbolType.includes("3d");if(s.outlineOptimizationEnabled="polygon"===p&&s.outlineOptimizationEnabled,s.sizeOptimizationEnabled=("point"===p||"multipoint"===p||"polyline"===p)&&s.sizeOptimizationEnabled,"mesh"===p)s.symbolType="3d-volumetric",s.colorMixMode=s.colorMixMode||"replace",s.edgesType=s.edgesType||"none";else{if("3d-volumetric-uniform"===s.symbolType&&"point"!==p)throw new r.default("relationship-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(m&&"polygon"===p)throw new r.default("relationship-renderer:not-supported","3d symbols are not supported for polygon layers");if(s.symbolType.includes("3d-volumetric")&&(!s.view||"3d"!==s.view.type))throw new r.default("relationship-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'")}const{field1:f,field2:g}=s,w=[f.field,g.field];f.normalizationField&&w.push(f.normalizationField),g.normalizationField&&w.push(g.normalizationField);const k=(0,h.MH)(c,w,"relationship-renderer:invalid-parameters");if(k)throw k;return(0,i.A)((0,i.A)({},s),{},{layer:c})}function x(e,n){const a=(0,o.clone)(k[e]);return(0,g.flatten2DArray)(a,n)}function T(e,n,a,i){const{field:l,normalizationField:r}=e,{field:o,normalizationField:t}=n,s=a.map((e=>[e.minValue,e.maxValue])),u=i.map((e=>[e.minValue,e.maxValue])),c=s.length,d=S[c];return"\n  var field1 = $feature['".concat(l,"'];\n  var field2 = $feature['").concat(o,"'];\n  var hasNormField1 = ").concat(r?"true":"false",";\n  var hasNormField2 = ").concat(t?"true":"false",";\n  var normField1 = ").concat(r?"$feature['".concat(r,"']"):"null",";\n  var normField2 = ").concat(t?"$feature['".concat(t,"']"):"null",";\n\n  if (\n    IsEmpty(field1) ||\n    IsEmpty(field2) ||\n    (hasNormField1 && (IsEmpty(normField1) || normField1 == 0)) ||\n    (hasNormField2 && (IsEmpty(normField2) || normField2 == 0))\n  ) {\n    return null;\n  }\n\n  var value1 = IIf(hasNormField1, (field1 / normField1), field1);\n  var value2 = IIf(hasNormField2, (field2 / normField2), field2);\n\n  var breaks1 = ").concat(JSON.stringify(s),";\n  var breaks2 = ").concat(JSON.stringify(u),";\n  var classCodes = ").concat(JSON.stringify(d),";\n\n  function getClassCode(value, breaks) {\n    var code = null;\n\n    for (var i in breaks) {\n      var info = breaks[i];\n      if (value >= info[0] && value <= info[1]) {\n        code = classCodes[i];\n        break;\n      }\n    }\n\n    return code;\n  }\n\n  var code1 = getClassCode(value1, breaks1);\n  var code2 = getClassCode(value2, breaks2);\n\n  var classValue = IIf(IsEmpty(code1) || IsEmpty(code2), null, code1 + code2);\n  return classValue;\n  ")}async function I(e,n,a){var l;const o=await(0,t.ud)("esri/smartMapping/t9n/smartMapping"),{basemap:d,classificationMethod:p,field1:f,field2:v,focus:y,numClasses:w,signal:b}=e,z=e.layer,k=n.classBreakInfos,S=a.classBreakInfos;if(w!==k.length||k.length!==S.length)throw new r.default("relationship-renderer:error","incompatible class breaks");const C=function(e,n){return x(e,n).map((e=>({value:e,count:0})))}(w,y),B=T(e.field1,e.field2,k,S),I=(await async function(e){let n=e.relationshipScheme,a=null,i=null;const l=await(0,h.Ib)(e.basemap,e.view);if(a=null!=l.basemapId?l.basemapId:null,i=null!=l.basemapTheme?l.basemapTheme:null,n)return{scheme:(0,g.cloneScheme)(n),basemapId:a,basemapTheme:i};const r=(0,g.getSchemes)({basemapTheme:i,geometryType:e.geometryType,theme:e.theme,worldScale:e.worldScale,view:e.view});return r&&(n=r.primaryScheme,a=r.basemapId,i=r.basemapTheme),{scheme:n,basemapId:a,basemapTheme:i}}({basemap:d,geometryType:z.geometryType,theme:"default",relationshipScheme:e.relationshipScheme,worldScale:!(null===(l=e.symbolType)||void 0===l||!l.includes("3d-volumetric")),view:e.view})).scheme,M=await(0,m.createRenderer)({layer:z,basemap:d,valueExpression:B,valueExpressionTitle:o.relationship.legendTitle,numTypes:-1,sortEnabled:!1,defaultSymbolEnabled:e.defaultSymbolEnabled,typeScheme:(0,i.A)({colors:(0,g.getColors)(I,w,y)},I),statistics:{uniqueValueInfos:C},legendOptions:e.legendOptions,outlineOptimizationEnabled:e.outlineOptimizationEnabled,sizeOptimizationEnabled:e.sizeOptimizationEnabled,symbolType:e.symbolType,colorMixMode:e.colorMixMode,edgesType:e.edgesType,filter:e.filter,view:e.view,signal:b}),F=M.renderer,V=F.uniqueValueInfos,E=o.relationship;for(const i of null!==V&&void 0!==V?V:[])i.label=E[i.value];const L=new s.default({type:"relationship",classificationMethod:p,numClasses:w,focus:y,field1:new c.K({field:f.field,normalizationField:f.normalizationField,label:f.label,classBreakInfos:k.map((e=>{let{minValue:n,maxValue:a}=e;return new u.n({minValue:n,maxValue:a})}))}),field2:new c.K({field:v.field,normalizationField:v.normalizationField,label:v.label,classBreakInfos:S.map((e=>{let{minValue:n,maxValue:a}=e;return new u.n({minValue:n,maxValue:a})}))})});return F.authoringInfo=L,{renderer:F,classBreaks:{field1:n,field2:a},uniqueValueInfos:M.uniqueValueInfos,relationshipScheme:I,basemapId:M.basemapId,basemapTheme:M.basemapTheme}}async function M(e){const{layer:n,classificationMethod:a,field1:i,field2:l,numClasses:o,filter:t,view:s,signal:u}=e,c={layer:n,classificationMethod:a,field:i.field,normalizationField:i.normalizationField,normalizationType:i.normalizationField?"field":null,minValue:i.minValue,maxValue:i.maxValue,analyzeData:!(null!=i.minValue&&null!=i.maxValue),numClasses:o,filter:t,view:s,signal:u},d={layer:n,classificationMethod:a,field:l.field,normalizationField:l.normalizationField,normalizationType:l.normalizationField?"field":null,minValue:l.minValue,maxValue:l.maxValue,analyzeData:!(null!=l.minValue&&null!=l.maxValue),numClasses:o,filter:t,view:s,signal:u},[p,m]=await Promise.all([(0,h.Pv)(c),(0,h.Pv)(d)]);if(!p||!m)throw new r.default("relationship-renderer:error","error when calculating class breaks");return{field1:p.result,field2:m.result}}async function F(e){var n;const a=await async function(e){var n;if(null===e||void 0===e||!e.renderer||!e.numClasses)throw new r.default("update-relationship-renderer:missing-parameters","'renderer' and 'numClasses' parameters are required");const{field1:a,field2:i,renderer:l,numClasses:o,colors:t}=e,s=o**2;if((a||i)&&!(a&&i&&a.field&&i.field))throw new r.default("update-relationship-renderer:missing-parameters","'field1' and 'field2' parameters are required");if(a&&!a.classBreakInfos||i&&!i.classBreakInfos)throw new r.default("update-relationship-renderer:missing-parameters","'field1.classBreakInfos' and 'field2.classBreakInfos' are required");if(!l.authoringInfo)throw new r.default("update-relationship-renderer:missing-parameters","'renderer.authoringInfo' is required");if((null===(n=l.uniqueValueInfos)||void 0===n?void 0:n.length)!==s)throw new r.default("update-relationship-renderer:invalid-parameters","Renderer must have ".concat(s," unique value infos to support ").concat(o," classes"));if(t&&t.length!==s)throw new r.default("update-relationship-renderer:invalid-parameters","The scheme must have ".concat(s," colors"));return e}(e),{field1:i,field2:o,renderer:t,numClasses:d,focus:p,colors:m}=a,f=t.clone();f.valueExpression=T(i,o,i.classBreakInfos,o.classBreakInfos);const h=null!==(n=f.uniqueValueInfos)&&void 0!==n?n:[];if(function(e,n,a){const i=x(n,a);e.sort(((e,n)=>{const a=i.indexOf(e.value),l=i.indexOf(n.value);let r=0;return a<l?r=-1:a>l&&(r=1),r}))}(h,d,p),m){const e=(0,l.Iy)(m,m.length);h.forEach(((n,a)=>(0,w.dt)(n.symbol,e[a])))}return function(e,n){var a;null!==(a=e.authoringInfo)&&void 0!==a||(e.authoringInfo=new s.default);const i=e.authoringInfo;i.numClasses=n.numClasses,i.focus=n.focus||null,i.focus||delete i.focus;const{field1:l,field2:r}=n;i.field1=new c.K({field:l.field,normalizationField:l.normalizationField,label:l.label,classBreakInfos:l.classBreakInfos.map((e=>new u.n(C(e))))}),i.field2=new c.K({field:r.field,normalizationField:r.normalizationField,label:r.label,classBreakInfos:r.classBreakInfos.map((e=>new u.n(C(e))))}),e.authoringInfo=i}(f,a),f}async function V(e){const n=await B(e),{field1:a,field2:i}=await M(n);return I(n,a,i)}async function E(e){const{creatorParameters:n,view:a,signal:l,filter:o,renderer:t}=await async function(e){const n="regenerate-relationship-renderer";await(0,f.AC)(e,n);const a=await(0,f.mE)(e),l=(0,f.UJ)(a);if(!l||!["relationship","relationship-size"].includes(l))throw new r.default("".concat(n,":invalid-parameters"),"Renderer is invalid");const{layer:o,forBinning:t,filter:s,view:u,signal:c}=e,d=(0,f.DW)(a),p=(0,f.Rv)(a),{field1:m,field2:h,classificationMethod:v,focus:y,numClasses:g}=a.authoringInfo,w={field:m.field,normalizationField:m.normalizationField,label:m.label},b={field:h.field,normalizationField:h.normalizationField,label:h.label},z=await B({layer:o,field1:w,field2:b,classificationMethod:v,numClasses:g,focus:y,outlineOptimizationEnabled:d,sizeOptimizationEnabled:p,forBinning:t,filter:s,view:u,signal:c});return(0,i.A)((0,i.A)({},e),{},{creatorParameters:z,renderer:a})}(e),{layer:s,field1:u,field2:c,numClasses:m,focus:v,outlineOptimizationEnabled:y,sizeOptimizationEnabled:g}=n,{field1:w,field2:b}=await M(n),[z,k,S]=await Promise.all([F({field1:(0,i.A)((0,i.A)({},u),{},{classBreakInfos:w.classBreakInfos}),field2:(0,i.A)((0,i.A)({},c),{},{classBreakInfos:b.classBreakInfos}),renderer:t,numClasses:m,focus:v}),y?(0,d.A)({layer:s,view:a,signal:l,filter:o}).catch(h.ou):null,g?(0,p.default)({layer:s,view:a,signal:l,filter:o}).catch(h.ou):null]);return(0,f.ke)(z,null===k||void 0===k?void 0:k.visualVariables,f._i),(0,f.ke)(z,null===S||void 0===S?void 0:S.minSize,f.kc),{renderer:z}}},29857:(e,n,a)=>{a.r(n),a.d(n,{default:()=>z});var i=a(89379),l=a(53986),r=a(50076),o=a(68002),t=a(16525),s=a(90494),u=a(11563);const c=["layer"],d=500,p=1e8,m=1280,f=12,h=30,v=15;async function y(e){const{view:n,sampleSize:a}=e;if(!e||!e.layer)throw new r.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!n)throw new r.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,s.p)(e,"scale-range");const{layer:o}=e,t=(0,l.A)(e,c),p=e.forBinning?u.Mi:u.J4,m=(0,u.Jg)(o,p,e.forBinning);if(!m)throw new r.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,u.Ho)(p).join(", "));const f=(0,i.A)({layerAdapter:m},t);f.sampleSize=a||d,await(null===n||void 0===n?void 0:n.when());const h=null!=f.signal?{signal:f.signal}:null;return await m.load(h),f}function g(e,n,a){var i,l;const r=function(e,n){const a=f,i=m/4,l=h,r=m/4,o=v,t=m/2;let s=0,u=0,c=0,d=0;switch(e){case"point":case"multipoint":{var p,y;const e=n;s=null!==(p=e.avgMinDistance)&&void 0!==p?p:0,u=a,c=null!==(y=e.minDistance)&&void 0!==y?y:0,d=i;break}case"polyline":{var g,w;const e=n;s=null!==(g=e.avgLength)&&void 0!==g?g:0,u=l,c=null!==(w=e.minLength)&&void 0!==w?w:0,d=r;break}case"polygon":{var b,z;const e=n;s=null!==(b=e.avgSize)&&void 0!==b?b:0,u=o,c=null!==(z=e.minSize)&&void 0!==z?z:0,d=t;break}}return{resolutionForMinScale:s>0?s/u:null,resolutionForMaxScale:c>0?c/d:null}}(e.geometryType,n),t=(null===a||void 0===a?void 0:a.spatialReference)||e.layer.spatialReference;return{minScale:(0,o.gB)(null!==(i=r.resolutionForMinScale)&&void 0!==i?i:0,t),maxScale:(0,o.gB)(null!==(l=r.resolutionForMaxScale)&&void 0!==l?l:0,t)}}function w(e,n){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const i=e.constraints.effectiveLODs,l=a?i:i.slice().reverse();let r=null;for(const e of l)if(!(a?e.scale>n:e.scale<n)){r=e;break}return r}}function b(e,n,a,i){const{view:l,snapToLOD:o,layerAdapter:t}=e;if(o&&l){const e=w(l,n),i=w(l,a,!1);n=e?e.scale:n,a=i?i.scale:a}if(n<a)throw new r.default("scale-range:invalid","calculated minScale is less than maxScale.");return a>n/2&&(a=Math.floor(a/2)),n>p&&(n=0),"polygon"!==t.geometryType&&(a=0),{minScale:Math.ceil(n),maxScale:Math.floor(a),spatialStatistics:i}}async function z(e){const n=await y(e),{view:a,sampleSize:i,layerAdapter:l,signal:o,filter:s}=n,u=await l.getSampleFeatures({view:a,sampleSize:i,returnGeometry:!0,filter:s,signal:o},"json");if(null===u||void 0===u||!u.length)throw new r.default("scale-range:insufficient-info","No features are available to calculate statistics");const c=await(0,t.A)({features:u,geometryType:l.geometryType}),{minScale:d,maxScale:p}=g(l,c,a);return b(n,d,p,c)}},31650:(e,n,a)=>{a.r(n),a.d(n,{default:()=>B});var i=a(89379),l=a(53986),r=(a(81806),a(50076)),o=a(76931),t=a(68002),s=a(43996),u=a(63040),c=a(29857),d=a(90494),p=a(11563);const m=["layer"],f=1e8,h=1128.497176,v=591657527.591555,y=[10,8,4,2],g=[100,100,60,30],w=[2,1,.75,.5],b=[32,18,12,6],z=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function k(e,n){const{view:a}=e;if(!a)throw new r.default("scale-range:invalid-parameters","'view' is required");const i=n.minScale||f,l=a.constraints&&"effectiveLODs"in a.constraints&&a.constraints.effectiveLODs||z,o=[];for(let r=0;r<l.length;r++){if(l[r].scale>i)continue;const e=Number(r),n=[e-3,e,e+3,e+6];for(const a of n)a>-1&&a<l.length&&o.push(l[a].scale);break}return o.sort(((e,n)=>e-n))}function S(e,n){const{view:a,layerAdapter:i}=e;if(!a)throw new r.default("scale-range:invalid-parameters","'view' is required");const l=i.fullExtent,o=i.minScale||h,s=i.maxScale||v,u=n.minScale||0,c=n.maxScale||0;let d=null!=l?(0,t.X_)(a,l):0;return d=d<o&&d>s?d:0,{scales:[o,s,u,c,d].map(Math.round).sort(((e,n)=>e-n)).filter(((e,n,a)=>!!e&&a.indexOf(e)===n)).filter(((e,n,a)=>!n||Math.abs(e-a[n-1])>5)),fullExtentScale:d}}function C(e,n){const{spatialStatistics:a,minScale:i,maxScale:l}=n;if(!("avgSize"in a)||!a.avgSize)throw new r.default("size-range:insufficient-info","average polygon size is invalid");const t=a.avgSize,{view:c}=e;if(!c)throw new r.default("scale-range:invalid-parameters","'view' is required");const{resolution:d,scale:p}=c,m=d/p,{scales:f,fullExtentScale:h}=S(e,{minScale:i,maxScale:l}),v=[],y=[];return f.forEach(((e,n)=>{const{min:a,max:i}=function(e,n){const a=Math.ceil(e/n);let i=Math.ceil(a/4);i<4?i=4:i>16&&(i=16);const l=5*i;return{min:i,max:l<50?50:l}}(t,m*e),l=f.indexOf(h),r=l>-1&&n>l?2:1;v.push(new u.default({value:e,size:(0,o.PN)(a/r)})),y.push(new u.default({value:e,size:(0,o.PN)(i/r)}))})),{minSize:new s.default({valueExpression:"$view.scale",stops:v}),maxSize:new s.default({valueExpression:"$view.scale",stops:y})}}async function B(e){const n=await async function(e){const{view:n}=e;if(!(e&&n&&e.layer))throw new r.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,d.p)(e,"size-range");const{layer:a}=e,o=(0,l.A)(e,m),t=e.forBinning?p.Mi:p.J4,s=(0,p.Jg)(a,t,e.forBinning);if(!s)throw new r.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,p.Ho)(t).join(", "));const u=(0,i.A)((0,i.A)({layerAdapter:s},o),{},{view:n});await n.when();const c=null!=u.signal?{signal:u.signal}:null;await s.load(c);const f=s.geometryType;if("point"!==f&&"multipoint"!==f&&"polyline"!==f&&"polygon"!==f)throw new r.default("size-range:not-supported","sizeRange is not supported for geometryType: ".concat(f));return u}(e),{view:a,layerAdapter:t,signal:f,filter:h}=n,v=await(0,c.default)({layer:t,view:a,signal:f,filter:h});switch(t.geometryType){case"point":case"multipoint":return function(e,n){const{minScale:a,maxScale:i}=n,l=k(e,{minScale:a,maxScale:i});if(!l.length)throw new r.default("scale-range:insufficient-info","not enough scale values");return{minSize:new s.default({valueExpression:"$view.scale",stops:l.map(((e,n)=>new u.default({value:e,size:(0,o.PN)(y[n])})))}),maxSize:new s.default({valueExpression:"$view.scale",stops:l.map(((e,n)=>new u.default({value:e,size:(0,o.PN)(g[n])})))})}}(n,v);case"polyline":return function(e,n){const{minScale:a,maxScale:i}=n,l=k(e,{minScale:a,maxScale:i});if(!l.length)throw new r.default("scale-range:insufficient-info","not enough scale values");return{minSize:new s.default({valueExpression:"$view.scale",stops:l.map(((e,n)=>new u.default({value:e,size:(0,o.PN)(w[n])})))}),maxSize:new s.default({valueExpression:"$view.scale",stops:l.map(((e,n)=>new u.default({value:e,size:(0,o.PN)(b[n])})))})}}(n,v);case"polygon":return C(n,v);case"mesh":case"multipatch":return null}return null}},38574:(e,n,a)=>{a.r(n),a.d(n,{cloneScheme:()=>g,flatten2DArray:()=>w,flipColors:()=>z,getColors:()=>b,getMatchingSchemes:()=>k,getSchemeByName:()=>v,getSchemes:()=>h,getSchemesByTag:()=>y,getThemes:()=>f});var i=a(89379),l=a(69539),r=a(18690),o=a(53084),t=a(89132),s=a(770),u=a(80791);const c={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},d={lightBasemaps:{primary:"relationship-blue-orange-brown",secondary:["relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green","relationship-blue-red-pink","relationship-blue-green-brightgreen","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal"]},darkBasemaps:{primary:"relationship-blue-green-brightgreen",secondary:["relationship-blue-red-pink","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal","relationship-blue-orange-brown","relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green"]}},p="#aaaaaa",m=(0,s.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features based on relationship between two attributes.",schemes:{point:{light:{common:{noDataColor:p,outline:c.light,size:"8px"},primary:d.lightBasemaps.primary,secondary:d.lightBasemaps.secondary},dark:{common:{noDataColor:p,outline:c.darker,size:"8px"},primary:d.darkBasemaps.primary,secondary:d.darkBasemaps.secondary}},polyline:{light:{common:{noDataColor:p,width:"2px"},primary:d.lightBasemaps.primary,secondary:d.lightBasemaps.secondary},dark:{common:{noDataColor:p,width:"2px"},primary:d.darkBasemaps.primary,secondary:d.darkBasemaps.secondary}},polygon:{light:{common:{noDataColor:p,outline:c.light,fillOpacity:.8},primary:d.lightBasemaps.primary,secondary:d.lightBasemaps.secondary},dark:{common:{noDataColor:p,outline:c.dark,fillOpacity:.8},primary:d.darkBasemaps.primary,secondary:d.darkBasemaps.secondary}}}}}});function f(e){return(0,s.vt)(m,e)}function h(e){const n=(0,s.Fq)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:m.get("default")});if(!n)return;const{schemesInfo:a,basemapId:l,basemapTheme:o}=n,t=(0,i.A)((0,i.A)({},e),{},{basemap:l});return{primaryScheme:x(t,a.primary,a.common),secondarySchemes:a.secondary.map((e=>x(t,e,a.common))).filter(r.Ru),basemapId:l,basemapTheme:o}}function v(e){return(0,s.Ty)(e.name,h(e))}function y(e){return(0,s.YJ)(e.includedTags,e.excludedTags,h(e))}function g(e){if(!e)return;const n=(0,i.A)({},e);return n.colorsForClassBreaks=n.colorsForClassBreaks.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new l.default(e)))))}))),n.tags=[...n.tags],n.noDataColor&&(n.noDataColor=new l.default(n.noDataColor)),"outline"in n&&n.outline&&(n.outline={color:n.outline.color&&new l.default(n.outline.color),width:n.outline.width}),n}function w(e,n){e=(0,o.clone)(e);let a=[];const i=(n||"HH").split(""),l=i[0],r=i[1];"L"===l&&e.reverse();const t="H"===r;return e.forEach((e=>{t&&e.reverse(),a=a.concat(e)})),a}function b(e,n,a){var i;let r;return e.colorsForClassBreaks.some((e=>(e.numClasses===n&&(r=e.colors),!!r))),r=null===(i=r)||void 0===i?void 0:i.map((e=>e.map((e=>new l.default(e))))),r?w(r,a):null}function z(e,n){const a=n?e:g(e);return a.colorsForClassBreaks.forEach((e=>{const n=e.colors.reverse(),a=[];for(let i=0;i<e.numClasses;i++){const e=[];n.forEach((n=>{e.push(n[i])})),a.push(e)}e.colors=a})),a}function k(e){const n=e.theme||"default",a=e.geometryType,i=e.colors,l=e.numClasses,r=m.get(n);if(!r)return[];const o=r.supportedBasemaps,t=[];return o.forEach((e=>{const r=h({theme:n,basemap:e,geometryType:a});if(r){let e=B(r.primaryScheme,i,l);e&&t.push(e),r.secondarySchemes.forEach((n=>{e=B(n,i,l),e&&t.push(e)}))}})),t}function S(e,n,a,i){let l;const r=b(e,a,i);return r&&1===(0,u._t)(n,r)&&(l=e),l}function C(e,n,a,i){let l,r=1;do{l=S(e,n,a,i),l||(e=z(e),r++)}while(!l&&r<=4);return l}function B(e,n,a){return C(e,n,a,"HH")||C(e,n,a,"HL")||C(e,n,a,"LH")||C(e,n,a,"LL")}function x(e,n,a){const i="mesh"!==e.geometryType&&e.worldScale?e.view:null,r=t.A[n],o=e.theme||"default";if(!r)return;const s=o+"/"+e.basemap+"/"+n,c=[];for(const l in r)if("stops"!==l&&"name"!==l&&"tags"!==l){const e=+l,n=r[l];c.push({numClasses:e,colors:n})}switch(e.geometryType){case"point":case"multipoint":{const e=a;return function(e,n){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:T(e.colorsForClassBreaks),noDataColor:new l.default(e.noDataColor),outline:{color:new l.default(e.outline.color),width:e.outline.width},size:n?(0,u._J)(e.size,n):e.size,opacity:e.opacity}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,outline:e.outline,size:e.size},i)}case"polyline":{const e=a;return function(e,n){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:T(e.colorsForClassBreaks),noDataColor:new l.default(e.noDataColor),opacity:e.opacity,width:n?(0,u._J)(e.width,n):e.width}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,width:e.width},i)}case"polygon":{const e=a;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:T(e.colorsForClassBreaks),noDataColor:new l.default(e.noDataColor),outline:{color:new l.default(e.outline.color),width:e.outline.width},opacity:e.opacity}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline})}case"mesh":{const e=a;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:T(e.colorsForClassBreaks),noDataColor:new l.default(e.noDataColor),opacity:e.opacity}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity})}}}function T(e){return e.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new l.default(e)))))})))}},53680:(e,n,a)=>{a.d(n,{AC:()=>l,DW:()=>s,Hj:()=>z,Ih:()=>h,Jy:()=>d,OW:()=>y,Rv:()=>u,UJ:()=>t,_i:()=>c,d8:()=>m,fs:()=>p,kc:()=>f,ke:()=>b,mE:()=>r,wx:()=>o});var i=a(50076);async function l(e,n){const{layer:a,view:l,forBinning:r,filter:o}=e;if(!a||!l)throw new i.default("".concat(n,":missing-parameters"),"'layer' and 'view' parameters are required");await a.load();const t="featureReduction"in a?a.featureReduction:null;if(r){if("binning"!==(null===t||void 0===t?void 0:t.type))throw new i.default("".concat(n,":invalid-parameters"),"'layer' must have 'featureReduction' property defined with 'binning' type when 'forBinning' parameter is true");if(o)throw new i.default("".concat(n,":invalid-parameters"),"'filter' parameter is not supported when 'forBinning' parameter is true")}return e}async function r(e){var n,a,l;const{layer:r,forBinning:o,renderer:t}=e;await r.load();const s="featureReduction"in r?r.featureReduction:null,u=null!==(n=null===t||void 0===t?void 0:t.clone())&&void 0!==n?n:o&&"binning"===(null===s||void 0===s?void 0:s.type)?null===s||void 0===s||null===(a=s.renderer)||void 0===a?void 0:a.clone():"renderer"in r?null===(l=r.renderer)||void 0===l?void 0:l.clone():null;if(!u)throw new i.default("get-renderer-to-update:invalid-parameters","renderer not available");return u}function o(e,n,a){var i;const l=null===e||void 0===e||null===(i=e.authoringInfo)||void 0===i?void 0:i.visualVariables;return null===l||void 0===l?void 0:l.find((e=>"reference-size"===a?e.type===n&&"reference-size"===e.theme:e.type===n))}function t(e){if(!e)return null;const n=e.type,a="visualVariables"in e?e.visualVariables:null,i=null===a||void 0===a?void 0:a.find(h),l=null===a||void 0===a?void 0:a.find(y),r=e.authoringInfo,t=o(e,"color"),s=o(e,"size"),u=o(e,"size","reference-size");if("class-breaks"===n){if("univariate-color-size"===(null===r||void 0===r?void 0:r.type))return"univariate-color-size";if(i)return l?null!==s&&void 0!==s&&s.units?"color-size-age":null!==t&&void 0!==t&&t.units?"color-age-size":"color-size":null!==t&&void 0!==t&&t.units?"color-age":u?"color-size":"color-continuous";if(l)return null!==s&&void 0!==s&&s.units?"size-age":"size-continuous";if(e.classBreakInfos.length>1)return"class-breaks-color"===(null===r||void 0===r?void 0:r.type)?"color-class-breaks":"class-breaks-size"===(null===r||void 0===r?void 0:r.type)?"size-class-breaks":null;if(u)return"size-continuous"}return"unique-value"===n?e.valueExpression?"predominance"===(null===r||void 0===r?void 0:r.type)?"predominance":"relationship"===(null===r||void 0===r?void 0:r.type)?l||u?"relationship-size":"relationship":l||u?"type-size":"type":l?null!==s&&void 0!==s&&s.units?"type-size-age":"type-size":u?"type-size":"type":"pie-chart"===n?"pie-chart":"dot-density"===n?"dot-density":null}function s(e){var n;return!(null===(n=e.visualVariables)||void 0===n||!n.some(g))}function u(e){var n;return!(null===(n=e.visualVariables)||void 0===n||!n.some(w))}function c(e){var n;return null!==(n=null===e||void 0===e?void 0:e.findIndex(g))&&void 0!==n?n:-1}function d(e){var n;return null!==(n=null===e||void 0===e?void 0:e.findIndex(y))&&void 0!==n?n:-1}function p(e){var n;return null!==(n=null===e||void 0===e?void 0:e.findIndex(h))&&void 0!==n?n:-1}function m(e){var n;return null!==(n=null===e||void 0===e?void 0:e.findIndex(v))&&void 0!==n?n:-1}function f(e){var n;return null!==(n=null===e||void 0===e?void 0:e.findIndex(w))&&void 0!==n?n:-1}function h(e){return"color"===e.type}function v(e){return"opacity"===e.type}function y(e){return"size"===e.type&&"outline"!==e.target&&"$view.scale"!==e.valueExpression}function g(e){return"size"===e.type&&"outline"===e.target}function w(e){return"size"===e.type&&"$view.scale"===e.valueExpression&&"outline"!==e.target&&Array.isArray(e.stops)}function b(e,n,a){const i=e.visualVariables,l=a(i);if(!n||Array.isArray(n)&&!n.length)return;Array.isArray(n)||(n=[n]);const r=n.map((e=>e.clone()));i?l>-1?i.splice(l,1,...r):i.push(...r):e.visualVariables=r}function z(e,n,a){var i;const l=null===n||void 0===n?void 0:n.visualVariables.find((e=>e.type===a)),r=o(e,a);r&&l&&(r.minSliderValue=l.minSliderValue,r.maxSliderValue=l.maxSliderValue,"size"===a&&"reference-size"===r.theme&&(r.sizeStops=null===(i=l.sizeStops)||void 0===i?void 0:i.map((e=>e.clone())),r.referenceSizeScale=l.referenceSizeScale))}},80791:(e,n,a)=>{a.d(n,{_J:()=>u,_t:()=>s});var i=a(76931),l=a(42633);const r=l.Np.light,o=l.Np.dark;function t(e,n){return e.r===n.r&&e.g===n.g&&e.b===n.b}function s(e,n){let a=0;if(e.length===n.length){let i=e.every(((e,a)=>t(e,n[a])));i?a=1:(i=e.slice().reverse().every(((e,a)=>t(e,n[a]))),i&&(a=-1))}return a}function u(e,n){return Math.ceil(function(e){const n=e.width,a=e.height;let l=e.pixelSizeAt(e.toMap((0,i.tc)(.5*n,.5*a),{exclude:[]}));if(l<=0&&(l=e.pixelSizeAt(e.toMap((0,i.tc)(.5*n,.95*a),{exclude:[]})),l<=0&&"camera"in e)){const n=e.camera.position.clone();n.z=0,l=2*e.pixelSizeAt(n)}return l}(n)*(0,i.Lz)((0,i.cr)(e)))}}}]);
//# sourceMappingURL=13001.dd1f5427.chunk.js.map