"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[54278,90889],{54278:(e,i,t)=>{t.r(i),t.d(i,{default:()=>A});var l=t(89379),a=t(35143),n=(t(11265),t(79053)),s=t(30726),r=t(68134),c=t(46053),o=t(21403),d=(t(81806),t(47249),t(85842)),u=t(22785),m=t(25329);const h="esri-scale-range-slider",S="".concat(h,"__scale-menu"),v={base:h,segmentElementActive:"".concat(h,"__segment-active"),scaleIndicatorWrapper:"".concat(h,"__scale-indicator-wrapper"),scaleIndicator:"".concat(h,"__scale-indicator"),scaleIndicatorIcon:"".concat(h,"__scale-indicator-icon"),scaleIndicatorContainer:"".concat(h,"__scale-indicator-container"),scaleMenuContainer:"".concat(S,"-container"),scaleMenuSeparator:"".concat(S,"-separator"),scaleMenuToggle:"".concat(S,"-toggle"),scaleMenuSubLabel:"".concat(S,"-sublabel"),scalePreview:"".concat(h,"__scale-preview"),scalePreviewThumbnail:"".concat(h,"__scale-preview-thumbnail")};var g=t(28899),p=t(38042);const M=(0,p.JK)().slice(0,2);var _;!function(e){e.ar="ar",e.bg="bg",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es="es",e.et="et",e.fi="fi",e.fr="fr",e.is="is",e.it="it",e.ja="ja",e.ko="ko",e.lt="lt",e.lv="lv",e.nl="nl",e.nn="nn",e.pl="pl",e.pt="pt",e.ro="ro",e.ru="ru",e.sk="sk",e.sv="sv",e.th="th",e.zh="zh"}(_||(_={}));const f={ae:_.en,ar:_.es,at:_.de,au:_.en,be:_.nl,bg:_.bg,bo:_.es,br:_.pt,ca:_.en,ch:_.de,ci:_.fr,cl:_.es,cn:_.zh,co:_.es,cr:_.es,cz:_.cs,de:_.de,dk:_.da,ee:_.et,eg:_.en,es:_.es,fi:_.fi,fr:_.fr,gb:_.en,gl:_.da,gr:_.el,gt:_.es,hk:_.en,id:_.en,ie:_.en,il:_.en,in:_.en,iq:_.ar,is:_.is,it:_.it,jp:_.ja,ke:_.en,kr:_.ko,kw:_.ar,li:_.de,lt:_.lt,lu:_.en,lv:_.lv,ma:_.fr,mg:_.fr,ml:_.fr,mo:_.en,mx:_.es,my:_.en,ni:_.es,nl:_.nl,no:_.nn,nz:_.en,pe:_.es,pl:_.pl,pr:_.es,pt:_.pt,ro:_.ro,ru:_.ru,rw:_.en,se:_.sv,sg:_.en,sk:_.sk,sr:_.nl,sv:_.es,th:_.th,tn:_.fr,tw:_.zh,us:_.en,ve:_.es,vi:_.en,wo:_.en,za:_.en},y=new Set(["ar-iq","ar-kw","bg-bg","cs-cz","da-dk","da-gl","de-at","de-ch","de-de","de-li","el-gr","en-ae","en-au","en-ca","en-eg","en-gb","en-hk","en-id","en-ie","en-il","en-in","en-iq","en-ke","en-lu","en-mo","en-my","en-nz","en-rw","en-sg","en-us","en-vi","en-wo","en-za","es-ar","es-bo","es-cl","es-co","es-cr","es-es","es-gt","es-mx","es-ni","es-pe","es-pr","es-sv","es-ve","et-ee","fi-fi","fr-ci","fr-fr","fr-ma","fr-mg","fr-ml","fr-tn","is-is","it-it","ja-jp","ko-kr","lt-lt","lv-lv","nl-be","nl-nl","nl-sr","nn-no","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sv-se","th-th","zh-cn","zh-tw"]);function w(e){e=function(e){return e.toLowerCase()}(e);const i="".concat(M,"-").concat(e),t="".concat(f[e],"-").concat(e);return function(e){return"url(".concat((0,g.s)("esri/widgets/ScaleRangeSlider/images/scalePreview/".concat(e,".jpg")),")")}(y.has(i)?i:y.has(t)?t:"en-wo")}function x(e){if(!(e<0||e>=25))return"-".concat(e%5*128,"px -").concat(128*Math.floor(e/5),"px")}var b=t(90889),L=t(62177),R=t(94126),T=t(98108),I=t(76099),Z=t(63582),V=t(54761),C=t(50265),k=t(39348);const P={preview:!0,scaleMenus:{maxScaleMenu:!0,minScaleMenu:!0}},O={maximumFractionDigits:0};let E=class extends m.default{constructor(e,i){super(e,i),this._activeMenu=null,this._activeThumb=null,this._customInput=null,this._maxThumbNode=null,this._minThumbNode=null,this._previewAutoCloseTimeoutId=void 0,this._previewPopover=null,this._slider=new u.default({thumbCreatedFunction:(e,i,t)=>{0===e?this._minThumbNode=t:1===e&&(this._maxThumbNode=t),this.addHandles([(0,n.on)(t,"mouseenter",(()=>{this._activeThumb=e,this.scheduleRender()})),(0,n.on)(t,"mouseleave",(()=>{this._previewAutoCloseTimeoutId||(this._activeThumb=null,this.scheduleRender())}))])}}),this.disabled=!1,this.messages=null,this.region="US",this.viewModel=new L.default,this.visibleElements=P,this._afterInputNumberCreate=e=>{"value"in e&&null!=e.value&&"setNumberValue"in e&&e.setNumberValue({committing:!1,value:e.value,origin:"direct"}),this._customInput=e},this._handleCustomScaleInputChange=(e,i)=>{const{viewModel:{scaleRanges:t}}=this,l=Number.parseFloat(i.value);Number.isNaN(l)?i.value=e:this._setScale(t.clampScale(l))}}loadDependencies(){return(0,R.W)({button:()=>Promise.resolve().then(t.bind(t,43285)),dropdown:()=>Promise.resolve().then(t.bind(t,24482)),"dropdown-group":()=>Promise.resolve().then(t.bind(t,5368)),"dropdown-item":()=>Promise.resolve().then(t.bind(t,84660)),icon:()=>Promise.resolve().then(t.bind(t,16702)),"input-number":()=>Promise.all([t.e(46870),t.e(41763)]).then(t.bind(t,41763)),label:()=>Promise.resolve().then(t.bind(t,11839)),popover:()=>Promise.resolve().then(t.bind(t,51866))})}initialize(){this.addHandles([(0,r.watch)((()=>this.viewModel),(e=>{var i;return this._slider.viewModel=null!==(i=null===e||void 0===e?void 0:e.sliderViewModel)&&void 0!==i?i:null}),r.initial),(0,r.watch)((()=>this._interactive),(e=>{this._slider.disabled=!e,e||this._setActiveMenu(null)}),r.initial),this._slider.on("thumb-drag",(e=>{let{index:i}=e;this._activeThumb=i,clearTimeout(this._previewAutoCloseTimeoutId);this._previewAutoCloseTimeoutId=setTimeout((()=>{this._previewAutoCloseTimeoutId=void 0,this._activeThumb=null}),250)})),(0,r.when)((()=>{var e;return!0===(null===(e=this.view)||void 0===e?void 0:e.stationary)}),(()=>this.scheduleRender()))])}destroy(){this._slider=(0,s.pR)(this._slider)}get _maxScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return!0===e||"boolean"!=typeof e&&e.maxScaleMenu}get _minScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return!0===e||"boolean"!=typeof e&&e.minScaleMenu}get _interactive(){var e;return"disabled"!==(null===(e=this.viewModel)||void 0===e?void 0:e.state)&&!this.disabled}get effectiveMaxScale(){return this.viewModel.effectiveMaxScale}get effectiveMinScale(){return this.viewModel.effectiveMinScale}get effectiveMaxScaleLimit(){return this.viewModel.effectiveMaxScaleLimit}get effectiveMinScaleLimit(){return this.viewModel.effectiveMinScaleLimit}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,i;return null!==(e=null===(i=this.messages)||void 0===i?void 0:i.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get maxScale(){return this.viewModel.maxScale}set maxScale(e){this.viewModel.maxScale=e}get maxScaleLimit(){return this.viewModel.maxScaleLimit}set maxScaleLimit(e){this.viewModel.maxScaleLimit=e}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}get minScale(){return this.viewModel.minScale}set minScale(e){this.viewModel.minScale=e}get minScaleLimit(){return this.viewModel.minScaleLimit}set minScaleLimit(e){this.viewModel.minScaleLimit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return(0,l.A)((0,l.A)((0,l.A)({},P),e),{},{scaleMenus:"boolean"==typeof(null===e||void 0===e?void 0:e.scaleMenus)?e.scaleMenus:(0,l.A)((0,l.A)({},P.scaleMenus),null===e||void 0===e?void 0:e.scaleMenus)})}formatScale(e){return"".concat("1:").concat((0,C.ZV)(e,O))}render(){const{_interactive:e,_slider:i,label:t,view:l,viewModel:{state:a}}=this,n=this._getLabel("min"),s=this._getLabel("max"),{segmentElements:r}=i,c=r.at("min-scale-only"===this.mode?-1:-2);return c&&c.classList.add(v.segmentElementActive),(0,V.K)("div",{"aria-label":t,class:this.classes(v.base,T.D.widget,e?null:T.D.disabled)},(0,V.K)("div",{class:v.scaleIndicatorWrapper,dir:"ltr"},"ready"===a&&l?this._renderCurrentScaleIndicator():null,i.render(),this._renderPreviewPopover()),(0,V.K)("div",{class:v.scaleMenuContainer},this._minScaleMenuEnabled&&n?this._renderScaleMenuToggle("min",n):null,(0,V.K)("div",{class:v.scaleMenuSeparator}),this._maxScaleMenuEnabled&&s?this._renderScaleMenuToggle("max",s):null))}_renderPreviewPopover(){const{_activeThumb:e}=this,i=null!=e&&this.visibleElements.preview,t=i?0===e?this._minThumbNode:this._maxThumbNode:"";return(0,V.K)("calcite-popover",{afterCreate:I.cA,afterUpdate:()=>{var e;return null===(e=this._previewPopover)||void 0===e?void 0:e.reposition()},bind:this,"data-node-ref":"_previewPopover",label:this.messages.preview,offsetDistance:16,open:i,overlayPositioning:"fixed",placement:"top",referenceElement:t,triggerDisabled:!0},this._renderScalePreview())}_renderScalePreview(){const{_activeThumb:e,_slider:i,region:t,viewModel:{scaleRanges:l}}=this,a=0===e||"range"!==this.mode?i.values[0]:i.values[1],n=Object.keys(b.default.RecommendedScales).indexOf(l.findScaleRangeByIndex(a).id),s={backgroundImage:w(t),backgroundPosition:x(n)};return(0,V.K)("div",{class:v.scalePreview},(0,V.K)("div",{class:v.scalePreviewThumbnail,styles:s}))}_getLabel(e){const{_slider:i,messages:t,mode:l,viewModel:{scaleRanges:a}}=this,[n,s]=i.values,r="min"===e||"range"!==l?n:s,c=t.scaleRangeLabels[a.findScaleRangeByIndex(r).id];switch(l){case"range":return c;case"max-scale-only":return"min"===e?null:c;case"min-scale-only":return"min"===e?c:null}}_renderScaleMenuToggle(e,i){const{_activeMenu:t,_interactive:l}=this,a=t===e;return[(0,V.K)("calcite-dropdown",{closeOnSelectDisabled:!0,"data-type":e,open:a,overlayPositioning:"fixed",placement:"max"===e?"bottom-end":"bottom-start",scale:"s",onCalciteDropdownClose:i=>{let{currentTarget:t}=i;this._activeMenu===e&&this._setActiveMenu(null),(0,I.Z6)(t.querySelector("calcite-button"))},onCalciteDropdownOpen:()=>this._setActiveMenu(e)},(0,V.K)("calcite-button",{appearance:a?"outline":"transparent","aria-pressed":a.toString(),class:v.scaleMenuToggle,disabled:!l,iconEnd:"chevron-down",scale:"s",slot:"trigger"},i),a&&"max"===e?this._renderMaxScaleMenu():null,a&&"min"===e?this._renderMinScaleMenu():null)]}_renderMinScaleMenu(){const{effectiveMaxScale:e,effectiveMinScaleLimit:i,view:t,viewModel:{scaleRanges:l}}=this,a=t?t.scale:void 0;return this._renderScaleMenu({type:"min",min:i,max:l.findScaleRange(e).minScale,viewScale:a})}_renderMaxScaleMenu(){const{effectiveMinScale:e,effectiveMaxScaleLimit:i,view:t,viewModel:{scaleRanges:l}}=this,a=t?t.scale:void 0;return this._renderScaleMenu({type:"max",min:l.findScaleRange(e).maxScale,max:i,viewScale:a})}_renderScaleMenu(e){let{viewScale:i,min:t,max:l,type:a}=e;const{effectiveMaxScale:n,effectiveMinScale:s,messages:r}=this,c="max"===a?n:s,o=b.default.fromScaleRange({minScale:t,maxScale:l}),d=this.messages.featuredScaleLabels,u=b.default.RecommendedScales,m=Object.keys(u).filter((e=>o.contains(u[e]))).map((e=>this._renderScaleMenuItem({scaleLabel:d[e],scaleValue:u[e],isSelected:c===u[e],valueVisible:"world"!==e})));return(0,V.K)("calcite-dropdown-group",{key:"".concat(this.id,"__scale-menu--").concat(a)},this._renderCustomScaleValue({currentScale:c}),null!=i?this._renderScaleMenuItem({scaleValue:i,scaleLabel:r.featuredScaleLabels.current,isSelected:c===i,valueVisible:!0}):null,m)}_renderCustomScaleValue(e){let{currentScale:i}=e;const{messages:t}=this,l=Math.round(i).toString();return(0,V.K)("calcite-dropdown-item",{afterCreate:e=>{(0,I.Z6)(e)},key:"custom-scale",label:t.featuredScaleLabels.custom,onCalciteDropdownItemSelect:()=>{(0,I.Z6)(this._customInput)}},(0,V.K)("calcite-label",{scale:"s"},(0,V.K)("span",null,t.featuredScaleLabels.custom),(0,V.K)("calcite-input-number",{afterCreate:this._afterInputNumberCreate,groupSeparator:!0,inputMode:"numeric",max:b.default.RecommendedScales.world,min:0,numberButtonType:"none",placeholder:t.customScaleInputTooltip,prefixText:"1:",scale:"s",step:1,value:l,onCalciteInputNumberChange:e=>{let{currentTarget:i}=e;return this._handleCustomScaleInputChange(l,i)}})))}_renderScaleMenuItem(e){const{scaleValue:i,scaleLabel:t,valueVisible:l,isSelected:a}=e;return(0,V.K)("calcite-dropdown-item",{key:t,label:t,selected:a,onCalciteDropdownItemSelect:this._setScale.bind(this,i)},t,l?(0,V.K)("div",{class:v.scaleMenuSubLabel},this.formatScale(i)):void 0)}_renderCurrentScaleIndicator(){const{_slider:e,messages:i,view:t,viewModel:{scaleRanges:l}}=this,a=l.clampScale(t.scale),n=this.viewModel.mapScaleToSlider(a),s=n/e.max,r=i.scaleRangeLabels[l.findScaleRangeByIndex(n).id],c=(0,k.V)(i.currentScaleTooltip,{scaleLabel:r});return(0,V.K)("div",{class:v.scaleIndicatorContainer,key:"scale-indicator"},(0,V.K)("div",{"aria-label":c,class:v.scaleIndicator,styles:{left:100*s+"%"},title:c},this.renderCurrentScaleIndicatorIcon()))}renderCurrentScaleIndicatorIcon(){return(0,V.K)("calcite-icon",{class:v.scaleIndicatorIcon,icon:"caret-up",scale:"s"})}_setScale(e){"max"===this._activeMenu?this.maxScale=Math.min(e,this.effectiveMinScale-1):this.minScale=Math.max(e,this.effectiveMaxScale+1),this._setActiveMenu(null)}_setActiveMenu(e){this._activeMenu=e}};(0,a._)([(0,c.MZ)()],E.prototype,"_activeMenu",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"_activeThumb",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"_customInput",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"_maxScaleMenuEnabled",null),(0,a._)([(0,c.MZ)()],E.prototype,"_minScaleMenuEnabled",null),(0,a._)([(0,c.MZ)()],E.prototype,"_slider",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],E.prototype,"_interactive",null),(0,a._)([(0,c.MZ)()],E.prototype,"disabled",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"effectiveMaxScale",null),(0,a._)([(0,c.MZ)()],E.prototype,"effectiveMinScale",null),(0,a._)([(0,c.MZ)()],E.prototype,"effectiveMaxScaleLimit",null),(0,a._)([(0,c.MZ)()],E.prototype,"effectiveMinScaleLimit",null),(0,a._)([(0,c.MZ)()],E.prototype,"icon",null),(0,a._)([(0,c.MZ)()],E.prototype,"label",null),(0,a._)([(0,c.MZ)()],E.prototype,"layer",null),(0,a._)([(0,c.MZ)()],E.prototype,"maxScale",null),(0,a._)([(0,c.MZ)()],E.prototype,"maxScaleLimit",null),(0,a._)([(0,c.MZ)(),(0,Z.G)("esri/widgets/ScaleRangeSlider/t9n/ScaleRangeSlider")],E.prototype,"messages",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"mode",null),(0,a._)([(0,c.MZ)()],E.prototype,"minScale",null),(0,a._)([(0,c.MZ)()],E.prototype,"minScaleLimit",null),(0,a._)([(0,c.MZ)()],E.prototype,"region",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"view",null),(0,a._)([(0,c.MZ)()],E.prototype,"viewModel",void 0),(0,a._)([(0,c.MZ)()],E.prototype,"visibleElements",void 0),(0,a._)([(0,o.w)("visibleElements")],E.prototype,"castVisibleElements",null),E=(0,a._)([(0,d.$)("esri.widgets.ScaleRangeSlider")],E);const A=E},62177:(e,i,t)=>{t.r(i),t.d(i,{default:()=>u});var l=t(35143),a=t(91967),n=t(68134),s=t(46053),r=(t(81806),t(76460),t(47249),t(85842)),c=t(90889),o=t(6515);let d=class extends a.default{constructor(e){super(e),this.layer=null,this.mode="range",this.scaleRanges=c.default.fromScaleRange({minScale:0,maxScale:0}),this.sliderViewModel=(()=>{const{max:e}=this._getSliderIndexRange(this.scaleRanges.length-1);return new o.default({precision:10,min:0,max:e,values:[0,e]})})()}initialize(){this.addHandles([(0,n.watch)((()=>this.layer),(e=>null===e||void 0===e?void 0:e.load().catch((()=>{})))),(0,n.watch)((()=>this.mode),(e=>{var i,t;"range"===e&&1===(null===(i=this.sliderViewModel.values)||void 0===i?void 0:i.length)?this.sliderViewModel.values=[this.sliderViewModel.min,this.sliderViewModel.values[0]]:2===(null===(t=this.sliderViewModel.values)||void 0===t?void 0:t.length)&&("min-scale-only"===e?this.sliderViewModel.values=[this.sliderViewModel.values[0]]:"max-scale-only"===e&&(this.sliderViewModel.values=[this.sliderViewModel.values[1]]))})),(0,n.watch)((()=>{var e,i;return{loaded:null===(e=this.layer)||void 0===e?void 0:e.loaded,ready:null===(i=this.view)||void 0===i?void 0:i.ready}}),(e=>{let{loaded:i,ready:t}=e;if(!i||!t)return;if(this._hasTiledLayer()){const e=this._getLayerResampling()?void 0:this.mapScaleToSlider(this._getTiledLayerMaxScale()),i=this.mapScaleToSlider(this._getTiledLayerMinScale());this.sliderViewModel.effectiveMax=e,this.sliderViewModel.effectiveMin=i}else{const e=this.layer&&"maxScaleRange"in this.layer?this.layer.maxScaleRange:null,{minScale:i=0,maxScale:t=0}=null!==e&&void 0!==e?e:{};this.sliderViewModel.effectiveMax=0===t?void 0:this.mapScaleToSlider(t),this.sliderViewModel.effectiveMin=0===i?void 0:this.mapScaleToSlider(i)}const l=this.layer;l&&"minScale"in l&&"maxScale"in l?(this.minScale=l.minScale,this.maxScale=l.maxScale):(this.minScale=void 0,this.maxScale=void 0)}),n.initial)])}get effectiveMaxScale(){return 0===this.maxScale?this.maxScaleLimit:this.maxScale}get effectiveMinScale(){return 0===this.minScale?this.minScaleLimit:this.minScale}get effectiveMaxScaleLimit(){var e;return this.mapSliderToScale(null!==(e=this.sliderViewModel.effectiveMax)&&void 0!==e?e:this.sliderViewModel.max)}get effectiveMinScaleLimit(){var e;return this.mapSliderToScale(null!==(e=this.sliderViewModel.effectiveMin)&&void 0!==e?e:this.sliderViewModel.min)}get maxScale(){return this._getScale("max")}set maxScale(e){this._setMaxScaleOnSlider(e)}get maxScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.max)}set maxScaleLimit(e){this._setSliderRange({maxScale:e,minScale:this.minScaleLimit})}get minScale(){return this._getScale("min")}set minScale(e){this._setMinScaleOnSlider(e)}get minScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.min)}set minScaleLimit(e){this._setSliderRange({maxScale:this.maxScaleLimit,minScale:e})}get state(){const{view:e,layer:i}=this;return!e&&!i||!e&&null!==i&&void 0!==i&&i.loaded||!i&&null!==e&&void 0!==e&&e.ready||e&&e.ready&&null!==i&&void 0!==i&&i.loaded?"ready":"disabled"}set view(e){this._set("view",e)}mapScaleToSlider(e){const i=this.scaleRanges.scaleToRangeIndex(e),t=this.scaleRanges.findScaleRangeByIndex(i),{maxScale:l,minScale:a}=t,{max:n,min:s}=this._getSliderIndexRange(i);return this._mapToRange(e,a,l,s,n)}mapSliderToScale(e){const i=this.scaleRanges.findScaleRangeByIndex(e),{maxScale:t,minScale:l}=i,{max:a,min:n}=this._getSliderIndexRange(e);return this._mapToRange(e,n,a,l,t)}_setSliderRange(e){this.scaleRanges=c.default.fromScaleRange(e);const{max:i}=this._getSliderIndexRange(this.scaleRanges.length-1);this.sliderViewModel.max=i,this.sliderViewModel.min=0,this.notifyChange("maxScaleLimit"),this.notifyChange("minScaleLimit")}_getSliderIndexRange(e){const i=Math.floor(e);return{min:i,max:i+.99999}}_mapToRange(e,i,t,l,a){return l+(e-i)*(a-l)/(t-i)}_getSliderValue(e){const{min:i,max:t,values:l}=this.sliderViewModel,[a,n]=l;switch(this.mode){case"max-scale-only":return"min"===e?i:a;case"min-scale-only":return"min"===e?a:t;default:return"min"===e?null!==a&&void 0!==a?a:i:null!==n&&void 0!==n?n:t}}_getScale(e){const i=this.mapSliderToScale(this._getSliderValue(e));return this._normalizeScale(e,i)}_setMaxScaleOnSlider(e){const{scaleRanges:i,sliderViewModel:t}=this;if(void 0!==e){const l=this.mapScaleToSlider(this._constrainMaxScaleToLayer(i.clampMaxScale(e)));switch(this.mode){case"range":t.values=[t.values[0],l];break;case"max-scale-only":t.values=[l]}}}_setMinScaleOnSlider(e){const{scaleRanges:i,sliderViewModel:t}=this;if(void 0!==e){const l=this.mapScaleToSlider(this._constrainMinScaleToLayer(i.clampMinScale(e)));switch(this.mode){case"range":t.values=[l,t.values[1]];break;case"min-scale-only":t.values=[l]}}}_constrainMinScaleToLayer(e){const{scaleRanges:i}=this;if(this._hasTiledLayer()){const{firstRange:t}=i,l=this._getTiledLayerMinScale(),a=.85;e=this._mapToRange(e,t.maxScale,t.minScale,0,1)>a||e>l?l:e}return e}_constrainMaxScaleToLayer(e){if(this._hasTiledLayer()&&!this._getLayerResampling()){const i=this._getTiledLayerMaxScale();e=e<i?i:e}return e}_normalizeScale(e,i){const t="max"===e?"maxScale":"minScale",l=this._hasTiledLayer()?"min"===e?this._getTiledLayerMinScale():this._getTiledLayerMaxScale():this.scaleRanges[t],a=this._hasTiledLayer()?"min"===e?this._getTiledLayerRealMinScale():this._getTiledLayerRealMaxScale():l,n=0===i||a===i||Math.abs(a-i)<=1e-6;return Number((n?0:i).toFixed(6))}_getLayerLODS(){var e,i;const{layer:t}=this;return null!==t&&void 0!==t&&t.loaded&&"tileInfo"in t?"wcs"===t.type||"imagery-tile"===t.type&&"Raster"===(null===(e=t.raster)||void 0===e?void 0:e.tileType)?null:null===(i=t.tileInfo)||void 0===i?void 0:i.lods:null}_getLayerResampling(){var e;return!(null===(e=this.layer)||void 0===e||!e.loaded)&&(!("resampling"in this.layer)||this.layer.resampling)}_getTiledLayerMinScale(){const e=this._getLayerLODS();return this.scaleRanges.clampMinScale(e[0].scale)}_getTiledLayerMaxScale(){const e=this._getLayerLODS();return e[e.length-1].scale}_getTiledLayerRealMinScale(){var e,i;const t=this._getLayerLODS(),l=this.layer,a=l&&"sourceJSON"in l&&null!==(e=null===(i=l.sourceJSON)||void 0===i||null===(i=i.tileInfo)||void 0===i?void 0:i.lods)&&void 0!==e?e:t;return this.scaleRanges.clampMinScale(a[0].scale)}_getTiledLayerRealMaxScale(){var e,i;const t=this._getLayerLODS(),l=this.layer,a=l&&"sourceJSON"in l&&null!==(e=null===(i=l.sourceJSON)||void 0===i||null===(i=i.tileInfo)||void 0===i?void 0:i.lods)&&void 0!==e?e:t;return a[a.length-1].scale}_hasTiledLayer(){return!!this._getLayerLODS()}};(0,l._)([(0,s.MZ)({readOnly:!0})],d.prototype,"effectiveMaxScale",null),(0,l._)([(0,s.MZ)({readOnly:!0})],d.prototype,"effectiveMinScale",null),(0,l._)([(0,s.MZ)()],d.prototype,"effectiveMaxScaleLimit",null),(0,l._)([(0,s.MZ)()],d.prototype,"effectiveMinScaleLimit",null),(0,l._)([(0,s.MZ)()],d.prototype,"layer",void 0),(0,l._)([(0,s.MZ)()],d.prototype,"maxScale",null),(0,l._)([(0,s.MZ)()],d.prototype,"maxScaleLimit",null),(0,l._)([(0,s.MZ)()],d.prototype,"mode",void 0),(0,l._)([(0,s.MZ)()],d.prototype,"minScale",null),(0,l._)([(0,s.MZ)()],d.prototype,"minScaleLimit",null),(0,l._)([(0,s.MZ)()],d.prototype,"scaleRanges",void 0),(0,l._)([(0,s.MZ)({type:o.default})],d.prototype,"sliderViewModel",void 0),(0,l._)([(0,s.MZ)({readOnly:!0})],d.prototype,"state",null),(0,l._)([(0,s.MZ)()],d.prototype,"view",null),d=(0,l._)([(0,r.$)("esri.widgets.ScaleRangeSlider.ScaleRangeSliderViewModel")],d);const u=d},90889:(e,i,t)=>{t.r(i),t.d(i,{default:()=>m});var l,a=t(35143),n=t(91967),s=t(46053),r=(t(81806),t(76460),t(47249),t(85842));const c=147914382,o=[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"stateProvince",minScale:3999999},{id:"statesProvinces",minScale:6999999},{id:"countriesSmall",minScale:14999999},{id:"countriesBig",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:c}];function d(e,i){const t=o,l=t.length,a=[];let n,s=e;e=e>=0?e:0,i=i>0?i:t[l-1].minScale;for(let r=0;r<l;r++){const l=Math.min(t[r].minScale,i);n=Math.min(l,i),e<=l&&s<i&&a.push({id:t[r].id,maxScale:Math.max(s,e),minScale:n}),s=n+1}return a.reverse(),function(e){if(0===e.length)return e;const[i]=e,t=e[e.length-1];return i.minScale===i.maxScale&&(e.shift(),i.minScale+=1),t.minScale===t.maxScale&&(e.pop(),t.maxScale-=1),e}(a)}let u=l=class extends n.default{constructor(){super(...arguments),this.ranges=[]}static fromScaleRange(e){let{maxScale:i,minScale:t}=e;return new l({ranges:d(i,t)})}static async fromLayer(e){var i;await e.when();const t="tileInfo"in e?null===(i=e.tileInfo)||void 0===i?void 0:i.lods:void 0;let a;return a=t?d(t[t.length-1].scale,t[0].scale):d(0,0),new l({ranges:a})}get firstRange(){return this.ranges[0]}get lastRange(){const e=this.ranges;return e[e.length-1]}get length(){return this.ranges.length}get maxScale(){return this.lastRange.maxScale}get minScale(){return this.firstRange.minScale}isMinScaleEdge(e){const{firstRange:i}=this,t=i.minScale,a=l.RecommendedScales[i.id]||i.maxScale;return e<=t&&e>=a}isMaxScaleEdge(e){const{lastRange:i}=this,t=i.maxScale;return e<=(l.RecommendedScales[i.id]||i.minScale)&&e>=t}findScaleRange(e){const i=this.ranges;let t;if(e>=i[0].maxScale)return i[0];if(e<=i[i.length-1].minScale)return i[i.length-1];for(let l=0;l<i.length;l++){const a=i[l];if(e>=a.maxScale&&e<=a.minScale){t=a;break}}return t}findScaleRangeByIndex(e){return this.ranges[this._clampScaleRangeIndex(e)]}scaleToRangeIndex(e){return this.ranges.indexOf(this.findScaleRange(e))}clampScale(e){return Math.min(this.minScale,Math.max(this.maxScale,e))}clampMinScale(e){return 0===e?this.minScale:this.clampScale(e)}clampMaxScale(e){return this.clampScale(e)}contains(e){const i=this.ranges;let t=!1;for(let l=0;l<i.length;l++){const{maxScale:a,minScale:n}=i[l];if(e>=a&&e<=n){t=!0;break}}return t}_clampScaleRangeIndex(e){if(e<=0)return 0;const i=this.ranges.length-1;return e>i?i:Math.floor(e)}};u.RecommendedScales=Object.freeze({world:c,continent:5e7,countriesBig:25e6,countriesSmall:12e6,statesProvinces:6e6,stateProvince:3e6,counties:15e5,county:75e4,metropolitanArea:32e4,cities:16e4,city:8e4,town:4e4,neighborhood:2e4,streets:1e4,street:5e3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100}),(0,a._)([(0,s.MZ)()],u.prototype,"firstRange",null),(0,a._)([(0,s.MZ)()],u.prototype,"lastRange",null),(0,a._)([(0,s.MZ)()],u.prototype,"length",null),(0,a._)([(0,s.MZ)()],u.prototype,"maxScale",null),(0,a._)([(0,s.MZ)()],u.prototype,"minScale",null),(0,a._)([(0,s.MZ)({constructOnly:!0})],u.prototype,"ranges",void 0),u=l=(0,a._)([(0,r.$)("esri.widgets.ScaleRangeSlider.ScaleRanges")],u);const m=u}}]);
//# sourceMappingURL=54278.544960ad.chunk.js.map