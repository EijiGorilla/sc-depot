{"version":3,"file":"static/js/27824.4e1768dc.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLineView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Color.js\";import{handlesGroup as r}from\"../../core/handleUtils.js\";import{memoize as i}from\"../../core/memoize.js\";import{watch as o,on as n}from\"../../core/reactiveUtils.js\";import{union as s}from\"../../core/SetUtils.js\";import{getMetersPerVerticalUnitForSR as l}from\"../../core/unitUtils.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{i as u}from\"../../chunks/vec32.js\";import{create as p}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getReferenceEllipsoid as d}from\"../../geometry/ellipsoidUtils.js\";import{create as m,fromPoints as v}from\"../../geometry/support/ray.js\";import{GeometryDescriptor as y}from\"../../layers/support/ElevationQuery.js\";import{externalToInternalIntersectOptions as f}from\"../../views/3d/support/hitTest.js\";import{newIntersector as h}from\"../../views/3d/webgl-engine/lib/Intersector.js\";import{StoreResults as w}from\"../../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as _}from\"../../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";import g from\"./ElevationProfileLine.js\";const j=2e5;let b=class extends g{constructor(e){super(e),this.type=\"view\",this.color=new t(\"#cf4ccf\"),this.viewVisualizationEnabled=!0,this.include=null,this.exclude=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=25,this._getQueryElevationDependencies=i(((e,t,r,i,o,n,s)=>({inputGraphicUid:null!=e?x(e):null,visibleLayers:t,maxIntersectionDistance:r,intersectOptions:i,view:o,stationary:n,spatialReference:s}))),this._vecA=p(),this._vecB=p(),this._ray=m()}get minDemResolution(){const e=this._viewModel?.view;if(null==e||\"3d\"!==e.type)return null;const t=e.pointsOfInterest?.focus?.worldUnitsPerContentPixel;return null==t?null:t*l(e.spatialReference)}get queryElevationDependencies(){const e=this._view;return e?this._getQueryElevationDependencies(this._viewModel?.input,this._visibleLayers,this._maxIntersectionDistance,this._intersectOptions,e,e.stationary,e.spatialReference):null}get _visibleLayers(){return this._view?.map?.allLayers?.filter((e=>e.visible)).toArray()??[]}get _intersectOptions(){const e=this._view;if(null==e||e.destroyed)return{};const t=f(e,{include:this.include,exclude:this.exclude}),r=f(e,{exclude:this._pointCloudLayers});return t.exclude=s(t.exclude,r.exclude),t}get _pointCloudLayers(){const e=this._view;return null==e?[]:e.allLayerViews.toArray().filter((e=>\"point-cloud\"===e.layer?.type)).map((e=>e.layer))}get _view(){const e=this._viewModel?.view;return null!=e&&\"3d\"===e.type?e:null}get _maxIntersectionDistance(){const e=this._view;return e?.renderCoordsHelper?d(e.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}get _intersector(){const e=this._view;if(null==e)return null;const t=h(e.state.viewingMode),r=t.options;return r.hud=!1,r.invisibleTerrain=!1,r.backfacesTerrain=!1,r.selectionMode=!1,r.store=w.ALL,t}async queryElevation(e,{noDataValue:t,signal:r}){const i=this.queryElevationDependencies;if(null==i)throw new Error(\"ElevationProfileLineInput: no dependencies\");const o=this._intersector;if(null==o)throw new Error(\"ElevationProfileLineInput: no view\");const{intersectOptions:n,view:s,spatialReference:l}=i,c=s.renderCoordsHelper,a=s.sceneIntersectionHelper,p=this._vecA,d=this._vecA,m=this._vecB,f=this._ray;if(!l)return{geometry:e,noDataValue:t};const h=await y.fromGeometry(e).project(l,r);if(!h)return{geometry:e,noDataValue:t};const w=h.coordinates,_=w.length;for(let y=0;y<_;++y){const e=w[y];u(m,e.x,e.y,e.z??0),c.toRenderCoords(m,l,m),c.setAltitude(p,j,m);const r=v(p,m,f);a.computeIntersection(r,o,n,!0);const s=I(i,o.results.all);s?(s.getIntersectionPoint(d),c.fromRenderCoords(d,d,l),e.z=d[2]):e.z=t}return{geometry:h.export(),noDataValue:t}}attach(e){const t=()=>this._onChange();return r([super.attach(e),o((()=>this.queryElevationDependencies),t),n((()=>e.elevationProvider),\"elevation-change\",t,{onListenerAdd:t,onListenerRemove:t})])}};function I({view:e,inputGraphicUid:t,maxIntersectionDistance:r},i){for(const o of i){if(!o.withinDistance(r))continue;const i=_(o,e);if(null==i||x(i)!==t)return o}return null}function x(e){if(e.layer&&\"objectIdField\"in e.layer){const t=e.attributes[e.layer.objectIdField];if(t)return`o-${e.layer.id}-${t}`}return`u-${e.uid}`}e([c({type:t,nonNullable:!0})],b.prototype,\"color\",void 0),e([c()],b.prototype,\"viewVisualizationEnabled\",void 0),e([c()],b.prototype,\"include\",void 0),e([c()],b.prototype,\"exclude\",void 0),e([c({readOnly:!0})],b.prototype,\"minDemResolution\",null),e([c()],b.prototype,\"queryElevationDependencies\",null),e([c()],b.prototype,\"_visibleLayers\",null),e([c()],b.prototype,\"_intersectOptions\",null),e([c()],b.prototype,\"_pointCloudLayers\",null),e([c()],b.prototype,\"_view\",null),e([c()],b.prototype,\"_maxIntersectionDistance\",null),e([c()],b.prototype,\"_intersector\",null),b=e([a(\"esri.widgets.ElevationProfile.ElevationProfileLineView\")],b);const L=b;export{L as default};\n"],"names":["b","g","constructor","e","super","this","type","color","t","viewVisualizationEnabled","include","exclude","numSamplesForPreview","numSamplesPerChunk","_getQueryElevationDependencies","i","r","o","n","s","inputGraphicUid","x","visibleLayers","maxIntersectionDistance","intersectOptions","view","stationary","spatialReference","_vecA","p","_vecB","_ray","m","minDemResolution","_this$_viewModel","_e$pointsOfInterest","_viewModel","pointsOfInterest","focus","worldUnitsPerContentPixel","l","queryElevationDependencies","_this$_viewModel2","_view","input","_visibleLayers","_maxIntersectionDistance","_intersectOptions","_this$_view$map$allLa","_this$_view","map","allLayers","filter","visible","toArray","destroyed","f","_pointCloudLayers","allLayerViews","_e$layer","layer","_this$_viewModel3","renderCoordsHelper","d","radius","unitInMeters","Number","POSITIVE_INFINITY","_intersector","h","state","viewingMode","options","hud","invisibleTerrain","backfacesTerrain","selectionMode","store","w","ALL","queryElevation","_ref","noDataValue","signal","Error","c","a","sceneIntersectionHelper","geometry","y","fromGeometry","project","coordinates","_","length","_e$z","u","z","toRenderCoords","setAltitude","v","computeIntersection","I","results","all","getIntersectionPoint","fromRenderCoords","export","attach","_onChange","elevationProvider","onListenerAdd","onListenerRemove","_ref2","withinDistance","attributes","objectIdField","concat","id","uid","nonNullable","prototype","readOnly","L"],"sourceRoot":""}