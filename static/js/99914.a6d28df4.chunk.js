"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[3620,8169,30550,99914],{14902:(e,t,n)=>{n.d(t,{k:()=>l});var a=n(80324),r=n(38042),i=n(24241);function s(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let n="";for(const a of e.match(t)||[])switch(a){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":n+=a;break;case"A":case"a":n+="a";break;default:n+="'".concat(a,"'")}return n}const o="esri.core.sql.timeonly";class l{constructor(e,t,n,a){this._hour=e,this._minute=t,this._second=n,this._millisecond=a,this.declaredRootClass=o}static isTimeOnly(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===o}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return l.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new l(this.hour,this.minute,this.second,this.millisecond)}isValid(){return(0,a.Fq)(this.hour)&&(0,a.Fq)(this.minute)&&(0,a.Fq)(this.second)&&(0,a.Fq)(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return"".concat(this.hour.toString().padStart(2,"0"),":").concat(this.minute.toString().padStart(2,"0"),":").concat(this.second.toString().padStart(2,"0"))+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return"time '".concat(this.hour.toString().padStart(2,"0"),":").concat(this.minute.toString().padStart(2,"0"),":").concat(this.second.toString().padStart(2,"0")).concat(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"","'")}toStorageString(){return"".concat(this.hour.toString().padStart(2,"0"),":").concat(this.minute.toString().padStart(2,"0"),":").concat(this.second.toString().padStart(2,"0"))}toFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e||""===e?this.toString():(e=s(e))?i.c9.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:(0,r.JK)(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,t,n,a){const r=new l(e,t,n,a);return r.isValid()?r:null}static fromReader(e){if(!e)return null;const t=e.split(":");return 3!==t.length?null:new l(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),a=Math.floor(e/36e5%24),r=Math.floor(e%1e3);return new l(a,n,t,r)}static fromDateJS(e){return new l(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new l(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(""===e)return null;if(null===e)return null;const n=[];t?(t=s(t))&&n.push(t):null!==t&&""!==t||(n.push("HH:mm:ss"),n.push("HH:mm:ss.SSS"),n.push("hh:mm:ss a"),n.push("hh:mm:ss.SSS a"),n.push("HH:mm"),n.push("hh:mm a"),n.push("H:mm"),n.push("h:mm a"),n.push("H:mm:ss"),n.push("h:mm:ss a"),n.push("H:mm:ss.SSS"),n.push("h:mm:ss.SSS a"));for(const a of n){const t=i.c9.fromFormat(e,a);if(t.isValid)return new l(t.hour,t.minute,t.second,t.millisecond)}return null}plus(e,t){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return l.fromDateTime(this.toUTCDateTime().plus({[e]:t}))}return null}toUTCDateTime(){return i.c9.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,t){switch(t.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===t?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}}},16251:(e,t,n)=>{n.d(t,{A:()=>G});var a=n(89379),r=n(35143),i=n(3825),s=n(18690),o=n(42553),l=n(49304),c=n(46053),u=(n(81806),n(76460),n(85842)),d=n(13096),m=n(91967);n(47249);let p=class extends m.default{constructor(e){super(e),this.isRetired=!1}};(0,r._)([(0,c.MZ)()],p.prototype,"id",void 0),(0,r._)([(0,c.MZ)()],p.prototype,"isRetired",void 0),(0,r._)([(0,c.MZ)()],p.prototype,"subtype",void 0),(0,r._)([(0,c.MZ)()],p.prototype,"values",void 0),p=(0,r._)([(0,u.$)("esri.layers.support.Contingency")],p);const f=p;let y=class extends m.default{constructor(e){super(e)}};(0,r._)([(0,c.MZ)()],y.prototype,"fieldGroup",void 0),(0,r._)([(0,c.MZ)()],y.prototype,"type",void 0),y=(0,r._)([(0,u.$)("esri.layers.support.ContingencyConstraintViolation")],y);const h=y;var g=n(41033);let T=class extends m.default{constructor(e){super(e)}};(0,r._)([(0,c.MZ)()],T.prototype,"contingentValuesAllGroups",void 0),(0,r._)([(0,c.MZ)()],T.prototype,"contingentValuesByFieldGroup",void 0),T=(0,r._)([(0,u.$)("esri.layers.support.ContingentValuesResult")],T);const b=T;let v=class extends m.default{constructor(e){super(e),this.fields=null,this.isEditingRestrictive=!1}};(0,r._)([(0,c.MZ)()],v.prototype,"name",void 0),(0,r._)([(0,c.MZ)()],v.prototype,"fields",void 0),(0,r._)([(0,c.MZ)()],v.prototype,"isEditingRestrictive",void 0),(0,r._)([(0,c.MZ)()],v.prototype,"contingencies",void 0),v=(0,r._)([(0,u.$)("esri.layers.support.FieldGroup")],v);const S=v;var V,w=n(53430),D=n(17305),C=n(3320);let _=V=class extends(o.A.JSONSupportMixin(l.A)){constructor(e){super(e),this.request=i.default,this.fieldGroups=null,this.fieldGroupDefinitions=null}initialize(){}get subtypeFieldName(){return(0,C.CU)(this.layer).typeFieldName}static async createLoadedLayerContingentValuesCache(e){await e.load();const t=e.sourceJSON;if(void 0===e.layerId)return null;const n=t.hasContingentValuesDefinition;if(n)return new V({layer:e}).load();if(void 0===n){const t=(0,d.qg)(e.url);if(null==t)return null;const n=t.url.path;if((await F(n)).supportsQueryDataElements){const t=e.layerId.toString(),a=await k(n,t);if(a){const t=a.map((t=>({name:t.name,isEditingRestrictive:t.isEditingRestrictive,fields:t.fieldNames.names.map((t=>e.fieldsIndex.normalizeFieldName(t)))})));return new V({layer:e,fieldGroupDefinitions:t}).load()}}}return null}async load(e){const t=this.layer.load(e).then((()=>this._initializeContingentValues(this.fieldGroupDefinitions,e)));return this.addResolvingPromise(t),this}validateContingencyConstraints(e,t){const n=Object.keys(e),a=[],r=[];for(const i of this.fieldGroups){const s=i.isEditingRestrictive?"error":"warning";if(t&&!i.fields.some((e=>t.includes(e))))continue;if(!i.fields.every((e=>n.includes(e)))){r.push(new h({fieldGroup:i,type:s}));continue}let o=!1;const l=e[this.subtypeFieldName],c=i.contingencies.filter((e=>!(!e.isRetired&&e.subtype)||e.subtype.code===l));if(0!==c.length){for(const t of c){let n=!0;for(const a in t.values){const r=t.values[a];if("any"!==r.objectType)if("null"===r.objectType){if(null!=e[a]){n=!1;break}}else if("code"===r.objectType){if(e[a]!==r.codedValue.code){n=!1;break}}else if("range"===r.objectType){const t=e[a];if(t<r.minValue||t>r.maxValue){n=!1;break}}}if(n){o=!0;break}}o||a.push(new h({fieldGroup:i,type:s}))}}return{invalid:a,incomplete:r}}getContingentValues(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=e[this.subtypeFieldName],r=null!=a,i={};let s=[];const o=this.fieldGroups.filter((e=>e.fields.includes(t)));s.push(new g.A({objectType:"any"}));for(const l of o){let o=[];const c=l.contingencies.filter((e=>!(e.isRetired||e.subtype&&r&&e.subtype.code!==a)));let u=!1;const d={};for(const n of c){let a,r=!0;for(const i in n.values){const s=n.values[i];if(t!==i){if(void 0!==e[i]&&"any"!==s.objectType)if("null"===s.objectType)null!==e[i]&&(r=!1);else if("code"===s.objectType)e[i]!==s.codedValue.code&&(r=!1);else if("range"===s.objectType){const t=e[i];(t<s.minValue||t>s.maxValue)&&(r=!1)}}else a=s,u=u||"range"===s.objectType}if(a&&r){if("any"===a.objectType){o.length=0,o.push(a);break}const e=A(a);d[e]||o.push(a),d[e]=!0}}u&&(o=x(o)),i[l.name]=o,s=n?j(s,o):[]}return 1===o.length&&n&&(s=[]),new b({contingentValuesAllGroups:s,contingentValuesByFieldGroup:i})}async _initializeContingentValues(e,t){const n=null!==e&&void 0!==e?e:await this._fetchFieldGroupDefs(t);if(0===n.length)return void(this.fieldGroups=[]);const a=await this._fetchContingentValues(n,t);this.fieldGroups=a}async _fetchFieldGroupDefs(e){if(void 0===this.layer.layerId)return[];const t=this.layer.sourceJSON,n=this.layer.layerId.toString(),r=(0,d.qg)(this.layer.url).url.path;return t.hasContingentValuesDefinition?(await async function(e,t,n){return(0,i.default)("".concat(e,"/").concat(t,"/fieldgroups"),(0,a.A)({responseType:"json",query:{f:"json"}},n)).then((e=>{var t;return null!==(t=e.data.fieldGroups)&&void 0!==t?t:[]}))}(r,n,e)).map((e=>({name:e.name,isEditingRestrictive:e.restrictive,fields:e.fields.map((e=>this.layer.fieldsIndex.normalizeFieldName(e)))}))):void 0!==t.hasContingentValuesDefinition?[]:F(r,e).then((async t=>t.supportsQueryDataElements?(await k(r,n,e)).map((e=>({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fieldNames.names.map((e=>this.layer.fieldsIndex.normalizeFieldName(e)))}))):[]))}async _fetchContingentValues(e,t){if(void 0===this.layer.layerId)return[];const n=this.layer.sourceJSON,r=this.layer.layerId.toString(),s=(0,d.qg)(this.layer.url).url.path;if(n.hasContingentValuesDefinition){const n=await async function(e,t,n){return(0,i.default)("".concat(e,"/").concat(t,"/contingentValues"),(0,a.A)({responseType:"json",query:{f:"json"}},n)).then((e=>e.data))}(s,r,t);return this._constructFieldGroupsAGOL(e,n)}const o=await async function(e,t,n){return(0,i.default)("".concat(e,"/queryContingentValues"),(0,a.A)({responseType:"json",query:{layers:JSON.stringify([t]),f:"json"}},n)).then((e=>{var t;return null===(t=e.data.contingentValueSets)||void 0===t?void 0:t[0]}))}(s,r,t);return this._constructFieldGroupsEnterprise(e,o)}_constructFieldGroupsAGOL(e,t){return e.map((e=>{const n=t.contingentValuesDefinition.fieldGroups.find((t=>t.name===e.name));if(n){let a=[];return a=t.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(e,t,n.subTypes):this._parseAGOLFieldGroup(e,t,n.contingentValues),new S({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fields,contingencies:a})}return null})).filter(s.Ru)}_parseAGOLFieldGroupSubtype(e,t,n){let a=[];return null!==n&&void 0!==n&&n.forEach((n=>{const r=this._getSubtypeAGOL(n.name);a=a.concat(this._parseAGOLFieldGroup(e,t,n.contingentValues,r))})),a}_parseAGOLFieldGroup(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=[];for(const i of null!==n&&void 0!==n?n:[]){const n=this._parseAGOLContingency(i,e,t,a);r.push(n)}return r}_parseAGOLContingency(e,t,n,a){const r=e.id,i=!!e.retired&&1===e.retired,s={};for(let o=0,l=0;o<t.fields.length;o++){const r=t.fields[o],i=n.typeCodes[e.types[o]];if("Code"===i){let t=e.values[l];l++;const i=this._getDomain(a,r),o=this.layer.getField(r);if("string"===(null===o||void 0===o?void 0:o.type)){const e=n.stringDicts.find((e=>e.domain===(null===i||void 0===i?void 0:i.name)));e&&(t=e.entries[t])}const c=null===i||void 0===i?void 0:i.codedValues.find((e=>e.code===t)),u=new g.A({codedValue:c,objectType:"code"});s[r]=u}else if("Range"===i){const t=e.values[l];l++;const n=t.range[0],a=t.range[1],i=new g.A({minValue:n,maxValue:a,objectType:"range"});s[r]=i}else if("Any"===i){const e=new g.A({objectType:"any"});s[r]=e}else{const e=new g.A({objectType:"null"});s[r]=e}}return new f({id:r,isRetired:i,subtype:a,values:s})}_constructFieldGroupsEnterprise(e,t){const n=t.fieldGroups;return e.map((e=>{const a=n.find((t=>t.name===e.name));if(a){const n=a.contingencies.map((n=>{const a=n.id,r=n.isRetired||!1,i=this._getSubtypeEnterprise(n.subtypeCode),s={};for(let o=0;o<e.fields.length;o++){const a=e.fields[o];let r=n.values[o];if("number"==typeof r||"string"==typeof r){const e=this._getDomain(i,a),n=this.layer.getField(a);if((0,w.isStringField)(n))r=t.stringDictionary[r];else if((0,w.isDateField)(n)){const e=new Date("".concat(r,"+00:00"));r=e.getTime()}const o=null===e||void 0===e?void 0:e.codedValues.find((e=>e.code===r)),l=new g.A({codedValue:o,objectType:"code"});s[a]=l}else if("object"==typeof r){const e=r.minValue,t=r.maxValue,n=new g.A({minValue:e,maxValue:t,objectType:"range"});s[a]=n}else if(r){const e=new g.A({objectType:"any"});s[a]=e}else{const e=new g.A({objectType:"null"});s[a]=e}}return new f({id:a,isRetired:r,subtype:i,values:s})}));return new S({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fields,contingencies:n})}return null})).filter(s.Ru)}_getSubtypeEnterprise(e){const t=this.layer.sourceJSON;let n;if(t.subtypes){const a=t.subtypes.find((t=>t.code===e));n=D.default.fromJSON(a)}return n||null}_getSubtypeAGOL(e){const t=this.layer.sourceJSON;let n;if(t.subtypes){const a=t.subtypes.find((t=>t.name===e));n=D.default.fromJSON(a)}return n||null}_getDomain(e,t){const n=e?function(e,t){const n=e.domains;if(n){const[e,a]=Object.entries(n).find((e=>{let[n]=e;return n.trim().toLowerCase()===t.trim().toLowerCase()}))||[];return a||null}return null}(e,t):this.layer.getFieldDomain(t);return"inherited"===(null===n||void 0===n?void 0:n.type)?this.layer.getFieldDomain(t):n}};function A(e){switch(e.objectType){case"any":return"@any@";case"null":return"@null@";case"code":return e.codedValue.name+e.codedValue.code.toString();case"range":return e.minValue.toString()+"-"+e.maxValue.toString()}}function x(e){let t,n;e.sort(((e,t)=>"null"===e.objectType?-1:"null"===t.objectType?1:e.minValue-t.minValue));const a=[];for(const r of e)"null"!==r.objectType?null!=t&&null!=n?n<r.minValue?(a.push(new g.A({objectType:"range",minValue:t,maxValue:n})),t=r.minValue,n=r.maxValue):n<r.maxValue&&(n=r.maxValue):(t=r.minValue,n=r.maxValue):a.push(r);return a.push(new g.A({objectType:"range",minValue:t,maxValue:n})),a}function j(e,t){var n,a;if(0===e.length||0===t.length)return[];if("any"===e[0].objectType)return t;if("any"===t[0].objectType)return e;const r="range"===e[0].objectType||"range"===(null===(n=e[1])||void 0===n?void 0:n.objectType),i="range"===t[0].objectType||"range"===(null===(a=t[1])||void 0===a?void 0:a.objectType);return r||i?function(e,t){const n=[];let a,r=0;for(const i of e)for(;r<t.length;r++){const e=t[r];if("null"===i.objectType&&"null"===e.objectType)n.push(new g.A({objectType:"null"}));else{if("null"===i.objectType)break;if("null"===e.objectType)continue}if(i.maxValue<e.minValue)break;if(i.maxValue===e.minValue){n.push(new g.A({objectType:"range",minValue:i.maxValue,maxValue:e.minValue}));break}if(!(i.minValue>e.maxValue))if(i.minValue!==e.maxValue){if(a=i.minValue>e.minValue?i.minValue:e.minValue,i.maxValue<e.maxValue){n.push(new g.A({objectType:"range",minValue:a,maxValue:i.maxValue}));break}n.push(new g.A({objectType:"range",minValue:a,maxValue:e.maxValue}))}else n.push(new g.A({objectType:"range",minValue:i.minValue,maxValue:e.maxValue}))}return n}(e,t):function(e,t){const n=[];for(const a of e)t.some((e=>{if(a.objectType===e.objectType)switch(a.objectType){case"any":case"null":return!0;case"code":return a.codedValue.code===e.codedValue.code&&a.codedValue.name===e.codedValue.name}return!1}))&&n.push(a);return n}(e,t)}async function k(e,t,n){return(0,i.default)("".concat(e,"/queryDataElements"),(0,a.A)({responseType:"json",query:{layers:JSON.stringify([t]),f:"json"}},n)).then((e=>{var t,n;return null!==(t=null===(n=e.data.layerDataElements)||void 0===n?void 0:n[0].dataElement.fieldGroups)&&void 0!==t?t:[]}))}async function F(e,t){return(0,i.default)(e,(0,a.A)({responseType:"json",query:{f:"json"}},t)).then((e=>e.data))}(0,r._)([(0,c.MZ)({constructOnly:!0})],_.prototype,"layer",void 0),(0,r._)([(0,c.MZ)({constructOnly:!0})],_.prototype,"request",void 0),(0,r._)([(0,c.MZ)({type:[S]})],_.prototype,"fieldGroups",void 0),(0,r._)([(0,c.MZ)({constructOnly:!0})],_.prototype,"fieldGroupDefinitions",void 0),(0,r._)([(0,c.MZ)()],_.prototype,"subtypeFieldName",null),_=V=(0,r._)([(0,u.$)("esri.layers.support.LayerContingentValuesCache")],_);const G=_},16503:(e,t,n)=>{n.d(t,{n:()=>l});var a=n(46405),r=n(38042),i=n(24241);function s(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const n=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const a of e.match(n)||[])switch(a){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=a;break;default:a.length>=2&&"["===a.slice(0,1)&&"]"===a.slice(-1)?t+="'".concat(a.slice(1,-1),"'"):t+="'".concat(a,"'")}return t}const o="esri.core.sql.dateonly";class l{constructor(e,t,n){this._year=e,this._month=t,this._day=n,this.declaredRootClass=o}static isDateOnly(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===o}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return l.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new l(this._year,this._month,this._day)}toDateTime(e){return i.c9.fromObject({day:this.day,month:this.month,year:this.year},{zone:(0,a.mT)(e)})}toDateTimeLuxon(e){return i.c9.fromObject({day:this.day,month:this.month,year:this.year},{zone:(0,a.mT)(e)})}toString(){return"".concat(this.year.toString().padStart(4,"0"),"-").concat(this.month.toString().padStart(2,"0"),"-").concat(this.day.toString().padStart(2,"0"))}toFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null===e||""===e)return this.toString();if(t&&(e=s(e)),!e)return"";const n=this.toDateTime("unknown");return a.lY.dateTimeToArcadeDate(n).toFormat(e,{locale:(0,r.JK)(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return a.lY.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,t){return l.fromDateTime(this.toUTCDateTime().plus({[e]:t}))}toUTCDateTime(){return i.c9.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,t){switch(t.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===t?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const t=i.c9.fromMillis(e,{zone:i.mQ.utcInstance});return t.isValid?l.fromParts(t.year,t.month,t.day):null}static fromSeconds(e){const t=i.c9.fromSeconds(e,{zone:i.mQ.utcInstance});return t.isValid?l.fromParts(t.year,t.month,t.day):null}static fromReader(e){if(!e)return null;const t=e.split("-");return 3!==t.length?null:new l(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10))}static fromParts(e,t,n){const a=new l(e,t,n);return!1===a.isValid?null:a}static fromDateJS(e){return l.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return l.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(""===e)return null;if(null===e)return null;const n=[];if(t)(t=s(t))&&n.push(t);else if(null===t||""===t){const t=i.c9.fromISO(e,{setZone:!0});return t.isValid?l.fromParts(t.year,t.month,t.day):null}for(const a of n){const n=i.c9.fromFormat(e,null!==t&&void 0!==t?t:a);if(n.isValid)return new l(n.year,n.month,n.day)}return null}static fromNow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system";const t=i.c9.fromJSDate(new Date).setZone((0,a.mT)(e));return new l(t.year,t.month,t.day)}}},30550:(e,t,n)=>{n.r(t),n.d(t,{createArcadeExecutor:()=>F,createArcadeProfile:()=>k});var a=n(89379),r=n(39356),i=n(46405),s=n(98264),o=(n(81806),n(63241)),l=n(50076),c=n(53084),u=n(76460),d=n(16503),m=n(14902),p=n(30907),f=n(24883),y=n(77725),h=n(98976);let g=null;function T(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.elementType,i="value",o="array"===r.type?[{name:i,type:r.type,elementType:r.elementType}]:"dictionary"===r.type?[{name:i,type:r.type,properties:r.properties}]:[{name:i,type:r.type}];return new s.A(e.map((e=>{const t={};return V(t,o,{[i]:e},n,a),t[i]})))}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e instanceof y.default?new p.default({source:e.features,geometryType:e.geometryType,fields:e.fields,spatialReference:e.spatialReference}):e;return t.constructFeatureSet(a,n.spatialReference,null,!0,n.lruCache,n.interceptor)}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{spatialReference:a,interceptor:r,lruCache:i}=n;return"string"==typeof e?t.createFeatureSetCollectionFromService(e,a,i,r):t.createFeatureSetCollectionFromMap(e,a,i,r)}function S(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r={};return V(r,t.properties,e,n,a),new g.Dictionary(r)}function V(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s={};for(const i of Object.keys(n))s[i.toLowerCase()]=n[i];for(const o of t){const t=o.name.toLowerCase();if(r.variablesPreProcessed)e[t]=s[t];else switch(o.type){case"array":{const n=s[t];e[t]=null==n?null:T(n,o,a,r);break}case"feature":{const n=s[t];e[t]=null==n?null:g.Feature.createFromGraphic(n,null===r||void 0===r?void 0:r.timeZone);break}case"featureSet":{const n=s[t];e[t]=null==n?null:a?b(n,a,r):null;break}case"featureSetCollection":{const n=s[t];e[t]=null==n?null:a?v(n,a,r):null;break}case"dictionary":{const n=s[t];e[t]=null==n?null:S(n,o,a,r);break}case"date":{const n=s[t];e[t]=n?n instanceof i.lY?n:null!==r&&void 0!==r&&r.timeZone?i.lY.dateJSAndZoneToArcadeDate(n,null===r||void 0===r?void 0:r.timeZone):i.lY.dateJSToArcadeDate(n):null;break}case"dateOnly":{const n=s[t];e[t]=n?n instanceof d.n?n:d.n.fromReader(n):null;break}case"time":{const n=s[t];e[t]=n?n instanceof m.k?n:m.k.fromReader(n):null;break}case"knowledgeGraph":case"geometry":case"boolean":case"text":case"number":e[t]=s[t];break;case"voxel":{const n=s[t];e[t]=null==n?null:new g.Voxel(n,null===r||void 0===r?void 0:r.timeZone);break}}}}function w(e,t){for(const n of e)t.push(n),"dictionary"===n.type&&w(n.properties,t);return t}function D(e,t,n,a,r){const{spatialReference:i,interceptor:s,lruCache:o,console:l,abortSignal:c,timeZone:u,services:d={portal:f.default.getDefault()}}=n,m={vars:{},spatialReference:i,interceptor:s,timeZone:u,lrucache:o,useAsync:r,services:d,console:l,abortSignal:c};return t?(V(m.vars,e.variables,t,a,n),m):m}function C(e,t){switch(t.getArcadeType(e)){case"number":case"text":case"boolean":case"point":case"polygon":case"polyline":case"multipoint":case"extent":return e;case"date":return e.toJSDate();case"time":case"dateOnly":return e.toString();case"feature":{const t=(e.type,e),n="geometry"in t?t.geometry():null,a="readAttributes"in t?t.readAttributes():t.attributes;return new r.default({geometry:n,attributes:a})}case"dictionary":{const n=e,a=n.attributes,r={};for(const e of Object.keys(a))r[e]=C(n.field(e),t);return r}case"array":return("toArray"in e?e.toArray():e).map((e=>C(e,t)))}return e}const _={variables:[{name:"$feature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$userInput",type:"geometry"},{name:"$graph",type:"knowledgeGraph"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]},A={variables:[{name:"$feature",type:"feature"},{name:"$aggregatedFeatures",type:"featureSet"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]},x={variables:[{name:"$voxel",type:"voxel"}]},j=new Map([["aggregate-field",{variables:[{name:"$feature",type:"feature"}]}],["form-constraint",{variables:[{name:"$feature",type:"feature"}]}],["feature-z",{variables:[{name:"$feature",type:"feature"}]}],["field-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$datastore",type:"featureSetCollection"}]}],["form-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$originalFeature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$featureSet",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$editContext",type:"dictionary",properties:[{name:"editType",type:"text"}]}]}],["labeling",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]}],["popup",_],["popup-element",_],["popup-feature-reduction",A],["popup-element-feature-reduction",A],["visualization",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]}],["popup-voxel",x],["popup-element-voxel",x]]);function k(e){"feature-reduction-popup"===e?((0,o.io)(u.A.getLogger("esri.arcade"),'profile name: "feature-reduction-popup"',{replacement:'"popup-feature-reduction"',version:"4.32",warnOnce:!0}),e="popup-feature-reduction"):"feature-reduction-popup-element"===e&&((0,o.io)(u.A.getLogger("esri.arcade"),'profile name: "feature-reduction-popup-element"',{replacement:'"popup-element-feature-reduction"',version:"4.32",warnOnce:!0}),e="popup-element-feature-reduction");const t=j.get(e);if(!t){const t=Array.from(j.keys()).map((e=>"'".concat(e,"'"))).join(", ");throw new l.default("createArcadeProfile:invalid-profile-name","Invalid profile name '".concat(e,"'. You must specify one of the following values: ").concat(t))}return(0,c.clone)(t)}async function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g||(g=await(0,h.lw)());const{arcade:r,arcadeUtils:i}=g,{loadScriptDependencies:s,referencesMember:o,scriptIsAsync:c}=r,u=w(t.variables,[]),d=u.filter((e=>"featureSet"===e.type||"featureSetCollection"===e.type)).map((e=>e.name.toLowerCase())),m=r.parseScript(e,d);if(!m)throw new l.default("arcade:invalid-script","Unable to create SyntaxTree");const p=i.extractFieldNames(m),f=r.scriptTouchesGeometry(m),y=u.map((e=>e.name.toLowerCase())).filter((e=>o(m,e))),T=c(m,d);await s(m,T,d);const b={vars:{},spatialReference:null,useAsync:T};for(const a of y)b.vars[a]="any";const{lruCache:v}=n,S=r.compileScript(m,b),V=r.featureSetUtils(),{services:_}=n;return{execute:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(T)throw new l.default("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");const r=S(D(t,e,(0,a.A)({lruCache:v},n),V,T));return n.rawOutput?r:C(r,i)},executeAsync:async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await S(D(t,e,(0,a.A)({lruCache:v,services:_},n),V,T));return n.rawOutput?r:C(r,i)},isAsync:T,variablesUsed:y,fieldsUsed:p,geometryUsed:f,syntaxTree:m}}},41033:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(35143),r=n(91967),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842));let o=class extends r.default{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.codedValue=null}};(0,a._)([(0,i.MZ)()],o.prototype,"objectType",void 0),(0,a._)([(0,i.MZ)()],o.prototype,"maxValue",void 0),(0,a._)([(0,i.MZ)()],o.prototype,"minValue",void 0),(0,a._)([(0,i.MZ)()],o.prototype,"codedValue",void 0),o=(0,a._)([(0,s.$)("esri.layers.support.ContingentValue")],o);const l=o},80324:(e,t,n)=>{n.d(t,{Fq:()=>s,Yc:()=>r,Yq:()=>i});var a=n(76797);function r(e){if(null==e)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new a.default({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function i(e){if(null==e)return null;const t=e.clone();return void 0!==e.cache._geVersion&&(t.cache._geVersion=e.cache._geVersion),t}function s(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}},98264:(e,t,n)=>{n.d(t,{A:()=>a});class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._elements=e}length(){return this._elements.length}get(e){return this._elements[e]}toArray(){return this.slice()}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length();const n=[];for(let a=e;a<t;a++)n.push(this.get(a));return n}}}}]);
//# sourceMappingURL=99914.a6d28df4.chunk.js.map