"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[60664,67797,78059,78639],{2522:(e,t,i)=>{i.d(t,{P:()=>l});var n=i(35143),r=i(54901),o=i(91291),s=i(46053),a=(i(81806),i(76460),i(47249),i(85842));const l=e=>{let t=class extends(o.A.EsriPromiseMixin(e)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){return null==this.parent||this.parent.visible&&!this.parent.suspended}set visible(e){this._overrideIfSome("visible",e)}forceInteractiveForViewModel(){return this._interactiveViewModelCount++,(0,r.hA)((()=>this._interactiveViewModelCount--))}};return(0,n._)([(0,s.MZ)({constructOnly:!0})],t.prototype,"parent",void 0),(0,n._)([(0,s.MZ)({constructOnly:!0})],t.prototype,"view",void 0),(0,n._)([(0,s.MZ)({type:Boolean})],t.prototype,"interactive",null),(0,n._)([(0,s.MZ)()],t.prototype,"_userInteractive",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],t.prototype,"updating",null),(0,n._)([(0,s.MZ)()],t.prototype,"visible",null),(0,n._)([(0,s.MZ)()],t.prototype,"_interactiveViewModelCount",void 0),t=(0,n._)([(0,a.$)("esri.views.3d.analysis.AnalysisView3D")],t),t}},7256:(e,t,i)=>{i.d(t,{t:()=>p});var n=i(34761),r=i(13191),o=i(20664),s=i(9392),a=i(55855),l=i(32314),u=i(70667),d=i(45463),c=i(425);class p extends l.X{constructor(e,t){super(e),this._hasExternalMaterial=!1,this._hasExternalMaterial=null!=t,this._material=null!=t?t:new c.W({width:1,color:(0,a.fA)(1,0,1,1),stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerWidth:1,hasPolygonOffset:!1,renderOccluded:d.m$.OccludeAndTransparent,isDecoration:!!e.isDecoration,writeDepth:!0}),this.applyProperties(e)}setGeometryFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const i=(0,s.vt)();this.view.renderCoordsHelper.toRenderCoords(e,i)&&this.setGeometryFromRenderSpacePoint(i,t)}setGeometryFromRenderSpacePoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.geometry=[[[e[0]-t,e[1],e[2]],[e[0]+t,e[1],e[2]]],[[e[0],e[1]-t,e[2]],[e[0],e[1]+t,e[2]]],[[e[0],e[1],e[2]-t],[e[0],e[1],e[2]+t]]]}setGeometryFromExtent(e){const t=this.view.spatialReference,i=(0,s.vt)(),n=(0,s.vt)(),r=100,a=[];(0,o.i)(i,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(i,t,n),a.push([n[0],n[1],n[2]]),(0,o.i)(i,e[2],e[1],r),this.view.renderCoordsHelper.toRenderCoords(i,t,n),a.push([n[0],n[1],n[2]]),(0,o.i)(i,e[2],e[3],r),this.view.renderCoordsHelper.toRenderCoords(i,t,n),a.push([n[0],n[1],n[2]]),(0,o.i)(i,e[0],e[3],r),this.view.renderCoordsHelper.toRenderCoords(i,t,n),a.push([n[0],n[1],n[2]]),(0,o.i)(i,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(i,t,n),a.push([n[0],n[1],n[2]]),(0,o.i)(i,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(i,t,n),a.push([n[0],n[1],n[2]]),this.geometry=[a]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],i=e.origin,n=e.basis1,r=e.basis2,o=.5,a=(0,s.vt)(),l=(0,s.vt)(),u=(0,s.vt)(),d=(0,s.vt)();a[0]=i[0]-n[0]*o-r[0]*o,a[1]=i[1]-n[1]*o-r[1]*o,a[2]=i[2]-n[2]*o-r[2]*o,l[0]=i[0]-n[0]*o+r[0]*o,l[1]=i[1]-n[1]*o+r[1]*o,l[2]=i[2]-n[2]*o+r[2]*o,u[0]=i[0]+n[0]*o+r[0]*o,u[1]=i[1]+n[1]*o+r[1]*o,u[2]=i[2]+n[2]*o+r[2]*o,d[0]=i[0]+n[0]*o-r[0]*o,d[1]=i[1]+n[1]*o-r[1]*o,d[2]=i[2]+n[2]*o-r[2]*o,t.push([a[0],a[1],a[2]]),t.push([l[0],l[1],l[2]]),t.push([u[0],u[1],u[2]]),t.push([d[0],d[1],d[2]]),t.push([a[0],a[1],a[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;this.transform=(0,n.kN)(h,t);const{points:i}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[i]}setGeometryFromSegments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.uY;this.transform=(0,n.kN)(h,t),this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}getTransformedGeometry(){return null==this._geometry?null:this._geometry.map((e=>e.map((e=>(0,o.t)((0,s.vt)(),e,this.transform)))))}get renderOccluded(){return this._material.parameters.renderOccluded}set renderOccluded(e){this._material.setParameters({renderOccluded:e})}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._material.parameters.width}set width(e){this._material.setParameters({width:e})}get color(){return this._material.parameters.color}set color(e){const t=1===e[3];this._material.setParameters({color:e,writeDepth:t})}get innerWidth(){return this._material.parameters.innerWidth}set innerWidth(e){this._material.setParameters({innerWidth:e})}get innerColor(){return this._material.parameters.innerColor}set innerColor(e){this._material.setParameters({innerColor:e})}get stipplePattern(){return this._material.parameters.stipplePattern}set stipplePattern(e){null!=this._material&&this._material.setParameters({stipplePattern:e})}get stippleOffColor(){return this._material.parameters.stippleOffColor}set stippleOffColor(e){this._material.setParameters({stippleOffColor:e})}get stipplePreferContinuous(){return this._material.parameters.stipplePreferContinuous}set stipplePreferContinuous(e){this._material.setParameters({stipplePreferContinuous:e})}get falloff(){return this._material.parameters.falloff}set falloff(e){this._material.setParameters({falloff:e})}get polygonOffset(){return this._material.parameters.hasPolygonOffset}set polygonOffset(e){this._material.setParameters({hasPolygonOffset:e})}createExternalResources(){}destroyExternalResources(){}createGeometries(e){for(const t of(0,u.z)(this.geometry)){const i=(0,u.t)(this._material,t);e.addGeometry(i)}}forEachExternalMaterial(e){this._hasExternalMaterial||e(this._material)}}const h=(0,r.vt)()},10260:(e,t,i)=>{i.d(t,{Hd:()=>l,JY:()=>a,aS:()=>u});var n=i(98773),r=i(30726),o=i(50346),s=i(68134);function a(e,t){e.interactive=!0;const{tool:i,view:a}=e;a.activeTool=i;let l=(0,o.onAbort)(t,(()=>{a.activeTool===i&&(a.activeTool=null)}));return(0,n.UT)((async e=>{await(0,s.whenOnce)((()=>null==i||!i.active),e),l=(0,r.xt)(l)}),t)}function l(e,t){return(0,s.watch)((()=>e.interactive),(()=>function(e,t){e.interactive?function(e,t){u(e);const{view:i,analysis:n}=e,r=new t({view:i,analysis:n,analysisViewData:e});e.tool=r,i.tools.add(r)}(e,t):u(e)}(e,t)),s.syncAndInitial)}function u(e){const{view:t,tool:i}=e;null!=i&&(t.tools.remove(i),e.tool=null)}},17430:(e,t,i)=>{i.d(t,{B:()=>o,V:()=>s});var n=i(9624),r=i(80935);function o(e,t,i){var o;let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(0,n.tryProjectWithZConversion)(e,t);return null==a?null:(a.hasZ&&!s||null==i||(a.z=null!==(o=(0,r.R1)(i,a))&&void 0!==o?o:0),a)}function s(e,t,i){i.warnOnce("Failed to project analysis geometry (id: '".concat(e.id,"'), projection from spatial reference (wkid: '").concat(t.wkid,"') to view spatial reference is not supported. Projection may be possible after calling projection.load()."))}},37546:(e,t,i)=>{i.d(t,{P:()=>v});var n=i(89379),r=i(50076),o=i(53514),s=i(24387),a=i(90534),l=i(49723),u=i(19258),d=i(49140),c=i(46053),p=i(73093),h=i(79453);function v(e){var t;const i=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,r)=>{const o=function(e,t,i){var r;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,i){var r;const o=(0,u.z4)(t,i);return{type:String,read:(e,t,i)=>{const n=(0,h.r)(e,t,i);return o.type===String?n:"function"==typeof o.type?new o.type({url:n}):void 0},write:{isRequired:null===(r=o.json)||void 0===r||null===(r=r.write)||void 0===r?void 0:r.isRequired,writer(t,r,l,u){if(null===u||void 0===u||!u.resources)return"string"==typeof t?void(r[l]=(0,h.t)(t,u)):void(r[l]=t.write({},u));const c=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),v=(0,h.t)(c,(0,n.A)((0,n.A)({},u),{},{verifyItemRelativeUrls:null!==u&&void 0!==u&&u.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0}),h.M.NO),f=o.type!==String&&(!(0,s.H)(this)||(null===u||void 0===u?void 0:u.origin)&&this.originIdOf(i)>(0,d.aB)(u.origin)),y={object:this,propertyName:i,value:t,targetUrl:v,dest:r,targetPropertyName:l,context:u,params:e};null!==u&&void 0!==u&&u.portalItem&&v&&!(0,a.isAbsolute)(v)?f&&null!==e&&void 0!==e&&e.contentAddressed?g(y):f?function(e){var t;const{context:i,targetUrl:r,params:o,value:s,dest:l,targetPropertyName:u}=e;if(!i.portalItem)return;const d=i.portalItem.resourceFromPath(r),c=m(s,r,i),h=(0,p.n)(c),v=(0,a.getPathExtension)(d.path),f=null!==(t=null===o||void 0===o?void 0:o.compress)&&void 0!==t&&t;h===v?(i.resources&&_((0,n.A)((0,n.A)({},e),{},{resource:d,content:c,compress:f,updates:i.resources.toUpdate})),l[u]=r):g(e)}(y):function(e){let{context:t,targetUrl:i,dest:n,targetPropertyName:r}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),n[r]=i)}(y):null!==u&&void 0!==u&&u.portalItem&&(null==v||null!=(0,h.i)(v)||(0,a.isBlobProtocol)(v)||f)?g(y):r[l]=v}}}}(e,t,i);switch(null!==(r=null===e||void 0===e?void 0:e.type)&&void 0!==r?r:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=h.b;return{read:e,write:t}}}}(e,t,r);for(const e of i){const i=(0,c.rM)(t,e,r);for(const e in o)i[e]=o[e]}}}function g(e){var t,i,s,u;const{targetUrl:d,params:c,value:v,context:g,dest:f,targetPropertyName:y}=e;if(!g.portalItem)return;const b=(0,h.p)(d),C=m(v,d,g);if(null!==c&&void 0!==c&&c.contentAddressed&&"json"!==C.type)return void(null===(t=g.messages)||void 0===t||t.push(new r.default("persistable:contentAddressingUnsupported",'Property "'.concat(y,'" is trying to serializing a resource with content of type ').concat(C.type," with content addressing. Content addressing is only supported for json resources."),{content:C})));const w=null!==c&&void 0!==c&&c.contentAddressed&&"json"===C.type?(0,o.d)(C.jsonString):null!==(i=null===b||void 0===b?void 0:b.filename)&&void 0!==i?i:(0,l.lk)(),O=(0,a.join)(null!==(s=null===c||void 0===c?void 0:c.prefix)&&void 0!==s?s:null===b||void 0===b?void 0:b.prefix,w),I="".concat(O,".").concat((0,p.n)(C));if(null!==c&&void 0!==c&&c.contentAddressed&&g.resources&&"json"===C.type){var M;const e=null!==(M=g.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===I})))&&void 0!==M?M:g.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===I}));if(e)return void(f[y]=e.resource.itemRelativeUrl)}const T=g.portalItem.resourceFromPath(I);(0,a.isBlobProtocol)(d)&&g.resources&&g.resources.pendingOperations.push((0,a.blobUrlToBlob)(d).then((e=>{T.path="".concat(O,".").concat((0,p.n)({type:"blob",blob:e})),f[y]=T.itemRelativeUrl})).catch((()=>{})));const P=null!==(u=null===c||void 0===c?void 0:c.compress)&&void 0!==u&&u;g.resources&&_((0,n.A)((0,n.A)({},e),{},{resource:T,content:C,compress:P,updates:g.resources.toAdd})),f[y]=T.itemRelativeUrl}function _(e){let{object:t,propertyName:i,updates:n,resource:r,content:o,compress:s}=e;n.push({resource:r,content:o,compress:s,finish:e=>{!function(e,t,i){"string"==typeof e[t]?e[t]=i.url:e[t].url=i.url}(t,i,e)}})}function m(e,t,i){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(i))}}},42251:(e,t,i)=>{i.d(t,{N1:()=>d,uY:()=>c,wY:()=>u,xH:()=>l});var n=i(20664),r=i(9392),o=i(95925),s=i(3112),a=i(30310);function l(e,t){return u(e)===u(t)}function u(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:"";let i=null;return i=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==i?null:"o-".concat(t,"-").concat(i)}const d={json:{write:{writer:function(e,t){var i;null!=(null===e||void 0===e||null===(i=e.layer)||void 0===i?void 0:i.objectIdField)&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}};function c(e,t,i,l){var d,c;const{sceneIntersectionHelper:h}=e,{observer:_,observerFeatureId:m,targetFeatureId:f,target:y}=i;if(null==m&&null==f)return;l||(l=e=>e),(0,n.a)(g,_,y);const b=(0,n.l)(g);(0,n.b)(g,_,g,1/b);const C=(0,o.Cr)(g,y,v);t.options.store=s.oH.ALL,h.intersectToolIntersectorRay(C,t);let w=null,O=null,I=null,M=null;for(const n of t.results.all){const t=(0,a.Gy)(n,e);if(null==t||null==n.distanceInRenderSpace)continue;const i=u(t);null!=i&&(null!=m&&i===m&&(null!==w&&void 0!==w||(w=l(p(n,e,b))),n.distanceInRenderSpace-1<w&&(I=n)),null!=f&&i===f&&(null!==O&&void 0!==O||(O=l(p(n,e,b))),null==M&&n.distanceInRenderSpace-1<b&&b-n.distanceInRenderSpace+1<O&&(M=n)))}const{observerAdjusted:T,targetAdjusted:P}=i;null!==(d=I)&&void 0!==d&&d.getIntersectionPoint(T)?i.observerSurfaceNormal=I.getTransformedNormal((0,r.vt)()):i.observerSurfaceNormal=null,null!==(c=M)&&void 0!==c&&c.getIntersectionPoint(P)?i.targetSurfaceNormal=M.getTransformedNormal((0,r.vt)()):i.targetSurfaceNormal=null}function p(e,t,i){if((0,a.QS)(e)){const n=(0,a.SM)(e,t);if(null!=n)return Math.min(n*h,i)}return 1e-5*i}const h=.05,v=(0,o.vt)(),g=(0,r.vt)()},60664:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(35143),r=i(42251),o=i(69098),s=i(42553),a=i(30726),l=i(46053),u=(i(81806),i(76460),i(47249),i(85842)),d=i(37546),c=i(19247),p=i(731);let h=class extends(s.A.JSONSupportMixin(o.A)){constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}equals(e){return(0,a.CM)(this.position,e.position)&&(0,a.CM)(this.elevationInfo,e.elevationInfo)&&(0,r.xH)(this.feature,e.feature)}};(0,n._)([(0,l.MZ)({type:c.default,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),(0,d.P)()],h.prototype,"position",void 0),(0,n._)([(0,l.MZ)({type:p.A}),(0,d.P)()],h.prototype,"elevationInfo",void 0),(0,n._)([(0,l.MZ)(r.N1)],h.prototype,"feature",void 0),h=(0,n._)([(0,u.$)("esri.analysis.LineOfSightAnalysisTarget")],h);const v=h},67797:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ze});var n=i(35143),r=i(91967),o=i(19276),s=i(54099),a=(i(81806),i(30726)),l=i(46053),u=i(76460),d=(i(47249),i(85842)),c=i(9392),p=i(2522),h=i(42251),v=i(98773),g=i(88321),_=i(54901),m=i(50346),f=i(68134),y=i(20664),b=i(19451),C=i(19247),w=i(9624),O=i(50840),I=i(2413),M=i(95925),T=i(12482),P=i(78639);let R=class extends r.default{constructor(e){super(e),this.elevationAlignedTargetLocation=null,this.inputPoints={isValid:!1,observer:(0,c.vt)(),observerSurfaceNormal:null,observerFeatureId:null,target:(0,c.vt)(),targetSurfaceNormal:null,targetFeatureId:null,observerAdjusted:(0,c.vt)(),targetAdjusted:(0,c.vt)()},this.computationResult={start:(0,c.vt)(),end:(0,c.vt)(),intersection:(0,c.vt)(),isValid:!1,isTargetVisible:!1},this.result=null}notifyResultChanged(){this.notifyChange("computationResult")}notifyInputPointsChanged(){this.notifyChange("inputPoints")}};(0,n._)([(0,l.MZ)()],R.prototype,"target",void 0),(0,n._)([(0,l.MZ)()],R.prototype,"elevationAlignedTargetLocation",void 0),(0,n._)([(0,l.MZ)()],R.prototype,"inputPoints",void 0),(0,n._)([(0,l.MZ)()],R.prototype,"computationResult",void 0),(0,n._)([(0,l.MZ)()],R.prototype,"result",void 0),R=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSight.LineOfSightComputation")],R);var A,S=i(76931),L=i(75762),V=i(99784),E=i(18690),H=i(53084);let D=A=class extends r.default{constructor(e){super(e)}clone(){return new A({type:this.type,id:(0,H.clone)(this.id),mapPoint:(0,H.clone)(this.mapPoint),renderPoint:(0,c.o8)(this.renderPoint),normal:(0,H.clone)(this.normal),ray:(0,H.clone)(this.ray),graphic:this.graphic})}equals(e){return this.type===e.type&&this.id===e.id&&(0,a.CM)(this.mapPoint,e.mapPoint)&&(0,y.I)(this.renderPoint,e.renderPoint)&&(0,E.aI)(this.normal,e.normal)&&(0,M.aI)(this.ray,e.ray)&&this.graphic===e.graphic}};(0,n._)([(0,l.MZ)()],D.prototype,"type",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],D.prototype,"id",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],D.prototype,"mapPoint",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],D.prototype,"renderPoint",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],D.prototype,"normal",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],D.prototype,"graphic",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],D.prototype,"ray",void 0),D=A=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSight.LineOfSightIntersectionResult")],D);var Z=i(37431),x=i(21255),F=i(29808),j=i(3112),k=i(30310);let G=class extends r.default{constructor(e){super(e),this._terrainIntersectionOptionsLayerUids=new Set(["terrain"])}initialize(){this.intersector=(0,F.hz)(this.view.state.viewingMode),this.intersector.options.hud=!1,this.intersector.options.store=j.oH.MIN}getScreenPointIntersection(e){const t=(0,S.WA)(e,L.oG.get()),i=(0,Z.Z4)(this.view.state.camera,t,W);return this._getRayIntersection(i)}_getRayIntersection(e,t){const{view:i,intersector:n}=this;if(null==e||null==i.sceneIntersectionHelper)return null;n.options.store=j.oH.MIN,i.sceneIntersectionHelper.intersectToolIntersectorRay(e,n,t);const r=n.results.min;if(null==r.target)return null;const o=(0,c.vt)();if(!r.getIntersectionPoint(o))return null;if(null!=(null===t||void 0===t?void 0:t.maxDistance)&&!r.withinDistance(t.maxDistance))return null;const s=i.renderCoordsHelper.fromRenderCoords(o,new C.default({spatialReference:i.spatialReference})),a=(0,c.o8)(r.normal);if((0,x.DC)(r))return new D({type:j.dz.TERRAIN,id:r.target.lij.slice(),mapPoint:s,renderPoint:o,normal:a,ray:(0,M.C)(e),graphic:null});const l=(0,k.Gy)(r,i);if(null==l)return null;const{layer:u,sourceLayer:d}=l,p="scene"===(null===d||void 0===d?void 0:d.type)?(0,V.RW)(l,d.objectIdField):l.uid;return new D({type:j.dz.OBJECT,id:"".concat(null===u||void 0===u?void 0:u.uid,"/").concat(p),mapPoint:s,renderPoint:o,normal:a,ray:(0,M.C)(e),graphic:l})}updateFromGroundIntersection(e,t,i){const n=z,r=U,o=N,s=B;(0,y.c)(r,e),this.view.renderCoordsHelper.worldUpAtPosition(r,o),(0,y.n)(o,o);const a=this.view.basemapTerrain.visibleElevationBounds,l=(t>=0?1:-1)*((a?Math.abs(a.max-a.min):100)+Math.abs(t));(0,y.h)(s,o,l),(0,y.g)(n,r,s),(0,M.Cr)(n,r,W);const u=this._getRayIntersection(W,{include:this._terrainIntersectionOptionsLayerUids,maxDistance:l});if(null!=u){const e=B;return(0,y.h)(e,o,t),(0,y.g)(i,u.renderPoint,e),(0,c.o8)(u.normal)}return(0,y.c)(i,e),null}};(0,n._)([(0,l.MZ)()],G.prototype,"view",void 0),(0,n._)([(0,l.MZ)()],G.prototype,"intersector",void 0),G=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSight.LineOfSightRayIntersector")],G);const z=(0,c.vt)(),U=(0,c.vt)(),N=(0,c.vt)(),B=(0,c.vt)(),W=(0,M.vt)();var J=i(17430),q=i(59752);let $=class extends(s.A.EventedMixin(r.default)){constructor(e){super(e),this.updateOnCameraChange=!0,this._observerGroundOffsetRenderSpace=0,this._effectiveObserverElevationMode="absolute-height",this._observerFeatureId=null,this._updatingHandles=new b.U,this._frameTask=q.nu,this._computationHandles=new g.default,this._externalObserverUpdate=!0}initialize(){var e;const t=null===(e=this.view.resourceController)||void 0===e?void 0:e.scheduler;this._frameTask=t?t.registerTask(q.W6.LINE_OF_SIGHT_TOOL):q.nu,this._intersector=new G({view:this.view}),this.addHandles([this._connectObserver(),this._connectComputations(),this._connectTargets()])}destroy(){this._computationHandles.destroy(),this._computations.removeAll(),this._updatingHandles.destroy()}get updating(){return this._frameTask.updating||this._updatingHandles.updating}get priority(){return this._frameTask.priority}set priority(e){this._frameTask.priority=e}get _computations(){return this.analysisViewData.computations}get _elevationAlignedObserverPositionRenderSpace(){return this.analysisViewData.observerEngineLocation}set _elevationAlignedObserverPositionRenderSpace(e){this.analysisViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._elevationAlignedObserverPositionRenderSpace)}_computeResult(e){const t=e.computation,{inputPoints:i,computationResult:n}=t,{observerAdjusted:r,targetAdjusted:o}=i,{start:s,end:a}=n;(0,y.c)(s,r),(0,y.c)(a,o),this._canCompute(t)?this._computeIntersection(e):function(e){let{computation:t,interpolationInfo:i}=e;const{computationResult:n,inputPoints:r}=t,{start:o,end:s,intersection:a}=n,{originalIntersection:l,originalObserver:u,originalTarget:d}=i;if((0,y.c)(a,l),r.isValid){const e=X,t=(0,y.G)(u,l)/(0,y.G)(u,d);(0,y.a)(e,o,u),(0,y.h)(e,e,1-t),(0,y.g)(a,a,e),(0,y.a)(e,s,d),(0,y.h)(e,e,t),(0,y.g)(a,a,e),n.isValid=!0}else t.result=null,n.isValid=!1,n.isTargetVisible=!1}(e),t.notifyResultChanged(),this.emit("result-changed",{target:e.computation.target,result:t.result})}_adjustStartEndPositions(e){const{view:t}=this,{inputPoints:i}=e,{observer:n,target:r,observerAdjusted:o,targetAdjusted:s}=i;(0,y.c)(o,n),(0,y.c)(s,r),(0,h.uY)(t,this._intersector.intersector,i);const{observerSurfaceNormal:a,targetSurfaceNormal:l}=i,u=this._screenPixelSize,d=X;null!=a?(0,y.c)(d,a):(0,y.d)(d,s,o);const c=u;(0,y.n)(d,d),(0,y.h)(d,d,Math.min(c,1)),(0,y.g)(o,o,d),null!=l?(0,y.c)(d,l):(0,y.d)(d,o,s);const p=t.state.camera.computeScreenPixelSizeAt(s);(0,y.n)(d,d),(0,y.h)(d,d,Math.min(p,1)),(0,y.g)(s,s,d)}_computeIntersection(e){let{computation:t,interpolationInfo:i}=e;const{view:n}=this,{sceneIntersectionHelper:r,renderCoordsHelper:o}=n;if(null==r)return;const s=this._intersector.intersector,{computationResult:a,inputPoints:l}=t,{observer:u,target:d}=l,{start:c,end:p}=a,h=(0,M.Cr)(c,p,K);s.options.store=j.oH.MIN,r.intersectToolIntersectorRay(h,s);const v=s.results.min,g=a.intersection,_=X;let m=!0;if(null!=v&&v.getIntersectionPoint(g)){(0,y.c)(i.originalIntersection,g),(0,y.c)(i.originalObserver,c),(0,y.c)(i.originalTarget,p),o.fromRenderCoords(g,_,n.spatialReference);const e=1-(0,y.G)(p,d)/(0,y.G)(c,d);m=(0,y.G)(u,g)>=e*(0,y.G)(u,d)}const f=new C.default(_,n.spatialReference);{const{result:e,target:i}=t;null!=e?(e.target=i,e.intersectedGraphic=m?null:(0,k.Gy)(v,n),e.intersectedLocation=m?null:f,e.visible=m):t.result=new P.default({target:i,elevationAlignedTargetLocation:t.elevationAlignedTargetLocation,intersectedGraphic:m?null:(0,k.Gy)(v,n),intersectedLocation:m?null:f,visible:m})}a.isValid=l.isValid=!0,a.isTargetVisible=m}_canCompute(e){const t=this.analysisViewData.elevationAlignedObserver,i=this.view.frustum;if(null==t||null==e.elevationAlignedTargetLocation||null==i)return!1;const{observerAdjusted:n,targetAdjusted:r}=e.inputPoints,o=i.intersectsPoint(n),s=i.intersectsPoint(r);return o&&s}_onObserverPositionChange(e,t,i,n,r){if(this._externalObserverUpdate=r,null==e)return this.analysisViewData.elevationAlignedObserver=null,void(this._observerFeatureId=null);if(null==t)return(0,J.V)(this.analysis,e.spatialReference,u.A.getLogger(this)),void(this.analysisViewData.elevationAlignedObserver=null);const o=Y(t,i),{absoluteZ:s,elevation:a}=(0,T.Q5)(t.x,t.y,t.z,this.view.spatialReference,this.view,o),l=t.clone();l.z=s,this._effectiveObserverElevationMode=o.mode,this.analysisViewData.elevationAlignedObserver=l;const d=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(l,d),this._elevationAlignedObserverPositionRenderSpace=d,this._observerGroundOffsetRenderSpace=s-a,this._observerFeatureId=(0,h.wY)(n),this.priority=q.W6.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onObserverRenderSpacePositionChangeForComputation(e,t,i,n,r){const{inputPoints:o}=e;switch((0,y.c)(o.observer,t),o.observerFeatureId=r,o.observerSurfaceNormal=null,n){case"on-the-ground":case"relative-to-ground":{const e=this._intersector.updateFromGroundIntersection(o.observer,i,o.observer);null==o.observerFeatureId&&(o.observerSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=q.W6.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetPositionChange(e,t,i,n,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s=e.inputPoints;if(o&&(s.isValid=!1),null==i)return null!=t&&(0,J.V)(this.analysis,t.spatialReference,u.A.getLogger(this)),e.elevationAlignedTargetLocation=null,void e.notifyInputPointsChanged();const a=Y(i,n),{absoluteZ:l,elevation:d}=(0,T.Q5)(i.x,i.y,i.z,this.view.spatialReference,this.view,a),c=i.clone();switch(c.z=l,e.elevationAlignedTargetLocation=c,this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation,s.target),s.targetFeatureId=(0,h.wY)(r),s.targetSurfaceNormal=null,a.mode){case"on-the-ground":case"relative-to-ground":{const e=this._intersector.updateFromGroundIntersection(s.target,l-d,s.target);null==s.targetFeatureId&&(s.targetSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=q.W6.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectComputationToTarget(e){return(0,_.vE)([this._updatingHandles.add((()=>({computation:e,targetPosition:e.target.position,targetElevationInfo:e.target.elevationInfo,targetFeatureInfo:e.target.feature,projectedTargetPosition:(0,w.projectOrLoad)(e.target.position,this.view.spatialReference)})),(e=>{let{computation:t,targetPosition:i,targetElevationInfo:n,targetFeatureInfo:r,projectedTargetPosition:o}=e;null==o.pending?this._onTargetPositionChange(t,i,o.geometry,n,r):this._updatingHandles.addPromise(o.pending)}),f.initial)])}_connectComputationToObserver(e){return this._updatingHandles.add((()=>({computation:e,observer:this.analysisViewData.elevationAlignedObserver})),(e=>{let{computation:t}=e;this._externalObserverUpdate&&(t.inputPoints.isValid=!1,t.notifyInputPointsChanged())}),f.initial)}_connectComputationToRenderSpaceObserver(e){return this._updatingHandles.add((()=>({computation:e,observer:this._elevationAlignedObserverPositionRenderSpace,observerGroundOffset:this._observerGroundOffsetRenderSpace,observerElevationMode:this._effectiveObserverElevationMode,observerFeatureId:this._observerFeatureId})),(e=>{let{computation:t,observer:i,observerGroundOffset:n,observerElevationMode:r,observerFeatureId:o}=e;this._onObserverRenderSpacePositionChangeForComputation(t,i,n,r,o)}),f.initial)}_connectComputationToCamera(e){return this._updatingHandles.add((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(t=>{let{isDirty:i}=t;!this.updateOnCameraChange||e.inputPoints.isValid&&!i||e.notifyInputPointsChanged()}))}_connectComputationToSlicePlane(e){return this._updatingHandles.add((()=>this.view.slicePlane),(()=>{e.inputPoints.isValid=!1,e.notifyInputPointsChanged()}))}_connectComputationToElevation(e){const t=(i,n)=>{const r=this.analysis.observer,o=e.target;let s=null,a=null,l=null,u=null,d=null,c=null;if(null!=(null===r||void 0===r?void 0:r.position)){const e=(0,w.projectOrLoad)(r.position,this.view.spatialReference);if(null!=e.pending)return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(i,n)));s=e.geometry,a=r.elevationInfo,l=r.feature}if(null!=o.position){const e=(0,w.projectOrLoad)(o.position,this.view.spatialReference);if(null!=e.pending)return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(i,n)));u=e.geometry,d=o.elevationInfo,c=o.feature}null==s&&null==u||((0,O.S)(i,n,ee,this.view.spatialReference),null!=s&&(0,I.vR)(ee,s)&&this._onObserverPositionChange(null!=r?r.position:null,s,a,l,!1),null!=u&&(0,I.vR)(ee,u)&&this._onTargetPositionChange(e,o.position,u,d,c,!1),null!=s&&null!=u&&(0,I.Mx)(ee,s,u)&&e.notifyInputPointsChanged())};return this.view.elevationProvider.on("elevation-change",(e=>{let{extent:i,spatialReference:n}=e;return t(i,n)}))}_connectComputationToTask(e){let t=null;const i={computation:e,interpolationInfo:{originalIntersection:(0,c.vt)(),originalObserver:(0,c.vt)(),originalTarget:(0,c.vt)()}};return(0,_.vE)([this._updatingHandles.add((()=>e.inputPoints),(()=>{t=(0,a.DC)(t),t=(0,v.UT)((async e=>{await(0,m.ignoreAbortErrors)(this._frameTask.schedule((()=>this._computeResult(i)),e))}))}),{initial:!0,equals:()=>!1}),(0,_.hA)((()=>t=(0,a.DC)(t)))])}_connectComputation(e){const t=this._computationHandles;t.has(e)||t.add([this._connectComputationToTarget(e),this._connectComputationToObserver(e),this._connectComputationToRenderSpaceObserver(e),this._connectComputationToCamera(e),this._connectComputationToSlicePlane(e),this._connectComputationToElevation(e),this._connectComputationToTask(e)],e)}_disconnectComputation(e){this._computationHandles.remove(e)}_onComputationCollectionChange(e){let{added:t,removed:i}=e;for(const n of i)this._disconnectComputation(n);for(const n of t)this._connectComputation(n)}_onTargetCollectionChange(e){let{added:t,removed:i}=e;for(const n of i)this._removeTarget(n);for(const n of t)this._addTarget(n)}_onCursorTargetChange(e,t){null!=t&&this._removeTarget(t),null!=e&&this._addTarget(e)}_addTarget(e){this._computations.some((t=>t.target===e))||this._computations.add(new R({target:e}))}_removeTarget(e){const t=this._computations.findIndex((t=>t.target===e));this._computations.removeAt(t)}_connectObserver(){return(0,_.vE)([this._updatingHandles.add((()=>({observerPosition:null!=this.analysis.observer?this.analysis.observer.position:null,projectedObserverPosition:(0,w.projectOrLoad)(null!=this.analysis.observer?this.analysis.observer.position:null,this.view.spatialReference),observerElevationInfo:null!=this.analysis.observer?this.analysis.observer.elevationInfo:null,observerFeatureInfo:null!=this.analysis.observer?this.analysis.observer.feature:null})),(e=>{let{observerPosition:t,projectedObserverPosition:i,observerElevationInfo:n,observerFeatureInfo:r}=e;null==i.pending?this._onObserverPositionChange(t,i.geometry,n,r,!0):this._updatingHandles.addPromise(i.pending)}),f.initial)])}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this._computations),(e=>this._onComputationCollectionChange(e)),{initial:!0,final:!0})}_connectTargets(){return(0,_.vE)([this._updatingHandles.addOnCollectionChange((()=>this.analysis.targets),(e=>this._onTargetCollectionChange(e)),{initial:!0,final:!0}),this._updatingHandles.add((()=>this.analysisViewData.cursorTarget),((e,t)=>{this._onCursorTargetChange(e,t)}))])}get _isCameraDirty(){const e=this.analysisViewData.elevationAlignedObserver,{view:t}=this,{renderCoordsHelper:i}=t;if(null==e||null==i)return!1;const n=X;i.toRenderCoords(e,n);const r=t.state.camera.computeScreenPixelSizeAt(n);return Math.abs((r-this._screenPixelSize)/this._screenPixelSize)>Q}};function Y(e,t){return e.hasZ?null!==t&&void 0!==t?t:{mode:"absolute-height",offset:0}:{mode:"on-the-ground",offset:0}}(0,n._)([(0,l.MZ)({constructOnly:!0})],$.prototype,"analysis",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],$.prototype,"analysisViewData",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],$.prototype,"view",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"updating",null),(0,n._)([(0,l.MZ)()],$.prototype,"priority",null),(0,n._)([(0,l.MZ)()],$.prototype,"updateOnCameraChange",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"_computations",null),(0,n._)([(0,l.MZ)()],$.prototype,"_elevationAlignedObserverPositionRenderSpace",null),(0,n._)([(0,l.MZ)()],$.prototype,"_observerGroundOffsetRenderSpace",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"_effectiveObserverElevationMode",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"_observerFeatureId",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"_screenPixelSize",null),(0,n._)([(0,l.MZ)({readOnly:!0})],$.prototype,"_updatingHandles",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"_frameTask",void 0),(0,n._)([(0,l.MZ)()],$.prototype,"_isCameraDirty",null),$=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSight.LineOfSightController")],$);const Q=.1,X=(0,c.vt)(),K=(0,M.vt)(),ee=(0,I.Ie)();var te=i(89379),ie=i(69539),ne=i(78059),re=i(60664),oe=i(44230),se=i(731),ae=i(59784);const le=new class{constructor(){this.glowWidth=8,this.innerWidth=.75}};const ue=new class{constructor(){this.size=.5}};function de(e){return(0,ae.f6)(e.accentColor,.75)}const ce=new class{constructor(){this.size=.5,this.visibleColor=new ie.default([3,252,111,.75]),this.occludedColor=new ie.default([252,3,69,.75]),this.undefinedColor=new ie.default([127,127,127,.75])}};const pe=new class{constructor(){this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new ie.default([3,252,111,1]),this.visibleOuterColor=new ie.default([3,252,111,.15]),this.occludedInnerColor=new ie.default([252,3,69,1]),this.occludedOuterColor=new ie.default([252,3,69,.1]),this.undefinedInnerColor=new ie.default([255,255,255,1]),this.undefinedOuterColor=new ie.default([127,127,127,.2])}};var he=i(56121),ve=i(38317),ge=i(91175),_e=i(86507),me=i(62577),fe=i(76336);class ye extends he.q{constructor(e,t){const i=(0,ve.UM)(de(e.effectiveTheme)),n=(0,me.CM)(i,ue.size,32,32),r=new ge.M(n);super({view:e,renderObjects:[r],metadata:t,elevationInfo:{mode:"absolute-height",offset:0}}),(0,_e.s)(this),this.themeHandle=(0,f.watch)((()=>({color:de(e.effectiveTheme)})),(e=>{i.setParameters(e)}))}destroy(){this.themeHandle.remove(),super.destroy()}}class be extends he.q{constructor(e,t){const{size:i,visibleColor:n,occludedColor:r,undefinedColor:o}=ce;super({view:e,renderObjects:[Ce(i,n,fe.SJ.Custom1),Ce(i,r,fe.SJ.Custom2),Ce(i,o,fe.SJ.Custom3)],metadata:t,elevationInfo:{mode:"absolute-height",offset:0}}),(0,_e.s)(this)}}function Ce(e,t,i){return new ge.M((0,me.CM)((0,ve.UM)(ie.default.toUnitRGBA(t)),e,32,32),i)}var we,Oe=i(1307),Ie=(i(71732),i(5109)),Me=i(17046),Te=i(11500),Pe=i(64921);!function(e){e.Ready="ready",e.Creating="creating",e.Created="created"}(we||(we={}));let Re=class extends Ie.k{constructor(e){super(e),this._creationMode=!1,this.removeIncompleteOnCancel=!1,this.analysisViewData=null,this._latestPointerMovePointerType=null,this._laserlineVisualElement=null,this._grabbedManipulator=null,this._analysisHandles=new g.default,this._updatingHandles=new b.U,this._manipulatorHandles=new g.default,this._targetTrackerManipulator=null}initialize(){this._intersector=new G({view:this.view}),this.addHandles((0,f.watch)((()=>this.state),(e=>{e===we.Created&&this.finishToolCreation()}),f.syncAndInitial)),this._observerManipulator=this._createObserverManipulator(),this._createLaserLine(),this.addHandles([this._updatingHandles.add((()=>{var e;return null===(e=this.analysisViewData)||void 0===e?void 0:e.elevationAlignedObserver}),(e=>this._onObserverLocationChange(e)),f.initial),this._updatingHandles.add((()=>function(e){const t=e.accentColor;return{glowColor:t,innerColor:(0,ae.bJ)(t),globalAlpha:.75*t.a}}(this.view.effectiveTheme)),(e=>{let{glowColor:t,innerColor:i,globalAlpha:n}=e;return this._updateLaserLineStyle(t,i,n)}),f.initial),this._updatingHandles.add((()=>this._laserLineRendererDependencies()),(e=>this._updateLaserLineRenderer(e))),this._connectComputations(),this._updatingHandles.addWhen((()=>!this._shouldRenderTracker),(()=>this._clearCursorTracker()),f.initial),this._updatingHandles.add((()=>({active:this.active,hasGrabbedManipulators:this.hasGrabbedManipulators})),(e=>{let{active:t,hasGrabbedManipulators:i}=e;this._creationMode=!!t&&(this._creationMode||!i)}),f.initial)])}destroy(){this._updatingHandles=(0,a.pR)(this._updatingHandles),this._manipulatorHandles=(0,a.pR)(this._manipulatorHandles),this._analysisHandles=(0,a.pR)(this._analysisHandles),this._observerManipulator=null,this._clearCursorTracker(),this._removeLaserLine(),this._intersector=null,this._set("analysis",null)}get state(){var e;return this.active?!this.hasGrabbedManipulators||this._creationMode?we.Creating:we.Created:null!=(null===(e=this.analysis.observer)||void 0===e?void 0:e.position)?we.Created:we.Ready}get cursor(){return this.active&&this._showTracker?"crosshair":null}get updating(){return null!=this.analysisViewData&&this.analysisViewData.updating||this._updatingHandles.updating}get _showTracker(){return this.active&&"mouse"===this._latestPointerMovePointerType}get _shouldRenderTracker(){var e;return this._showTracker&&null!=(null===(e=this.analysis.observer)||void 0===e?void 0:e.position)&&!this.hasGrabbedManipulators}continue(){this.view.activeTool=this}stop(){this.view.activeTool=null}onEditableChange(){this.analysisViewData.editable=this.internallyEditable}onInputEvent(e){switch(e.type){case"immediate-double-click":this._doubleClickHandler(e);break;case"key-down":this._keyDownHandler(e);break;case"pointer-move":this._pointerMoveHandler(e)}}onInputEventAfter(e){"immediate-click"===e.type&&this._clickHandler(e)}onShow(){}onHide(){}onDeactivate(){this._clearCursorTracker()}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this.analysisViewData.computations),(e=>this._onComputationsCollectionChange(e)),{initial:!0,final:!0})}_onComputationsCollectionChange(e){let{added:t,removed:i}=e;for(const n of i)this._disconnectComputation(n);for(const n of t)this._connectComputation(n)}_connectComputation(e){if(this.destroyed)return void u.A.getLogger(this).warn("Attempting to connect an analysis to a destroyed LineOfSight tool. Ignoring.");const t=this._analysisHandles;if(t.has(e))return;const i=this._createTargetManipulator(e.target);null==this._targetTrackerManipulator&&i.metadata.target===this.analysisViewData.cursorTarget&&(this._targetTrackerManipulator=i,this._targetTrackerManipulator.available=!1,this._targetTrackerManipulator.interactive=!1,this._updateLaserLineRenderer()),t.add([this._updatingHandles.add((()=>function(e){const{isValid:t,isTargetVisible:i}=e.computationResult;return{isValid:t,isTargetVisible:i}}(e)),(()=>function(e,t){const{isValid:i,isTargetVisible:n}=t.computationResult;e.state=i?n?fe.SJ.Custom1:fe.SJ.Custom2:fe.SJ.Custom3}(i,e)),f.initial),this._updatingHandles.add((()=>e.elevationAlignedTargetLocation),(e=>this._onTargetLocationChange(e,i)),f.initial)],e)}_disconnectComputation(e){if(this.destroyed)return void u.A.getLogger(this).warn("Attempting to disconnect an analysis from a destroyed LineOfSight tool. Ignoring.");this._analysisHandles.remove(e);const t=this._getTargetManipulator(e.target);null!=t&&(this.manipulators.remove(t),this._manipulatorHandles.remove(t),null!=this._targetTrackerManipulator&&this._targetTrackerManipulator===t&&(this._targetTrackerManipulator=null))}_clearCursorTracker(){this.analysisViewData.cursorTarget=(0,a.pR)(this.analysisViewData.cursorTarget)}_createTargetManipulator(e){const t={target:e,type:"target"},i=new be(this.view,t);return this._manipulatorHandles.add([this._createTargetManipulatorDragPipeline(i),i.events.on("grab-changed",(e=>this._manipulatorGrabChanged(i,e))),i.events.on("immediate-click",(e=>this._manipulatorClick(i,e)))],i),this.manipulators.add(i),null!=e.position?i.elevationAlignedLocation=e.position:i.available=!1,i}_getTargetManipulator(e){let t=null;return this.manipulators.forEach((i=>{const n=i.manipulator;null==t&&"target"===n.metadata.type&&n.metadata.target===e&&(t=n)})),t}_createObserverManipulator(){const e=new ye(this.view,{type:"observer",intersection:null});return this._manipulatorHandles.add([this._createObserverManipulatorDragPipeline(e),e.events.on("grab-changed",(t=>this._manipulatorGrabChanged(e,t))),e.events.on("immediate-click",(t=>this._manipulatorClick(e,t)))],e),this.manipulators.add(e),e}_screenToIntersection(){return e=>{const t=this._intersector.getScreenPointIntersection(e.screenEnd);return null==t?null:(0,te.A)((0,te.A)({},e),{},{intersection:t})}}_createTargetManipulatorDragPipeline(e){return(0,Me.Xt)(e,((t,i,n)=>{i.next(this._screenToIntersection()).next(this._updateTargetDragStep(e)).next((()=>this._updateLaserLineRenderer())),n.next(function(e){var t;const i=null===(t=e.position)||void 0===t?void 0:t.clone();return t=>(e.position=i,t)}(e.metadata.target)).next((()=>this._updateLaserLineRenderer()))}))}_createObserverManipulatorDragPipeline(e){return(0,Me.Xt)(e,((e,t,i)=>{t.next(this._screenToIntersection()).next(this._updateObserverDragStep()).next((()=>this._updateLaserLineRenderer())),i.next(this._cancelObserverDragStep()).next((()=>this._updateLaserLineRenderer()))}))}_updateObserverDragStep(){return e=>(null!=e.intersection.mapPoint?(null==this.analysis.observer&&(this.analysis.observer=new ne.default),this._updateFromIntersection(this.analysis.observer,e.intersection)):this.analysis.observer=null,e)}_cancelObserverDragStep(){var e;const t=null!=(null===(e=this.analysis.observer)||void 0===e?void 0:e.position)?this.analysis.observer.clone():null;return e=>(this.analysis.observer=t,e)}_updateTargetDragStep(e){return t=>{this._updateFromIntersection(e.metadata.target,t.intersection);const i=t.intersection.mapPoint;return null!=i&&(e.elevationAlignedLocation=i),t}}_manipulatorGrabChanged(e,t){switch(t.action){case"start":this._grabbedManipulator=e;break;case"end":this._grabbedManipulator===e&&(this._grabbedManipulator=null)}}_laserLineRendererDependencies(){return{laserlineVisualElement:this._laserlineVisualElement,grabbedManipulator:this._grabbedManipulator,shouldRenderTracker:this._shouldRenderTracker,observerPosition:null!=this.analysis.observer?this.analysis.observer.position:null,visible:this.visible}}_updateLaserLineRenderer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._laserLineRendererDependencies();const{laserlineVisualElement:t,grabbedManipulator:i,shouldRenderTracker:n,observerPosition:r,visible:o}=e;if(null==t)return;const s=null!=i?i:n&&null!=r?this._targetTrackerManipulator:null;null!=s&&o?(t.visible=!0,t.heightManifoldTarget=s.renderLocation,s!==this._observerManipulator?t.lineVerticalPlaneSegment=(0,oe.Cr)(this._observerManipulator.renderLocation,s.renderLocation,Ae):t.lineVerticalPlaneSegment=null):(t.visible=!1,t.heightManifoldTarget=null,t.lineVerticalPlaneSegment=null)}_createLaserLine(){this._removeLaserLine();const{glowWidth:e,innerWidth:t}=le;this._laserlineVisualElement=new Oe.o({view:this.view,attached:!0,visible:this.visible,style:{glowWidth:e,innerWidth:t},isDecoration:!0})}_removeLaserLine(){null!=this._laserlineVisualElement&&(this._laserlineVisualElement.destroy(),this._laserlineVisualElement=null)}_updateLaserLineStyle(e,t,i){const n=this._laserlineVisualElement;if(null==n)return;const r=n.style;n.style=(0,te.A)((0,te.A)({},r),{},{glowColor:ie.default.toUnitRGB(e),innerColor:ie.default.toUnitRGB(t),globalAlpha:i})}_onObserverLocationChange(e){null!=e?(this._observerManipulator.metadata.intersection=null,this._observerManipulator.available=!0,this._observerManipulator.elevationAlignedLocation=e):this._observerManipulator.available=!1}_onTargetLocationChange(e,t){null!=e?(t.elevationAlignedLocation=e,t!==this._targetTrackerManipulator&&(t.available=!0)):t.available=!1}_addPointFromClickEvent(e){var t;const i=this._intersector.getScreenPointIntersection(e);if(null!=(null===i||void 0===i?void 0:i.mapPoint))if(null!=(null===(t=this.analysis.observer)||void 0===t?void 0:t.position)){this._clearCursorTracker();const e=new re.default;this._updateFromIntersection(e,i),this.analysis.targets.add(e)}else{const e=new ne.default;this._updateFromIntersection(e,i),this.analysis.observer=e}}_clickHandler(e){this.active&&e.button!==Pe.w.Right&&(this._addPointFromClickEvent((0,Te.ZV)(e)),e.stopPropagation())}_doubleClickHandler(e){this.active&&e.button!==Pe.w.Right&&(this.stop(),e.stopPropagation())}_keyDownHandler(e){this.active&&"Escape"===e.key&&(this.stop(),e.stopPropagation())}_pointerMoveHandler(e){var t;if(this.hasGrabbedManipulators)return;if(this._latestPointerMovePointerType=e.pointerType,this._updateLaserLineRenderer(),!this._showTracker||null==(null===(t=this.analysis.observer)||void 0===t?void 0:t.position))return;const i=(0,Te.ZV)(e),n=this._intersector.getScreenPointIntersection(i);null!=(null===n||void 0===n?void 0:n.mapPoint)&&(null==this.analysisViewData.cursorTarget&&(this.analysisViewData.cursorTarget=new re.default),this._updateFromIntersection(this.analysisViewData.cursorTarget,n),this._updateLaserLineRenderer())}_updateFromIntersection(e,t){if(null==t.mapPoint)return e.position=null,e.elevationInfo=null,void(e.feature=null);switch(t.type){case j.dz.OBJECT:if(null!=t.graphic){const i=t.graphic,n=(0,T.bh)(i);"on-the-ground"===n.mode&&(n.mode="relative-to-ground",n.offset=0),e.elevationInfo=new se.A(n),e.feature=i}else e.elevationInfo=null,e.feature=null;break;case j.dz.TERRAIN:e.elevationInfo=new se.A({mode:"on-the-ground"}),e.feature=null;break;default:e.elevationInfo=null,e.feature=null}const i=t.mapPoint.clone();i.z=(0,T.wS)(this.view,i,{mode:"absolute-height",offset:0},e.elevationInfo),e.position=i}_manipulatorClick(e,t){if("observer"===e.metadata.type||e.grabbing||e.dragging||t.button!==Pe.w.Right||this.analysis.targets.length<=1)return;const{target:i}=e.metadata;this.analysis.targets.remove(i),t.stopPropagation()}get testInfo(){}};(0,n._)([(0,l.MZ)({constructOnly:!0})],Re.prototype,"view",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],Re.prototype,"analysis",void 0),(0,n._)([(0,l.MZ)()],Re.prototype,"_creationMode",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],Re.prototype,"state",null),(0,n._)([(0,l.MZ)({readOnly:!0})],Re.prototype,"cursor",null),(0,n._)([(0,l.MZ)()],Re.prototype,"removeIncompleteOnCancel",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],Re.prototype,"updating",null),(0,n._)([(0,l.MZ)({constructOnly:!0})],Re.prototype,"analysisViewData",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],Re.prototype,"_showTracker",null),(0,n._)([(0,l.MZ)()],Re.prototype,"_latestPointerMovePointerType",void 0),(0,n._)([(0,l.MZ)()],Re.prototype,"_shouldRenderTracker",null),(0,n._)([(0,l.MZ)()],Re.prototype,"_laserlineVisualElement",void 0),(0,n._)([(0,l.MZ)()],Re.prototype,"_grabbedManipulator",void 0),Re=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSight.LineOfSightTool")],Re);const Ae=(0,oe.vt)();var Se=i(13191);class Le{constructor(e,t,i,n){this.visibleLineVisualElement=e,this.occludedLineVisualElement=t,this.undefinedLineVisualElement=i,this.targetVisualElement=n}destroy(){this.visibleLineVisualElement.destroy(),this.occludedLineVisualElement.destroy(),this.undefinedLineVisualElement.destroy(),this.targetVisualElement.destroy()}}var Ve=i(7256),Ee=i(83574);i(45463);let He=class extends r.default{constructor(e){super(e),this._lineOfSightVisualElements=new Array,this._computationHandles=new g.default,this._updatingHandles=new b.U}initialize(){this.addHandles(this._connectComputations()),this._createObserverVisualization()}destroy(){this._updatingHandles=(0,a.pR)(this._updatingHandles),this._computationHandles=(0,a.pR)(this._computationHandles),this._observerVisualElement=(0,a.pR)(this._observerVisualElement)}get visible(){return this.analysisViewData.visible}get updating(){return this._updatingHandles.updating}get interactiveAndEditable(){return this.analysisViewData.interactive&&this.analysisViewData.editable}get test(){}_createLineOfSightVisualization(){const e=pe,t=this.view,i=this.isDecoration,n={view:t,attached:!0,width:e.outerWidth,innerWidth:e.innerWidth,isDecoration:i},r=ie.default.toUnitRGBA(e.visibleOuterColor),o=ie.default.toUnitRGBA(e.visibleInnerColor),s=ie.default.toUnitRGBA(e.occludedOuterColor),a=ie.default.toUnitRGBA(e.occludedInnerColor),l=ie.default.toUnitRGBA(e.undefinedOuterColor),u=ie.default.toUnitRGBA(e.undefinedInnerColor),d=new Ve.t((0,te.A)((0,te.A)({},n),{},{color:r,innerColor:o})),c=new Ve.t((0,te.A)((0,te.A)({},n),{},{color:s,innerColor:a})),p=new Ve.t((0,te.A)((0,te.A)({},n),{},{color:l,innerColor:u})),h=new Ee.l((0,te.A)((0,te.A)({view:t,attached:!0},De),{},{size:8,isDecoration:i})),v=new Le(d,c,p,h);return this._lineOfSightVisualElements.push(v),v}_destroyLineOfSightVisualization(e){e.destroy(),this._lineOfSightVisualElements.splice(this._lineOfSightVisualElements.indexOf(e),1)}_updateLineOfSightVisualization(e,t,i){const n=pe,{computationResult:r,inputPoints:o}=e,{start:s,end:a,intersection:l,isValid:u,isTargetVisible:d}=r,{observer:p}=o,h=je;h[12]=p[0],h[13]=p[1],h[14]=p[2];const v=(0,y.d)(Ze,s,p),g=(0,y.d)(xe,a,p),_=(0,y.d)(Fe,l,p),{visibleLineVisualElement:m,occludedLineVisualElement:f,undefinedLineVisualElement:b,targetVisualElement:C}=t,w=null==this.analysisViewData.elevationAlignedObserver||null==e.elevationAlignedTargetLocation,O=this.visible&&!w;m.visible=O,f.visible=O,b.visible=O,C.visible=O,C.attached=!i.interactiveAndEditable,O&&(m.geometry=null,f.geometry=null,b.geometry=null,C.geometry=e.elevationAlignedTargetLocation,u?d?(m.geometry=[[(0,c.ci)(v),(0,c.ci)(g)]],m.transform=h,m.color=ie.default.toUnitRGBA(n.visibleOuterColor),C.color=ie.default.toUnitRGBA(n.visibleInnerColor)):(m.geometry=[[(0,c.ci)(v),(0,c.ci)(_)]],m.transform=h,m.color=ie.default.toUnitRGBA(n.occludedOuterColor),f.geometry=[[(0,c.ci)(_),(0,c.ci)(g)]],f.transform=h,C.color=ie.default.toUnitRGBA(n.occludedInnerColor)):(b.geometry=[[(0,c.ci)(v),(0,c.ci)(g)]],b.transform=h,C.color=ie.default.toUnitRGBA(n.undefinedInnerColor)))}_getLineOfSightVisualizationDependencies(e){const{computationResult:t}=e,{occludedOuterColor:i,visibleOuterColor:n}=pe;return{computationResult:t,occludedOuterColor:i,visibleOuterColor:n,visible:this.visible,interactiveAndEditable:this.interactiveAndEditable}}_connectComputation(e){const t=this._computationHandles;if(t.has(e))return;const i=this._createLineOfSightVisualization();t.add([this._updatingHandles.add((()=>this._getLineOfSightVisualizationDependencies(e)),(t=>this._updateLineOfSightVisualization(e,i,t)),{initial:!0,equals:()=>!1}),(0,_.hA)((()=>this._destroyLineOfSightVisualization(i)))],e)}_disconnectComputation(e){this._computationHandles.remove(e)}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this.analysisViewData.computations),(e=>this._onComputationsCollectionChange(e)),{initial:!0,final:!0})}_onComputationsCollectionChange(e){let{added:t,removed:i}=e;for(const n of i)this._disconnectComputation(n);for(const n of t)this._connectComputation(n)}_createObserverVisualization(){const e=ie.default.toUnitRGBA(pe.visibleInnerColor),t=new Ee.l((0,te.A)((0,te.A)({view:this.view,color:e},De),{},{isDecoration:this.isDecoration}));this._observerVisualElement=t,this.addHandles(this._updatingHandles.add((()=>({observer:this.analysisViewData.elevationAlignedObserver,interactiveAndEditable:this.interactiveAndEditable,visible:this.visible})),(e=>{let{observer:i,interactiveAndEditable:n,visible:r}=e;null!=i&&!n&&r?(t.geometry=i,this._observerVisualElement.attached=!0):t.attached=!1}),f.initial))}};(0,n._)([(0,l.MZ)({constructOnly:!0})],He.prototype,"analysis",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],He.prototype,"analysisViewData",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0})],He.prototype,"view",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],He.prototype,"visible",null),(0,n._)([(0,l.MZ)({constructOnly:!0})],He.prototype,"isDecoration",void 0),(0,n._)([(0,l.MZ)()],He.prototype,"updating",null),(0,n._)([(0,l.MZ)()],He.prototype,"interactiveAndEditable",null),(0,n._)([(0,l.MZ)()],He.prototype,"test",null),He=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSight.LineOfSightVisualization")],He);const De={size:6,pixelSnappingEnabled:!1,primitive:"circle",elevationInfo:{mode:"absolute-height",offset:0},outlineSize:0},Ze=(0,c.vt)(),xe=(0,c.vt)(),Fe=(0,c.vt)(),je=(0,Se.vt)();var ke=i(10260);let Ge=class extends((0,p.P)(s.A.EventedMixin(r.default))){constructor(e){super(e),this.type="line-of-sight-view-3d",this.analysis=null,this.tool=null,this.computations=new o.default,this.elevationAlignedObserver=null,this.observerEngineLocation=(0,c.vt)(),this.cursorTarget=null,this.editable=!0}initialize(){const e=this.view,t=this.analysis;this._analysisController=new $({analysis:t,analysisViewData:this,view:e}),this._analysisVisualization=new He({analysis:t,analysisViewData:this,view:e,isDecoration:!this.parent}),this.addHandles([this._analysisController.on("result-changed",(e=>{e.target!==this.cursorTarget&&this.emit("result-changed",e)})),(0,ke.Hd)(this,Re)])}destroy(){(0,ke.aS)(this),this._analysisController=(0,a.pR)(this._analysisController),this._analysisVisualization=(0,a.pR)(this._analysisVisualization)}get results(){return this.computations.map((e=>e.result))}get priority(){return this._analysisController.priority}set priority(e){this._analysisController.priority=e}get updating(){return null!=this._analysisController&&this._analysisController.updating||null!=this._analysisVisualization&&this._analysisVisualization.updating}getResultForTarget(e){var t;return null===(t=this.computations.find((t=>t.target===e)))||void 0===t?void 0:t.result}get testInfo(){}};(0,n._)([(0,l.MZ)({readOnly:!0})],Ge.prototype,"type",void 0),(0,n._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],Ge.prototype,"analysis",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"tool",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],Ge.prototype,"results",null),(0,n._)([(0,l.MZ)()],Ge.prototype,"priority",null),(0,n._)([(0,l.MZ)()],Ge.prototype,"computations",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"elevationAlignedObserver",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"observerEngineLocation",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"cursorTarget",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"updating",null),(0,n._)([(0,l.MZ)()],Ge.prototype,"editable",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"_analysisController",void 0),(0,n._)([(0,l.MZ)()],Ge.prototype,"_analysisVisualization",void 0),Ge=(0,n._)([(0,d.$)("esri.views.3d.analysis.LineOfSightAnalysisView3D")],Ge);const ze=Ge},70667:(e,t,i)=>{i.d(t,{t:()=>_,z:()=>y});var n=i(19555),r=i(72745),o=i(55855),s=i(34111),a=i(482),l=i(44815),u=i(75002),d=i(38496),c=i(64465),p=i(50468),h=i(87634),v=i(17345),g=i(66470);function _(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=[],_=t.mapPositions;!function(e,t){const{attributeData:{position:i},removeDuplicateStartEnd:n}=e,r=function(e){const t=e.length;return e[0]===e[t-3]&&e[1]===e[t-2]&&e[2]===e[t-1]}(i)&&n,o=i.length/3-(r?1:0),s=new Array(2*(o-1)),a=r?i.slice(0,-3):i;let l=0;for(let u=0;u<o-1;u++)s[l++]=u,s[l++]=u+1;t.push([g.r.POSITION,new p.n(a,s,3,r)])}(t,r);const y=r[0][1].data,b=r[0][1].indices.length,C=(0,d.EH)(b);return function(e,t,i){if(null!=e.attributeData.colorFeature)return;const n=e.attributeData.color;t.push([g.r.COLOR,new p.n(null!==n&&void 0!==n?n:o.Un,i,4)])}(t,r,C),function(e,t,i){var n;null==e.attributeData.sizeFeature&&t.push([g.r.SIZE,new p.n([null!==(n=e.attributeData.size)&&void 0!==n?n:1],i,1,!0)])}(t,r,C),function(e,t,i){e.attributeData.normal&&t.push([g.r.NORMAL,new p.n(e.attributeData.normal,i,3)])}(t,r,C),function(e,t,i){null!=e.attributeData.colorFeature&&t.push([g.r.COLORFEATUREATTRIBUTE,new p.n([e.attributeData.colorFeature],i,1,!0)])}(t,r,C),function(e,t,i){null!=e.attributeData.sizeFeature&&t.push([g.r.SIZEFEATUREATTRIBUTE,new p.n([e.attributeData.sizeFeature],i,1,!0)])}(t,r,C),function(e,t,i){null!=e.attributeData.opacityFeature&&t.push([g.r.OPACITYFEATUREATTRIBUTE,new p.n([e.attributeData.opacityFeature],i,1,!0)])}(t,r,C),function(e,t,i){if(null==e.overlayInfo||e.overlayInfo.renderCoordsHelper.viewingMode!==c.RT.Global||!e.overlayInfo.spatialReference.isGeographic)return;const r=(0,l.jh)(i.length),o=(0,s.tO)(e.overlayInfo.spatialReference);for(let n=0;n<r.length;n+=3)(0,a.RC)(i,n,r,n,o);const d=i.length/3,h=(0,u.oe)(d+1);let v=m,_=f,y=0,b=0;(0,n.hZ)(v,r[b++],r[b++]),b++,h[0]=0;for(let s=1;s<d+1;++s)s===d&&(b=0),(0,n.hZ)(_,r[b++],r[b++]),b++,y+=(0,n.xg)(v,_),h[s]=y,[v,_]=[_,v];t.push([g.r.DISTANCETOSTART,new p.n(h,t[0][1].indices,1,!0)])}(t,r,y),new v.V(e,r,_,h.X.Line,i)}const m=(0,r.vt)(),f=(0,r.vt)();function y(e,t){if(null==e||0===e.length)return[];const i=[];return e.forEach((e=>{const n=e.length,r=(0,l.jh)(3*n);e.forEach(((e,t)=>{r[3*t]=e[0],r[3*t+1]=e[1],r[3*t+2]=e[2]}));const o={attributeData:{position:r,normal:t},removeDuplicateStartEnd:!1};i.push(o)})),i}},73093:(e,t,i)=>{i.d(t,{n:()=>r});var n=i(90534);function r(e){return o[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,n.getPathExtension)(e);return l[t]||s}(e.url)}(e)]||a}const o={},s="text/plain",a=o[s],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const u in l)o[l[u]]=u},78059:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var n=i(35143),r=i(42251),o=i(91967),s=i(69098),a=i(42553),l=i(30726),u=i(46053),d=(i(81806),i(76460),i(47249),i(85842)),c=i(37546),p=i(19247),h=i(731);let v=class extends(a.A.JSONSupportMixin(s.A.ClonableMixin(o.default))){constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}equals(e){return(0,l.CM)(this.position,e.position)&&(0,l.CM)(this.elevationInfo,e.elevationInfo)&&(0,r.xH)(this.feature,e.feature)}};(0,n._)([(0,u.MZ)({type:p.default,json:{write:{isRequired:!0}}})],v.prototype,"position",void 0),(0,n._)([(0,u.MZ)({type:h.A}),(0,c.P)()],v.prototype,"elevationInfo",void 0),(0,n._)([(0,u.MZ)(r.N1)],v.prototype,"feature",void 0),v=(0,n._)([(0,d.$)("esri.analysis.LineOfSightAnalysisObserver")],v);const g=v},78639:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(35143),r=i(91967),o=i(46053),s=(i(81806),i(76460),i(47249),i(85842));let a=class extends r.default{constructor(e){super(e),this.target=null,this.intersectedGraphic=null,this.intersectedLocation=null,this.elevationAlignedTargetLocation=null,this.visible=void 0}};(0,n._)([(0,o.MZ)()],a.prototype,"target",void 0),(0,n._)([(0,o.MZ)()],a.prototype,"intersectedGraphic",void 0),(0,n._)([(0,o.MZ)()],a.prototype,"intersectedLocation",void 0),(0,n._)([(0,o.MZ)()],a.prototype,"elevationAlignedTargetLocation",void 0),(0,n._)([(0,o.MZ)({type:Boolean})],a.prototype,"visible",void 0),a=(0,n._)([(0,s.$)("esri.views.3d.analysis.LineOfSightAnalysisResult")],a);const l=a},86507:(e,t,i)=>{i.d(t,{Q:()=>o,s:()=>s});var n=i(54901),r=i(12482);function o(e,t){return function(e,t){return!!e&&"on-the-ground"!==t.mode&&!(0,r.v9)(t)}(null===e||void 0===e?void 0:e.data.coordinateHelper.hasZ(),t)}function s(e,t){let i=null;const r=e.events.on("grab-changed",(n=>{null!=i&&(i.remove(),i=null),"start"===n.action?(i=e.disableDisplay(),t&&t(n)):t&&t(n)}));return(0,n.hA)((()=>{var e;null!==(e=i)&&void 0!==e&&e.remove(),r.remove()}))}}}]);
//# sourceMappingURL=67797.daa07a54.chunk.js.map