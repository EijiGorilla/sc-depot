"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[35382,38574,75166,85685],{770:(e,a,n)=>{n.d(a,{bG:()=>o,Ty:()=>s,YJ:()=>u,Fq:()=>c,vt:()=>t});var l=n(53084),i=n(42633);class r{constructor(e){const{name:a,label:n,description:l,schemes:r}=e;this.name=a,this.label=n,this.description=l,this.schemes=r;const o=e.basemapGroups||i.Np;let t=[];Object.keys(o).forEach((e=>{t=t.concat(o[e])})),this.supportedBasemaps=t,this.basemapGroups=o}isBasemapSupported(e){const a=(0,i.T1)(e,this.supportedBasemaps);return!(!a||!this.supportedBasemaps.includes(a))}getRawSchemes(e){const{basemapId:a,basemapTheme:n}=function(e,a,n){let l=null,r=null;if(a&&(l=(0,i.T1)(a,e,!1),l)){const e=(0,i.BV)(l);null!=e&&(r=e)}return!l&&n&&(l="dark"===n?"dark-gray":"gray",r=n),l||r||(l="gray",r="light"),{basemapId:l,basemapTheme:r}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let r=n;if(a){const e=(0,i.BV)(a,this.basemapGroups);null!=e&&(r=e)}let o=e.geometryType;"multipoint"===o?o="point":"mesh"===o&&(o="polygon");const t=this.schemes[o]||this.schemes.default;return{schemesInfo:(0,l.clone)(t[r]),basemapId:a,basemapTheme:n}}}function o(e){const a=e.themeDictionary,n=new Map;for(const l in a){const e=a[l];n.set(l,new r(e))}return n}function t(e,a){const n=[];return e.forEach((e=>{e.isBasemapSupported(a)&&n.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),n}function s(e,a){if(!e)return;if(!a)return;let n=null;const l=[a.primaryScheme,...a.secondarySchemes];for(const r of l){var i;if((null===(i=r.name)||void 0===i?void 0:i.toLowerCase())===e.toLowerCase()){n=r;break}}return n}function u(e,a,n){if(!e&&!a)return[];if(!n)return[];const l=!(null!==e&&void 0!==e&&e.length),i=!(null!==a&&void 0!==a&&a.length),r=[n.primaryScheme,...n.secondarySchemes],o=[];for(const t of r){const n=!!l||e.some((e=>t.tags.includes(e))),r=!i&&a.some((e=>t.tags.includes(e)));n&&!r&&o.push(t)}return o}function c(e){const a=e.theme;if(a)return a.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},13001:(e,a,n)=>{n.r(a),n.d(a,{createRenderer:()=>L,regenerateRenderer:()=>E,updateRenderer:()=>I});var l=n(89379),i=n(59784),r=n(50076),o=n(53084),t=n(63860),s=n(9922),u=n(76841),c=n(44884),p=n(33766),d=n(31650),m=n(53151),f=n(53680),h=n(51006),g=n(90494),y=n(11563),w=n(38574),v=n(94439);const b=new Set(["equal-interval","natural-breaks","quantile"]),k=new Set(["HH","HL","LH","LL"]),S={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]},z={2:["L","H"],3:["L","M","H"],4:["L","M1","M2","H"]},C=e=>({minValue:e.minValue,maxValue:e.maxValue});async function B(e){var a,n,i,o,t;if(!(null!==e&&void 0!==e&&e.layer&&e.view&&e.field1&&e.field2))throw new r.default("relationship-renderer:missing-parameters","'layer', 'view', 'field1' and 'field2' parameters are required");e.forBinning&&(0,g.p)(e,"relationship-renderer");const s=(0,l.A)((0,l.A)({},e),{},{layer:e.layer,field1:e.field1,field2:e.field2});if(null!==(a=s.symbolType)&&void 0!==a||(s.symbolType="2d"),null!==(n=s.defaultSymbolEnabled)&&void 0!==n||(s.defaultSymbolEnabled=!0),null!==(i=s.classificationMethod)&&void 0!==i||(s.classificationMethod="quantile"),null!==(o=s.numClasses)&&void 0!==o||(s.numClasses=3),null!==(t=s.focus)&&void 0!==t||(s.focus=null),!b.has(s.classificationMethod))throw new r.default("relationship-renderer:invalid-parameters","classification method ".concat(s.classificationMethod," is not supported"));if(s.numClasses<2||s.numClasses>4)throw new r.default("relationship-renderer:invalid-parameters","'numClasses' must be 2, 3 or 4");if(e.focus&&!k.has(e.focus))throw new r.default("relationship-renderer:invalid-parameters","'focus' must be 'HH', 'HL', 'LH', 'LL' or null");const u=e.forBinning?y.Mi:y.J4,c=(0,y.Jg)(s.layer,u,e.forBinning);if(!c)throw new r.default("relationship-renderer:invalid-parameters","'layer' must be one of these types: "+(0,y.Ho)(u).join(", "));const p=null!=s.signal?{signal:s.signal}:null;await c.load(p);const d=c.geometryType,m=s.symbolType.includes("3d");if(s.outlineOptimizationEnabled="polygon"===d&&s.outlineOptimizationEnabled,s.sizeOptimizationEnabled=("point"===d||"multipoint"===d||"polyline"===d)&&s.sizeOptimizationEnabled,"mesh"===d)s.symbolType="3d-volumetric",s.colorMixMode=s.colorMixMode||"replace",s.edgesType=s.edgesType||"none";else{if("3d-volumetric-uniform"===s.symbolType&&"point"!==d)throw new r.default("relationship-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(m&&"polygon"===d)throw new r.default("relationship-renderer:not-supported","3d symbols are not supported for polygon layers");if(s.symbolType.includes("3d-volumetric")&&(!s.view||"3d"!==s.view.type))throw new r.default("relationship-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'")}const{field1:f,field2:w}=s,v=[f.field,w.field];f.normalizationField&&v.push(f.normalizationField),w.normalizationField&&v.push(w.normalizationField);const S=(0,h.MH)(c,v,"relationship-renderer:invalid-parameters");if(S)throw S;return(0,l.A)((0,l.A)({},s),{},{layer:c})}function T(e,a){const n=(0,o.clone)(S[e]);return(0,w.flatten2DArray)(n,a)}function M(e,a,n,l){const{field:i,normalizationField:r}=e,{field:o,normalizationField:t}=a,s=n.map((e=>[e.minValue,e.maxValue])),u=l.map((e=>[e.minValue,e.maxValue])),c=s.length,p=z[c];return"\n  var field1 = $feature['".concat(i,"'];\n  var field2 = $feature['").concat(o,"'];\n  var hasNormField1 = ").concat(r?"true":"false",";\n  var hasNormField2 = ").concat(t?"true":"false",";\n  var normField1 = ").concat(r?"$feature['".concat(r,"']"):"null",";\n  var normField2 = ").concat(t?"$feature['".concat(t,"']"):"null",";\n\n  if (\n    IsEmpty(field1) ||\n    IsEmpty(field2) ||\n    (hasNormField1 && (IsEmpty(normField1) || normField1 == 0)) ||\n    (hasNormField2 && (IsEmpty(normField2) || normField2 == 0))\n  ) {\n    return null;\n  }\n\n  var value1 = IIf(hasNormField1, (field1 / normField1), field1);\n  var value2 = IIf(hasNormField2, (field2 / normField2), field2);\n\n  var breaks1 = ").concat(JSON.stringify(s),";\n  var breaks2 = ").concat(JSON.stringify(u),";\n  var classCodes = ").concat(JSON.stringify(p),";\n\n  function getClassCode(value, breaks) {\n    var code = null;\n\n    for (var i in breaks) {\n      var info = breaks[i];\n      if (value >= info[0] && value <= info[1]) {\n        code = classCodes[i];\n        break;\n      }\n    }\n\n    return code;\n  }\n\n  var code1 = getClassCode(value1, breaks1);\n  var code2 = getClassCode(value2, breaks2);\n\n  var classValue = IIf(IsEmpty(code1) || IsEmpty(code2), null, code1 + code2);\n  return classValue;\n  ")}async function x(e,a,n){var i;const o=await(0,t.ud)("esri/smartMapping/t9n/smartMapping"),{basemap:p,classificationMethod:d,field1:f,field2:g,focus:y,numClasses:v,signal:b}=e,k=e.layer,S=a.classBreakInfos,z=n.classBreakInfos;if(v!==S.length||S.length!==z.length)throw new r.default("relationship-renderer:error","incompatible class breaks");const C=function(e,a){return T(e,a).map((e=>({value:e,count:0})))}(v,y),B=M(e.field1,e.field2,S,z),x=(await async function(e){let a=e.relationshipScheme,n=null,l=null;const i=await(0,h.Ib)(e.basemap,e.view);if(n=null!=i.basemapId?i.basemapId:null,l=null!=i.basemapTheme?i.basemapTheme:null,a)return{scheme:(0,w.cloneScheme)(a),basemapId:n,basemapTheme:l};const r=(0,w.getSchemes)({basemapTheme:l,geometryType:e.geometryType,theme:e.theme,worldScale:e.worldScale,view:e.view});return r&&(a=r.primaryScheme,n=r.basemapId,l=r.basemapTheme),{scheme:a,basemapId:n,basemapTheme:l}}({basemap:p,geometryType:k.geometryType,theme:"default",relationshipScheme:e.relationshipScheme,worldScale:!(null===(i=e.symbolType)||void 0===i||!i.includes("3d-volumetric")),view:e.view})).scheme,F=await(0,m.createRenderer)({layer:k,basemap:p,valueExpression:B,valueExpressionTitle:o.relationship.legendTitle,numTypes:-1,sortEnabled:!1,defaultSymbolEnabled:e.defaultSymbolEnabled,typeScheme:(0,l.A)({colors:(0,w.getColors)(x,v,y)},x),statistics:{uniqueValueInfos:C},legendOptions:e.legendOptions,outlineOptimizationEnabled:e.outlineOptimizationEnabled,sizeOptimizationEnabled:e.sizeOptimizationEnabled,symbolType:e.symbolType,colorMixMode:e.colorMixMode,edgesType:e.edgesType,filter:e.filter,view:e.view,signal:b}),I=F.renderer,L=I.uniqueValueInfos,E=o.relationship;for(const l of null!==L&&void 0!==L?L:[])l.label=E[l.value];const D=new s.default({type:"relationship",classificationMethod:d,numClasses:v,focus:y,field1:new c.K({field:f.field,normalizationField:f.normalizationField,label:f.label,classBreakInfos:S.map((e=>{let{minValue:a,maxValue:n}=e;return new u.n({minValue:a,maxValue:n})}))}),field2:new c.K({field:g.field,normalizationField:g.normalizationField,label:g.label,classBreakInfos:z.map((e=>{let{minValue:a,maxValue:n}=e;return new u.n({minValue:a,maxValue:n})}))})});return I.authoringInfo=D,{renderer:I,classBreaks:{field1:a,field2:n},uniqueValueInfos:F.uniqueValueInfos,relationshipScheme:x,basemapId:F.basemapId,basemapTheme:F.basemapTheme}}async function F(e){const{layer:a,classificationMethod:n,field1:l,field2:i,numClasses:o,filter:t,view:s,signal:u}=e,c={layer:a,classificationMethod:n,field:l.field,normalizationField:l.normalizationField,normalizationType:l.normalizationField?"field":null,minValue:l.minValue,maxValue:l.maxValue,analyzeData:!(null!=l.minValue&&null!=l.maxValue),numClasses:o,filter:t,view:s,signal:u},p={layer:a,classificationMethod:n,field:i.field,normalizationField:i.normalizationField,normalizationType:i.normalizationField?"field":null,minValue:i.minValue,maxValue:i.maxValue,analyzeData:!(null!=i.minValue&&null!=i.maxValue),numClasses:o,filter:t,view:s,signal:u},[d,m]=await Promise.all([(0,h.Pv)(c),(0,h.Pv)(p)]);if(!d||!m)throw new r.default("relationship-renderer:error","error when calculating class breaks");return{field1:d.result,field2:m.result}}async function I(e){var a;const n=await async function(e){var a;if(null===e||void 0===e||!e.renderer||!e.numClasses)throw new r.default("update-relationship-renderer:missing-parameters","'renderer' and 'numClasses' parameters are required");const{field1:n,field2:l,renderer:i,numClasses:o,colors:t}=e,s=o**2;if((n||l)&&!(n&&l&&n.field&&l.field))throw new r.default("update-relationship-renderer:missing-parameters","'field1' and 'field2' parameters are required");if(n&&!n.classBreakInfos||l&&!l.classBreakInfos)throw new r.default("update-relationship-renderer:missing-parameters","'field1.classBreakInfos' and 'field2.classBreakInfos' are required");if(!i.authoringInfo)throw new r.default("update-relationship-renderer:missing-parameters","'renderer.authoringInfo' is required");if((null===(a=i.uniqueValueInfos)||void 0===a?void 0:a.length)!==s)throw new r.default("update-relationship-renderer:invalid-parameters","Renderer must have ".concat(s," unique value infos to support ").concat(o," classes"));if(t&&t.length!==s)throw new r.default("update-relationship-renderer:invalid-parameters","The scheme must have ".concat(s," colors"));return e}(e),{field1:l,field2:o,renderer:t,numClasses:p,focus:d,colors:m}=n,f=t.clone();f.valueExpression=M(l,o,l.classBreakInfos,o.classBreakInfos);const h=null!==(a=f.uniqueValueInfos)&&void 0!==a?a:[];if(function(e,a,n){const l=T(a,n);e.sort(((e,a)=>{const n=l.indexOf(e.value),i=l.indexOf(a.value);let r=0;return n<i?r=-1:n>i&&(r=1),r}))}(h,p,d),m){const e=(0,i.Iy)(m,m.length);h.forEach(((a,n)=>(0,v.dt)(a.symbol,e[n])))}return function(e,a){var n;null!==(n=e.authoringInfo)&&void 0!==n||(e.authoringInfo=new s.default);const l=e.authoringInfo;l.numClasses=a.numClasses,l.focus=a.focus||null,l.focus||delete l.focus;const{field1:i,field2:r}=a;l.field1=new c.K({field:i.field,normalizationField:i.normalizationField,label:i.label,classBreakInfos:i.classBreakInfos.map((e=>new u.n(C(e))))}),l.field2=new c.K({field:r.field,normalizationField:r.normalizationField,label:r.label,classBreakInfos:r.classBreakInfos.map((e=>new u.n(C(e))))}),e.authoringInfo=l}(f,n),f}async function L(e){const a=await B(e),{field1:n,field2:l}=await F(a);return x(a,n,l)}async function E(e){const{creatorParameters:a,view:n,signal:i,filter:o,renderer:t}=await async function(e){const a="regenerate-relationship-renderer";await(0,f.AC)(e,a);const n=await(0,f.mE)(e),i=(0,f.UJ)(n);if(!i||!["relationship","relationship-size"].includes(i))throw new r.default("".concat(a,":invalid-parameters"),"Renderer is invalid");const{layer:o,forBinning:t,filter:s,view:u,signal:c}=e,p=(0,f.DW)(n),d=(0,f.Rv)(n),{field1:m,field2:h,classificationMethod:g,focus:y,numClasses:w}=n.authoringInfo,v={field:m.field,normalizationField:m.normalizationField,label:m.label},b={field:h.field,normalizationField:h.normalizationField,label:h.label},k=await B({layer:o,field1:v,field2:b,classificationMethod:g,numClasses:w,focus:y,outlineOptimizationEnabled:p,sizeOptimizationEnabled:d,forBinning:t,filter:s,view:u,signal:c});return(0,l.A)((0,l.A)({},e),{},{creatorParameters:k,renderer:n})}(e),{layer:s,field1:u,field2:c,numClasses:m,focus:g,outlineOptimizationEnabled:y,sizeOptimizationEnabled:w}=a,{field1:v,field2:b}=await F(a),[k,S,z]=await Promise.all([I({field1:(0,l.A)((0,l.A)({},u),{},{classBreakInfos:v.classBreakInfos}),field2:(0,l.A)((0,l.A)({},c),{},{classBreakInfos:b.classBreakInfos}),renderer:t,numClasses:m,focus:g}),y?(0,p.A)({layer:s,view:n,signal:i,filter:o}).catch(h.ou):null,w?(0,d.default)({layer:s,view:n,signal:i,filter:o}).catch(h.ou):null]);return(0,f.ke)(k,null===S||void 0===S?void 0:S.visualVariables,f._i),(0,f.ke)(k,null===z||void 0===z?void 0:z.minSize,f.kc),{renderer:k}}},29857:(e,a,n)=>{n.r(a),n.d(a,{default:()=>k});var l=n(89379),i=n(53986),r=n(50076),o=n(68002),t=n(16525),s=n(90494),u=n(11563);const c=["layer"],p=500,d=1e8,m=1280,f=12,h=30,g=15;async function y(e){const{view:a,sampleSize:n}=e;if(!e||!e.layer)throw new r.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!a)throw new r.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,s.p)(e,"scale-range");const{layer:o}=e,t=(0,i.A)(e,c),d=e.forBinning?u.Mi:u.J4,m=(0,u.Jg)(o,d,e.forBinning);if(!m)throw new r.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,u.Ho)(d).join(", "));const f=(0,l.A)({layerAdapter:m},t);f.sampleSize=n||p,await(null===a||void 0===a?void 0:a.when());const h=null!=f.signal?{signal:f.signal}:null;return await m.load(h),f}function w(e,a,n){var l,i;const r=function(e,a){const n=f,l=m/4,i=h,r=m/4,o=g,t=m/2;let s=0,u=0,c=0,p=0;switch(e){case"point":case"multipoint":{var d,y;const e=a;s=null!==(d=e.avgMinDistance)&&void 0!==d?d:0,u=n,c=null!==(y=e.minDistance)&&void 0!==y?y:0,p=l;break}case"polyline":{var w,v;const e=a;s=null!==(w=e.avgLength)&&void 0!==w?w:0,u=i,c=null!==(v=e.minLength)&&void 0!==v?v:0,p=r;break}case"polygon":{var b,k;const e=a;s=null!==(b=e.avgSize)&&void 0!==b?b:0,u=o,c=null!==(k=e.minSize)&&void 0!==k?k:0,p=t;break}}return{resolutionForMinScale:s>0?s/u:null,resolutionForMaxScale:c>0?c/p:null}}(e.geometryType,a),t=(null===n||void 0===n?void 0:n.spatialReference)||e.layer.spatialReference;return{minScale:(0,o.gB)(null!==(l=r.resolutionForMinScale)&&void 0!==l?l:0,t),maxScale:(0,o.gB)(null!==(i=r.resolutionForMaxScale)&&void 0!==i?i:0,t)}}function v(e,a){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const l=e.constraints.effectiveLODs,i=n?l:l.slice().reverse();let r=null;for(const e of i)if(!(n?e.scale>a:e.scale<a)){r=e;break}return r}}function b(e,a,n,l){const{view:i,snapToLOD:o,layerAdapter:t}=e;if(o&&i){const e=v(i,a),l=v(i,n,!1);a=e?e.scale:a,n=l?l.scale:n}if(a<n)throw new r.default("scale-range:invalid","calculated minScale is less than maxScale.");return n>a/2&&(n=Math.floor(n/2)),a>d&&(a=0),"polygon"!==t.geometryType&&(n=0),{minScale:Math.ceil(a),maxScale:Math.floor(n),spatialStatistics:l}}async function k(e){const a=await y(e),{view:n,sampleSize:l,layerAdapter:i,signal:o,filter:s}=a,u=await i.getSampleFeatures({view:n,sampleSize:l,returnGeometry:!0,filter:s,signal:o},"json");if(null===u||void 0===u||!u.length)throw new r.default("scale-range:insufficient-info","No features are available to calculate statistics");const c=await(0,t.A)({features:u,geometryType:i.geometryType}),{minScale:p,maxScale:d}=w(i,c,n);return b(a,p,d,c)}},31650:(e,a,n)=>{n.r(a),n.d(a,{default:()=>B});var l=n(89379),i=n(53986),r=(n(81806),n(50076)),o=n(76931),t=n(68002),s=n(43996),u=n(63040),c=n(29857),p=n(90494),d=n(11563);const m=["layer"],f=1e8,h=1128.497176,g=591657527.591555,y=[10,8,4,2],w=[100,100,60,30],v=[2,1,.75,.5],b=[32,18,12,6],k=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function S(e,a){const{view:n}=e;if(!n)throw new r.default("scale-range:invalid-parameters","'view' is required");const l=a.minScale||f,i=n.constraints&&"effectiveLODs"in n.constraints&&n.constraints.effectiveLODs||k,o=[];for(let r=0;r<i.length;r++){if(i[r].scale>l)continue;const e=Number(r),a=[e-3,e,e+3,e+6];for(const n of a)n>-1&&n<i.length&&o.push(i[n].scale);break}return o.sort(((e,a)=>e-a))}function z(e,a){const{view:n,layerAdapter:l}=e;if(!n)throw new r.default("scale-range:invalid-parameters","'view' is required");const i=l.fullExtent,o=l.minScale||h,s=l.maxScale||g,u=a.minScale||0,c=a.maxScale||0;let p=null!=i?(0,t.X_)(n,i):0;return p=p<o&&p>s?p:0,{scales:[o,s,u,c,p].map(Math.round).sort(((e,a)=>e-a)).filter(((e,a,n)=>!!e&&n.indexOf(e)===a)).filter(((e,a,n)=>!a||Math.abs(e-n[a-1])>5)),fullExtentScale:p}}function C(e,a){const{spatialStatistics:n,minScale:l,maxScale:i}=a;if(!("avgSize"in n)||!n.avgSize)throw new r.default("size-range:insufficient-info","average polygon size is invalid");const t=n.avgSize,{view:c}=e;if(!c)throw new r.default("scale-range:invalid-parameters","'view' is required");const{resolution:p,scale:d}=c,m=p/d,{scales:f,fullExtentScale:h}=z(e,{minScale:l,maxScale:i}),g=[],y=[];return f.forEach(((e,a)=>{const{min:n,max:l}=function(e,a){const n=Math.ceil(e/a);let l=Math.ceil(n/4);l<4?l=4:l>16&&(l=16);const i=5*l;return{min:l,max:i<50?50:i}}(t,m*e),i=f.indexOf(h),r=i>-1&&a>i?2:1;g.push(new u.default({value:e,size:(0,o.PN)(n/r)})),y.push(new u.default({value:e,size:(0,o.PN)(l/r)}))})),{minSize:new s.default({valueExpression:"$view.scale",stops:g}),maxSize:new s.default({valueExpression:"$view.scale",stops:y})}}async function B(e){const a=await async function(e){const{view:a}=e;if(!(e&&a&&e.layer))throw new r.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,p.p)(e,"size-range");const{layer:n}=e,o=(0,i.A)(e,m),t=e.forBinning?d.Mi:d.J4,s=(0,d.Jg)(n,t,e.forBinning);if(!s)throw new r.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,d.Ho)(t).join(", "));const u=(0,l.A)((0,l.A)({layerAdapter:s},o),{},{view:a});await a.when();const c=null!=u.signal?{signal:u.signal}:null;await s.load(c);const f=s.geometryType;if("point"!==f&&"multipoint"!==f&&"polyline"!==f&&"polygon"!==f)throw new r.default("size-range:not-supported","sizeRange is not supported for geometryType: ".concat(f));return u}(e),{view:n,layerAdapter:t,signal:f,filter:h}=a,g=await(0,c.default)({layer:t,view:n,signal:f,filter:h});switch(t.geometryType){case"point":case"multipoint":return function(e,a){const{minScale:n,maxScale:l}=a,i=S(e,{minScale:n,maxScale:l});if(!i.length)throw new r.default("scale-range:insufficient-info","not enough scale values");return{minSize:new s.default({valueExpression:"$view.scale",stops:i.map(((e,a)=>new u.default({value:e,size:(0,o.PN)(y[a])})))}),maxSize:new s.default({valueExpression:"$view.scale",stops:i.map(((e,a)=>new u.default({value:e,size:(0,o.PN)(w[a])})))})}}(a,g);case"polyline":return function(e,a){const{minScale:n,maxScale:l}=a,i=S(e,{minScale:n,maxScale:l});if(!i.length)throw new r.default("scale-range:insufficient-info","not enough scale values");return{minSize:new s.default({valueExpression:"$view.scale",stops:i.map(((e,a)=>new u.default({value:e,size:(0,o.PN)(v[a])})))}),maxSize:new s.default({valueExpression:"$view.scale",stops:i.map(((e,a)=>new u.default({value:e,size:(0,o.PN)(b[a])})))})}}(a,g);case"polygon":return C(a,g);case"mesh":case"multipatch":return null}return null}},38574:(e,a,n)=>{n.r(a),n.d(a,{cloneScheme:()=>w,flatten2DArray:()=>v,flipColors:()=>k,getColors:()=>b,getMatchingSchemes:()=>S,getSchemeByName:()=>g,getSchemes:()=>h,getSchemesByTag:()=>y,getThemes:()=>f});var l=n(89379),i=n(69539),r=n(18690),o=n(53084),t=n(89132),s=n(770),u=n(80791);const c={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},p={lightBasemaps:{primary:"relationship-blue-orange-brown",secondary:["relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green","relationship-blue-red-pink","relationship-blue-green-brightgreen","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal"]},darkBasemaps:{primary:"relationship-blue-green-brightgreen",secondary:["relationship-blue-red-pink","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal","relationship-blue-orange-brown","relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green"]}},d="#aaaaaa",m=(0,s.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features based on relationship between two attributes.",schemes:{point:{light:{common:{noDataColor:d,outline:c.light,size:"8px"},primary:p.lightBasemaps.primary,secondary:p.lightBasemaps.secondary},dark:{common:{noDataColor:d,outline:c.darker,size:"8px"},primary:p.darkBasemaps.primary,secondary:p.darkBasemaps.secondary}},polyline:{light:{common:{noDataColor:d,width:"2px"},primary:p.lightBasemaps.primary,secondary:p.lightBasemaps.secondary},dark:{common:{noDataColor:d,width:"2px"},primary:p.darkBasemaps.primary,secondary:p.darkBasemaps.secondary}},polygon:{light:{common:{noDataColor:d,outline:c.light,fillOpacity:.8},primary:p.lightBasemaps.primary,secondary:p.lightBasemaps.secondary},dark:{common:{noDataColor:d,outline:c.dark,fillOpacity:.8},primary:p.darkBasemaps.primary,secondary:p.darkBasemaps.secondary}}}}}});function f(e){return(0,s.vt)(m,e)}function h(e){const a=(0,s.Fq)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:m.get("default")});if(!a)return;const{schemesInfo:n,basemapId:i,basemapTheme:o}=a,t=(0,l.A)((0,l.A)({},e),{},{basemap:i});return{primaryScheme:T(t,n.primary,n.common),secondarySchemes:n.secondary.map((e=>T(t,e,n.common))).filter(r.Ru),basemapId:i,basemapTheme:o}}function g(e){return(0,s.Ty)(e.name,h(e))}function y(e){return(0,s.YJ)(e.includedTags,e.excludedTags,h(e))}function w(e){if(!e)return;const a=(0,l.A)({},e);return a.colorsForClassBreaks=a.colorsForClassBreaks.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new i.default(e)))))}))),a.tags=[...a.tags],a.noDataColor&&(a.noDataColor=new i.default(a.noDataColor)),"outline"in a&&a.outline&&(a.outline={color:a.outline.color&&new i.default(a.outline.color),width:a.outline.width}),a}function v(e,a){e=(0,o.clone)(e);let n=[];const l=(a||"HH").split(""),i=l[0],r=l[1];"L"===i&&e.reverse();const t="H"===r;return e.forEach((e=>{t&&e.reverse(),n=n.concat(e)})),n}function b(e,a,n){var l;let r;return e.colorsForClassBreaks.some((e=>(e.numClasses===a&&(r=e.colors),!!r))),r=null===(l=r)||void 0===l?void 0:l.map((e=>e.map((e=>new i.default(e))))),r?v(r,n):null}function k(e,a){const n=a?e:w(e);return n.colorsForClassBreaks.forEach((e=>{const a=e.colors.reverse(),n=[];for(let l=0;l<e.numClasses;l++){const e=[];a.forEach((a=>{e.push(a[l])})),n.push(e)}e.colors=n})),n}function S(e){const a=e.theme||"default",n=e.geometryType,l=e.colors,i=e.numClasses,r=m.get(a);if(!r)return[];const o=r.supportedBasemaps,t=[];return o.forEach((e=>{const r=h({theme:a,basemap:e,geometryType:n});if(r){let e=B(r.primaryScheme,l,i);e&&t.push(e),r.secondarySchemes.forEach((a=>{e=B(a,l,i),e&&t.push(e)}))}})),t}function z(e,a,n,l){let i;const r=b(e,n,l);return r&&1===(0,u._t)(a,r)&&(i=e),i}function C(e,a,n,l){let i,r=1;do{i=z(e,a,n,l),i||(e=k(e),r++)}while(!i&&r<=4);return i}function B(e,a,n){return C(e,a,n,"HH")||C(e,a,n,"HL")||C(e,a,n,"LH")||C(e,a,n,"LL")}function T(e,a,n){const l="mesh"!==e.geometryType&&e.worldScale?e.view:null,r=t.A[a],o=e.theme||"default";if(!r)return;const s=o+"/"+e.basemap+"/"+a,c=[];for(const i in r)if("stops"!==i&&"name"!==i&&"tags"!==i){const e=+i,a=r[i];c.push({numClasses:e,colors:a})}switch(e.geometryType){case"point":case"multipoint":{const e=n;return function(e,a){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:M(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),outline:{color:new i.default(e.outline.color),width:e.outline.width},size:a?(0,u._J)(e.size,a):e.size,opacity:e.opacity}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,outline:e.outline,size:e.size},l)}case"polyline":{const e=n;return function(e,a){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:M(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),opacity:e.opacity,width:a?(0,u._J)(e.width,a):e.width}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,width:e.width},l)}case"polygon":{const e=n;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:M(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),outline:{color:new i.default(e.outline.color),width:e.outline.width},opacity:e.opacity}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline})}case"mesh":{const e=n;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:M(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),opacity:e.opacity}}({id:s,name:r.name,tags:r.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity})}}}function M(e){return e.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new i.default(e)))))})))}},80791:(e,a,n)=>{n.d(a,{_J:()=>u,_t:()=>s});var l=n(76931),i=n(42633);const r=i.Np.light,o=i.Np.dark;function t(e,a){return e.r===a.r&&e.g===a.g&&e.b===a.b}function s(e,a){let n=0;if(e.length===a.length){let l=e.every(((e,n)=>t(e,a[n])));l?n=1:(l=e.slice().reverse().every(((e,n)=>t(e,a[n]))),l&&(n=-1))}return n}function u(e,a){return Math.ceil(function(e){const a=e.width,n=e.height;let i=e.pixelSizeAt(e.toMap((0,l.tc)(.5*a,.5*n),{exclude:[]}));if(i<=0&&(i=e.pixelSizeAt(e.toMap((0,l.tc)(.5*a,.95*n),{exclude:[]})),i<=0&&"camera"in e)){const a=e.camera.position.clone();a.z=0,i=2*e.pixelSizeAt(a)}return i}(a)*(0,l.Lz)((0,l.cr)(e)))}}}]);
//# sourceMappingURL=35382.ce571b19.chunk.js.map