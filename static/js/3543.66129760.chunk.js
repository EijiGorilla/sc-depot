"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[3543,63733,87137],{3543:(t,e,i)=>{i.r(e),i.d(e,{default:()=>L});var s=i(35143),o=i(68134),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),l=i(25329),r=i(94126),c=(i(76099),i(63582)),d=i(54761),h=i(28899),u=i(69539),m=i(41568),A=i(38996),w=i(91967);let y=class extends w.default{constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"arrowsToggle",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"capSelect",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"colorPicker",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"stylePicker",void 0),(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"widthInput",void 0),y=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],y);const v=y,p="esri-un-associations",b={divControlsSymbolPicker:"".concat(p,"__div-controls-symbol-picker"),dropdown:"".concat(p,"__dropdown"),dropdownItemLineCap:"".concat(p,"__dropdown-item-line-cap"),dropdownItemLinePattern:"".concat(p,"__dropdown-item-line-pattern"),dropdownSelectedItemLineCap:"".concat(p,"__dropdown-selected-item-line-cap"),dropdownSelectedItemLinePattern:"".concat(p,"__dropdown-selected-item-line-pattern"),dropdownTrigger:"".concat(p,"__dropdown-trigger"),labelAndToggle:"".concat(p,"__label-and-toggle")};let g=class extends l.default{constructor(t,e){super(t,e),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new A.default,this.messages=null,this.showArrows=!1,this.visibleElements=new v,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:t,lineColor:e,lineStyle:i,lineWidth:s,showArrows:o}},visibleElements:n}=this,a=this.lineSymbol;return(0,d.K)("div",{class:b.divControlsSymbolPicker},n.arrowsToggle?this._renderToggle(o,this.showArrows,a,"marker"):void 0,n.capSelect?this._renderLineStylePicker(t,this._lineCapTypes,a,"cap"):void 0,n.colorPicker&&a.color?this._renderColorPicker(e,a.color.toHex(),a,"color"):void 0,n.stylePicker?this._renderLineStylePicker(i,this._lineStyleTypes,a,"style"):void 0,n.widthInput?this._renderNumberInput(s,a.width.toString(),a,"width"):void 0)}loadDependencies(){return(0,r.W)({dropdown:()=>Promise.resolve().then(i.bind(i,24482)),"dropdown-group":()=>Promise.resolve().then(i.bind(i,5368)),"dropdown-item":()=>Promise.resolve().then(i.bind(i,84660)),input:()=>Promise.all([i.e(46870),i.e(38841)]).then(i.bind(i,38841)),"input-number":()=>Promise.all([i.e(46870),i.e(41763)]).then(i.bind(i,41763)),label:()=>Promise.resolve().then(i.bind(i,11839)),switch:()=>Promise.resolve().then(i.bind(i,8989))})}_afterComponentCreate(t){"value"in t&&null!=t.value&&"setNumberValue"in t&&t.setNumberValue({committing:!1,value:t.value,origin:"direct"})}_renderColorPicker(t,e,i,s){return(0,d.K)("calcite-label",{scale:"s"},t,(0,d.K)("calcite-input",{scale:"s",type:"color",value:e,onCalciteInputInput:t=>{const e=t.currentTarget;i.set(s,new u.default(e.value))}}))}_renderLineStylePicker(t,e,i,s){const o="style"===s,n="esri/widgets/UtilityNetworkAssociations/assets/img";return(0,d.K)("calcite-label",{scale:"s"},t,(0,d.K)("calcite-dropdown",{class:b.dropdown,onCalciteDropdownSelect:t=>{const e=t.currentTarget;i.set(s,e.selectedItems[0].label)}},(0,d.K)("div",{class:b.dropdownTrigger,role:"button",slot:"trigger"},(0,d.K)("div",{class:o?b.dropdownSelectedItemLinePattern:b.dropdownSelectedItemLineCap,style:"background-image:url(".concat((0,h.s)("".concat(n,"/line-").concat(o?"patterns":"caps","/").concat(i[s],".png")),")")})),(0,d.K)("calcite-dropdown-group",null,e.map((t=>function(t,e){return(0,d.K)("calcite-dropdown-item",{label:t,selected:i[e]===t},(0,d.K)("div",{class:o?b.dropdownItemLinePattern:b.dropdownItemLineCap,style:"background-image:url(".concat((0,h.s)("".concat(n,"/line-").concat(o?"patterns":"caps","/").concat(t,".png")),")")}))}(t,s))))))}_renderNumberInput(t,e,i,s){return(0,d.K)("calcite-label",{scale:"s"},t,(0,d.K)("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:e,onCalciteInputNumberChange:t=>{const e=t.currentTarget;i.set(s,e.value)}}))}_renderToggle(t,e,i,s){return(0,d.K)("div",{class:b.labelAndToggle},(0,d.K)("calcite-label",{scale:"s"},t),(0,d.K)("calcite-switch",{bind:this,checked:e,onCalciteSwitchChange:t=>{t.currentTarget.checked?i.set(s,new m.default({style:"arrow"})):i.set(s,null)}}))}};(0,s._)([(0,n.MZ)()],g.prototype,"lineSymbol",void 0),(0,s._)([(0,n.MZ)(),(0,c.G)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],g.prototype,"messages",void 0),(0,s._)([(0,n.MZ)()],g.prototype,"showArrows",void 0),(0,s._)([(0,n.MZ)({type:v,nonNullable:!0})],g.prototype,"visibleElements",void 0),g=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],g);const _=g;var S=i(87137);let k=class extends w.default{constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=new v,this.structuralAttachmentAssociationsSettings=new v}};(0,s._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],k.prototype,"maxAllowableAssociationsSlider",void 0),(0,s._)([(0,n.MZ)({type:v,nonNullable:!0})],k.prototype,"connectivityAssociationsSettings",void 0),(0,s._)([(0,n.MZ)({type:v,nonNullable:!0})],k.prototype,"structuralAttachmentAssociationsSettings",void 0),k=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations.VisibleElements")],k);const C=k,M="esri-un-associations",x={action:"".concat(M,"__action"),actionRefresh:"".concat(M,"__action-refresh"),blockContent:"".concat(M,"__block-content"),blockSectionSettings:"".concat(M,"__block-section-settings"),combobox:"".concat(M,"__combobox"),comboboxItem:"".concat(M,"__combobox-item"),divControlsMain:"".concat(M,"__div-controls-main"),label:"".concat(M,"__label"),labelAndCombobox:"".concat(M,"__label-and-combobox"),labelAndSlider:"".concat(M,"__label-and-slider"),labelAndToggle:"".concat(M,"__label-and-toggle"),panel:"".concat(M,"__panel"),slider:"".concat(M,"__slider"),statusIconContainer:"".concat(M,"__status-icon-container"),statusIconWarning:"".concat(M,"__status-icon-warning"),switch:"".concat(M,"__switch"),switchContainer:"".concat(M,"__switch-container"),widgetContainer:"".concat(M,"__widget-container")};let f=class extends l.default{constructor(t,e){super(t,e),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new S.default,this.visibleElements=new C}initialize(){this.addHandles([(0,o.watch)((()=>{var t;return[null===(t=this.view)||void 0===t?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]}),(()=>{!0===this.autoRefreshAssociations&&(!0===this.showAssociationsEnabled?this.viewModel.showAssociations():this.viewModel.removeAssociations())})),(0,o.watch)((()=>{var t;return null===(t=this.view)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.utilityNetworks}),(t=>{null===t||void 0===t||t.items.forEach((async(t,e)=>{t.loaded||await t.load(),0===e&&(this.utilityNetwork=t)}))}),o.initial),(0,o.on)((()=>{var t;return null===(t=this.view)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.utilityNetworks}),"change",(t=>{const e=t.target;t.added.forEach((async t=>{t.loaded||await t.load()})),t.removed.some((t=>{var e;return t.layerUrl===(null===(e=this.utilityNetwork)||void 0===e?void 0:e.layerUrl)}))&&(this.utilityNetwork=null),this.utilityNetwork=e.length?e.getItemAt(0):null}))])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t,e;return null!==(t=null===(e=this.messages)||void 0===e?void 0:e.widgetLabel)&&void 0!==t?t:""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return(0,d.K)("div",{class:x.widgetContainer},(0,d.K)("calcite-block",{class:x.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return(0,r.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),block:()=>i.e(75502).then(i.bind(i,75502)),"block-section":()=>i.e(23948).then(i.bind(i,23948)),icon:()=>Promise.resolve().then(i.bind(i,16702)),combobox:()=>Promise.all([i.e(65641),i.e(64880)]).then(i.bind(i,64880)),"combobox-item":()=>i.e(73438).then(i.bind(i,73438)),label:()=>Promise.resolve().then(i.bind(i,11839)),notice:()=>i.e(12261).then(i.bind(i,12261)),panel:()=>Promise.resolve().then(i.bind(i,32647)),slider:()=>i.e(83566).then(i.bind(i,83566)),switch:()=>Promise.resolve().then(i.bind(i,8989)),tooltip:()=>i.e(31748).then(i.bind(i,31748))})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.currentTarget.checked}_getLoadErrorMessagesAsNotices(t,e){return(0,d.K)("calcite-notice",{closable:!1,key:"error-notice-".concat(e),kind:"warning",open:!0,scale:"s"},(0,d.K)("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.currentTarget.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:e}}=this;"ready"!==e&&"warning"!==e||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:e}}=this;if(e)return(0,d.K)("calcite-block-section",{class:x.blockSectionSettings,text:t},(0,d.K)(_,{id:"".concat(this.id,"-symbol-picker-connectivity"),lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:e}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return(0,d.K)("div",{class:x.labelAndToggle,key:"connectivityAssociationsToggleDiv"},(0,d.K)("calcite-label",{class:x.label},t),(0,d.K)("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderComboboxItem(t){let{heading:e,value:i,selected:s}=t;return(0,d.K)("calcite-combobox-item",{class:x.comboboxItem,heading:e,selected:s,textLabel:e,value:i})}_renderContent(){const{viewModel:{loadErrors:t,state:e}}=this;return"disabled"===e?(0,d.K)("div",{class:x.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):(0,d.K)("calcite-panel",{class:x.panel,disabled:"loading"===e},(0,d.K)("div",{class:x.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,e,i){return(0,d.K)("div",{key:t,slot:"control"},(0,d.K)("calcite-action",{id:e,loading:!0,text:i}),(0,d.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:e},(0,d.K)("span",null,i)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:e}}=this;if(e)return(0,d.K)("div",{class:x.labelAndSlider,key:"maxAllowableAssociationsSliderDiv"},(0,d.K)("calcite-label",{class:x.label},t),(0,d.K)("calcite-slider",{bind:this,class:x.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:e},viewModel:{state:i}}=this,s="".concat(this.id,"-refresh-action");if("disabled"!==i)return(0,d.K)("div",{class:x.actionRefresh,slot:"control"},(0,d.K)("calcite-action",{bind:this,class:x.action,icon:"refresh-f",id:s,loading:"loading"===i,onclick:this._refreshAssociations,text:t}),(0,d.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:s},(0,d.K)("span",null,"loading"===i?e:t)))}_renderSettingsPane(){var t,e;const{messagesCommon:{settings:i},visibleElements:{maxAllowableAssociationsSlider:s,connectivityAssociationsSettings:o,structuralAttachmentAssociationsSettings:n}}=this,a=null===(t=(null===(e=this.view)||void 0===e?void 0:e.map).utilityNetworks)||void 0===t?void 0:t.items;if(1!==(null===a||void 0===a?void 0:a.length)||s||o||n)return(0,d.K)("calcite-block",{class:x.blockContent,collapsible:!0,heading:i},(0,d.K)("div",{class:x.divControlsMain},this._renderUtilityNetworkSettings(),this._renderMaxAllowableAssociationsSlider()),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:e},viewModel:{state:i}}=this,s="".concat(this.id,"-show-associations-switch");if("disabled"!==i)return"loading"===i?this._renderLoadingAction("loadingActionDiv","".concat(this.id,"-loading-action"),e):(0,d.K)("div",{class:x.switchContainer,key:"switchDiv",slot:"control"},(0,d.K)("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:x.switch,id:s,onCalciteSwitchChange:this._showAssociationsSwitchChange}),(0,d.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:s},(0,d.K)("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:e,state:i}}=this;switch(i){case"disabled":return this._renderWarningIcon("statusDiv","".concat(this.id,"-disabled-icon"),null);case"warning":return this._renderWarningIcon("statusDiv","".concat(this.id,"-warning-icon"),e);case"executing":return this._renderLoadingAction("executingActionDiv","".concat(this.id,"-executing-action"),t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:e}}=this;if(e)return(0,d.K)("calcite-block-section",{class:x.blockSectionSettings,text:t},(0,d.K)(_,{id:"".concat(this.id,"-symbol-picker-structural-attachment"),lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:e}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return(0,d.K)("div",{class:x.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},(0,d.K)("calcite-label",{class:x.label},t),(0,d.K)("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_renderUtilityNetworkSettings(){var t,e;const{messages:{input:{utilityNetwork:i}}}=this,s=null===(t=(null===(e=this.view)||void 0===e?void 0:e.map).utilityNetworks)||void 0===t?void 0:t.items;if(1===(null===s||void 0===s?void 0:s.length))return null;const o=null===s||void 0===s?void 0:s.map((t=>{var e;const i=t.title,s=t.layerUrl,o=t.layerUrl===(null===(e=this.utilityNetwork)||void 0===e?void 0:e.layerUrl);return this._renderComboboxItem({heading:i,value:s,selected:o})}));return(0,d.K)("div",{class:x.labelAndCombobox,key:"utilityNetworkComboboxDiv"},(0,d.K)("calcite-label",{class:x.label},i),(0,d.K)("calcite-combobox",{class:x.combobox,clearDisabled:!0,label:"",maxItems:3,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:t=>{const e=null===s||void 0===s?void 0:s.find((e=>e.layerUrl===t.currentTarget.value));this.utilityNetwork=e}},o))}_showAssociationsSwitchChange(t){let{currentTarget:e}=t;const{viewModel:i}=this;this.showAssociationsEnabled=e.checked,this._associationsOptionsEnabled=e.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.currentTarget.checked}_renderWarningIcon(t,e,i){return i?(0,d.K)("div",{class:x.statusIconContainer,key:t,slot:"control"},(0,d.K)("calcite-icon",{class:x.statusIconWarning,icon:"exclamation-mark-triangle",id:e,scale:"s"}),(0,d.K)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:e},(0,d.K)("span",null,i))):(0,d.K)("div",{class:x.statusIconContainer,key:t,slot:"control"},(0,d.K)("calcite-icon",{class:x.statusIconWarning,icon:"exclamation-mark-triangle",id:e,scale:"s"}))}};(0,s._)([(0,n.MZ)()],f.prototype,"autoRefreshAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"connectivityAssociationsLineSymbol",null),(0,s._)([(0,n.MZ)()],f.prototype,"icon",null),(0,s._)([(0,n.MZ)()],f.prototype,"includeConnectivityAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"includeStructuralAttachmentAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"label",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociations",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociationsSliderMax",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociationsSliderMin",null),(0,s._)([(0,n.MZ)()],f.prototype,"maxAllowableAssociationsSliderStep",null),(0,s._)([(0,n.MZ)(),(0,c.G)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],f.prototype,"messages",void 0),(0,s._)([(0,n.MZ)(),(0,c.G)("esri/t9n/common")],f.prototype,"messagesCommon",void 0),(0,s._)([(0,n.MZ)()],f.prototype,"showArrowsConnectivity",null),(0,s._)([(0,n.MZ)()],f.prototype,"showArrowsStructuralAttachment",null),(0,s._)([(0,n.MZ)()],f.prototype,"showAssociationsEnabled",null),(0,s._)([(0,n.MZ)()],f.prototype,"structuralAttachmentAssociationsLineSymbol",null),(0,s._)([(0,n.MZ)()],f.prototype,"utilityNetwork",null),(0,s._)([(0,n.MZ)()],f.prototype,"view",null),(0,s._)([(0,n.MZ)({type:S.default})],f.prototype,"viewModel",void 0),(0,s._)([(0,n.MZ)({type:C,nonNullable:!0})],f.prototype,"visibleElements",void 0),f=(0,s._)([(0,a.$)("esri.widgets.UtilityNetworkAssociations")],f);const L=f},63733:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});var s=i(35143),o=i(46053),n=(i(81806),i(76460),i(47249),i(85842)),a=i(5364),l=i(25515),r=i(65624),c=i(5682),d=i(64519),h=i(731);let u=class extends((0,r.dM)((0,c.j)(l.default))){constructor(t){super(t),this.elevationInfo=null,this.graphics=new d.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,e){return super.on(t,e)}graphicChanged(t){this.emit("graphic-update",t)}};(0,s._)([(0,o.MZ)({type:h.A})],u.prototype,"elevationInfo",void 0),(0,s._)([(0,o.MZ)((0,a.C)(d.Y,"graphics"))],u.prototype,"graphics",void 0),(0,s._)([(0,o.MZ)({type:["show","hide"]})],u.prototype,"listMode",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],u.prototype,"type",void 0),(0,s._)([(0,o.MZ)({constructOnly:!0})],u.prototype,"internal",void 0),u=(0,s._)([(0,n.$)("esri.layers.GraphicsLayer")],u);const m=u},69120:(t,e,i)=>{function s(t,e,i){if(!e||null===t||void 0===t||!t.map)return;const{map:s}=t,o=s.layers.find((t=>t===e));o||s.add(e,i),o&&null!=i&&s.layers.reorder(o,i)}function o(t,e){const i="subtype-sublayer"===(null===e||void 0===e?void 0:e.type)?e.parent:e;return t.allLayerViews.find((t=>{const e=t.layer;return e===i||"sublayers"in e&&null!=e.sublayers&&e.sublayers.includes(i)}))}i.d(e,{Y:()=>s,i:()=>o})},87137:(t,e,i)=>{i.r(e),i.d(e,{default:()=>_});var s=i(35143),o=i(39356),n=(i(11265),i(91967)),a=i(19276),l=i(50076),r=i(76460),c=i(68134),d=i(46053),h=(i(81806),i(47249),i(85842)),u=i(19451),m=i(63733),A=i(41568),w=i(38996),y=i(69120),v=i(38042),p=i(63860);const b=-2147208504;let g=class extends n.default{constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new u.U,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new w.default({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new a.default,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new w.default({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await(0,p.ud)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then((()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([(0,c.watch)((()=>[this.view,this.utilityNetwork]),(async()=>{var t,e;const{loadErrors:i,messages:{info:{noUtilityNetwork:s,noView:o}}}=this;this._initialValidationsFinished=!1,i.removeAll();let n=!1,a=!1;this.removeAssociations(),"2d"===(null===(t=this.view)||void 0===t?void 0:t.type)?((0,y.Y)(this.view,this._internalGraphicsLayerConnectivity),(0,y.Y)(this.view,this._internalGraphicsLayerStructuralAttachment),n=!0):(this.loadErrors.push(o),r.A.getLogger(this).error(new l.default("utilityNetworkAssociations:missing-property",o))),"utility"===(null===(e=this.utilityNetwork)||void 0===e?void 0:e.type)?a=!0:(this.loadErrors.push(s),r.A.getLogger(this).error(new l.default("utilityNetworkAssociations:missing-property",s))),n&&a&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0}),{initial:!0}),(0,c.watch)((()=>{var t;return[null===(t=this.view)||void 0===t?void 0:t.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]}),(async()=>{var t;(null===(t=this.view)||void 0===t?void 0:t.stationary)&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()})),(0,c.watch)((()=>[this.showArrowsConnectivity]),(()=>{const t=this.connectivityAssociationsLineSymbol.clone();t.marker=null,this.showArrowsConnectivity&&(t.marker=new A.default({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const e of this._internalGraphicsLayerConnectivity.graphics)e.symbol=t})),(0,c.watch)((()=>[this.showArrowsStructuralAttachment]),(()=>{const t=this.structuralAttachmentAssociationsLineSymbol.clone();t.marker=null,this.showArrowsStructuralAttachment&&(t.marker=new A.default({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const e of this._internalGraphicsLayerStructuralAttachment.graphics)e.symbol=t})),(0,c.watch)((()=>{const{cap:t,color:e,style:i,width:s,marker:o}=this.connectivityAssociationsLineSymbol;return[t,e,i,s,o]}),(()=>{const t=this.connectivityAssociationsLineSymbol.clone();for(const e of this._internalGraphicsLayerConnectivity.graphics)e.symbol=t;this.showArrowsConnectivity=!1,t.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,t.marker=new A.default({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))})),(0,c.watch)((()=>{const{cap:t,color:e,style:i,width:s,marker:o}=this.structuralAttachmentAssociationsLineSymbol;return[t,e,i,s,o]}),(()=>{const t=this.structuralAttachmentAssociationsLineSymbol.clone();for(const e of this._internalGraphicsLayerStructuralAttachment.graphics)e.symbol=t;this.showArrowsStructuralAttachment=!1,t.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,t.marker=new A.default({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))})),(0,v.oQ)(t)])}))}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":""!==this.executionError?"warning":this._initialValidationsFinished?"ready":"loading"}get utilityNetwork(){return this.utilityNetwork}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}get view(){return this.view}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){var t,e,i,s;const{messages:{info:{maxAllowableAssociationsExceeded:n,noAssociationsFound:a,noAssociationTypeSpecified:r}},utilityNetwork:c}=this;this._set("executionError","");const d={extent:null===(t=this.view)||void 0===t?void 0:t.extent,gdbVersion:null===(e=this.utilityNetwork)||void 0===e?void 0:e.gdbVersion,maxGeometryCount:this.maxAllowableAssociations,moment:null===(i=this.utilityNetwork)||void 0===i?void 0:i.historicMoment,outSpatialReference:null===(s=this.view)||void 0===s?void 0:s.spatialReference.clone(),returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations};this._updatingHandles.addPromise(null===c||void 0===c?void 0:c.synthesizeAssociationGeometries(d).then((t=>{let e=[],i=[];return null!==t&&void 0!==t&&t.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",n)):0===(null===t||void 0===t?void 0:t.associations.length)?(this.removeAssociations(),void this._set("executionError",a)):void(t&&(e=null===t||void 0===t?void 0:t.associations.filter((t=>{let{associationType:e}=t;return"connectivity"===e})).map((t=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new A.default({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new o.default({geometry:t.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol})))),i=t.associations.filter((t=>{let{associationType:e}=t;return"attachment"===e})).map((t=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new A.default({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new o.default({geometry:t.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol})))),this._internalGraphicsLayerConnectivity.removeAll(),e.length>0&&this._internalGraphicsLayerConnectivity.addMany(e),this._internalGraphicsLayerStructuralAttachment.removeAll(),i.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(i)))}),(t=>{var e;let i="Error: "+t;t instanceof l.default&&null!==(e=t.details)&&void 0!==e&&e.raw&&(i=t.details.raw.extendedCode===b?r:t.details.message),this._set("executionError",i)})))}_createInternalGraphicsLayer(t){return new m.default({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&(null===(t=this.view)||void 0===t?void 0:t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};(0,s._)([(0,d.MZ)()],g.prototype,"_initialValidationsFinished",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"autoRefreshAssociations",void 0),(0,s._)([(0,d.MZ)({type:w.default,nonNullable:!0})],g.prototype,"connectivityAssociationsLineSymbol",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],g.prototype,"executionError",void 0),(0,s._)([(0,d.MZ)({type:Boolean,value:!0})],g.prototype,"includeConnectivityAssociations",null),(0,s._)([(0,d.MZ)({type:Boolean,value:!0})],g.prototype,"includeStructuralAttachmentAssociations",null),(0,s._)([(0,d.MZ)()],g.prototype,"loadErrors",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"maxAllowableAssociations",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"messages",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"showAssociationsEnabled",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"showArrowsConnectivity",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"showArrowsStructuralAttachment",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],g.prototype,"state",null),(0,s._)([(0,d.MZ)({type:w.default,nonNullable:!0})],g.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"utilityNetwork",null),(0,s._)([(0,d.MZ)()],g.prototype,"view",null),g=(0,s._)([(0,h.$)("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],g);const _=g}}]);
//# sourceMappingURL=3543.66129760.chunk.js.map