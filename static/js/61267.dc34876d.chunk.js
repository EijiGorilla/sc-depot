"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[61267],{13023:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var a,l=t(35143),i=t(42553),r=t(46053),o=(t(81806),t(76460),t(47249),t(85842)),s=t(76797),u=t(89189),c=t(65215),d=t(19902),f=t(15359);const m={base:u.default,key:"type",typeMap:{extent:s.default,polygon:c.default}};let h=a=class extends i.A{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(null==e||0===e.length)return[];const n=new Map;e.forEach((e=>{if(!e.dimensionName)return;let t,a;if(Array.isArray(e.values[0])){const n=e.values;t=n[0][0],a=n[e.values.length-1][1]}else{const n=e.values;t=n[0],a=n[e.values.length-1]}if(n.has(e.dimensionName)){const l=n.get(e.dimensionName);l[0]=Math.min(t,l[0]),l[1]=Math.max(a,l[1])}else n.set(e.dimensionName,[t,a])}));const t=[];for(const a of n)t.push({name:a[0],extent:a[1]});return t}get variables(){const{subsetDefinitions:e}=this;if(null==e||0===e.length)return[];const n=new Set;return e.forEach((e=>{e.variableName&&n.add(e.variableName)})),[...n]}clone(){var e;const n=null===(e=this.subsetDefinitions)||void 0===e?void 0:e.map((e=>e.clone())),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new a({areaOfInterest:t,subsetDefinitions:n})}};(0,l._)([(0,r.MZ)({types:m,json:{read:d.fromJSON,write:!0}})],h.prototype,"areaOfInterest",void 0),(0,l._)([(0,r.MZ)({readOnly:!0})],h.prototype,"dimensions",null),(0,l._)([(0,r.MZ)({readOnly:!0})],h.prototype,"variables",null),(0,l._)([(0,r.MZ)({type:[f.default],json:{write:!0}})],h.prototype,"subsetDefinitions",void 0),h=a=(0,l._)([(0,o.$)("esri.layers.support.MultidimensionalSubset")],h);const v=h},15498:(e,n,t)=>{t.d(n,{_:()=>r,t:()=>o});var a=t(76460);const l=()=>a.A.getLogger("esri.rest.support.generateRendererUtils");function i(e,n){return Number(e.toFixed(n))}function r(e){const n=c(e),t=[],a=n.uniqueValues.length;for(let l=0;l<a;l++){const e=n.uniqueValues[l],a=n.valueFrequency[l],i=e.toString();t.push({value:e,count:a,label:i})}return{uniqueValues:t}}function o(e,n){const{normalizationTotal:t}=e;return{classBreaks:s(e,n),normalizationTotal:t}}function s(e,n){var t;const a=e.definition,{classificationMethod:l,normalizationType:r,definedInterval:o}=a,s=null!==(t=a.breakCount)&&void 0!==t?t:1,f=[];let m=e.values;if(0===m.length)return[];m=m.sort(((e,n)=>e-n));const[h,v]=null!==n&&void 0!==n?n:[m.at(0),m.at(-1)];if("equal-interval"===l)if(m.length>=s){const e=(v-h)/s;let n=h;for(let t=1;t<s;t++){const a=i(h+t*e,6);f.push({minValue:n,maxValue:a,label:u(n,a,r)}),n=a}f.push({minValue:n,maxValue:v,label:u(n,v,r)})}else m.forEach((e=>{f.push({minValue:e,maxValue:e,label:u(e,e,r)})}));else if("natural-breaks"===l){const n=c(m),t=e.valueFrequency||n.valueFrequency,a=d(n.uniqueValues,t,s);let l=h;for(let e=1;e<s;e++)if(n.uniqueValues.length>e){const t=i(n.uniqueValues[a[e]],6);f.push({minValue:l,maxValue:t,label:u(l,t,r)}),l=t}f.push({minValue:l,maxValue:v,label:u(l,v,r)})}else if("quantile"===l)if(m.length>=s&&h!==v){let e=h,n=Math.ceil(m.length/s),t=0;for(let a=1;a<s;a++){let l=n+t-1;l>m.length&&(l=m.length-1),l<0&&(l=0),f.push({minValue:e,maxValue:m[l],label:u(e,m[l],r)}),e=m[l],t+=n,n=Math.ceil((m.length-t)/(s-a))}f.push({minValue:e,maxValue:v,label:u(e,v,r)})}else{let e=-1;for(let n=0;n<m.length;n++){const t=m[n];t!==e&&(e=t,f.push({minValue:e,maxValue:t,label:u(e,t,r)}),e=t)}}else if("standard-deviation"===l){const e=function(e){let n=0;for(let t=0;t<e.length;t++)n+=e[t];return n/=e.length,n}(m),n=function(e,n){let t=0;for(let a=0;a<e.length;a++){const l=e[a];t+=(l-n)*(l-n)}return t/=e.length,Math.sqrt(t)}(m,e);if(0===n)f.push({minValue:m[0],maxValue:m[0],label:u(m[0],m[0],r)});else{const t=function(e,n,t,a,l){let i=Math.max(a-e,n-a)/l/t;return i=i>=1?1:i>=.5?.5:.25,i}(h,v,s,e,n)*n;let a=0,l=h;for(let n=s;n>=1;n--){const o=i(e-(n-.5)*t,6);f.push({minValue:l,maxValue:o,label:u(l,o,r)}),l=o,a++}let o=i(e+.5*t,6);f.push({minValue:l,maxValue:o,label:u(l,o,r)}),l=o,a++;for(let n=1;n<=s;n++)o=a===2*s?v:i(e+(n+.5)*t,6),f.push({minValue:l,maxValue:o,label:u(l,o,r)}),l=o,a++}}else if("defined-interval"===l){if(!o)return f;const[e,t]=null!==n&&void 0!==n?n:[m.at(0),m.at(-1)],a=Math.ceil((t-e)/o);let l=e;for(let n=1;n<a;n++){const t=i(e+n*o,6);f.push({minValue:l,maxValue:t,label:u(l,t,r)}),l=t}f.push({minValue:l,maxValue:t,label:u(l,t,r)})}return f}function u(e,n,t){let a=null;return a=e===n?t&&"percent-of-total"===t?e+"%":e.toString():t&&"percent-of-total"===t?e+"% - "+n+"%":e+" - "+n,a}function c(e){const n=[],t=[];let a=Number.MIN_VALUE,l=1,i=-1;for(let r=0;r<e.length;r++){const o=e[r];o===a?(l++,t[i]=l):null!==o&&(n.push(o),a=o,l=1,t.push(l),i++)}return{uniqueValues:n,valueFrequency:t}}function d(e,n,t){const a=e.length,l=[];t>a&&(t=a);for(let r=0;r<t;r++)l.push(Math.round(r*a/t-1));l.push(a-1);let i=f(l,e,n,t);return function(e,n,t,a,l,i){let r=0,o=0,s=0,u=0,c=!0;for(let d=0;d<2&&c;d++){0===d&&(c=!1);for(let d=0;d<i-1;d++)for(;t[d+1]+1!==t[d+2];){t[d+1]=t[d+1]+1;const i=m(d,t,a,l);s=i.sbMean,r=i.sbSdcm;const f=m(d+1,t,a,l);if(u=f.sbMean,o=f.sbSdcm,!(r+o<n[d]+n[d+1])){t[d+1]=t[d+1]-1;break}n[d]=r,n[d+1]=o,e[d]=s,e[d+1]=u,c=!0}for(let d=i-1;d>0;d--)for(;t[d]!==t[d-1]+1;){t[d]=t[d]-1;const i=m(d-1,t,a,l);s=i.sbMean,r=i.sbSdcm;const f=m(d,t,a,l);if(u=f.sbMean,o=f.sbSdcm,!(r+o<n[d-1]+n[d])){t[d]=t[d]+1;break}n[d-1]=r,n[d]=o,e[d-1]=s,e[d]=u,c=!0}}return c}(i.mean,i.sdcm,l,e,n,t)&&(i=f(l,e,n,t)),l}function f(e,n,t,a){let l=[],i=[],r=[],o=0;const s=[],u=[];for(let h=0;h<a;h++){const a=m(h,e,n,t);s.push(a.sbMean),u.push(a.sbSdcm),o+=u[h]}let c,d=o,f=!0;for(;f||o<d;){f=!1,l=[];for(let n=0;n<a;n++)l.push(e[n]);for(let t=0;t<a;t++)for(let l=e[t]+1;l<=e[t+1];l++)if(c=n[l],t>0&&l!==e[t+1]&&Math.abs(c-s[t])>Math.abs(c-s[t-1]))e[t]=l;else if(t<a-1&&e[t]!==l-1&&Math.abs(c-s[t])>Math.abs(c-s[t+1])){e[t+1]=l-1;break}d=o,o=0,i=[],r=[];for(let l=0;l<a;l++){i.push(s[l]),r.push(u[l]);const a=m(l,e,n,t);s[l]=a.sbMean,u[l]=a.sbSdcm,o+=u[l]}}if(o>d){for(let n=0;n<a;n++)e[n]=l[n],s[n]=i[n],u[n]=r[n];o=d}return{mean:s,sdcm:u}}function m(e,n,t,a){let i=0,r=0;for(let l=n[e]+1;l<=n[e+1];l++){const e=a[l];i+=t[l]*e,r+=e}r<=0&&l().warn("Exception in Natural Breaks calculation");const o=i/r;let s=0;for(let l=n[e]+1;l<=n[e+1];l++)s+=a[l]*(t[l]-o)**2;return{sbMean:o,sbSdcm:s}}},30674:(e,n,t)=>{t.d(n,{A:()=>f});var a=t(35143),l=t(45802),i=t(42553),r=t(46053),o=(t(81806),t(76460),t(47249),t(6409)),s=t(85842);const u=new l.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),c=new l.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let d=class extends i.A{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}};(0,a._)([(0,o.e)({classBreaksDef:"class-breaks-definition"})],d.prototype,"type",void 0),(0,a._)([(0,r.MZ)({json:{write:!0}})],d.prototype,"breakCount",void 0),(0,a._)([(0,r.MZ)({json:{write:!0}})],d.prototype,"classificationField",void 0),(0,a._)([(0,r.MZ)({type:String,json:{read:u.read,write:u.write}})],d.prototype,"classificationMethod",void 0),(0,a._)([(0,r.MZ)({json:{write:!0}})],d.prototype,"normalizationField",void 0),(0,a._)([(0,r.MZ)({json:{read:c.read,write:c.write}})],d.prototype,"normalizationType",void 0),(0,a._)([(0,r.MZ)({value:null,json:{write:!0}})],d.prototype,"standardDeviationInterval",null),(0,a._)([(0,r.MZ)({value:null,json:{write:!0}})],d.prototype,"definedInterval",null),d=(0,a._)([(0,s.$)("esri.rest.support.ClassBreaksDefinition")],d);const f=d},42915:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(89379),l=t(50076),i=t(16783),r=t(66486);class o{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const e=await(0,i.ho)("RasterWorker");this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const t=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:e.pixelBlock.toJSON(),type:e.dataType},n);return t?new r.default(t):null}computeStatisticsHistograms(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:e.pixelBlock.toJSON()},n)}async decode(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const t=await this._workerThread.invoke("decode",e,n);return t?new r.default(t):null}async symbolize(e,n){var t,a;if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const i={extent:null===(t=e.extent)||void 0===t?void 0:t.toJSON(),pixelBlock:null===(a=e.pixelBlock)||void 0===a?void 0:a.toJSON(),simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},o=await this._workerThread.invoke("symbolize",i,n);return o?new r.default(o):null}async updateSymbolizer(e,n){var t;if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const a=null===e||void 0===e||null===(t=e.rendererJSON)||void 0===t?void 0:t.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:a},n))}async updateRasterFunction(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:e.toJSON()},n))}async process(e,n){var t,a;if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("process",{extent:null===(t=e.extent)||void 0===t?void 0:t.toJSON(),primaryPixelSizes:null===(a=e.primaryPixelSizes)||void 0===a?void 0:a.map((e=>null!=e?e.toJSON():null)),primaryPixelBlocks:e.primaryPixelBlocks.map((e=>null!=e?e.toJSON():null)),primaryRasterIds:e.primaryRasterIds},n);return i?new r.default(i):null}async stretch(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");if(null===e||void 0===e||!e.pixelBlock)return null;const t={srcPixelBlock:e.pixelBlock.toJSON(),stretchParams:e.stretchParams},a=await this._workerThread.invoke("stretch",t,n);return a?new r.default(a):null}async split(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");if(null===e||void 0===e||!e.pixelBlock)return null;const t={srcPixelBlock:e.pixelBlock.toJSON(),tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel,useBilinear:e.useBilinear},a=await this._workerThread.invoke("split",t,n);return a&&a.forEach(((e,n)=>{a.set(n,e?r.default.fromJSON(e):null)})),a}async clipTile(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");if(null===e||void 0===e||!e.pixelBlock)return null;const t=(0,a.A)((0,a.A)({},e),{},{pixelBlock:e.pixelBlock.toJSON()}),i=await this._workerThread.invoke("clipTile",t,n);return i?r.default.fromJSON(i):null}async estimateStatisticsHistograms(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");if(null===e||void 0===e||!e.pixelBlock)return null;const t={srcPixelBlock:e.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",t,n)}async mosaicAndTransform(e,n){var t;if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");if(null===e||void 0===e||null===(t=e.srcPixelBlocks)||void 0===t||!t.length)return{pixelBlock:null};const i=(0,a.A)((0,a.A)({},e),{},{srcPixelBlocks:e.srcPixelBlocks.map((e=>null!=e?e.toJSON():null))}),o=await this._workerThread.invoke("mosaicAndTransform",i,n);return{pixelBlock:o.pixelBlock?new r.default(o.pixelBlock):null,localNorthDirections:o.localNorthDirections}}async createFlowMesh(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const t={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:i,simulationSettings:r}=e,o=await this._workerThread.invoke("createFlowMesh",{meshType:i,flowData:t,simulationSettings:r},(0,a.A)((0,a.A)({},n),{},{transferList:[t.buffer,t.maskBuffer]}));return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(e,n){if(!this._workerThread)throw new l.default("raster-jobhandler:no-connection","no available worker connection");const t=null!=e.datumTransformation?e.datumTransformation.steps.map((e=>({wkid:e.wkid,wkt:e.wkt,isInverse:e.isInverse}))):null,a=null!=e.rasterTransform?e.rasterTransform.toJSON():null,i={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:t,rasterTransform:a,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",i,n)}}},51939:(e,n,t)=>{t.d(n,{AL:()=>w,DV:()=>v,ER:()=>l,F_:()=>o,Nd:()=>m,Oo:()=>i,dy:()=>f,eS:()=>x,h4:()=>S,jC:()=>b,nq:()=>h,rZ:()=>d,y6:()=>p});var a=t(44135);const l="Raster.",i="Raster.Dim.",r=".Max",o={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},s=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function u(e,n){return new a.default({name:e,alias:n,domain:null,editable:!1,length:50,type:"string"})}function c(e,n){return new a.default({name:e,alias:n,domain:null,editable:!1,type:"double"})}function d(e){return u(o.servicePixelValue,null!==e&&void 0!==e?e:"Service Pixel Value")}function f(e){return u(o.rawServicePixelValue,null!==e&&void 0!==e?e:"Raw Service Pixel Value")}function m(){return u(o.itemPixelValue,"Item Pixel Value")}function h(e){return u("".concat(o.servicePixelValue,".").concat(e),e)}function v(e){return c("".concat(o.magnitude),"Magnitude"+(e?" (".concat(e,")"):""))}function p(){return c("".concat(o.direction),"Direction (\xb0)")}function b(e){return e.fields.filter((e=>"oid"!==e.type&&"value"!==e.name.toLowerCase())).map((e=>{const n=e.clone();return n.name="".concat(l).concat(e.name),n}))}function w(e){const n=new Set,t=new Set,l=new Map;return e.variables.forEach((e=>{let{dimensions:a}=e;a.forEach((e=>{if(e.recurring)l.set(e.name,e.unit);else{var a;const l="ISO8601"===(null===(a=e.unit)||void 0===a?void 0:a.trim())?n:t;l.add(e.name),e.hasRanges&&l.add("".concat(e.name).concat(r))}}))})),[u(o.variable,"Variable"),...[...n].map((e=>function(e,n){return new a.default({name:e,alias:n,domain:null,editable:!1,type:"date"})}("".concat(i).concat(e),g(e)))),...[...t].map((e=>c("".concat(i).concat(e),g(e)))),...[...l].map((e=>{let[n,t]=e;return c("".concat(i).concat(n),y(n,t))}))]}function y(e,n){var t;return(n=null===(t=n)||void 0===t?void 0:t.toLowerCase())&&s.has(n)?s.get(n):g(e)}function g(e){const n=e.endsWith(r),t=n?e.slice(0,-4):e,a="StdTime"===t?"Standard Time":"StdZ"===t?"Standard Z":t;return n?"".concat(a," Max"):a}function k(e,n){return n?new Date(e):e}function x(e,n,t){(null===t||void 0===t?void 0:t.length)&&(n[o.variable]=t[0].variableName,t.forEach((t=>{let{dimensionName:a,values:l}=t;if(a&&null!==l&&void 0!==l&&l.length){const t="".concat(i).concat(a),o=e.find((e=>{let{name:n}=e;return n===t}));if(!o)return;const s="date"===o.type,u=l[0];if(Array.isArray(u)){if(n["".concat(i).concat(a)]=k(u[0],s),null!=u[1]){const t="".concat(i).concat(a).concat(r);if(e.some((e=>{let{name:n}=e;return n===t}))){const e=k(u[1],s);n[t]=e}}}else n["".concat(i).concat(a)]=k(u,s)}})))}function S(e,n){if(n.pixelType.startsWith("f")&&e.forEach((e=>{let{format:n,fieldName:t}=e;n&&t&&/^raster\.(item|service)pixelvalue/i.test(t)&&(n.places=2)})),n.multidimensionalInfo){const t=n.multidimensionalInfo.variables.flatMap((e=>{let{dimensions:n}=e;return n}));e.forEach((e=>{let{format:n,fieldName:a}=e;if(n&&null!==a&&void 0!==a&&a.startsWith(i)){var l;const e=a.slice(i.length),o="".concat(e).concat(r),s=t.find((n=>{let{name:t}=n;return t===e||t===o}));(null===s||void 0===s||null===(l=s.values)||void 0===l?void 0:l.every((e=>Number.isInteger(e))))&&(n.places=0)}}))}}},68347:(e,n,t)=>{t.d(n,{$E:()=>M,DY:()=>w,NG:()=>S,QW:()=>o,Rp:()=>h,XU:()=>v,Xg:()=>x,ct:()=>p,fy:()=>b,sx:()=>m,xx:()=>s,z2:()=>y});var a=t(89379),l=t(18690),i=t(15359);function r(e,n,t){const a=n.shift();if(0===t.length){const e=[];t.push({sliceId:-1,multidimensionalDefinition:e})}const l=t.length;for(let r=0;r<l;r++){var i;const n=t.shift().multidimensionalDefinition;null===(i=a.values)||void 0===i||i.forEach((l=>{t.push({sliceId:-1,multidimensionalDefinition:[...n,{variableName:e,dimensionName:a.name,values:[l]}]})}))}n.length&&r(e,n,t)}function o(e,n){const t=[];let l=0;return(n?e.variables.filter((e=>e.name.toLowerCase()===n.toLowerCase())):[...e.variables].sort(((e,n)=>e.name>n.name?1:-1))).forEach((e=>{const n=[],i=[...e.dimensions].sort(((e,n)=>e.name>n.name?-1:1));r(e.name,i,n),n.forEach((e=>{t.push((0,a.A)((0,a.A)({},e),{},{sliceId:l++}))}))})),t}function s(e,n,t){let a=e;if(n&&(n=[...n].sort(((e,n)=>e.dimensionName<n.dimensionName?-1:1))).forEach((e=>{let{dimensionName:n,values:t,isSlice:l}=e;t.length&&(a=a.filter((e=>{const a=e.multidimensionalDefinition.find((e=>e.dimensionName===n));if(null==a)return!1;const i=a.values[0];return"number"==typeof i?"number"==typeof t[0]?t.includes(i):t.some((e=>e[0]<=i&&e[1]>=i)):"number"==typeof t[0]?t.some((e=>i[0]<=e&&i[1]>=e)):l?t.some((e=>e[0]===i[0]&&e[0]===i[1])):t.some((e=>e[0]>=i[0]&&e[0]<=i[1]||e[1]>=i[0]&&e[1]<=i[1]||e[0]<i[0]&&e[1]>i[1]))})))})),a.length&&null!=(null===t||void 0===t?void 0:t.start)&&null!=t.end){const e=t.start.getTime(),n=t.end.getTime(),l=a[0].multidimensionalDefinition.findIndex((e=>"StdTime"===e.dimensionName));l>-1&&(a=a.filter((t=>{const a=t.multidimensionalDefinition[l].values[0];return e<=a&&n>=a})))}return a.map((e=>e.sliceId))}function u(e,n){return Array.isArray(e)?n[0]===n[1]?e[0]===n[0]||e[1]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]}function c(e,n){return e[0]<=n[0]&&e[1]>=n[0]||e[0]<=n[1]&&e[1]>=n[1]||e[0]>=n[0]&&e[1]<=n[1]}function d(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function f(e,n,t){var l;if(null===n||void 0===n||null===(l=n.subsetDefinitions)||void 0===l||!l.length)return e;let i;if(t){var r;const{variables:a}=n;if(a.length&&!a.includes(t))return null;const l=n.subsetDefinitions.find((n=>n.dimensionName===e.name&&n.variableName===t));if(null===l||void 0===l||null===(r=l.values)||void 0===r||!r.length)return e;i=d(l.values)}else{const t=n.dimensions.find((n=>{let{name:t}=n;return t===e.name}));i=null===t||void 0===t?void 0:t.extent}const o=i;if(null===o||void 0===o||!o.length)return e;const s=e.values.filter((e=>u(e,o)));return(0,a.A)((0,a.A)({},e),{},{extent:[...o],values:s})}function m(e,n,t){var a;if(null===n||void 0===n||null===(a=n.subsetDefinitions)||void 0===a||!a.length)return!1;const{variables:l}=n;if(l.length&&e.some((e=>{let{variableName:n}=e;return n&&!l.includes(n)})))return!0;for(let i=0;i<e.length;i++){const a=e[i],l=n.subsetDefinitions.find((e=>(""===a.variableName||e.variableName===a.variableName)&&e.dimensionName===a.dimensionName));if(null!==l&&void 0!==l&&l.values.length){const e=d(l.values);if(a.isSlice||2!==a.values.length||Array.isArray(a.values[0])||a.values[0]===a.values[1]||!t){if(a.values.some((n=>!u(n,e))))return!0}else if(!c(a.values,e))return!0}}return!1}function h(e,n){if(null==e)return{isOutside:!1};const{geometry:t,timeExtent:a,multidimensionalDefinition:l}=n;let r=null;if(null!=a&&(r=function(e,n){var t,a;const l=e.dimensions.find((e=>{let{name:n}=e;return"StdTime"===n}));if(null==l||null==n.start&&null==n.end)return n;n=n.clone();const{start:r,end:o}=n.toJSON(),s=r===o?[r]:null!=r&&null!=o?[r,o]:[null!==r&&void 0!==r?r:o];return 2===s.length&&null!==l&&void 0!==l&&l.extent.length&&(s[0]=Math.max(s[0],l.extent[0]),s[1]=Math.min(s[1],null!==(t=l.extent[1])&&void 0!==t?t:l.extent[0]),s[1]<s[0])||m([new i.default({variableName:"",dimensionName:"StdTime",isSlice:1===s.length,values:s})],e,!0)?null:(n.start=new Date(s[0]),n.end=new Date(null!==(a=s[1])&&void 0!==a?a:s[0]),n)}(e,a),null==r))return{isOutside:!0};const{areaOfInterest:o}=e;if(o&&t){const e="point"===t.type?t:"extent"===t.type?t.center:"polygon"===t.type?t.centroid:null;if(e&&!o.contains(e))return{isOutside:!0}}return null!=l&&l.length&&m(l,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:t,timeExtent:r,multidimensionalDefinition:l}}}function v(e){var n,t;const{rasterInfo:a,multidimensionalSubset:l}=e,{multidimensionalInfo:i}=a;if(null==i)return null;let r=null!==(n=e.multidimensionalDefinition)&&void 0!==n&&n.length?e.multidimensionalDefinition:b(a,{multidimensionalSubset:l});if(null===(t=r)||void 0===t||!t.length)return null;if(r.some((e=>!e.dimensionName))){const{variableName:e}=r[0],n=b(a,{multidimensionalSubset:l,variableName:e});null!==n&&void 0!==n&&n.forEach((e=>{var n,t;const a=null===(n=r)||void 0===n?void 0:n.find((n=>{let{dimensionName:t}=n;return t===e.dimensionName}));(null===a||void 0===a||null===(t=a.values)||void 0===t?void 0:t.length)&&(e.values=a.values,e.isSlice=a.isSlice)})),r=n}const{timeExtent:o}=e;if(null!=r&&null!=o&&(null!=o.start||null!=o.end)){var s;r=r.map((e=>e.clone()));const e=null===(s=i.variables.find((e=>{let{name:n}=e;return n===r[0].variableName})))||void 0===s||null===(s=s.dimensions)||void 0===s?void 0:s.find((e=>{let{name:n}=e;return"StdTime"===n})),n=r.find((e=>{let{dimensionName:n}=e;return"StdTime"===n}));if(!e||!n)return null;const{start:t,end:a}=o,l=null==t?null:t.getTime(),u=null==a?null:a.getTime(),c=null!==l&&void 0!==l?l:u,d=null!==u&&void 0!==u?u:l;if(null!=e.values){const t=e.values.filter((e=>{if(Array.isArray(e)){if(c===d)return e[0]<=c&&e[1]>=c;const n=e[0]<=c&&e[1]>c||e[0]<d&&e[1]>=d,t=e[0]>=c&&e[1]<=d||e[0]<c&&e[1]>d;return n||t}return c===d?e===c:e>=c&&e<=d}));if(t.length){const e=t.sort(((e,n)=>{const t=Array.isArray(e)?e[0]:e,a=Array.isArray(e)?e[1]:e,l=Array.isArray(n)?n[0]:n,i=Array.isArray(n)?n[1]:n;return c===d?t-l:Math.abs(a-d)-Math.abs(i-d)}))[0];n.values=[e]}else r=null}else if(e.hasRegularIntervals&&e.extent){const[t,a]=e.extent;c>a||d<t?r=null:n.values=c===d?[c]:[Math.max(t,c),Math.min(a,d)]}}return null!=r&&m(r,l)?null:r}function p(e){var n,t,a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{multidimensionalInfo:i,keyProperties:r}=e;if(null==i)return null;const{variableName:o,multidimensionalSubset:s,multidimensionalDefinition:u}=l,c=null!=u?null===(n=u[0])||void 0===n?void 0:n.variableName:null,d=o||c||(null===r||void 0===r?void 0:r.DefaultVariable);let{variables:f}=i;return(null===s||void 0===s||null===(t=s.variables)||void 0===t?void 0:t.length)&&(f=f.filter((e=>{let{name:n}=e;return s.variables.includes(n)}))),d&&null!==(a=f.find((e=>{let{name:n}=e;return n===d})))&&void 0!==a?a:f[0]}function b(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=p(e,n);if(!t)return null;const a=[],{dimensions:l,name:r}=t;if(0===l.length)return[new i.default({variableName:r,dimensionName:"",values:[],isSlice:!0})];for(let s=0;s<l.length;s++){var o;const e=f(l[s],n.multidimensionalSubset,r);if(!e)return null;const{values:t,extent:u}=e;let c=null!==(o=null===t||void 0===t?void 0:t[0])&&void 0!==o?o:null===u||void 0===u?void 0:u[0];"stdz"===e.name.toLowerCase()&&!e.hasRanges&&u&&Math.abs(u[1])<=Math.abs(u[0])&&(c=null!==t&&void 0!==t&&t.length?t[t.length-1]:u[1]),a.push(new i.default({variableName:r,dimensionName:e.name,values:[c],isSlice:!n.useRangeForRangedDimensionInfo||!!e.hasRanges}))}return a}function w(e){return!(null===e||void 0===e||!e.length)&&e.some((e=>{if(null==e.values)return!0;const n=e.values.length;return 0===n||n>1||!e.isSlice&&Array.isArray(e.values[0])}))}function y(e,n){var t;if(null==n||null==e)return null;let i=n.variables.map((e=>(0,a.A)({},e)));return null!==e&&void 0!==e&&null!==(t=e.variables)&&void 0!==t&&t.length&&(i=i.filter((n=>{let{name:t}=n;return e.variables.includes(t)})),i.forEach((n=>{n.dimensions=n.dimensions.map((t=>f(t,e,n.name))).filter(l.Ru)}))),i}function g(e,n){var t;const{values:a}=n;if(null!==a&&void 0!==a&&a.length){const n=Array.isArray(a[0]),t=Array.isArray(e);return n!==t?-1:n&&t?a.findIndex((n=>n[0]===e[0]&&n[1]===e[1])):a.indexOf(e)}const{extent:l}=n;if(Array.isArray(e)||!l||e<l[0]||e>l[1])return-1;const i=n.interval||1;if("ISO8601"!==n.unit)return Math.round((e-l[0])/i);const r=l[0];let o=-1;switch((null===(t=n.intervalUnit)||void 0===t?void 0:t.toLowerCase())||"days"){case"seconds":o=Math.round((e-r)/1e3/i);break;case"minutes":o=Math.round((e-r)/6e4/i);break;case"hours":o=Math.round((e-r)/36e5/i);break;case"days":o=Math.round((e-r)/864e5/i);break;case"months":{const n=new Date(e).getUTCFullYear()-new Date(r).getUTCFullYear(),t=new Date(r).getUTCMonth(),a=new Date(e).getUTCMonth();o=0===n?a-t:a+11-t+12*(n-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(r).getUTCFullYear())/i);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(r).getUTCFullYear())/10/i)}return o}function k(e){var n,t,a;let l=null===(n=e.values)||void 0===n?void 0:n.length;if(l)return l;const{extent:i,unit:r}=e,o=e.interval||1,s=i?i[1]-i[0]:0;if("ISO8601"!==r)return Math.round(s/o);switch(null!==(t=null===(a=e.intervalUnit)||void 0===a?void 0:a.toLowerCase())&&void 0!==t?t:"seconds"){case"seconds":l=Math.round(s/1e3/o);break;case"minutes":l=Math.round(s/6e4/o);break;case"hours":l=Math.round(s/36e5/o);break;case"days":l=Math.round(s/864e5/o);break;case"months":if(i){const e=new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear(),n=new Date(i[0]).getUTCMonth(),t=new Date(i[1]).getUTCMonth();l=0===e?t-n+1:t+11-n+12*(e-1)+1}else l=0;break;case"years":l=i?Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/o):0;break;case"decades":l=i?Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/10/o):0;break;default:l=0}return l}function x(e){var n;if(2!==(null===(n=e.extent)||void 0===n?void 0:n.length)||!e.interval)return[];const{extent:[t,a],interval:l}=e;if("ISO8601"===e.unit){var i,r;const n=null!==(i=null===(r=e.intervalUnit)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"days";return["decades","years","months","days","hours","minutes","seconds"].includes(n)?function(e,n,t,a){const l=[];let i=e;const r=new Date(e);for(;i<=n;)switch(l.push(i),a){case"decades":r.setUTCFullYear(r.getUTCFullYear()+10*t),i=r.getTime();break;case"years":r.setUTCFullYear(r.getUTCFullYear()+t),i=r.getTime();break;case"months":r.setUTCMonth(r.getUTCMonth()+t),i=r.getTime();break;case"days":i+=864e5*t;break;case"hours":i+=36e5*t;break;case"minutes":i+=6e4*t;break;case"seconds":i+=1e3*t}return 1===l.length?l[1]=n:l[l.length-1]=n,l}(t,a,l,n):[]}const o=Math.round((a-t)/l);return Array.from({length:o},((e,n)=>n===o-1?a:t+n*l))}function S(e,n){let t=0;const a=e[0].variableName,l=[...n.variables].sort(((e,n)=>e.name>n.name?1:-1));for(let i=0;i<l.length;i++){const n=l[i],r=[...n.dimensions].sort(((e,n)=>e.name>n.name?-1:1));if(n.name!==a){t+=r.map((e=>k(e))).reduce(((e,n)=>e*n));continue}const o=r.map((e=>k(e))),s=r.length;for(let a=0;a<s;a++){const n=e.find((e=>e.dimensionName===r[a].name));if(null==n)return null;const l=g(n.values[0],r[a]);if(-1===l)return null;o.shift(),t+=a===s-1?l:l*o.reduce(((e,n)=>e*n))}break}return t}function M(e){return Math.round(24*(e-25569)*3600*1e3)}},88205:(e,n,t)=>{t.d(n,{Gj:()=>m,LF:()=>v,uy:()=>f});var a=t(89379),l=t(62754),i=t(63844),r=t(97200),o=t(50410),s=t(82615),u=t(48630),c=t(84596),d=t(6745);const f={key:"type",base:null,typeMap:{"unique-value":c.default,"class-breaks":i.default,"raster-colormap":o.default,"raster-stretch":u.default,"vector-field":d.default,"raster-shaded-relief":s.default,flow:r.default}},m=(0,a.A)((0,a.A)({},f),{},{typeMap:(0,a.A)({},f.typeMap)});delete m.typeMap["vector-field"],delete m.typeMap.flow;const h={uniqueValue:c.default,classBreaks:i.default,rasterStretch:u.default,rasterColormap:o.default,vectorField:d.default,rasterShadedRelief:s.default,flowRenderer:r.default};function v(e,n){if(!e)return null;if("classBreaks"===e.type&&e.classificationMethod){const n=e.authoringInfo||{classificationMethod:""};n.classificationMethod=e.classificationMethod,e.authoringInfo=n}"vectorField"===e.type&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const t=(a=e)&&h[a.type]||null;var a;if(t){const a=new t;return a.read(e,n),a}return null!==n&&void 0!==n&&n.messages&&e&&n.messages.push(new l.A("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:n})),null}}}]);
//# sourceMappingURL=61267.dc34876d.chunk.js.map