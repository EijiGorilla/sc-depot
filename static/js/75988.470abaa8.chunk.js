"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[15062,75988],{15062:(e,t,i)=>{i.d(t,{T:()=>s});const s={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"}},24801:(e,t,i)=>{i.d(t,{SD:()=>a,hO:()=>n,tV:()=>l});var s=i(28899);function a(e){const t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}function n(e){const t=(0,s.s)("esri/themes/base/images/files/");return e?"text/plain"===e?"".concat(t,"text-32.svg"):"application/pdf"===e?"".concat(t,"pdf-32.svg"):"text/csv"===e?"".concat(t,"csv-32.svg"):"application/gpx+xml"===e?"".concat(t,"gpx-32.svg"):"application/x-dwf"===e?"".concat(t,"cad-32.svg"):"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?"".concat(t,"code-32.svg"):"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?"".concat(t,"zip-32.svg"):e.includes("image/")?"".concat(t,"image-32.svg"):e.includes("audio/")?"".concat(t,"sound-32.svg"):e.includes("video/")?"".concat(t,"video-32.svg"):e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?"".concat(t,"excel-32.svg"):e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?"".concat(t,"word-32.svg"):e.includes("powerpoint")||e.includes("presentationml")?"".concat(t,"report-32.svg"):"".concat(t,"generic-32.svg"):"".concat(t,"generic-32.svg")}function l(e){return e?"text/plain"===e?"file-text":"application/pdf"===e?"file-pdf":"text/csv"===e?"file-csv":"application/gpx+xml"===e?"file-gpx":"application/x-dwf"===e?"file-cad":"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?"file-code":"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?"file-zip":e.includes("image/")?"file-image":e.includes("audio/")?"file-sound":e.includes("video/")?"file-video":e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?"file-excel":e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?"file-word":e.includes("powerpoint")||e.includes("presentationml")?"file-ppt":"file":"file"}},75988:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var s=i(89379),a=i(35143),n=i(50076),l=i(68134),o=i(96820),c=i(46053),r=i(21403),d=(i(81806),i(47249),i(85842)),m=i(25329),h=i(78583),p=i(24801),u=i(94126),g=i(98108),v=i(15062),_=i(76099),b=i(63582),f=i(54761);const y={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},w="esri-attachments",M={base:w,loaderContainer:"".concat(w,"__loader-container"),loader:"".concat(w,"__loader"),fadeIn:"".concat(w,"--fade-in"),container:"".concat(w,"__container"),containerList:"".concat(w,"__container--list"),containerPreview:"".concat(w,"__container--preview"),actions:"".concat(w,"__actions"),deleteButton:"".concat(w,"__delete-button"),addAttachmentButton:"".concat(w,"__add-attachment-button"),errorMessage:"".concat(w,"__error-message"),items:"".concat(w,"__items"),item:"".concat(w,"__item"),itemButton:"".concat(w,"__item-button"),itemMask:"".concat(w,"__item-mask"),itemMaskIcon:"".concat(w,"__item-mask--icon"),itemImage:"".concat(w,"__image"),itemImageResizable:"".concat(w,"__image--resizable"),itemLabel:"".concat(w,"__label"),itemFilename:"".concat(w,"__filename"),itemChevronIcon:"".concat(w,"__item-chevron-icon"),itemLink:"".concat(w,"__item-link"),itemLinkOverlay:"".concat(w,"__item-link-overlay"),itemLinkOverlayIcon:"".concat(w,"__item-link-overlay-icon"),itemEditIcon:"".concat(w,"__item-edit-icon"),itemAddIcon:"".concat(w,"__item-add-icon"),itemAddButton:"".concat(w,"__item-add-button"),formNode:"".concat(w,"__form-node"),fileFieldset:"".concat(w,"__file-fieldset"),fileLabel:"".concat(w,"__file-label"),fileName:"".concat(w,"__file-name"),fileInput:"".concat(w,"__file-input"),metadata:"".concat(w,"__metadata"),metadataFieldset:"".concat(w,"__metadata-fieldset"),progressBar:"".concat(w,"__progress-bar")},A=window.CSS;let k=class extends m.default{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements=(0,s.A)({},y),this._supportsImageOrientation=A&&A.supports&&A.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(e){var t;return null!==(t=e)&&void 0!==t&&t.viewModel||(e=(0,s.A)({viewModel:new h.default},e)),e}initialize(){this.addHandles([(0,l.on)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.attachmentInfos}),"change",(()=>this.scheduleRender())),(0,l.on)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.fileInfos}),"change",(()=>this.scheduleRender())),(0,l.watch)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.mode}),(()=>this._modeChanged()),l.initial)])}loadDependencies(){return(0,u.W)({icon:()=>Promise.resolve().then(i.bind(i,16702))})}get capabilities(){return this.viewModel.capabilities}set capabilities(e){this.viewModel.capabilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&"auto"!==e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get icon(){return"attachment"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return(0,s.A)((0,s.A)({},y),e)}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((e=>{throw this._set("submitting",!1),this._set("error",new n.default("attachments:add-attachment",this.messages.addErrorMessage,e)),e}))}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((e=>{throw this._set("submitting",!1),this._set("error",new n.default("attachments:delete-attachment",this.messages.deleteErrorMessage,e)),e}))}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),e.mode="view",t))).catch((e=>{throw this._set("submitting",!1),this._set("error",new n.default("attachments:update-attachment",this.messages.updateErrorMessage,e)),e}))}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){var t;const i=this.viewModel.deleteFile(e||(null===(t=this.viewModel.activeFileInfo)||void 0===t?void 0:t.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return(0,f.K)("div",{class:this.classes(M.base,g.D.widget)},e?this._renderProgressBar():null,"loading"===i?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?(0,f.K)("div",{class:M.errorMessage,key:"error-message"},e.message):null}_renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:i}=this.viewModel;return"add"===t?this._renderAddForm():"edit"===t?this._renderDetailsForm(i||e):this._renderAttachmentContainer()}_renderLoading(){return(0,f.K)("div",{class:M.loaderContainer,key:"loader"},(0,f.K)("div",{class:M.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?(0,f.K)("div",{class:M.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,s=this.visibleElements.cancelAddButton?(0,f.K)("button",{bind:this,class:this.classes(g.D.button,g.D.buttonTertiary,g.D.buttonSmall,g.D.buttonHalf,e&&g.D.buttonDisabled),disabled:e,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?(0,f.K)("button",{class:this.classes(g.D.button,g.D.buttonSecondary,g.D.buttonSmall,g.D.buttonHalf,{[g.D.buttonDisabled]:i}),disabled:i,type:"submit"},this.messages.add):null,n=t?(0,f.K)("span",{class:M.fileName,key:"file-name"},t.name):null,l=(0,f.K)("form",{afterCreate:_.cA,afterRemoved:_.N_,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,f.K)("fieldset",{class:M.fileFieldset},n,(0,f.K)("label",{class:this.classes(M.fileLabel,g.D.button,g.D.buttonSecondary)},t?this.messages.changeFile:this.messages.selectFile,(0,f.K)("input",{bind:this,class:M.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),a,s);return(0,f.K)("div",{class:M.formNode,key:"add-form-container"},l)}_renderDetailsForm(e){var t,i,s;const{visibleElements:a,viewModel:n,selectedFile:l,submitting:c}=this,{capabilities:r}=n,d=c||!l;let m,h,p,u;l?(m=l.type,h=l.name,p=l.size):e&&"file"in e?(m=e.file.type,h=e.file.name,p=e.file.size):e&&"contentType"in e&&(m=e.contentType,h=e.name,p=e.size,u=e.url);const v=r.editing&&null!==(t=r.operations)&&void 0!==t&&t.delete&&a.deleteButton?(0,f.K)("button",{bind:this,class:this.classes(g.D.button,g.D.buttonSmall,g.D.buttonTertiary,M.deleteButton,{[g.D.buttonDisabled]:c}),disabled:c,key:"delete-button",onclick:t=>this._submitDeleteAttachment(t,e),type:"button"},this.messages.delete):void 0,b=r.editing&&null!==(i=r.operations)&&void 0!==i&&i.update&&a.updateButton?(0,f.K)("button",{class:this.classes(g.D.button,g.D.buttonSmall,g.D.buttonThird,{[g.D.buttonDisabled]:d}),disabled:d,key:"update-button",type:"submit"},this.messages.update):void 0,y=this.visibleElements.cancelUpdateButton?(0,f.K)("button",{bind:this,class:this.classes(g.D.button,g.D.buttonSmall,g.D.buttonTertiary,g.D.buttonThird,{[g.D.buttonDisabled]:c}),disabled:c,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,w=r.editing&&null!==(s=r.operations)&&void 0!==s&&s.update?(0,f.K)("fieldset",{class:M.fileFieldset,key:"file"},(0,f.K)("span",{class:M.fileName,key:"file-name"},h),(0,f.K)("label",{class:this.classes(M.fileLabel,g.D.button,g.D.buttonSecondary)},this.messages.changeFile,(0,f.K)("input",{bind:this,class:M.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,A=(0,f.K)("fieldset",{class:M.metadataFieldset,key:"size"},(0,f.K)("label",null,(0,o.v7)(this.messagesUnits,null!==p&&void 0!==p?p:0))),k=(0,f.K)("fieldset",{class:M.metadataFieldset,key:"content-type"},(0,f.K)("label",null,m)),F=null!=u?(0,f.K)("a",{class:M.itemLink,href:u,rel:"noreferrer",target:"_blank"},this._renderImageMask(e,400),(0,f.K)("div",{class:M.itemLinkOverlay},(0,f.K)("span",{class:M.itemLinkOverlayIcon},(0,f.K)("calcite-icon",{icon:"launch"})))):this._renderImageMask(e,400),D=(0,f.K)("form",{afterCreate:_.cA,afterRemoved:_.N_,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:t=>this._submitUpdateAttachment(t,e)},(0,f.K)("div",{class:M.metadata},A,k),w,(0,f.K)("div",{class:M.actions},v,y,b));return(0,f.K)("div",{class:M.formNode,key:"edit-form-container"},F,D)}_renderImageMask(e,t){return e?"file"in e?this._renderGenericImageMask(e.file.name,e.file.type):this._renderImageMaskForAttachment(e,t):null}_renderGenericImageMask(e,t){const{supportsResizeAttachments:i}=this.viewModel,s=(0,p.hO)(t),a={[M.itemImageResizable]:i};return(0,f.K)("div",{class:this.classes(M.itemMaskIcon,M.itemMask),key:s},(0,f.K)("img",{alt:e,class:this.classes(a,M.itemImage),src:s,title:e}))}_renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:i}=this.viewModel;if(!e)return null;const{contentType:s,name:a,url:n}=e;if(!i||!(0,p.SD)(s))return this._renderGenericImageMask(a,s);const l=this._getCSSTransform(e),o=l?{transform:l,"image-orientation":"none"}:{},c="".concat(n).concat(null!==n&&void 0!==n&&n.includes("?")?"&":"?","w=").concat(t),r={[M.itemImageResizable]:i};return(0,f.K)("div",{class:this.classes(M.itemMask),key:c},(0,f.K)("img",{alt:a,class:this.classes(r,M.itemImage),src:c,styles:o,title:a}))}_renderFile(e){const{file:t}=e;return(0,f.K)("li",{class:M.item,key:t},(0,f.K)("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:M.itemButton,key:"details-button",onclick:()=>this._startEditFile(e),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(e),(0,f.K)("label",{class:M.itemLabel},(0,f.K)("span",{class:M.itemFilename},t.name||this.messages.noTitle),(0,f.K)("span",{"aria-hidden":"true",class:this.classes(M.itemChevronIcon,(0,_.V8)(this.container)?v.T.left:v.T.right)}))))}_renderAttachmentInfo(e){let{attachmentInfo:t,displayType:i}=e;const{viewModel:s,effectiveDisplayType:a}=this,{capabilities:n,supportsResizeAttachments:l}=s,{contentType:o,name:c,url:r}=t,d=this._renderImageMask(t,"list"===i?48:400),m=n.editing?(0,f.K)("span",{"aria-hidden":"true",class:this.classes(M.itemChevronIcon,(0,_.V8)(this.container)?v.T.left:v.T.right)}):null,h=[d,"preview"===a&&l&&(0,p.SD)(o)?null:(0,f.K)("label",{class:M.itemLabel},(0,f.K)("span",{class:M.itemFilename},c||this.messages.noTitle),m)],u=n.editing?(0,f.K)("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:M.itemButton,"data-attachment-info-id":t.id,key:"details-button",onclick:()=>this._startEditAttachment(t),title:this.messages.attachmentDetails,type:"button"},h):(0,f.K)("a",{class:M.itemButton,href:null!==r&&void 0!==r?r:void 0,key:"details-link",rel:"noreferrer",target:"_blank"},h);return(0,f.K)("li",{class:M.item,key:t},u)}_renderAttachmentContainer(){var e;const{effectiveDisplayType:t,viewModel:i,visibleElements:s}=this,{attachmentInfos:a,capabilities:n,fileInfos:l}=i,o=!(null===a||void 0===a||!a.length),c=!(null===l||void 0===l||!l.length),r={[M.containerList]:"preview"!==t,[M.containerPreview]:"preview"===t},d=n.editing&&null!==(e=n.operations)&&void 0!==e&&e.add&&s.addButton?(0,f.K)("button",{bind:this,class:this.classes(g.D.button,g.D.buttonTertiary,M.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},(0,f.K)("span",{"aria-hidden":"true",class:this.classes(M.itemAddIcon,v.T.plus)}),this.messages.add):void 0,m=o?(0,f.K)("ul",{class:M.items,key:"attachments-list"},a.toArray().map((e=>this._renderAttachmentInfo({attachmentInfo:e,displayType:t})))):void 0,h=c?(0,f.K)("ul",{class:M.items,key:"file-list"},l.toArray().map((e=>this._renderFile(e)))):void 0,p=c||o?void 0:(0,f.K)("div",{class:g.D.empty},this.messages.noAttachments);return(0,f.K)("div",{class:this.classes(M.container,r),key:"attachments-container"},m,h,p,d)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){var t;const i=null===(t=e.target.files)||void 0===t?void 0:t.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?"rotate(".concat(t.rotation,"deg)"):"",t.mirrored?"scaleX(-1)":""].join(" "):""}};(0,a._)([(0,c.MZ)()],k.prototype,"capabilities",null),(0,a._)([(0,c.MZ)()],k.prototype,"displayType",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],k.prototype,"effectiveDisplayType",null),(0,a._)([(0,c.MZ)()],k.prototype,"graphic",null),(0,a._)([(0,c.MZ)()],k.prototype,"icon",null),(0,a._)([(0,c.MZ)()],k.prototype,"label",null),(0,a._)([(0,c.MZ)(),(0,b.G)("esri/widgets/Attachments/t9n/Attachments")],k.prototype,"messages",void 0),(0,a._)([(0,c.MZ)(),(0,b.G)("esri/core/t9n/Units")],k.prototype,"messagesUnits",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],k.prototype,"selectedFile",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],k.prototype,"submitting",void 0),(0,a._)([(0,c.MZ)({readOnly:!0})],k.prototype,"error",void 0),(0,a._)([(0,c.MZ)({type:h.default})],k.prototype,"viewModel",void 0),(0,a._)([(0,c.MZ)()],k.prototype,"visibleElements",void 0),(0,a._)([(0,r.w)("visibleElements")],k.prototype,"castVisibleElements",null),k=(0,a._)([(0,d.$)("esri.widgets.Attachments")],k);const F=k}}]);
//# sourceMappingURL=75988.470abaa8.chunk.js.map