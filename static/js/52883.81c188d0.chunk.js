"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[24387,52883,70058],{46768:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var o,i=r(35143),n=r(19276),l=r(42553),s=r(46053),a=r(40565),u=(r(81806),r(47249),r(85842)),p=r(17707),d=r(76797),y=r(13312),c=r(19902),f=r(31608),m=r(59187);let v=o=class extends l.A{static from(e){return(0,a.PZ)(o,e)}constructor(e){super(e),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.historicMoment=null,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}};(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],v.prototype,"dpi",void 0),(0,i._)([(0,s.MZ)()],v.prototype,"floors",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],v.prototype,"gdbVersion",void 0),(0,i._)([(0,s.MZ)({types:f.yR,json:{read:c.fromJSON,write:!0}})],v.prototype,"geometry",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],v.prototype,"geometryPrecision",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],v.prototype,"height",void 0),(0,i._)([(0,s.MZ)({type:Date})],v.prototype,"historicMoment",void 0),(0,i._)([(0,p.K)("historicMoment")],v.prototype,"writeHistoricMoment",null),(0,i._)([(0,s.MZ)({type:[Number],json:{write:!0}})],v.prototype,"layerIds",void 0),(0,i._)([(0,s.MZ)({type:["top","visible","all","popup"],json:{write:!0}})],v.prototype,"layerOption",void 0),(0,i._)([(0,s.MZ)({type:d.default,json:{write:!0}})],v.prototype,"mapExtent",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],v.prototype,"maxAllowableOffset",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"returnFieldName",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"returnGeometry",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"returnM",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"returnUnformattedValues",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"returnZ",void 0),(0,i._)([(0,s.MZ)({type:y.default,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,i._)([(0,s.MZ)({type:n.default})],v.prototype,"sublayers",void 0),(0,i._)([(0,s.MZ)({type:m.default,json:{write:!0}})],v.prototype,"timeExtent",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],v.prototype,"tolerance",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],v.prototype,"width",void 0),v=o=(0,i._)([(0,u.$)("esri.rest.support.IdentifyParameters")],v);const h=v},52883:(e,t,r)=>{r.r(t),r.d(t,{identify:()=>h});var o=r(89379),i=r(3825),n=r(73953),l=r(54994),s=r(34154),a=r(19902),u=r(68002),p=r(80963),d=r(46530),y=r(65419);function c(e,t){var r;const{dpi:o,gdbVersion:i,geometry:n,geometryPrecision:l,height:s,historicMoment:u,layerOption:d,mapExtent:y,maxAllowableOffset:c,returnFieldName:m,returnGeometry:v,returnUnformattedValues:h,returnZ:g,spatialReference:b,timeExtent:w,tolerance:M,width:_}=e.toJSON(),{dynamicLayers:Z,layerDefs:x,layerIds:N}=f(e),j=null!=(null===t||void 0===t?void 0:t.geometry)?t.geometry:null,O={historicMoment:u,geometryPrecision:l,maxAllowableOffset:c,returnFieldName:m,returnGeometry:v,returnUnformattedValues:h,returnZ:g,tolerance:M},S=(null===j||void 0===j?void 0:j.toJSON())||n;O.imageDisplay="".concat(_,",").concat(s,",").concat(o),i&&(O.gdbVersion=i),S&&(delete S.spatialReference,O.geometry=JSON.stringify(S),O.geometryType=(0,a.getJsonType)(S));const E=null!==(r=null!==b&&void 0!==b?b:null===S||void 0===S?void 0:S.spatialReference)&&void 0!==r?r:null===y||void 0===y?void 0:y.spatialReference;if(E&&(O.sr=(0,p.YX)(E)),O.time=w?[w.start,w.end].join(","):null,y){const{xmin:e,ymin:t,xmax:r,ymax:o}=y;O.mapExtent="".concat(e,",").concat(t,",").concat(r,",").concat(o)}return x&&(O.layerDefs=x),Z&&!x&&(O.dynamicLayers=Z),O.layers="popup"===d?"visible":d,N&&!Z&&(O.layers+=":".concat(N.join(","))),O}function f(e){var t;const{mapExtent:r,floors:o,width:i,sublayers:n,layerIds:l,layerOption:a,gdbVersion:p}=e,c=null===n||void 0===n||null===(t=n.find((e=>null!=e.layer)))||void 0===t||null===(t=t.layer)||void 0===t?void 0:t.serviceSublayers,f="popup"===a,m={},v=(0,u.X_)({extent:r,width:i,spatialReference:null===r||void 0===r?void 0:r.spatialReference}),h=[],g=e=>{const t=0===v,r=0===e.minScale||v<=e.minScale,o=0===e.maxScale||v>=e.maxScale;if(e.visible&&(t||r&&o))if(e.sublayers)e.sublayers.forEach(g);else{if(!1===(null===l||void 0===l?void 0:l.includes(e.id))||f&&(!e.popupTemplate||!e.popupEnabled))return;h.unshift(e)}};if(null!==n&&void 0!==n&&n.forEach(g),n&&!h.length)m.layerIds=[];else{const e=(0,y.Sk)(h,c,p),t=h.map((e=>{const t=(0,d.f)(o,e);return e.toExportImageJSON(t)}));if(e)m.dynamicLayers=JSON.stringify(t);else{if(n){let e=h.map((e=>{let{id:t}=e;return t}));l&&(e=e.filter((e=>l.includes(e)))),m.layerIds=e}else(null===l||void 0===l?void 0:l.length)&&(m.layerIds=l);const e=function(e,t){const r=!(null===e||void 0===e||!e.length),o=t.filter((e=>null!=e.definitionExpression||r&&null!=e.floorInfo));return o.length?o.map((t=>{const r=(0,d.f)(e,t),o=(0,s.sqlAnd)(r,t.definitionExpression);return{id:t.id,definitionExpression:null!==o&&void 0!==o?o:void 0}})):null}(o,h);if(null!=e&&e.length){const t={};for(const r of e)r.definitionExpression&&(t[r.id]=r.definitionExpression);Object.keys(t).length&&(m.layerDefs=JSON.stringify(t))}}}return m}var m=r(46768),v=r(70058);async function h(e,t,r){const s=(u=t,t=m.default.from(u)).geometry?[t.geometry]:[],a=(0,l.Dl)(e);var u;return a.path+="/identify",(0,n.normalizeCentralMeridian)(s).then((e=>{const n=c(t,{geometry:null===e||void 0===e?void 0:e[0]}),s=(0,l.lF)((0,o.A)((0,o.A)({},a.query),{},{f:"json"},n)),u=(0,l.jV)(s,r);return(0,i.default)(a.path,u).then(g).then((e=>function(e,t){if(null===t||void 0===t||!t.length)return e;const r=new Map;function o(e){r.set(e.id,e),e.sublayers&&e.sublayers.forEach(o)}t.forEach(o);for(const i of e.results)i.feature.sourceLayer=r.get(i.layerId);return e}(e,t.sublayers)))}))}function g(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=Boolean(t.exceededTransferLimit),t.results=t.results.map((e=>v.default.fromJSON(e))),t}},70058:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var o=r(89379),i=r(35143),n=r(39356),l=r(42553),s=r(46053),a=(r(81806),r(76460),r(47249),r(28379)),u=r(85842),p=r(17707),d=r(31608);let y=class extends l.A{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,t){return n.default.fromJSON({attributes:(0,o.A)({},t.attributes),geometry:(0,o.A)({},t.geometry)})}writeFeature(e,t){if(!e)return;const{attributes:r,geometry:i}=e;r&&(t.attributes=(0,o.A)({},r)),null!=i&&(t.geometry=i.toJSON(),t.geometryType=d.Ye.toJSON(i.type))}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"displayFieldName",void 0),(0,i._)([(0,s.MZ)({type:n.default})],y.prototype,"feature",void 0),(0,i._)([(0,a.w)("feature",["attributes","geometry"])],y.prototype,"readFeature",null),(0,i._)([(0,p.K)("feature")],y.prototype,"writeFeature",null),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],y.prototype,"layerId",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"layerName",void 0),y=(0,i._)([(0,u.$)("esri.rest.support.IdentifyResult")],y);const c=y}}]);
//# sourceMappingURL=52883.81c188d0.chunk.js.map