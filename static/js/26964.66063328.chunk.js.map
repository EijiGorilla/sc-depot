{"version":3,"file":"static/js/26964.66063328.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/OrientedImageryViewer/adapters/sketch/DataCaptureAdapter.js","../node_modules/@arcgis/core/widgets/OrientedImageryViewer/mixins/SketchHandlerMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Collection.js\";import o from\"../../../../core/ReactiveMap.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mapSpaceToImageSpace as i}from\"../../dataCaptureUtils.js\";import{SketchHandlerMixin as c}from\"../../mixins/SketchHandlerMixin.js\";let p=class extends(c(t)){constructor(e){super(e),this.savedGraphics=new r,this.type=\"data-capture\",this.pendingGraphics=new o}get collectionId(){return this.viewModel.collectionId}handleCreate(e){const{state:t,graphic:r,tool:o}=e,a=r?.geometry;if(\"complete\"!==t||!r||!a)return;const{collectionId:s,viewModel:{dataCaptureLayer:i,currentBestFeature:c,imageGeometryField:p,oiObjectIdField:n,activeViewer:l,mode:h},pendingGraphics:u}=this,m=l?.imageSize;c&&p&&s&&n&&i&&m&&\"none\"!==h&&(d(r,a,p,n,c,u,s,m,h,i),this.viewModel.emit(\"after-data-capture-complete\",{pendingGraphics:u.get(s)?.toArray()??null}),this.viewModel.sketch?.create(o))}handleDelete(e){const{dataCaptureLayer:t}=this.viewModel;if(!t)return;const{graphics:r}=e;this.pendingGraphics.get(t.id)?.removeMany(r),this.savedGraphics.removeMany(r),this.viewModel.deleteDataCaptureFeatures(n(r,t.objectIdField))}handleDestroy(){const{dataCaptureLayer:e}=this.viewModel;e&&(this.viewModel.stopDataCapture(),this.savedGraphics.removeAll(),this.pendingGraphics=null)}handleUpdate(e){const{toolEventInfo:t,state:r,graphics:o}=e;if(t)this.viewModel.sketch?.undo();else switch(r){case\"complete\":this.viewModel.emit(\"deselect-data-capture-features\",{graphics:o});break;case\"start\":this.viewModel.emit(\"select-data-capture-features\",{graphics:o})}}};function d(e,t,o,a,s,c,p,d,n,l){e.sourceLayer=l,e.attributes=e.attributes??{},e.attributes[o]=btoa(JSON.stringify({geometry:i(t.clone(),n,d).toJSON()})),e.attributes[a]=s.attributes.objectId,c.has(p)||c.set(p,new r);c.get(p).add(e)}function n(e,t){return e.map((({attributes:e})=>t?e[t]:null)).filter(Boolean)}e([a()],p.prototype,\"collectionId\",null),e([a()],p.prototype,\"savedGraphics\",void 0),e([a()],p.prototype,\"type\",void 0),e([a()],p.prototype,\"pendingGraphics\",void 0),p=e([s(\"esri.widgets.OrientedImageryViewer.adapters.sketch.DataCaptureAdapter\")],p);const l=p;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{watch as t,syncAndInitial as o}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";const a={sketchHandles:\"sketch-handles\"},r=r=>{let n=class extends r{initialize(){this.addHandles(t((()=>this.viewModel?.sketch),(e=>{this.removeHandles(a.sketchHandles),e&&this.addHandles([e.on(\"create\",(e=>this.handleCreate(e))),e.on(\"update\",(e=>this.handleUpdate(e))),e.on(\"undo\",(e=>this.handleUndo(e))),e.on(\"redo\",(e=>this.handleRedo(e))),e.on(\"delete\",(e=>this.handleDelete(e))),e.on(\"destroy\",(()=>this.handleDestroy())),e.on(\"duplicate\",(e=>this.handleDuplicate(e))),t((()=>e.activeComponent),(e=>{\"draw-2d\"!==e?.type&&\"draw-3d\"!==e?.type||(e.elevationLockOnVertexAddDisabled=!0)}),o)],a.sketchHandles)}),o))}handleCreate(e){}handleUpdate(e){}handleUndo(e){}handleRedo(e){}handleDelete(e){}handleDestroy(){}handleDuplicate(e){}};return e([s()],n.prototype,\"type\",void 0),e([s()],n.prototype,\"viewModel\",void 0),n=e([d(\"esri.widgets.OrientedImageryViewer.mixins.SketchHandlerMixin\")],n),n};export{r as SketchHandlerMixin};\n"],"names":["p","c","t","constructor","e","super","this","savedGraphics","r","type","pendingGraphics","o","collectionId","viewModel","handleCreate","_u$get$toArray","_u$get","_this$viewModel$sketc","state","graphic","tool","a","geometry","s","dataCaptureLayer","i","currentBestFeature","imageGeometryField","oiObjectIdField","n","activeViewer","l","mode","h","u","m","imageSize","d","_e$attributes","sourceLayer","attributes","btoa","JSON","stringify","clone","toJSON","objectId","has","set","get","add","emit","toArray","sketch","create","handleDelete","_this$pendingGraphics","graphics","id","removeMany","deleteDataCaptureFeatures","map","_ref","filter","Boolean","objectIdField","handleDestroy","stopDataCapture","removeAll","handleUpdate","_this$viewModel$sketc2","toolEventInfo","undo","prototype","initialize","addHandles","_this$viewModel","removeHandles","on","handleUndo","handleRedo","handleDuplicate","activeComponent","elevationLockOnVertexAddDisabled"],"sourceRoot":""}