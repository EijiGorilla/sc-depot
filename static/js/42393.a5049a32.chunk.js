"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[42393],{24801:(t,e,n)=>{n.d(e,{SD:()=>a,hO:()=>o,tV:()=>l});var i=n(28899);function a(t){const e=t.toLowerCase();return"image/bmp"===e||"image/emf"===e||"image/exif"===e||"image/gif"===e||"image/x-icon"===e||"image/jpeg"===e||"image/png"===e||"image/tiff"===e||"image/x-wmf"===e}function o(t){const e=(0,i.s)("esri/themes/base/images/files/");return t?"text/plain"===t?"".concat(e,"text-32.svg"):"application/pdf"===t?"".concat(e,"pdf-32.svg"):"text/csv"===t?"".concat(e,"csv-32.svg"):"application/gpx+xml"===t?"".concat(e,"gpx-32.svg"):"application/x-dwf"===t?"".concat(e,"cad-32.svg"):"application/postscript"===t||"application/json"===t||"text/xml"===t||"model/vrml"===t?"".concat(e,"code-32.svg"):"application/x-zip-compressed"===t||"application/x-7z-compressed"===t||"application/x-gzip"===t||"application/x-tar"===t||"application/x-gtar"===t||"application/x-bzip2"===t||"application/gzip"===t||"application/x-compress"===t||"application/x-apple-diskimage"===t||"application/x-rar-compressed"===t||"application/zip"===t?"".concat(e,"zip-32.svg"):t.includes("image/")?"".concat(e,"image-32.svg"):t.includes("audio/")?"".concat(e,"sound-32.svg"):t.includes("video/")?"".concat(e,"video-32.svg"):t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?"".concat(e,"excel-32.svg"):t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?"".concat(e,"word-32.svg"):t.includes("powerpoint")||t.includes("presentationml")?"".concat(e,"report-32.svg"):"".concat(e,"generic-32.svg"):"".concat(e,"generic-32.svg")}function l(t){return t?"text/plain"===t?"file-text":"application/pdf"===t?"file-pdf":"text/csv"===t?"file-csv":"application/gpx+xml"===t?"file-gpx":"application/x-dwf"===t?"file-cad":"application/postscript"===t||"application/json"===t||"text/xml"===t||"model/vrml"===t?"file-code":"application/x-zip-compressed"===t||"application/x-7z-compressed"===t||"application/x-gzip"===t||"application/x-tar"===t||"application/x-gtar"===t||"application/x-bzip2"===t||"application/gzip"===t||"application/x-compress"===t||"application/x-apple-diskimage"===t||"application/x-rar-compressed"===t||"application/zip"===t?"file-zip":t.includes("image/")?"file-image":t.includes("audio/")?"file-sound":t.includes("video/")?"file-video":t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?"file-excel":t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?"file-word":t.includes("powerpoint")||t.includes("presentationml")?"file-ppt":"file":"file"}},42393:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var i=n(35143),a=n(67993),o=n(46053),l=(n(81806),n(76460),n(47249),n(85842)),c=n(24801),s=n(70590),p=n(38556),r=n(76099);const d="esri-attachments-column",m={contentContainer:"".concat(d,"__content"),showAttachmentsButton:"".concat(d,"__button")};let h=class extends s.default{constructor(t){super(t),this._buttonElements=new a.A,this._thumbnailElements=new a.A,this.attachmentsViewEnabled=!0,this.cellValueFormatFunction=t=>{let{root:e,rowData:n}=t;const{_showAttachmentsViewEnabled:i,formatFunction:a}=this,o=this.getCellValue(n);if(a&&n){const{index:t,item:{attachments:i,feature:l,relatedRecords:c}}=n;return a({attachments:i,column:this,feature:l,index:t,relatedRecords:c,value:o,virtualIndex:this.getVirtualRowIndex(e)})}if(!n)return o;const{index:l,item:{attachments:c,objectId:s}}=n,p="(".concat(o,")");if(!this.thumbnailsEnabled&&!i)return o;const r=document.createElement("span");r.textContent=r.title=p;let d=null;if(this.thumbnailsEnabled&&(d=this._createOrSyncThumbnails(s,null!==c&&void 0!==c?c:[])),this._showAttachmentsViewEnabled){const t=document.createElement("div");d&&t.appendChild(d),t.appendChild(r);const e=this._createOrSyncShowAttachmentsButton(s,l);return e.appendChild(t),e}const h=document.createElement("div");return h.classList.add(m.contentContainer),d&&h.appendChild(d),h.appendChild(r),h},this.icon="attachment",this.layer=null,this.onShowAttachments=null,this.sortable=!1,this.store=null,this.textAlign="center",this.thumbnailAppearance="image",this.thumbnailCount=8,this.thumbnailIconScale="m",this.thumbnailsEnabled=!0}get _showAttachmentsViewEnabled(){return!(!this.attachmentsViewEnabled||!this.onShowAttachments)}get _supportsResize(){var t;return!(null===(t=this.store)||void 0===t||!t.supportsResizeAttachments)}get effectiveLabel(){var t,e;return r.W5.sanitize(null!==(t=this.label)&&void 0!==t?t:(null===(e=this.messages)||void 0===e?void 0:e.attachments)||this.fieldName)}getCellValue(t){var e,n;return null!==(e=null===t||void 0===t||null===(n=t.item)||void 0===n||null===(n=n.attachments)||void 0===n?void 0:n.length)&&void 0!==e?e:0}_createOrSyncThumbnails(t,e){const n=document.createElement("div"),i=this._thumbnailElements.get(t);return null!==i&&void 0!==i&&i.length&&i.length===e.length?i.forEach((t=>n.appendChild(t))):this._thumbnailElements.set(t,this._createThumbnailElements(e,n)),n}_createOrSyncShowAttachmentsButton(t,e){var n;const i=this._buttonElements.get(t);if(i)return i.textContent="",i.onclick=n=>this._onShowAttachmentsClick({index:e,objectId:t,event:n}),i;const a=this.createCalciteButton({alignment:"icon-end-space-between",className:"".concat(m.showAttachmentsButton," ").concat(p.A.contentFull),iconEnd:"chevron-right",iconFlipRtl:"both",scale:this.thumbnailIconScale,textContent:"",title:null===(n=this.messages)||void 0===n?void 0:n.viewAttachments,width:"full",onclick:n=>this._onShowAttachmentsClick({index:e,objectId:t,event:n})});return this._buttonElements.set(t,a),a}_createThumbnailAnchor(t,e){let{name:n,url:i}=t;const a=document.createElement("a");return a.href="".concat(i),a.download=n,a.rel="noreferrer",a.target="_blank",a.appendChild(e),a}_createThumbnailElements(t,e){var n;const{thumbnailAppearance:i,thumbnailCount:a,thumbnailIconScale:o}=this,l=[],s=Math.min(a,t.length),p=!this.onShowAttachments,r="image"===i&&!(null===(n=this.store)||void 0===n||!n.supportsResizeAttachments);for(let d=0;d<s;d++){const n=t[d],{name:i,contentType:a}=n,s=(0,c.SD)(a)&&r?this._createThumbnailImage(n):this.createCalciteIcon({icon:(0,c.tV)(a),scale:o,textLabel:i}),m=p?this._createThumbnailAnchor(n,s):s;e&&e.appendChild(m),l.push(m)}return l}_createThumbnailImage(t){var e,n;const{name:i,size:a,url:o}=t,l=document.createElement("img"),c="".concat(o).concat(null!==o&&void 0!==o&&o.includes("?")?"&":"?").concat(this._supportsResize?"w=24":"","&fs=").concat(a);return l.alt=null!==(e=null===(n=this.messages)||void 0===n?void 0:n.attachmentThumbnail)&&void 0!==e?e:i,l.src=c,l.title=i,l}_onShowAttachmentsClick(t){var e;let{index:n,objectId:i,event:a}=t;a.preventDefault(),a.stopPropagation(),null===(e=this.onShowAttachments)||void 0===e||e.call(this,{index:n,objectId:i})}};(0,i._)([(0,o.MZ)()],h.prototype,"_showAttachmentsViewEnabled",null),(0,i._)([(0,o.MZ)()],h.prototype,"_buttonElements",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"_supportsResize",null),(0,i._)([(0,o.MZ)()],h.prototype,"_thumbnailElements",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"attachmentsViewEnabled",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"cellValueFormatFunction",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"effectiveLabel",null),(0,i._)([(0,o.MZ)()],h.prototype,"icon",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"layer",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"onShowAttachments",void 0),(0,i._)([(0,o.MZ)({readOnly:!0})],h.prototype,"sortable",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"store",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"textAlign",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"thumbnailAppearance",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"thumbnailCount",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"thumbnailIconScale",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"thumbnailsEnabled",void 0),h=(0,i._)([(0,l.$)("esri.widgets.FeatureTable.AttachmentsColumn")],h);const u=h}}]);
//# sourceMappingURL=42393.a5049a32.chunk.js.map