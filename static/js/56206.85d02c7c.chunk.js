"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[15062,56206],{15062:(e,t,o)=>{o.d(t,{T:()=>i});const i={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"}},56206:(e,t,o)=>{o.r(t),o.d(t,{default:()=>I});var i=o(89379),n=o(35143),s=o(76460),r=o(30726),a=o(46053),l=o(21403),c=(o(81806),o(47249),o(85842)),d=o(25329),p=o(23673),u=o(32265),h=o(94126),_=o(98108),v=o(87540),g=o(15062),m=o(20459),b=o(63582),w=o(54761),y=o(76099);const C="esri-coordinate-conversion",f={base:C,captureMode:"".concat(C,"--capture-mode"),noBasemap:"".concat(C,"--no-basemap"),popup:"".concat(C,"__popup"),clipboardPopup:"".concat(C,"__clipboard-popup"),conversionList:"".concat(C,"__conversion-list"),conversionRow:"".concat(C,"__row"),coordDisplay:"".concat(C,"__display"),expandButton:"".concat(C,"__expand-button"),expanded:"".concat(C,"__conversions-view--expanded"),expandDown:"".concat(C,"__conversions-view--expand-down"),expandUp:"".concat(C,"__conversions-view--expand-up"),conversionsView:"".concat(C,"__conversions-view"),rowSelect:"".concat(C,"__select-row"),toolDisplay:"".concat(C,"__tools"),modeToggle:"".concat(C,"__mode-toggle"),rowButton:"".concat(C,"__row-button"),coordinateInput:"".concat(C,"__input-coordinate"),inputForm:"".concat(C,"__input-form"),inputFormGroup:"".concat(C,"__input-group"),inputSelect:"".concat(C,"__input-select"),sectionHeading:"".concat(C,"__heading"),patternInput:"".concat(C,"__pattern-input"),settings:"".concat(C,"__settings"),settingsFormGroup:"".concat(C,"__settings-group"),settingsFormGroupHorizontal:"".concat(C,"__settings-group-horizontal"),previewCoordinate:"".concat(C,"__preview-coordinate")},T={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0};let M=class extends d.default{constructor(e,t){super(e,t),this._popupMessage=null,this._popupTimeoutId=void 0,this._clipboardPopupTimeoutId=void 0,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._clipboardPopupVisible=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.orientation="auto",this.viewModel=new p.default,this.visibleElements=(0,i.A)({},T)}loadDependencies(){return(0,h.W)({button:()=>Promise.resolve().then(o.bind(o,43285)),checkbox:()=>o.e(64990).then(o.bind(o,64990)),input:()=>Promise.all([o.e(46870),o.e(38841)]).then(o.bind(o,38841)),label:()=>Promise.resolve().then(o.bind(o,11839)),option:()=>o.e(46422).then(o.bind(o,46422)),select:()=>o.e(2253).then(o.bind(o,2253))})}get conversions(){return this.viewModel.conversions}set conversions(e){this.viewModel.conversions=e}get currentLocation(){return this.viewModel.currentLocation}set currentLocation(e){this.viewModel.currentLocation=e}get formats(){return this.viewModel.formats}set formats(e){this.viewModel.formats=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"coordinate-system"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}set multipleConversions(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}get multipleConversions(){const e=this._get("multipleConversions");return"boolean"!=typeof e||e}get locationSymbol(){return this.viewModel.locationSymbol}set locationSymbol(e){this.viewModel.locationSymbol=e}get storageEnabled(){return this.viewModel.storageEnabled}set storageEnabled(e){this.viewModel.storageEnabled=e}get storageType(){return this.viewModel.storageType}set storageType(e){this.viewModel.storageType=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return(0,i.A)((0,i.A)({},T),e)}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){var e,t;const o=null===(e=this.viewModel)||void 0===e?void 0:e.state,i="disabled"===o?(0,w.K)("div",{key:"esri-coordinate__no-basemap"},null===(t=this.messages)||void 0===t?void 0:t.noBasemap):null,n=!i&&this._inputVisible?this._renderInputForm():null,s=!i&&this._settingsVisible?this._renderSettings():null,r=i||n||s?null:this._renderConversionsView(),a=this._popupVisible?this._renderPopup():null,l={[f.captureMode]:"capture"===this.mode,[_.D.disabled]:"loading"===o,[f.noBasemap]:"disabled"===o};return(0,w.K)("div",{class:this.classes(f.base,_.D.widget,l)},a,i,r,s,n)}_addConversion(e){const t=e.target,o=t.selectedOption.value,i=x(t);if(null==o||null==i)return;const n=new u.default({format:o});t.value="default",i>=0?(this.conversions.removeAt(i),this.conversions.add(n,i)):this.conversions.add(n)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((e,t)=>{const o=t.format;return null!==o&&void 0!==o&&o.hasDisplayProperties?o:e}),null)||this.formats.find((e=>e.hasDisplayProperties))}_hidePopup(){this._popupTimeoutId&&(clearTimeout(this._popupTimeoutId),this._popupTimeoutId=void 0),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_hideClipboardPopup(){this._clipboardPopupTimeoutId&&(clearTimeout(this._clipboardPopupTimeoutId),this._clipboardPopupTimeoutId=void 0),this._clipboardPopupVisible=!1,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(e){var t,o;const i=null===(t=function(e){return e["data-conversion"]}(e.currentTarget))||void 0===t?void 0:t.displayCoordinate;null!=i&&(null!==(o=e.clipboardData)&&void 0!==o&&o.setData("text/plain",i),this._showClipboardPopup(),e.preventDefault())}_processUserInput(e){const t=(0,r.eJ)(e,"key"),o=this.viewModel;if("Enter"!==t&&t)this._badInput&&(this._badInput=!1);else{const e=this._conversionFormat||this.conversions.at(0).format;if(!e)return;const t=this._coordinateInput.value;this._reverseConvert(t,e).then((e=>{"capture"===this.mode?o.resume():this.mode="capture",this.currentLocation=e,o.setLocation(e),this._onConvertComplete()})).catch((e=>{var t;s.A.getLogger(this).error(e),this._showPopup(null===(t=this.messages)||void 0===t?void 0:t.invalidCoordinate),this._badInput=!0}))}}async _reverseConvert(e,t){const o=this.viewModel,i=await t.reverseConvert(e);return this._goToEnabled&&i&&o.goToLocation(i).catch((e=>{var t;s.A.getLogger(this).warn(e),this._showPopup(null===(t=this.messages)||void 0===t?void 0:t.locationOffBasemap)})),i}_setInputFormat(e){const t=e.target.selectedOption.value;null!=t&&(this._conversionFormat=t)}_setPreviewConversion(){const e=this._findSettingsFormat(),t=this.viewModel;if(e){var o,i;const n=this.conversions.find((t=>t.format===e));this._previewConversion=new u.default({format:e,position:{location:this.currentLocation,coordinate:null===n||void 0===n||null===(o=n.position)||void 0===o?void 0:o.coordinate}}),(null===(i=this._previewConversion.position)||void 0===i?void 0:i.coordinate)||t.previewConversion(this._previewConversion)}}_setSettingsFormat(e){const t=e.target.selectedOption.value;null!=t&&(this._settingsFormat=t,this._setPreviewConversion())}_showClipboardPopup(){this._clipboardPopupVisible?clearTimeout(this._clipboardPopupTimeoutId):this._clipboardPopupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=void 0,this._hideClipboardPopup()}),750)}_showPopup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;this._popupMessage=e,this._popupVisible?clearTimeout(this._popupTimeoutId):this._popupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=void 0,this._hidePopup()}),t)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,o=this._findSettingsFormat();o&&(o.currentPattern=t.value)}_renderConversion(e,t){var o;const{messages:i}=this;if(!i)return(0,w.K)("li",null);const{format:n}=e,s=null!==(o=null===n||void 0===n?void 0:n.label)&&void 0!==o?o:"",r="".concat(this.id,"__list-item-").concat(t),a="".concat(s," ").concat(i.conversionOutputSuffix),l=0===t,c=l||this._expanded,d=l?this._renderFirstConversion(e):this._renderTools(t,e,r),p=l&&!e.displayCoordinate?i.noLocation:e.displayCoordinate,u=(0,w.K)("div",{"aria-label":p,class:f.coordDisplay,"data-conversion":e,role:"listitem",tabIndex:0,title:null!==p&&void 0!==p?p:""},p),h=this._renderOptions(this.formats.filter((e=>e!==n)));return c?(0,w.K)("li",{"aria-label":a,class:f.conversionRow,id:r,key:e,role:"group",tabIndex:0,title:a},(0,w.K)("calcite-select",{"aria-controls":r,bind:this,class:f.rowSelect,"data-index":t,label:i.selectFormat,scale:"s",onCalciteSelectChange:this._addConversion},(0,w.K)("calcite-option",{label:s.toUpperCase(),selected:!0},s.toUpperCase()),h),u,d):null}_renderCopyButton(e){const t=this._clipboardPopupVisible&&this._renderClipboardPopup(),{messagesCommon:o}=this;return o?(0,w.K)("li",{"aria-label":o.copy,bind:this,class:this.classes(_.D.widgetButton,f.rowButton),"data-conversion":e,onclick:this._copyCoordinateOutput,oncopy:this._onCopy,onkeydown:this._copyCoordinateOutput,role:"button",tabIndex:0,title:o.copy},t,(0,w.K)("span",{"aria-hidden":"true",class:g.T.duplicate})):(0,w.K)("li",null)}_renderFirstConversion(e){const t=this.id,{messages:o,messagesCommon:i,multipleConversions:n,visibleElements:s}=this;if(!i||!o)return(0,w.K)("ul",null);const r="live"===this.mode?o.captureMode:o.liveMode,a=this._expanded?i.collapse:i.expand,l=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,c=n&&s.expandButton&&this._renderIconButton({iconType:this._expanded?"chevron-down":"chevron-up",clickFunction:this._toggleExpand,classes:[f.expandButton],attributes:{"aria-controls":"".concat(t,"__").concat(f.conversionList),label:a}}),d=!n&&s.captureButton&&this._renderIconButton({iconType:"live"===this.mode?"pin-tear":"pin-tear-f",clickFunction:this._toggleMode,classes:[f.modeToggle],attributes:{label:r}});return(0,w.K)("ul",{class:f.toolDisplay},l,c,d)}_renderInputForm(){const e=this._conversionFormat||this.conversions.at(0).format,t=this.formats.findIndex((t=>t.name===(null===e||void 0===e?void 0:e.name))),o=this.id,i="".concat(o,"__").concat(f.coordinateInput),n="".concat(o,"__").concat(f.coordinateInput,"__header"),s=this._renderOptions(this.formats,!0,t),{messages:r,messagesCommon:a,headingLevel:l}=this;if(!a||!r)return(0,w.K)("div",null);const c=this._renderIconButton({iconType:(0,y.V8)(this.container)?"arrow-right":"arrow-left",clickFunction:this._toggleInputVisibility,attributes:{label:a.back}});return(0,w.K)("div",{"aria-labelledby":n,class:f.inputForm,key:"esri-coordinate-conversion__input-form",role:"search"},(0,w.K)("div",{class:f.sectionHeading},c,(0,w.K)(v.D,{class:_.D.heading,id:n,level:l},r.inputCoordTitle)),(0,w.K)("div",{class:f.inputFormGroup},(0,w.K)("calcite-select",{"aria-controls":i,bind:this,class:f.inputSelect,label:r.selectFormat,scale:"s",onCalciteSelectChange:this._setInputFormat},s),(0,w.K)("calcite-input",{afterCreate:y.cA,"aria-labelledby":n,bind:this,class:f.coordinateInput,"data-format":e,"data-node-ref":"_coordinateInput",id:i,onkeydown:this._processUserInput,placeholder:r.inputCoordTitle,required:!0,scale:"s",spellcheck:!1,status:this._badInput?"invalid":"idle"})),(0,w.K)("div",{class:f.inputFormGroup},(0,w.K)("calcite-label",{layout:"inline",scale:"s"},(0,w.K)("calcite-checkbox",{bind:this,checked:this._goToEnabled,onCalciteCheckboxChange:this._toggleGoTo}),r.goTo),(0,w.K)("calcite-button",{appearance:"outline",bind:this,kind:"neutral",onclick:this._processUserInput,type:"button",width:"auto"},r.convert)))}_renderConversionsView(){const{messages:e}=this;if(!e)return(0,w.K)("div",null);const t="".concat(this.id,"__").concat(f.conversionList),o=this._renderPrimaryTools(),i=this._renderOptions(this.formats),n=this.conversions.map(((e,t)=>this._renderConversion(e,t))).toArray(),s=this._expanded?(0,w.K)("div",{class:f.conversionRow},(0,w.K)("calcite-select",{"aria-controls":t,bind:this,"data-index":-1,label:e.addConversion,scale:"s",onCalciteSelectChange:this._addConversion},(0,w.K)("calcite-option",{disabled:!0,selected:!0,value:"default"},e.addConversion),i),o):null,r={[f.expanded]:this._expanded,[f.expandUp]:"expand-up"===this.orientation,[f.expandDown]:"expand-down"===this.orientation};return(0,w.K)("div",{class:this.classes(f.conversionsView,r),key:"esri-coordinate-conversion__main-view"},(0,w.K)("ul",{"aria-expanded":this._expanded?"true":"false",class:f.conversionList,id:t},n),s)}_renderOptions(e,t,o){var i;const n=this.conversions.at(0),s=null===(i=n.format)||void 0===i?void 0:i.name;return e.map(((e,i)=>{var r;const a=!(t||!n)&&(s===e.name||this.conversions.map((e=>{var t;return null===(t=e.format)||void 0===t?void 0:t.name})).includes(e.name));return(0,w.K)("calcite-option",{disabled:a,key:null!==(r=e.name)&&void 0!==r?r:"unnamed-format",label:e.label.toUpperCase(),selected:i===o,value:e},e.label)})).toArray()}_renderPopup(){return(0,w.K)("div",{class:f.popup,role:"alert"},this._popupMessage)}_renderClipboardPopup(){const{messages:e}=this;return e?(0,w.K)("div",{class:this.classes(f.popup,f.clipboardPopup),role:"alert"},e.copySuccessMessage):(0,w.K)("div",null)}_renderPrimaryTools(){const{messages:e,visibleElements:t}=this;if(!e)return(0,w.K)("ul",null);const o="live"===this.mode?e.captureMode:e.liveMode,i=t.inputButton&&this._renderIconButton({iconType:"pencil",clickFunction:this._toggleInputVisibility,attributes:{label:e.inputCoordTitle}}),n=t.captureButton&&this._renderIconButton({iconType:"live"===this.mode?"pin-tear":"pin-tear-f",clickFunction:this._toggleMode,classes:[f.modeToggle],attributes:{label:o}}),s=t.settingsButton&&this._renderIconButton({iconType:"gear",clickFunction:this._toggleSettingsVisibility,attributes:{label:e.settingsTitle}});return(0,w.K)("ul",{class:f.toolDisplay},i,n,s)}_renderSettings(){var e;const t=this.id,o="".concat(t,"__").concat(f.patternInput),i="".concat(t,"__").concat(f.patternInput,"__header"),n="".concat(t,"__").concat(f.previewCoordinate),s=this.formats.filter((e=>e.hasDisplayProperties)),r=this._findSettingsFormat(),a=r?s.indexOf(r):-1,l=this._renderOptions(s,!0,a),c=null===r||void 0===r?void 0:r.currentPattern,{messages:d,messagesCommon:p,headingLevel:u}=this;if(!p||!d)return(0,w.K)("div",null);const h=this._renderIconButton({iconType:(0,y.V8)(this.container)?"arrow-right":"arrow-left",clickFunction:this._toggleSettingsVisibility,attributes:{label:p.back}}),g=this._renderIconButton({iconType:"refresh",clickFunction:this._setDefaultPattern,attributes:{label:d.defaultPattern}});return(0,w.K)("div",{"aria-labelledby":i,class:f.settings,key:f.settings},(0,w.K)("div",{class:f.sectionHeading},h,(0,w.K)(v.D,{class:_.D.heading,id:i,level:u},d.settingsTitle)),(0,w.K)("div",{class:f.settingsFormGroup},(0,w.K)("label",{for:o},d.changeCoordinateDisplay),(0,w.K)("calcite-select",{bind:this,label:d.selectFormat,width:"full",onCalciteSelectChange:this._setSettingsFormat},l),(0,w.K)("div",{class:f.settingsFormGroupHorizontal},(0,w.K)("calcite-input",{"aria-controls":n,bind:this,class:f.patternInput,id:o,spellcheck:!1,type:"text",value:c,onCalciteInputInput:this._updateCurrentPattern}),g)),(0,w.K)("div",{class:f.settingsFormGroup},(0,w.K)("label",null,p.preview,(0,w.K)("div",{class:f.previewCoordinate,id:n,tabIndex:0},null===(e=this._previewConversion)||void 0===e?void 0:e.displayCoordinate))))}_renderIconButton(e){const{iconType:t,clickFunction:o,classes:n,attributes:s}=e;return(0,w.K)("calcite-button",(0,i.A)({appearance:"transparent",bind:this,class:this.classes(n),iconStart:t,kind:"neutral",onclick:o,onkeydown:o},s))}_renderTools(e,t,o){const i=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,{messages:n}=this;if(!n)return(0,w.K)("ul",null);const s=this._renderIconButton({iconType:"x",clickFunction:this._removeConversion,attributes:{"aria-controls":o,label:n.removeConversion,"data-index":e}});return(0,w.K)("ul",{class:f.toolDisplay,role:"listitem"},i,(0,w.K)("li",{class:this.classes(f.rowButton)},s))}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const e=window.getSelection(),o=document.createRange();o.selectNodeContents(t),null!==e&&void 0!==e&&e.removeAllRanges(),null===e||void 0===e||e.addRange(o)}document.execCommand("copy")}_removeConversion(e){const t=x(e.currentTarget);null!=t&&this.conversions.removeAt(t)}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.defaultPattern)}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode="live"===this.mode?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};(0,n._)([(0,a.MZ)()],M.prototype,"conversions",null),(0,n._)([(0,a.MZ)()],M.prototype,"currentLocation",null),(0,n._)([(0,a.MZ)()],M.prototype,"formats",null),(0,n._)([(0,a.MZ)()],M.prototype,"goToOverride",null),(0,n._)([(0,a.MZ)()],M.prototype,"headingLevel",void 0),(0,n._)([(0,a.MZ)()],M.prototype,"icon",null),(0,n._)([(0,a.MZ)()],M.prototype,"label",null),(0,n._)([(0,a.MZ)(),(0,b.G)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],M.prototype,"messages",void 0),(0,n._)([(0,a.MZ)(),(0,b.G)("esri/t9n/common")],M.prototype,"messagesCommon",void 0),(0,n._)([(0,a.MZ)()],M.prototype,"mode",null),(0,n._)([(0,a.MZ)()],M.prototype,"orientation",void 0),(0,n._)([(0,a.MZ)()],M.prototype,"multipleConversions",null),(0,n._)([(0,a.MZ)()],M.prototype,"locationSymbol",null),(0,n._)([(0,a.MZ)()],M.prototype,"storageEnabled",null),(0,n._)([(0,a.MZ)()],M.prototype,"storageType",null),(0,n._)([(0,a.MZ)()],M.prototype,"view",null),(0,n._)([(0,a.MZ)({type:p.default})],M.prototype,"viewModel",void 0),(0,n._)([(0,a.MZ)()],M.prototype,"visibleElements",void 0),(0,n._)([(0,l.w)("visibleElements")],M.prototype,"castVisibleElements",null),(0,n._)([(0,m.$)()],M.prototype,"_copyCoordinateOutput",null),(0,n._)([(0,m.$)()],M.prototype,"_removeConversion",null),(0,n._)([(0,m.$)()],M.prototype,"_setDefaultPattern",null),(0,n._)([(0,m.$)()],M.prototype,"_toggleExpand",null),(0,n._)([(0,m.$)()],M.prototype,"_toggleInputVisibility",null),(0,n._)([(0,m.$)()],M.prototype,"_toggleMode",null),(0,n._)([(0,m.$)()],M.prototype,"_toggleSettingsVisibility",null),M=(0,n._)([(0,c.$)("esri.widgets.CoordinateConversion")],M);const I=M;function x(e){return e["data-index"]}}}]);
//# sourceMappingURL=56206.85d02c7c.chunk.js.map