"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[75166,84689,85685],{770:(e,t,a)=>{a.d(t,{bG:()=>l,Ty:()=>o,YJ:()=>c,Fq:()=>u,vt:()=>r});var n=a(53084),s=a(42633);class i{constructor(e){const{name:t,label:a,description:n,schemes:i}=e;this.name=t,this.label=a,this.description=n,this.schemes=i;const l=e.basemapGroups||s.Np;let r=[];Object.keys(l).forEach((e=>{r=r.concat(l[e])})),this.supportedBasemaps=r,this.basemapGroups=l}isBasemapSupported(e){const t=(0,s.T1)(e,this.supportedBasemaps);return!(!t||!this.supportedBasemaps.includes(t))}getRawSchemes(e){const{basemapId:t,basemapTheme:a}=function(e,t,a){let n=null,i=null;if(t&&(n=(0,s.T1)(t,e,!1),n)){const e=(0,s.BV)(n);null!=e&&(i=e)}return!n&&a&&(n="dark"===a?"dark-gray":"gray",i=a),n||i||(n="gray",i="light"),{basemapId:n,basemapTheme:i}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let i=a;if(t){const e=(0,s.BV)(t,this.basemapGroups);null!=e&&(i=e)}let l=e.geometryType;"multipoint"===l?l="point":"mesh"===l&&(l="polygon");const r=this.schemes[l]||this.schemes.default;return{schemesInfo:(0,n.clone)(r[i]),basemapId:t,basemapTheme:a}}}function l(e){const t=e.themeDictionary,a=new Map;for(const n in t){const e=t[n];a.set(n,new i(e))}return a}function r(e,t){const a=[];return e.forEach((e=>{e.isBasemapSupported(t)&&a.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),a}function o(e,t){if(!e)return;if(!t)return;let a=null;const n=[t.primaryScheme,...t.secondarySchemes];for(const i of n){var s;if((null===(s=i.name)||void 0===s?void 0:s.toLowerCase())===e.toLowerCase()){a=i;break}}return a}function c(e,t,a){if(!e&&!t)return[];if(!a)return[];const n=!(null!==e&&void 0!==e&&e.length),s=!(null!==t&&void 0!==t&&t.length),i=[a.primaryScheme,...a.secondarySchemes],l=[];for(const r of i){const a=!!n||e.some((e=>r.tags.includes(e))),i=!s&&t.some((e=>r.tags.includes(e)));a&&!i&&l.push(r)}return l}function u(e){const t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},17237:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(89379),s=a(50076),i=a(84171),l=a(27208),r=a(42633);async function o(e){const t="days",a=(0,n.A)((0,n.A)({},e),{},{outStatisticTypes:r.XR,unit:t}),o=await(0,i.default)(a);if(null==o.avg)throw new s.default("age-unit:insufficient-info","'avg' statistics is invalid");const c=function(e){const t=Math.abs(e.avg);let a=null;return l.supportedAgeUnits.some((e=>{const n=r.SO[e];return t>2*n&&(a=e),!!a})),a}((0,n.A)((0,n.A)({},o),{},{avg:o.avg}));if(c===t)return{unit:c,statistics:o};a.unit=c;const u=await(0,i.default)(a);if(null==u.avg)throw new s.default("age-unit:insufficient-info","'avg' statistics is invalid");return{unit:c,statistics:u}}},29857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(89379),s=a(53986),i=a(50076),l=a(68002),r=a(16525),o=a(90494),c=a(11563);const u=["layer"],f=500,p=1e8,m=1280,d=12,v=30,g=15;async function w(e){const{view:t,sampleSize:a}=e;if(!e||!e.layer)throw new i.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!t)throw new i.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,o.p)(e,"scale-range");const{layer:l}=e,r=(0,s.A)(e,u),p=e.forBinning?c.Mi:c.J4,m=(0,c.Jg)(l,p,e.forBinning);if(!m)throw new i.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,c.Ho)(p).join(", "));const d=(0,n.A)({layerAdapter:m},r);d.sampleSize=a||f,await(null===t||void 0===t?void 0:t.when());const v=null!=d.signal?{signal:d.signal}:null;return await m.load(v),d}function h(e,t,a){var n,s;const i=function(e,t){const a=d,n=m/4,s=v,i=m/4,l=g,r=m/2;let o=0,c=0,u=0,f=0;switch(e){case"point":case"multipoint":{var p,w;const e=t;o=null!==(p=e.avgMinDistance)&&void 0!==p?p:0,c=a,u=null!==(w=e.minDistance)&&void 0!==w?w:0,f=n;break}case"polyline":{var h,y;const e=t;o=null!==(h=e.avgLength)&&void 0!==h?h:0,c=s,u=null!==(y=e.minLength)&&void 0!==y?y:0,f=i;break}case"polygon":{var S,x;const e=t;o=null!==(S=e.avgSize)&&void 0!==S?S:0,c=l,u=null!==(x=e.minSize)&&void 0!==x?x:0,f=r;break}}return{resolutionForMinScale:o>0?o/c:null,resolutionForMaxScale:u>0?u/f:null}}(e.geometryType,t),r=(null===a||void 0===a?void 0:a.spatialReference)||e.layer.spatialReference;return{minScale:(0,l.gB)(null!==(n=i.resolutionForMinScale)&&void 0!==n?n:0,r),maxScale:(0,l.gB)(null!==(s=i.resolutionForMaxScale)&&void 0!==s?s:0,r)}}function y(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const n=e.constraints.effectiveLODs,s=a?n:n.slice().reverse();let i=null;for(const e of s)if(!(a?e.scale>t:e.scale<t)){i=e;break}return i}}function S(e,t,a,n){const{view:s,snapToLOD:l,layerAdapter:r}=e;if(l&&s){const e=y(s,t),n=y(s,a,!1);t=e?e.scale:t,a=n?n.scale:a}if(t<a)throw new i.default("scale-range:invalid","calculated minScale is less than maxScale.");return a>t/2&&(a=Math.floor(a/2)),t>p&&(t=0),"polygon"!==r.geometryType&&(a=0),{minScale:Math.ceil(t),maxScale:Math.floor(a),spatialStatistics:n}}async function x(e){const t=await w(e),{view:a,sampleSize:n,layerAdapter:s,signal:l,filter:o}=t,c=await s.getSampleFeatures({view:a,sampleSize:n,returnGeometry:!0,filter:o,signal:l},"json");if(null===c||void 0===c||!c.length)throw new i.default("scale-range:insufficient-info","No features are available to calculate statistics");const u=await(0,r.A)({features:c,geometryType:s.geometryType}),{minScale:f,maxScale:p}=h(s,u,a);return S(t,f,p,u)}},31650:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(89379),s=a(53986),i=(a(81806),a(50076)),l=a(76931),r=a(68002),o=a(43996),c=a(63040),u=a(29857),f=a(90494),p=a(11563);const m=["layer"],d=1e8,v=1128.497176,g=591657527.591555,w=[10,8,4,2],h=[100,100,60,30],y=[2,1,.75,.5],S=[32,18,12,6],x=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function b(e,t){const{view:a}=e;if(!a)throw new i.default("scale-range:invalid-parameters","'view' is required");const n=t.minScale||d,s=a.constraints&&"effectiveLODs"in a.constraints&&a.constraints.effectiveLODs||x,l=[];for(let i=0;i<s.length;i++){if(s[i].scale>n)continue;const e=Number(i),t=[e-3,e,e+3,e+6];for(const a of t)a>-1&&a<s.length&&l.push(s[a].scale);break}return l.sort(((e,t)=>e-t))}function T(e,t){const{view:a,layerAdapter:n}=e;if(!a)throw new i.default("scale-range:invalid-parameters","'view' is required");const s=n.fullExtent,l=n.minScale||v,o=n.maxScale||g,c=t.minScale||0,u=t.maxScale||0;let f=null!=s?(0,r.X_)(a,s):0;return f=f<l&&f>o?f:0,{scales:[l,o,c,u,f].map(Math.round).sort(((e,t)=>e-t)).filter(((e,t,a)=>!!e&&a.indexOf(e)===t)).filter(((e,t,a)=>!t||Math.abs(e-a[t-1])>5)),fullExtentScale:f}}function z(e,t){const{spatialStatistics:a,minScale:n,maxScale:s}=t;if(!("avgSize"in a)||!a.avgSize)throw new i.default("size-range:insufficient-info","average polygon size is invalid");const r=a.avgSize,{view:u}=e;if(!u)throw new i.default("scale-range:invalid-parameters","'view' is required");const{resolution:f,scale:p}=u,m=f/p,{scales:d,fullExtentScale:v}=T(e,{minScale:n,maxScale:s}),g=[],w=[];return d.forEach(((e,t)=>{const{min:a,max:n}=function(e,t){const a=Math.ceil(e/t);let n=Math.ceil(a/4);n<4?n=4:n>16&&(n=16);const s=5*n;return{min:n,max:s<50?50:s}}(r,m*e),s=d.indexOf(v),i=s>-1&&t>s?2:1;g.push(new c.default({value:e,size:(0,l.PN)(a/i)})),w.push(new c.default({value:e,size:(0,l.PN)(n/i)}))})),{minSize:new o.default({valueExpression:"$view.scale",stops:g}),maxSize:new o.default({valueExpression:"$view.scale",stops:w})}}async function A(e){const t=await async function(e){const{view:t}=e;if(!(e&&t&&e.layer))throw new i.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,f.p)(e,"size-range");const{layer:a}=e,l=(0,s.A)(e,m),r=e.forBinning?p.Mi:p.J4,o=(0,p.Jg)(a,r,e.forBinning);if(!o)throw new i.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,p.Ho)(r).join(", "));const c=(0,n.A)((0,n.A)({layerAdapter:o},l),{},{view:t});await t.when();const u=null!=c.signal?{signal:c.signal}:null;await o.load(u);const d=o.geometryType;if("point"!==d&&"multipoint"!==d&&"polyline"!==d&&"polygon"!==d)throw new i.default("size-range:not-supported","sizeRange is not supported for geometryType: ".concat(d));return c}(e),{view:a,layerAdapter:r,signal:d,filter:v}=t,g=await(0,u.default)({layer:r,view:a,signal:d,filter:v});switch(r.geometryType){case"point":case"multipoint":return function(e,t){const{minScale:a,maxScale:n}=t,s=b(e,{minScale:a,maxScale:n});if(!s.length)throw new i.default("scale-range:insufficient-info","not enough scale values");return{minSize:new o.default({valueExpression:"$view.scale",stops:s.map(((e,t)=>new c.default({value:e,size:(0,l.PN)(w[t])})))}),maxSize:new o.default({valueExpression:"$view.scale",stops:s.map(((e,t)=>new c.default({value:e,size:(0,l.PN)(h[t])})))})}}(t,g);case"polyline":return function(e,t){const{minScale:a,maxScale:n}=t,s=b(e,{minScale:a,maxScale:n});if(!s.length)throw new i.default("scale-range:insufficient-info","not enough scale values");return{minSize:new o.default({valueExpression:"$view.scale",stops:s.map(((e,t)=>new c.default({value:e,size:(0,l.PN)(y[t])})))}),maxSize:new o.default({valueExpression:"$view.scale",stops:s.map(((e,t)=>new c.default({value:e,size:(0,l.PN)(S[t])})))})}}(t,g);case"polygon":return z(t,g);case"mesh":case"multipatch":return null}return null}},80791:(e,t,a)=>{a.d(t,{_J:()=>c,_t:()=>o});var n=a(76931),s=a(42633);const i=s.Np.light,l=s.Np.dark;function r(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b}function o(e,t){let a=0;if(e.length===t.length){let n=e.every(((e,a)=>r(e,t[a])));n?a=1:(n=e.slice().reverse().every(((e,a)=>r(e,t[a]))),n&&(a=-1))}return a}function c(e,t){return Math.ceil(function(e){const t=e.width,a=e.height;let s=e.pixelSizeAt(e.toMap((0,n.tc)(.5*t,.5*a),{exclude:[]}));if(s<=0&&(s=e.pixelSizeAt(e.toMap((0,n.tc)(.5*t,.95*a),{exclude:[]})),s<=0&&"camera"in e)){const t=e.camera.position.clone();t.z=0,s=2*e.pixelSizeAt(t)}return s}(t)*(0,n.Lz)((0,n.cr)(e)))}},84171:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(89379),s=a(53986),i=a(50076),l=a(46481),r=a(27208),o=a(11563);const c=["layer"],u=["layerAdapter"];async function f(e){const t=await async function(e){if(!(e&&e.layer&&e.startTime&&e.endTime&&e.unit))throw new i.default("summary-statistics-for-age:missing-parameters","'layer', 'startTime', 'endTime' and 'unit' parameters are required");const{layer:t}=e,a=(0,s.A)(e,c),l=(0,o.Jg)(t,o.J4);if(!l)throw new i.default("summary-statistics-for-age:invalid-parameters","'layer' must be one of these types: "+(0,o.Ho)(o.J4).join(", "));const u=(0,n.A)({layerAdapter:l},a),f=u.view,p=null!=u.signal?{signal:u.signal}:null;await Promise.all([null===f||void 0===f?void 0:f.when(),l.load(p)]);const m=(0,r.verifyDates)(l,u.startTime,u.endTime,"summary-statistics-for-age:invalid-parameters");if(m)throw m;if(!u.unit||!r.supportedAgeUnits.includes(u.unit))throw new i.default("summary-statistics-for-age:invalid-parameters","Supported units are: ".concat(r.supportedAgeUnits.join(", ")));return u}(e),{layerAdapter:a}=t,f=(0,s.A)(t,u),{view:p,startTime:m,endTime:d,unit:v,minValue:g,maxValue:w,signal:h,filter:y,outStatisticTypes:S}=f,{valueExpression:x,statisticsQuery:b}=(0,r.getAgeExpressions)({layer:a,startTime:m,endTime:d,unit:v}),T=(0,n.A)((0,n.A)({layer:a,valueExpression:x},b),{},{minValue:g,maxValue:w,outStatisticTypes:S,view:p,filter:y,signal:h});return(0,l.default)(T)}}}]);
//# sourceMappingURL=84689.8457c268.chunk.js.map