"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[87102],{11742:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var i=s(89379),n=s(35143),o=s(5632),a=s(50346),r=s(68134),l=s(46053),u=(s(81806),s(76460),s(47249),s(85842)),d=s(19451),p=s(9912),c=s(48397),h=s(91039),f=s(26547);let y=class extends(o.A.IdentifiableMixin(c.A)){constructor(e){super(e),this.group=null,this.type="utilityNetworkAssociations",this.featureItem=null,this._updatingHandlesSetUp=new d.U,this.addHandles([(0,r.watch)((()=>({feature:this.feature,element:this.element,layer:this.layer})),(e=>this._createAssociationVM(e)),r.initial),(0,r.watch)((()=>this.feature),(()=>this._setFeatureItem())),(0,r.watch)((()=>this.associatedLayer),((e,t)=>this._updateLayerEditHandle(e,t)),r.initial)])}destroy(){var e;null!==(e=this._associationsVM)&&void 0!==e&&e.destroy(),this._updatingHandlesSetUp.destroy()}get activeAssociationType(){var e;return null===(e=this._associationsVM)||void 0===e?void 0:e.activeAssociationType}get associatedFeatures(){const{associatedLayer:e}=this;if(e)return this.associatedFeatureInfos.get(e)}get associatedFeatureInfos(){var e;const{_associationsVM:t}=this;if(null===t||void 0===t||null===(e=t.associationFeatures)||void 0===e||!e.size||null===t||void 0===t||!t.utilityNetwork)return new Map;const{associationFeatures:s}=t,n=new Map;return s.forEach(((e,t)=>{const s=e.map((e=>{if(null==e.title){const t=(0,f.R)(e.feature);return(0,i.A)((0,i.A)({},e),{},{title:t})}return e}));n.set(t,s)})),n}get associatedLayer(){return this._get("associatedLayer")}set associatedLayer(e){this._associationsVM.showAllEnabled=null!=e,this._set("associatedLayer",e)}get associationsViewModel(){return this._associationsVM}get canAddAssociation(){const{editable:e,utilityNetwork:t}=this;return!(!t||!this.loaded)&&e}get editable(){var e;return null===(e=this.evaluatedEditableExpression)||void 0===e||e}get featureCount(){var e,t;return null!==(e=null===(t=this._associationsVM)||void 0===t?void 0:t.featureCount)&&void 0!==e?e:0}get viewModel(){return this._associationsVM}get loaded(){var e;return"loading"!==(null===(e=this._associationsVM)||void 0===e?void 0:e.state)&&!this._updatingHandlesSetUp.updating}get map(){return this._get("map")}set map(e){var t;e&&null!==(t=this._associationsVM)&&void 0!==t&&t.set("map",e),this._set("map",e)}get utilityNetwork(){var e;return null===(e=this._associationsVM)||void 0===e?void 0:e.utilityNetwork}get associationTypes(){var e,t;return null!==(e=null===(t=this._associationsVM)||void 0===t?void 0:t.associationTypes)&&void 0!==e?e:this.element.associationTypes}get visible(){const{utilityNetwork:e}=this;return!!e&&(null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element)}get updating(){var e,t;return"loading"===(null===(e=this._associationsVM)||void 0===e?void 0:e.state)||"querying"===(null===(t=this._associationsVM)||void 0===t?void 0:t.state)}async refresh(){await(0,a.ignoreAbortErrors)(this._associationsVM.refresh())}_updateLayerEditHandle(e,t){t&&"layerId"in t&&this.removeHandles(null===t||void 0===t?void 0:t.layerId),(0,p.isAssociatedFeatureSupportedLayer)(e)&&this.addHandles((0,r.on)((()=>e),"edits",(()=>this.refresh())),e.layerId)}_createAssociationVM(e){var t;const{feature:s,element:i,layer:n}=e;if(null!==(t=this._associationsVM)&&void 0!==t&&t.destroy(),!s||!i||!n)return;const{map:o,associationTypes:a}=this;(0,p.isAssociatedFeatureSupportedLayer)(n)&&(this._associationsVM=new h.A({graphic:s,layer:n,map:o,associationTypes:a,source:"featureForm",title:this.label,description:this.description}))}_setFeatureItem(){this._updatingHandlesSetUp.addPromise((async()=>{const{feature:e,layer:t}=this;e&&t&&"getFeatureTitle"in t&&(this.featureItem={feature:e,label:await t.getFeatureTitle(e)})})())}};(0,n._)([(0,l.MZ)()],y.prototype,"_associationsVM",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"activeAssociationType",null),(0,n._)([(0,l.MZ)()],y.prototype,"associatedFeatures",null),(0,n._)([(0,l.MZ)()],y.prototype,"associatedFeatureInfos",null),(0,n._)([(0,l.MZ)()],y.prototype,"associatedLayer",null),(0,n._)([(0,l.MZ)()],y.prototype,"associationsViewModel",null),(0,n._)([(0,l.MZ)()],y.prototype,"canAddAssociation",null),(0,n._)([(0,l.MZ)()],y.prototype,"editable",null),(0,n._)([(0,l.MZ)()],y.prototype,"featureCount",null),(0,n._)([(0,l.MZ)()],y.prototype,"viewModel",null),(0,n._)([(0,l.MZ)()],y.prototype,"group",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"loaded",null),(0,n._)([(0,l.MZ)()],y.prototype,"map",null),(0,n._)([(0,l.MZ)()],y.prototype,"utilityNetwork",null),(0,n._)([(0,l.MZ)()],y.prototype,"associationTypes",null),(0,n._)([(0,l.MZ)({readOnly:!0})],y.prototype,"type",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"visible",null),(0,n._)([(0,l.MZ)()],y.prototype,"updating",null),(0,n._)([(0,l.MZ)()],y.prototype,"featureItem",void 0),y=(0,n._)([(0,u.$)("esri.widgets.FeatureForm.UtilityNetworkAssociationInput")],y);const _=y},56166:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var i=s(35143),n=s(19276),o=s(67993),a=s(60767),r=s(90632),l=s(46053),u=(s(81806),s(76460),s(47249),s(85842)),d=s(19451),p=s(53430),c=s(3320),h=s(84668);var f=s(89379);let y;const _=["blockquote","html","hr","checkbox","table","tablerow","tablecell","image"];async function g(){const{Marked:e}=await s.e(20096).then(s.bind(s,20096)),t=()=>"",i={};for(const s of _)i[s]=t;y=new e({renderer:(0,f.A)({del:function(e){let{text:t}=e;return'<span style="text-decoration:line-through;">'.concat(t,"</span>")},link:function(e){let{href:t,text:s,title:i}=e;return"<a".concat(null!=t?' href="'.concat(t,'"'):"").concat(null!=i?' title="'.concat(i,'"'):"",' target="_blank">').concat(null!==s&&void 0!==s?s:"","</a>")}},i)})}var v=s(76099);let m=class extends h.A{constructor(e){super(e),this.group=null,this.id="TextElementInput-".concat((0,r.c)()),this.type="text",this._expressionReferences=new o.A,this._expressionsUsed=new a.A,this._fieldsUsed=new a.A,this._literalParts=new n.default,this._templateParts=new n.default,this._updatingHandles=new d.U}initialize(){const{rawText:e}=this;e?"markdown"===this.textFormat?this._updatingHandles.addPromise(async function(e){return y||await g(),y.parse(e)}(e).then((e=>this._initializeTextParts(e)))):this._initializeTextParts(e):this._literalParts.push("")}get expressionsUsed(){return Array.from(this._expressionsUsed)}get fieldsIndex(){return this.layer.fieldsIndex}set fieldsIndex(e){this._overrideIfSome("fieldsIndex",e)}get fieldsUsed(){return Array.from(this._fieldsUsed)}get rawText(){return this.element.text}get text(){const e=this._templateParts.map((e=>{var t,s;return"".concat(null!==(t=null===(s=this._expressionReferences.get(e))||void 0===s?void 0:s.lastEvaluatedValue)&&void 0!==t?t:"")}));return v.W5.sanitize(function(e,t){return t.reduce(((t,s,i)=>t.concat(e.at(i),s)),"").concat(e.at(-1))}(this._literalParts,e))}get textFormat(){return this.element.textFormat}get updating(){return this._updatingHandles.updating||Array.from(this._expressionReferences.values()).some((e=>null===e||void 0===e?void 0:e.updating))}setExpressionExecutor(e,t){this._expressionReferences.set((0,c.t6)(e),t)}setFieldExecutor(e,t){this._expressionReferences.set((0,c.H1)(e),t)}_initializeTextParts(e){const{fieldsIndex:t}=this,{literals:s,templates:i}=function(e){const t=[...e.matchAll(/{[^{]+?}/g)];let s=0;const i=[],n=[];for(const o of t){const t=o[0];i.push(e.slice(s,o.index)),n.push(t),s=o.index+t.length}return i.push(e.slice(s)),{literals:i,templates:n}}(e),n=[],o=[];for(let a=0;a<i.length;a++){const e=s[a],r=(0,p.extractSubstitutionTemplatesFromString)(i[a])[0];if((0,c.s9)(r))this._expressionsUsed.add((0,c.oc)(r)),this._expressionReferences.set(r,null),n.push(e),o.push(r);else if((0,c.qG)(r)){this._expressionsUsed.add(r);const t=(0,c.t6)(r);this._expressionReferences.set(t,null),n.push(e),o.push(t)}else if(null!==t&&void 0!==t&&t.has(r)){const s=t.normalizeFieldName(r);this._fieldsUsed.add(s);const i=(0,c.H1)(s);this._expressionReferences.set(i,null),n.push(e),o.push(i)}else s[a+1]=e.concat(r,s[a+1])}n.push(s.at(-1)),this._literalParts.addMany(n),this._templateParts.addMany(o)}};(0,i._)([(0,l.MZ)()],m.prototype,"expressionsUsed",null),(0,i._)([(0,l.MZ)()],m.prototype,"fieldsIndex",null),(0,i._)([(0,l.MZ)()],m.prototype,"fieldsUsed",null),(0,i._)([(0,l.MZ)()],m.prototype,"group",void 0),(0,i._)([(0,l.MZ)()],m.prototype,"id",void 0),(0,i._)([(0,l.MZ)()],m.prototype,"rawText",null),(0,i._)([(0,l.MZ)()],m.prototype,"text",null),(0,i._)([(0,l.MZ)()],m.prototype,"textFormat",null),(0,i._)([(0,l.MZ)()],m.prototype,"type",void 0),(0,i._)([(0,l.MZ)()],m.prototype,"updating",null),m=(0,i._)([(0,u.$)("esri.widgets.FeatureForm.TextElementInput")],m);const x=m},59708:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var i=s(35143),n=s(68134),o=s(90632),a=s(46053),r=(s(81806),s(76460),s(47249),s(85842)),l=s(3320),u=s(84668);let d=class extends u.A{constructor(e){super(e),this._expressionTrackingHandles=new Map,this.id=(0,o.c)().toString(),this.type="group"}initialize(){this.addHandles([(0,n.watch)((()=>[this.visible,this.inputs]),(e=>{let[t]=e;const{inputs:s}=this,i=!!t&&void 0;for(const n of s)(0,l.rf)(n)&&(n.required=i)}),{initial:!0,equals:(e,t)=>t[0]===e[0]&&t[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}get initialState(){return this.element.initialState||"expanded"}get inputs(){return this._get("inputs")}set inputs(e){this.removeAllHandles(),e&&this.addHandles(e.map((e=>(0,n.watch)((()=>e.visible),(()=>this._dirtyEvaluatedVisibilityExpression()))))),this._set("inputs",e)}get open(){return"expanded"===this.initialState}set open(e){this._override("open",e)}get visible(){return!1!==this.evaluatedVisibilityExpression&&this.inputs&&this.inputs.some((e=>e.visible))}_dirtyEvaluatedVisibilityExpression(){const{element:e}=this;e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};(0,i._)([(0,a.MZ)()],d.prototype,"id",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"initialState",null),(0,i._)([(0,a.MZ)()],d.prototype,"inputs",null),(0,i._)([(0,a.MZ)()],d.prototype,"open",null),(0,i._)([(0,a.MZ)()],d.prototype,"type",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"visible",null),d=(0,i._)([(0,r.$)("esri.widgets.FeatureForm.GroupInput")],d);const p=d},60767:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(99486),n=s(99702);class o{constructor(e){this._observable=new n.I,this._set=new Set(e)}get size(){return(0,i.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,i.gc)(this._observable),this._set.entries()}forEach(e,t){(0,i.gc)(this._observable),this._set.forEach(((s,i)=>e.call(t,s,i,this)),t)}has(e){return(0,i.gc)(this._observable),this._set.has(e)}keys(){return(0,i.gc)(this._observable),this._set.keys()}values(){return(0,i.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,i.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},87102:(e,t,s)=>{s.r(t),s.d(t,{default:()=>J});var i=s(89379),n=s(35143),o=s(39356),a=s(4212),r=s(54099),l=s(76460),u=s(30726),d=s(91291),p=s(50346),c=s(68134),h=s(88685),f=s(46053),y=(s(47249),s(85842)),_=s(19451),g=s(80731),v=s(71764),m=s(41033),x=s(70445),E=s(16251),b=s(36693),M=s(3320),I=s(65529),A=s(91967),w=(s(81806),s(87663));const C="#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY";let F=class extends A.default{constructor(e){super(e),this._fieldReferencesLookup=new Map,this._fieldsAffectedLookup=new Map,this.preserveFieldValuesWhenHidden=!0,this._latestFieldValues=(0,i.A)({},e.feature.attributes)}initialize(){this._dependencyGraph=this._buildDependencyGraph()}destroy(){this.resetExecutors()}get _asyncExecutors(){return this.executors.filter((e=>e.isAsync))}get _baseContext(){const{editType:e,layer:t,map:s,originalFeature:i,spatialReference:n,timeZone:o}=this.arcadeContextInfo,a="scene"===(null===t||void 0===t?void 0:t.type)&&null!=t.associatedLayer?t.associatedLayer:t;return[{$originalfeature:i,$editcontext:{editType:e},$layer:a,$featureset:a,$datastore:null===t||void 0===t?void 0:t.url,$map:s},{rawOutput:!0,spatialReference:null!==n&&void 0!==n?n:void 0,timeZone:o}]}set feature(e){this._latestFieldValues=(0,i.A)({},null===e||void 0===e?void 0:e.attributes),this._set("feature",e)}evaluateAll(){return this._evaluate(this.executors)}evaluateAsyncExpressions(){return this._evaluate(this._asyncExecutors)}evaluateExpressions(e){return this._evaluate(e)}evaluateInvalidated(e){const{_fieldReferencesLookup:t,_latestFieldValues:s,feature:i}=this,n=new Set;for(const o of e)if(s[o]=i.getAttribute(o),t.has(o))for(const e of t.get(o))n.add(e);return this._evaluate([...n])}async evaluateInvalidatedByGeometry(){if(this._fieldReferencesLookup.has(C))return this._evaluate([...this._fieldReferencesLookup.get(C)])}resetExecutors(){for(const e of this.executors)e.reset()}_buildDependencyGraph(){const{_fieldReferencesLookup:e,_fieldsAffectedLookup:t,executors:s,preserveFieldValuesWhenHidden:i}=this,n=new Map(this.fieldInputs.map((e=>[e.name,e]))),o=!1===i,a=new Map(s.map((e=>[e,new Array])));for(const l of s){for(const s of l.fieldsUsed){var r;(0,w.tE)(e,s,(()=>new Set)).add(l);const i=n.get(s);[null===i||void 0===i?void 0:i.valueExpressionExecutor,null===i||void 0===i?void 0:i.editableExpressionExecutor,o?null===i||void 0===i||null===(r=i.group)||void 0===r?void 0:r.visibilityExpressionExecutor:null,o?null===i||void 0===i?void 0:i.visibilityExpressionExecutor:null].filter((e=>null!=e&&e!==l)).forEach((e=>{a.get(e).push(l),(0,w.tE)(t,e,(()=>new Set)).add(i)}))}l.geometryUsed&&(0,w.tE)(e,C,(()=>new Set)).add(l)}return a}async _evaluate(e){const t=new Map,{_dependencyGraph:s,_fieldsAffectedLookup:i,_latestFieldValues:n}=this;for(const a of e)Z(a,t,s);for(const[a,{resolver:r,dependencyPromises:l}]of t)Promise.all(l).then((async()=>{const[e,t]=this._makeContext(n);return a.executeAsync(e,t)})).then((()=>{if(i.has(a))for(const e of i.get(a))this._latestFieldValues[e.name]=e.value;r.resolve()}),(e=>{!e||(0,p.isAbortError)(e)||V(e)||a.markStale(),r.reject(e)}));const o=(await Promise.allSettled(Array.from(t.values(),(e=>{let{resolver:t}=e;return t.promise})))).filter((e=>"rejected"===e.status&&!((0,p.isAbortError)(e.reason)||V(e.reason))));if(o.length>0){const e=new AggregateError(o,"One or more expression executions failed. First error message: ".concat(o[0].reason));throw l.A.getLogger(this).error(e),e}}_makeContext(e){const[t,s]=this._baseContext,n=this.feature.clone();return n.attributes=e,[(0,i.A)((0,i.A)({},t),{},{$feature:n}),s]}get test(){}};(0,n._)([(0,f.MZ)()],F.prototype,"_asyncExecutors",null),(0,n._)([(0,f.MZ)()],F.prototype,"_baseContext",null),(0,n._)([(0,f.MZ)()],F.prototype,"feature",null),(0,n._)([(0,f.MZ)({constructOnly:!0})],F.prototype,"preserveFieldValuesWhenHidden",void 0),(0,n._)([(0,f.MZ)()],F.prototype,"executors",void 0),(0,n._)([(0,f.MZ)()],F.prototype,"fieldInputs",void 0),(0,n._)([(0,f.MZ)()],F.prototype,"arcadeContextInfo",void 0),F=(0,n._)([(0,y.$)("esri.widgets.FeatureForm.FormExpressionsManager")],F);const Z=(e,t,s)=>{if(t.has(e))return;const i=(0,p.createResolver)();t.set(e,{resolver:i,dependencyPromises:[]}),e.abort();const n=s.get(e);for(const o of n)Z(o,t,s),t.get(o).dependencyPromises.push(i.promise)},V=e=>e&&"object"==typeof e&&"message"in e&&"Cancelled"===e.message;var T,k=s(59708),S=s(44575),U=s(56166),L=s(11742),R=s(30550),H=s(53430);const N=Symbol("FormExpressionArcadeExecutor");let P=class extends A.default{constructor(e){super(e),this[T]=!0,this._lastEvaluatedValue=null,this._abortController=new AbortController,this._initialExecutionComplete=!1,this._stale=!1,this._updatingTracking=new _.U,this._executeAsyncDebounced=(0,p.debounce)((async(e,t,s)=>{const n=await this.executor.executeAsync(e,(0,i.A)((0,i.A)({},t),{},{abortSignal:s}));return s.aborted?this._lastEvaluatedValue:(this._lastEvaluatedValue=n,this._stale=!1,n)}))}get initialExecutionComplete(){return this._initialExecutionComplete}get isAsync(){return this.executor.isAsync}get fieldsUsed(){return this.executor.fieldsUsed}get syntaxTree(){return this.executor.syntaxTree}get updating(){return this._updatingTracking.updating}get stale(){return this._stale}get geometryUsed(){return this.executor.geometryUsed}get variablesUsed(){return this.executor.variablesUsed}get lastEvaluatedValue(){return this._lastEvaluatedValue}abort(){this._abortController.abort()}execute(e,t){this._abortController=new AbortController;const s=this.executor.execute(e,(0,i.A)((0,i.A)({},t),{},{abortSignal:this._abortController.signal}));return this._lastEvaluatedValue=s,this._initialExecutionComplete=!0,s}async executeAsync(e,t){return this._abortController=new AbortController,this._updatingTracking.addPromise(this._executeAsyncDebounced(e,null!==t&&void 0!==t?t:{},this._abortController.signal).then((()=>{this._initialExecutionComplete=!0})))}markStale(){this._stale=!0}reset(){this.abort(),this._lastEvaluatedValue=null,this._stale=!1}};T=N,(0,n._)([(0,f.MZ)()],P.prototype,"_lastEvaluatedValue",void 0),(0,n._)([(0,f.MZ)()],P.prototype,"_initialExecutionComplete",void 0),(0,n._)([(0,f.MZ)()],P.prototype,"_stale",void 0),(0,n._)([(0,f.MZ)()],P.prototype,"_updatingTracking",void 0),(0,n._)([(0,f.MZ)({constructOnly:!0})],P.prototype,"executor",void 0),(0,n._)([(0,f.MZ)()],P.prototype,"initialExecutionComplete",null),(0,n._)([(0,f.MZ)()],P.prototype,"isAsync",null),(0,n._)([(0,f.MZ)()],P.prototype,"fieldsUsed",null),(0,n._)([(0,f.MZ)()],P.prototype,"syntaxTree",null),(0,n._)([(0,f.MZ)()],P.prototype,"updating",null),(0,n._)([(0,f.MZ)()],P.prototype,"stale",null),(0,n._)([(0,f.MZ)()],P.prototype,"geometryUsed",null),(0,n._)([(0,f.MZ)()],P.prototype,"variablesUsed",null),(0,n._)([(0,f.MZ)()],P.prototype,"lastEvaluatedValue",null),P=(0,n._)([(0,y.$)("esri.widgets.support.forms.expressions.FormExpressionArcadeExecutor")],P);const j=new o.default({attributes:{}}),O={field:["editableExpression","requiredExpression","valueExpression","visibilityExpression"],group:["visibilityExpression"],relationship:["editableExpression","visibilityExpression"],text:["visibilityExpression"],utilityNetworkAssociations:["editableExpression","visibilityExpression"]},z="#JSAPI_CONTINGENT_VALUE_ANY_HASH",G="esri.widgets.FeatureForm.FeatureFormViewModel",W=()=>l.A.getLogger(G);let D=class extends(d.A.EsriPromiseMixin(r.A.EventedAccessor)){constructor(e){super(e),this._expressionExecutorsInUse=new Set,this._expressionExecutorLookup=new Map,this._expressionsManager=null,this._contingentValuesCache=null,this._featureClone=j.clone(),this._initialFeature=j.clone(),this._timeZone=null,this._updatingHandles=new _.U,this.activeAssociation=null,this.arcadeEditType="NA",this.contingencyConstraintViolations=new Map,this.disabled=!1,this.highlightHelper=null,this.inputs=[],this.map=null,this.callbacks=null,this.strict=!1,this.pendingSubtypeChoice=null,this._updateInputs=(0,p.debounce)((async()=>{this._stopExpressions();const{_featureClone:e,_initialFeature:t,arcadeEditType:s,formTemplate:i,inputs:n,layer:o,timeZone:a}=this;if(!o)return;const r={arcadeEditType:s,feature:e,initialFeature:t,layer:o,timeZone:a},l=n.slice(),u=null!==i&&void 0!==i&&i.elements&&i.elements.length>0?await this._updateInputsUsingFormElements(l,i.elements,r):this._updateInputsUsingLayerFields(l,null===o||void 0===o?void 0:o.fields,r);this.inputs=u,await this._startExpressions()}))}initialize(){const e=(0,c.watch)((()=>{var e;return[this.layer,!(null===(e=this.layer)||void 0===e||!e.loaded),this.formTemplate,this.feature,this.timeZone,this.arcadeEditType]}),(e=>{let[t,s]=e;null!=t&&(s?this._updatingHandles.addPromise(this._updateInputs()):t.load().catch((()=>{})))}),c.syncAndInitial),t=(0,c.watch)((()=>this._arcadeContextInfo),(e=>{null!=this._expressionsManager&&(this._expressionsManager.arcadeContextInfo=e,this._updatingHandles.addPromise(this._expressionsManager.evaluateAll().finally((()=>this._afterExpressionsEvaluated()))))})),s=(0,c.watch)((()=>this.layer),(e=>{const t="subtype-sublayer"===(null===e||void 0===e?void 0:e.type)?e.parent:"feature"===(null===e||void 0===e?void 0:e.type)?e:null;t&&this.addResolvingPromise(E.A.createLoadedLayerContingentValuesCache(t).then((e=>{this._contingentValuesCache=e,this.notifyChange("fieldsWithContingentValues")})))}),{initial:!0});this.addHandles([e,t,s])}destroy(){var e;this.feature=null,this.layer=null,this._contingentValuesCache=(0,u.pR)(this._contingentValuesCache),null!==(e=this.highlightHelper)&&void 0!==e&&e.removeAll(),this._updatingHandles.destroy()}get _expressionInfosLookup(){var e;return new Map(null===(e=this.formTemplate)||void 0===e||null===(e=e.expressionInfos)||void 0===e?void 0:e.map((e=>[e.name,e])))}get activeAssociationInput(){return this.allAssociationInputs.find((e=>e.uid===this.associationId))}get activeRelationshipInput(){return this.allRelationshipInputs.find((e=>e.relationshipId===this.relationshipId||e.activeCategory||e.showAllEnabled))}get _arcadeContextInfo(){const{_initialFeature:e,arcadeEditType:t,layer:s,map:i,spatialReference:n,timeZone:o}=this;return{layer:(0,x.S)(s)?s:null,originalFeature:e,editType:t,map:i,spatialReference:n,timeZone:o}}get associationId(){return this._get("associationId")}set associationId(e){var t;null==e&&null!==(t=this.activeAssociationInput)&&void 0!==t&&t.viewModel&&(this.activeAssociationInput.associatedLayer=null,this.activeAssociationInput.viewModel.activeAssociationType=null),this._set("associationId",e)}get associatedLayer(){var e;return null===(e=this.activeAssociationInput)||void 0===e?void 0:e.associatedLayer}set associatedLayer(e){this.activeAssociationInput&&(this.activeAssociationInput.associatedLayer=e)}get allAssociationInputs(){return(0,M.TN)(this.inputs)}get allFieldInputs(){return(0,M.Iy)(this.inputs)}get allGroupInputs(){return this.inputs.filter(M.Et)}get allRelationshipInputs(){return(0,M.cU)(this.inputs)}get _layerFieldsByName(){var e;return new Map(null===(e=this.layer)||void 0===e?void 0:e.fields.map((e=>[e.name,e])))}get feature(){return this._get("feature")}set feature(e){const t=this._get("feature");this._featureClone=e?e.clone():j.clone(),this._initialFeature=this._featureClone.clone(),this._expressionsManager&&(this._expressionsManager.feature=this._featureClone),e?(this._resetFieldInputValues(this._featureClone),this.allRelationshipInputs.forEach((t=>t.feature=e))):(this.inputs.forEach((e=>e.destroy())),this.inputs.length=0),t!==e&&(this.pendingSubtypeChoice=null),this.contingencyConstraintViolations.clear(),this._set("feature",e)}get fieldsWithContingentValues(){if(null==this._contingentValuesCache)return new Set;const e=this._contingentValuesCache.fieldGroups.flatMap((e=>e.fields));return new Set(e)}get formTemplate(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null}set formTemplate(e){void 0===e?this._clearOverride("formTemplate"):this._override("formTemplate",e)}get formDescription(){const{formTemplate:e,layer:t}=this;return null!==e&&void 0!==e&&e.description&&t?(0,M.LZ)({label:e.description,attributes:this.getValues(),fieldsIndex:t.fieldsIndex,timeZone:this.timeZone}):null}get formTitle(){const{formTemplate:e,layer:t}=this;return null!==e&&void 0!==e&&e.title&&t?(0,M.LZ)({label:e.title,attributes:this.getValues(),fieldsIndex:t.fieldsIndex,timeZone:this.timeZone}):null}get formHeaderVisible(){const{activeRelationshipInput:e,activeAssociationInput:t,formDescription:s,formTitle:i}=this;return!(e||t||!s&&!i)}get joinedContingentValues(){return this._joinContingentValues()}get layer(){var e;return null!==(e=this.feature)&&void 0!==e&&e.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null}set layer(e){this._override("layer",e)}get relationshipId(){return this._get("relationshipId")}set relationshipId(e){const t=this.allRelationshipInputs;if(null!=e&&e===this.relationshipId||t.forEach((e=>{e.showAllEnabled=!1,e.activeCategory=null})),null!=e){const s=t.find((t=>t.relationshipId===e));s&&(s.showAllEnabled=!0)}this._set("relationshipId",e)}get spatialReference(){var e,t;return null!==(e=null===(t=this.layer)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:null}set spatialReference(e){this._override("spatialReference",e)}get state(){var e;return null!==(e=this.layer)&&void 0!==e&&e.loaded?"ready":"disabled"}get submittable(){return!!this.valid||this.allFieldInputs.filter((e=>!e.valid)).every((e=>{let{submittable:t}=e;return t}))}get timeZone(){const{layer:e}=this;if(e&&"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone)return b.n$;const t=e&&"preferredTimeZone"in e&&e.preferredTimeZone;return this._timeZone===b.L5?t||b.n$:this._timeZone||b.qU}set timeZone(e){this._timeZone=e}get updating(){return this._updatingHandles.updating}get valid(){const e=this.allFieldInputs;return e.length>0&&e.every((e=>{let{valid:t}=e;return t}))}findField(e){return this.allFieldInputs.find((t=>t.name===e))}getFieldValueOptionsForField(e,t){var s;const i=this.findField(e);if(!i)return[[],[],[]];const n="coded-value"===(null===(s=i.domain)||void 0===s?void 0:s.type)?i.domain.codedValues.map((e=>{let{name:t,code:s}=e;return{name:t,value:s}})):[],o=null==i.value||n.some((e=>e.value===i.value))?[]:[{name:"".concat(i.value),value:i.value}],a=this.fieldsWithContingentValues.has(e)?this._getContingentValueOptionsForField(e,t):[];if(a.length>0){const e=new Set(a.map((e=>e.value)));return[a,n.filter((t=>!e.has(t.value))),o]}return[n,[],o]}getValue(e){var t,s;const i=null===(t=this.layer)||void 0===t?void 0:t.getField(e);if(null!=i)return null!==(s=this._featureClone.getAttribute(i.name))&&void 0!==s?s:null}setValue(e,t){const{_featureClone:s,strict:i}=this,n=this.findField(e);t=""===t?null:t,n&&s.getAttribute(e)!==t&&(n.value=t,i&&!n.valid||(this._afterValueChange(n),null!=this._expressionsManager&&this._updatingHandles.addPromise(this._expressionsManager.evaluateInvalidated([n.name]).finally((()=>this._afterExpressionsEvaluated())))))}getValues(){return(0,i.A)({},this._featureClone.attributes)}overrideInitialFeature(e){this._initialFeature=e}submit(){const e=this.allFieldInputs,t=new Set(e.filter((e=>e.valid)).map((e=>{let{name:t}=e;return t}))),s=e.filter((e=>!e.valid)).map((e=>{let{name:t}=e;return t})),i=this.getValues();if(this.validateContingencyConstraints(i,{includeIncompleteViolations:!0}).length>0)for(const[n,o]of this.contingencyConstraintViolations.entries())"error"===o.type&&(t.delete(n),s.push(n));this.notifyChange("submittable"),this.notifyChange("valid"),this.emit("submit",{valid:[...t],invalid:s,values:i})}validateContingencyConstraints(e,t){const{_contingentValuesCache:s}=this,i=new Map;if(this.contingencyConstraintViolations=i,null==s)return[];const{invalid:n,incomplete:o}=s.validateContingencyConstraints(e),a=[...n,...null!==t&&void 0!==t&&t.includeIncompleteViolations?o:[]];for(const r of a)for(const e of r.fieldGroup.fields)i.set(e,r);return a}notifyFeatureGeometryChanged(){const{_expressionsManager:e,feature:t,_featureClone:s}=this;t&&(s.geometry=t.geometry,null!=e&&this._updatingHandles.addPromise(e.evaluateInvalidatedByGeometry().finally((()=>this._afterExpressionsEvaluated()))))}applySubtypeDefaults(e){const{defaultValues:t}=e,{allFieldInputs:s}=this;for(const{name:i}of s){const e=t[i];null!=e&&this.setValue(i,e)}}_emitChangeEvent(e){let{name:t,valid:s,value:i}=e;this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:t,value:i,valid:s})}async _updateInputsUsingFormElements(e,t,s){const i=new Map;for(const a of e)if((0,M.Et)(a)){i.set(a.element,a);for(const e of a.inputs)e.element&&i.set(e.element,e)}else a.element&&i.set(a.element,a);const n=new Map,o=await this._updateInputsUsingFormElementsRecursive({existingInputsByElement:i,updatedElements:t.filter($),sharedInitializationProperties:s,group:null,newExpressionExecutorPromises:n});for(const[a,r]of i.entries())i.delete(a),r.destroy();return await Promise.all(Array.from(n.values())),o}async _updateInputsUsingFormElementsRecursive(e){const{existingInputsByElement:t,updatedElements:s,sharedInitializationProperties:i,group:n,newExpressionExecutorPromises:o}=e,a=[];for(const r of s){const e=t.has(r),s=e?t.get(r):this._makeInputFromElement(r,i,n);if(s){if(a.push(s),await(0,c.whenOnce)((()=>!s.updating)),this._assignExpressionExecutors(s,r,o),e)if(t.delete(r),(0,M.Et)(s)){const{feature:e,timeZone:t}=i;s.set({feature:e,timeZone:t})}else if((0,M.nT)(s)){const e=this.relationshipId===r.relationshipId;s.set(i),s.set({map:this.map,showAllEnabled:e})}else(0,v.D7)(s)?(s.set(i),s.set({map:this.map})):s.set(i);if((0,v.CG)(r)){const e=r.elements.filter((e=>$(e)));s.inputs=await this._updateInputsUsingFormElementsRecursive({existingInputsByElement:t,updatedElements:e,sharedInitializationProperties:i,group:s,newExpressionExecutorPromises:o})}}}return a}_updateInputsUsingLayerFields(e,t,s){if(!Array.isArray(t))return W().warn(this.declaredClass,"No attribute fields found."),[];const n=new Map;for(const i of e)if((0,M.Et)(i)){for(const e of i.inputs)e.destroy();i.inputs.length=0,i.destroy()}else(0,M.nT)(i)?i.destroy():(0,M.rf)(i)&&(null!==i.element?i.destroy():n.set(i.field,i));const o=[];for(const d of t){var a,r,l,u;const e=null!==(a=null===(r=s.feature)||void 0===r?void 0:r.getAttribute(d.name))&&void 0!==a?a:null,t=null!==(l=n.get(d))&&void 0!==l?l:new I.default({field:d,preservesValueWhenHidden:null===(u=this.formTemplate)||void 0===u?void 0:u.preserveFieldValuesWhenHidden});o.push(t.set((0,i.A)((0,i.A)({},s),{},{value:e}))),n.delete(d)}for(const[i,d]of n.entries())n.delete(i),d.destroy();return o}_resetFieldInputValues(e){for(const t of this.allFieldInputs)t.value=e.getAttribute(t.name)}_makeInputFromElement(e,t,s){return(0,v.CG)(e)?function(e,t){const{feature:s,layer:i}=t;return new k.default({element:e,inputs:[],feature:s,layer:i})}(e,t):(0,v.jt)(e)?this._makeFieldInputFromElement(e,t,s):(0,v.DN)(e)?this._makeRelationshipInputFromElement(e,t,s):(0,v.D7)(e)?this._makeUtilityNetworkAssociationInputFromElement(e,t,s):(0,v.oo)(e)?function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{feature:i,layer:n,timeZone:o}=t;return new U.default({element:e,feature:i,group:s,layer:n,timeZone:o})}(e,t):(0,v.D7)(e)?this._makeUtilityNetworkAssociationInputFromElement(e,t,s):(0,a.Xb)()}_makeFieldInputFromElement(e,t,s){var i,n;const{arcadeEditType:o,feature:a,initialFeature:r,layer:l,timeZone:u}=t,{fieldName:d}=e,p=d&&this._layerFieldsByName.get(d);return p?new I.default({arcadeEditType:o,element:e,field:p,value:null!==(i=null===a||void 0===a?void 0:a.getAttribute(e.fieldName))&&void 0!==i?i:null,feature:a,initialFeature:r,layer:l,group:s,preservesValueWhenHidden:null===(n=this.formTemplate)||void 0===n?void 0:n.preserveFieldValuesWhenHidden,timeZone:u}):null}_makeRelationshipInputFromElement(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{map:i}=this,{feature:n,layer:o,timeZone:a}=t,r=new S.default({element:e,feature:n,group:s,layer:o,map:i,timeZone:a});return r.addHandles((0,c.on)((()=>r.relatedLayer),"edits",(()=>{var e;return null===(e=this._expressionsManager)||void 0===e?void 0:e.evaluateAsyncExpressions()}))),r}_makeUtilityNetworkAssociationInputFromElement(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{map:i}=this,{feature:n,layer:o,timeZone:a}=t;return new L.default({element:e,feature:n,group:s,layer:o,map:i,timeZone:a})}_assignExpressionExecutors(e,t,s){const i=O[t.type],n=[];for(const r of i){const i="".concat(r,"Executor");if(e[i]){this._useExecutor(e[i]);continue}const l=t[r];if(null!=l&&""!==l){var o,a;const t=null!==(o=null===(a=this._expressionInfosLookup.get(l))||void 0===a?void 0:a.expression)&&void 0!==o?o:l;n.push(this._getOrCreateExecutorForExpression(t,s).then((t=>{e[i]=this._useExecutor(t)})))}}return(0,M.k_)(e)&&n.push(...this._assignTextElementExpressionExecutors(e,s)),n}_assignTextElementExpressionExecutors(e,t){const{_expressionInfosLookup:s}=this,i=[];for(const n of e.expressionsUsed){const o=s.get(n);null!=o?i.push(this._getOrCreateExecutorForExpression(o.expression,t).then((t=>e.setExpressionExecutor(n,this._useExecutor(t))))):l.A.getLogger(this).error("feature-form:expression-not-found","Could not find expressionInfo object with name '".concat(n,"'"))}for(const n of e.fieldsUsed){const s="return $feature['".concat(n,"'];");i.push(this._getOrCreateExecutorForExpression(s,t).then((t=>e.setFieldExecutor(n,this._useExecutor(t)))))}return i}async _getOrCreateExecutorForExpression(e,t){const{_expressionExecutorLookup:s}=this;if(s.has(e))return s.get(e);if(t.has(e))return t.get(e);const i=(async(e,t)=>{const s=(0,R.createArcadeProfile)("form-calculation"),i=await(0,R.createArcadeExecutor)(e,s,{});return null!==t&&void 0!==t&&t.fieldsIndex&&(i.fieldsUsed=(0,H.fixFields)(t.fieldsIndex,i.fieldsUsed)),new P({executor:i})})(e,this.layer);t.set(e,i);const n=await i;return s.set(e,n),n}_createExpressionsManager(e){const{_arcadeContextInfo:t,_featureClone:s,allFieldInputs:i,formTemplate:n}=this;this._expressionsManager=new F({executors:e,feature:s,arcadeContextInfo:t,fieldInputs:i,preserveFieldValuesWhenHidden:!0===(null===n||void 0===n?void 0:n.preserveFieldValuesWhenHidden)})}async _startExpressions(){if(0===this._expressionExecutorsInUse.size)return;const e=Array.from(this._expressionExecutorsInUse);this._createExpressionsManager(e),await this._expressionsManager.evaluateAll().finally((()=>this._afterExpressionsEvaluated()))}_stopExpressions(){this._expressionsManager=(0,u.pR)(this._expressionsManager),this._expressionExecutorsInUse.clear()}_useExecutor(e){return this._expressionExecutorsInUse.add(e),e}_afterValueChange(e){const{name:t,value:s}=e,{_featureClone:i,formTemplate:n,layer:o}=this;if(!o)return;const a=i.getAttribute(t);i.setAttribute(t,s);const{typeFieldName:r,types:l}=(0,M.CU)(o);if((e.isSubtypeField||t===r)&&s!==a){if("subtype-sublayer"===o.type){var u;const e=null===(u=o.parent)||void 0===u?void 0:u.findSublayerForFeature(i);e&&(this.feature&&(this.feature.sourceLayer=e),i.sourceLayer=e)}const e=new Set;for(const t of l)if(t.domains&&"object"==typeof t.domains)for(const s of Object.keys(t.domains))e.add(s);for(const t of e){const e=this.findField(t);e&&e.notifyChange("domain")}this.notifyChange("joinedContingentValues")}if(null!=n){const{description:e,title:s}=n;s&&(0,h.mk)(s,t)&&this.notifyChange("formTitle"),e&&(0,h.mk)(e,t)&&this.notifyChange("formDescription")}this._emitChangeEvent(e)}_afterExpressionsEvaluated(){const{_featureClone:e}=this;for(const t of this.allFieldInputs)t.value!==e.getAttribute(t.name)&&this._afterValueChange(t)}_joinContingentValues(){const e=this._contingentValuesCache;if(null==e)return[];const{typeFieldName:t}=(0,M.CU)(this.layer),s=t?this.getValue(t):null,i=[];for(const a of e.fieldGroups){const{contingencies:e,fields:t,name:n}=a,o=[];for(const i of e)i.isRetired||null!=i.subtype&&i.subtype.code!==s||o.push({values:i.values});o.length>0&&i.push({name:n,fields:t,contingencies:o})}const[n,o]=this._generateJoinPlan(i);return[...n.flatMap((e=>this._joinFieldGroupContingencies(e))),...o.flatMap((e=>e.contingencies))]}_generateJoinPlan(e){const t=new Map,s=[],i=new Set;for(const l of e)for(const e of l.fields)if(t.has(e)){const n=t.get(e),o=l,a=[n.name,o.name].sort().join("|");if(i.has(a))continue;s.push([n,o]),i.add(a),t.set(e,o)}else t.set(e,l);const n=new Set(s.flat()),o=new Set(e);for(const l of n)o.delete(l);const a=new Map,r=new Map;for(const l of new Set(s.flat())){const e=Symbol(l.name);a.set(e,new Set([l])),r.set(l,e)}for(const[l,u]of s){const e=r.get(l),t=r.get(u);if(e===t)continue;const s=a.get(e),i=a.get(t);for(const n of i)s.add(n),r.set(n,e);a.delete(t)}return[[...a.values()].map((e=>[...e])),[...o]]}_joinFieldGroupContingencies(e){const t=e.slice(),s=t.shift();let i=t.shift(),n=this._generateJoinKey(s.fields,i.fields),o=new Set([...s.fields,...i.fields]),a=new Map;for(const d of s.contingencies){var r;const[e]=this._hashContingency(d,n.codedValueFields,!0);a.has(e)?null===(r=a.get(e))||void 0===r||r.push(d):a.set(e,[d])}for(;t.length>0;){const e=new Map,s=t.shift(),r=this._generateJoinKey(o,s.fields);for(const t of i.contingencies){const[s,i]=this._hashContingency(t,n.codedValueFields),o=i?this._findMatchingContingenciesWithAnyHashMask(a,s):a.get(s);if(a.has(z)&&null!==o&&void 0!==o&&o.push(...this._findMatchingContingenciesContainingAny(t,a.get(z),n.codedValueFields)),null!=o)for(const a of o){var l;const s=n.rangeFields.length>0?this._joinContingenciesWithRangeDomains(a,t,n.rangeFields):this._joinContingencies(a,t);if(null==s)break;const[i]=this._hashContingency(s,r.codedValueFields,!0);e.has(i)?null===(l=e.get(i))||void 0===l||l.push(s):e.set(i,[s])}}a=e,i=s,n=r,o=new Set([...o,...i.fields])}const u=[];for(const d of i.contingencies){const[e,t]=this._hashContingency(d,n.codedValueFields),s=t?this._findMatchingContingenciesWithAnyHashMask(a,e):a.get(e);if(a.has(z)&&s.push(...this._findMatchingContingenciesContainingAny(d,a.get(z),n.codedValueFields)),null!=s)for(const i of s){const e=n.rangeFields.length>0?this._joinContingenciesWithRangeDomains(i,d,n.rangeFields):this._joinContingencies(i,d);null!=e&&u.push(e)}}return u}_joinContingencies(e,t){const s={values:(0,i.A)((0,i.A)({},e.values),t.values)};for(const[i,n]of Object.entries(s.values))"any"===n.objectType&&null!=e.values[i]&&(s.values[i]=e.values[i]);return s}_joinContingenciesWithRangeDomains(e,t,s){const i=this._joinContingencies(e,t);for(const n of s){const s=e.values[n],o=t.values[n],{leftIsNull:a,rightIsNull:r,bothAreNull:l,leftIsAny:u,rightIsAny:d,bothAreAny:p,leftIsRange:c,rightIsRange:h}=this._compareObjectTypes(s.objectType,o.objectType);if(l||p)continue;if(a&&d||r&&u){i.values[n]=new m.A({objectType:"null"});continue}if(a&&h||r&&c)return null;u?(s.minValue=-1/0,s.maxValue=1/0):d&&(o.minValue=-1/0,o.maxValue=1/0);const f=Math.max(s.minValue,o.minValue),y=Math.min(s.maxValue,o.maxValue);if(f>y)return null;i.values[n]=new m.A({objectType:"range",minValue:f,maxValue:y})}return i}_findMatchingContingenciesContainingAny(e,t,s){return t.filter((t=>s.every((s=>{var i,n;const o=t.values[s],a=e.values[s];return"any"===o.objectType||"any"===a.objectType||(null===(i=o.codedValue)||void 0===i?void 0:i.code)===(null===(n=a.codedValue)||void 0===n?void 0:n.code)}))))}_findMatchingContingenciesWithAnyHashMask(e,t){const s=RegExp("".concat(t,"$")),i=[];for(const[n,o]of e){if(n===z)break;s.test(n)&&i.push(...o)}return i}_generateJoinKey(e,t){const s=Array.isArray(e)?new Set(e):e,i=Array.isArray(t)?new Set(t):t,n=s.size<i.size?s:i,o=n===s?i:s,{feature:a}=this,r=new Set,l=new Set;for(const d of n)if(o.has(d)){var u;const e=null===(u=this.layer)||void 0===u?void 0:u.getFieldDomain(d,{feature:null!==a&&void 0!==a?a:void 0,excludeImpliedDomains:!0});if(null==e)continue;switch(e.type){case"coded-value":r.add(d);break;case"range":l.add(d)}}return{codedValueFields:[...r],rangeFields:[...l]}}_contingencyIsValid(e,t){const s={};for(const{name:i,value:n}of this.allFieldInputs)this.fieldsWithContingentValues.has(i)&&null!=n&&i!==e&&(s[i]=n);return Object.entries(s).every((e=>{let[s,i]=e;return!t.values.hasOwnProperty(s)||(0,M.Kl)(i,t.values[s])}))}_getContingentValueOptionsForField(e,t){const s=this.joinedContingentValues.slice(),i=new Map,n={code:"",name:null!==t&&void 0!==t?t:"No value"};for(const o of s){const t=o.values[e];if("code"===(null===t||void 0===t?void 0:t.objectType)||"null"===(null===t||void 0===t?void 0:t.objectType)){const{code:s,name:a}=t.codedValue&&"null"!==t.objectType?t.codedValue:n;!i.has(s)&&this._contingencyIsValid(e,o)&&i.set(s,{name:a,value:s})}}return[...i.values()]}_hashContingency(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.length<1)return["#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",!1];const i=[];let n=!1;for(const a of t){var o;const t=e.values[a];if("any"===t.objectType){if(s)return[z,!0];n=!0,i.push("".concat(a,":.*"))}else"null"===t.objectType?i.push("".concat(a,":").concat("#JSAPI_CONTINGENT_VALUE_NULL_HASH")):i.push("".concat(a,":").concat(null===(o=t.codedValue)||void 0===o?void 0:o.code))}return[i.sort().join("&"),n]}_compareObjectTypes(e,t){return{leftIsNull:"null"===e,rightIsNull:"null"===t,bothAreNull:"null"===e&&"null"===t,leftIsAny:"any"===e,rightIsAny:"any"===t,bothAreAny:"any"===e&&"any"===t,leftIsRange:"range"===e,rightIsRange:"range"===t}}get test(){return{featureClone:this._featureClone}}};function $(e){return"field"===e.type||"group"===e.type||"relationship"===e.type||"text"===e.type||"utilityNetworkAssociations"===e.type||(W().warn("form-info::unsupported-element-type","Only element types 'field', 'group' and 'relationship' are supported","Element ".concat(e.label," has unsupported type '").concat(e.type,"'")),!1)}(0,n._)([(0,f.MZ)()],D.prototype,"_expressionInfosLookup",null),(0,n._)([(0,f.MZ)()],D.prototype,"_featureClone",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"_timeZone",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"activeAssociation",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"activeAssociationInput",null),(0,n._)([(0,f.MZ)()],D.prototype,"activeRelationshipInput",null),(0,n._)([(0,f.MZ)()],D.prototype,"_arcadeContextInfo",null),(0,n._)([(0,f.MZ)()],D.prototype,"associationId",null),(0,n._)([(0,f.MZ)()],D.prototype,"associatedLayer",null),(0,n._)([(0,f.MZ)()],D.prototype,"allAssociationInputs",null),(0,n._)([(0,f.MZ)()],D.prototype,"allFieldInputs",null),(0,n._)([(0,f.MZ)()],D.prototype,"allGroupInputs",null),(0,n._)([(0,f.MZ)()],D.prototype,"allRelationshipInputs",null),(0,n._)([(0,f.MZ)()],D.prototype,"_layerFieldsByName",null),(0,n._)([(0,f.MZ)()],D.prototype,"arcadeEditType",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"contingencyConstraintViolations",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"disabled",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"feature",null),(0,n._)([(0,f.MZ)()],D.prototype,"fieldsWithContingentValues",null),(0,n._)([(0,f.MZ)({type:g.default})],D.prototype,"formTemplate",null),(0,n._)([(0,f.MZ)()],D.prototype,"formDescription",null),(0,n._)([(0,f.MZ)()],D.prototype,"formTitle",null),(0,n._)([(0,f.MZ)()],D.prototype,"formHeaderVisible",null),(0,n._)([(0,f.MZ)()],D.prototype,"highlightHelper",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"inputs",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"joinedContingentValues",null),(0,n._)([(0,f.MZ)()],D.prototype,"layer",null),(0,n._)([(0,f.MZ)()],D.prototype,"map",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"callbacks",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"relationshipId",null),(0,n._)([(0,f.MZ)()],D.prototype,"spatialReference",null),(0,n._)([(0,f.MZ)()],D.prototype,"state",null),(0,n._)([(0,f.MZ)()],D.prototype,"strict",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"submittable",null),(0,n._)([(0,f.MZ)()],D.prototype,"timeZone",null),(0,n._)([(0,f.MZ)()],D.prototype,"updating",null),(0,n._)([(0,f.MZ)()],D.prototype,"valid",null),(0,n._)([(0,f.MZ)()],D.prototype,"pendingSubtypeChoice",void 0),(0,n._)([(0,f.MZ)()],D.prototype,"getValues",null),(0,n._)([(0,f.MZ)()],D.prototype,"submit",null),(0,n._)([(0,f.MZ)()],D.prototype,"test",null),D=(0,n._)([(0,y.$)(G)],D);const J=D}}]);
//# sourceMappingURL=87102.668fd058.chunk.js.map