{"version":3,"file":"static/js/270.6d257030.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/smartMapping/labels/bins.js","../node_modules/@arcgis/core/smartMapping/labels/support/utils.js","../node_modules/@arcgis/core/smartMapping/support/binningUtils.js","../node_modules/@arcgis/core/smartMapping/popup/support/utils.js","../node_modules/@arcgis/core/smartMapping/support/clusterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../intl.js\";import e from\"../../core/Error.js\";import{getAggregateFieldInfo as r,createLabelExpressionForAggregateField as n,createLabelClass as t}from\"./support/utils.js\";import{aggregateCountField as i}from\"../support/binningUtils.js\";import{fetchMessageBundle as a}from\"../../intl/messages.js\";async function s(r){const{layer:n,renderer:t}=r;if(await n.load(),\"binning\"!==n.featureReduction?.type)throw new e(\"bins-label-schemes:invalid-parameters\",\"featureReduction type of the layer is not valid\");const i=t||n.featureReduction.renderer;if(!i)throw new e(\"bins-label-schemes:invalid-parameters\",\"'renderer' is not valid\");return{layer:n,renderer:i}}async function o(e,i,a,s){const o=r(e,i);if(!o)return null;const l=n(i,a,o,s);return{name:`binning-${e}`,labelingInfo:[t(l,!0)],fieldName:e}}function l(e){let r=[];const n=e.featureReduction;return\"fields\"in n&&(r=n.fields.map((e=>e.name))),r}async function c(r){const[{renderer:n,layer:t},c]=await Promise.all([s(r),a(\"esri/smartMapping/t9n/smartMapping\")]),m=c.clusters.predominantNoneValue;if(r.field){const i=await o(r.field,t,n,m);if(!i)throw new e(\"bins-label-schemes:invalid-parameters\",\"'field' is not a valid aggregate field\");return{primaryScheme:i,secondarySchemes:[]}}const f=await o(i,t),d=[],u=l(t).filter((e=>e.toLowerCase()!==i.toLowerCase()));for(const e of u){const r=await o(e,t,n,m);r&&d.push(r)}return{primaryScheme:f,secondarySchemes:d}}export{c as getLabelSchemes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../layers/support/LabelClass.js\";import n from\"../../../layers/support/LabelExpressionInfo.js\";import o from\"../../../renderers/support/UniqueValueInfo.js\";import{getPredominantTypeExpression as t}from\"../../support/clusterUtils.js\";import l from\"../../../symbols/TextSymbol.js\";function r(e,n){const o=n.featureReduction;if(\"fields\"in o)for(const t of o.fields)if(t.name.toLowerCase()===e.toLowerCase())return t;return null}function a(e){return`\\n  $feature[\"${e}\"];\\n  var value = $feature[\"${e}\"];\\n  var num = Count(Text(Round(value)));\\n  var label = When(\\n    num < 4, Text(value, \"#.#\"),\\n    num == 4, Text(value / Pow(10, 3), \"#.0k\"),\\n    num <= 6, Text(value / Pow(10, 3), \"#k\"),\\n    num == 7, Text(value / Pow(10, 6), \"#.0m\"),\\n    num > 7, Text(value / Pow(10, 6), \"#m\"),\\n    Text(value, \"#,###\")\\n  );\\n  return label;\\n  `}function u(e,n,l,r){const u=l.name;if(\"mode\"===l.statisticType){const a=\"getFieldDomain\"in e?e.getFieldDomain(l.onStatisticField):null;let s=null;return\"coded-value\"===a?.type?s=a.codedValues.map((e=>new o({value:e.code,label:e.name}))):\"unique-value\"===n?.type&&null!=n.field&&n.field.toLowerCase()===u.toLowerCase()&&(s=(n.uniqueValueInfos??[]).map((e=>e.clone()))),s?t(s,u,r):`Text($feature[\"${u}\"])`}return a(u)}function s(o,t=!1){const r=new l({haloColor:\"#373837\",haloSize:\"1px\",color:\"#f0f0f0\",font:{family:\"Noto Sans\",size:\"12px\",weight:\"bold\"}});return new e({symbol:r,deconflictionStrategy:\"none\",labelPlacement:t?\"always-horizontal\":\"center-center\",labelExpressionInfo:new n({expression:o})})}export{s as createLabelClass,u as createLabelExpressionForAggregateField,a as createNumericLabelExpression,r as getAggregateFieldInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport r from\"../../core/Error.js\";const e=\"aggregateCount\";function i(e,i){if(!e.view)throw new r(`${i}:missing-parameters`,\"'view' parameter is required for binning\");if(e.sqlExpression)throw new r(`${i}:invalid-parameters`,\"'sqlExpression' parameter is not supported for binning\");if(\"3d\"===e.view.type)throw new r(`${i}:invalid-parameters`,\"3d view is not supported for binning\")}export{e as aggregateCountField,i as verifyBinningParams};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{unique as e}from\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{fetchMessageBundle as t}from\"../../../intl/messages.js\";import{substitute as n}from\"../../../intl/substitute.js\";import{numericTypes as i}from\"../../../layers/support/fieldUtils.js\";import\"../../../popup/content/AttachmentsContent.js\";import\"../../../popup/content/Content.js\";import\"../../../popup/content/CustomContent.js\";import\"../../../popup/content/ExpressionContent.js\";import o from\"../../../popup/content/FieldsContent.js\";import\"../../../popup/content/MediaContent.js\";import\"../../../popup/content/RelationshipContent.js\";import s from\"../../../popup/content/TextContent.js\";import\"../../../popup/content/UtilityNetworkAssociationsContent.js\";import r from\"../../../popup/ExpressionInfo.js\";import p from\"../../../popup/FieldInfo.js\";import a from\"../../../popup/support/FieldInfoFormat.js\";import{getAttributes as l}from\"../../../renderers/support/utils.js\";import{viewScaleRE as u}from\"../../../renderers/visualVariables/support/visualVariableUtils.js\";import{getFeatureReductionFields as m}from\"../../support/adapters/support/utils.js\";let f=0;function d(e=0){}const c=\"expression/\";function b(e){return\"hasVisualVariables\"in e&&e.hasVisualVariables()?e.visualVariables.filter((e=>!u.test(e.valueExpression)&&(!(\"target\"in e)||\"outline\"!==e.target))):[]}function x(e,t){if(!t)return null;const n=m(e);return n?.find((e=>e.name.toLowerCase()===t.toLowerCase()))}function j(e,t,n){let o=null;if(n&&\"featureReduction\"in e){const t=e.featureReduction;t&&\"popupTemplate\"in t&&t.popupTemplate&&(o=t.popupTemplate.fieldInfos)}else\"popupTemplate\"in e&&e.popupTemplate&&(o=e.popupTemplate.fieldInfos);const s=n?x(e,t):e.getField(t);let r=null;if(o&&o.some((e=>!(!e||e.fieldName?.toLowerCase()!==s?.name.toLowerCase())&&(r=e.clone(),!0))),!r){const e=i.includes(s.type),t=\"integer\"===s.type||\"small-integer\"===s.type;r=new p({fieldName:s.name,isEditable:s.editable,visible:!0,format:e?new a({places:t?0:2,digitSeparator:!0}):void 0})}return r.label||(r.label=s.alias),r}function F(e){const{expression:t,title:n,returnType:i}=e;return new r({name:\"expr\"+f++,expression:t,title:n,returnType:i})}function g(e){const t=\"number\"===e.returnType?new a({places:2,digitSeparator:!0}):void 0;return new p({fieldName:`${c}${e.name}`,visible:!0,format:t})}async function y(i){const o=await t(\"esri/smartMapping/t9n/smartMapping\"),{renderer:s,layer:r,normFieldExpressionTemplate:p,isFeatureReduction:a}=i,u=[],m=[],f=l(s,b);for(const e of f)if(\"field\"===e.type)u.push(j(r,e.field,a));else if(\"normalized-field\"===e.type){const t=a?x(r,e.field):r.getField(e.field),i=a?x(r,e.normalizationField):r.getField(e.normalizationField),s=F({type:\"expression\",expression:`\\n      $feature[\"${t.name}\"];\\n      $feature[\"${i.name}\"];\\n      ${\"percentage\"===p?`($feature[\"${t.name}\"] / $feature[\"${i.name}\"]) * 100;`:`$feature[\"${t.name}\"] / $feature[\"${i.name}\"];`}\\n      `,title:n(\"percentage\"===p?o.normFieldLabelAsPercent:o.normFieldLabel,{expression1:t.alias,expression2:i.alias}),returnType:\"number\"});u.push(g(s),j(r,e.field,a),j(r,e.normalizationField,a)),m.push(s)}else if(\"expression\"===e.type){const t=F(e);u.push(g(t)),m.push(t)}return{fieldInfos:e(u,((e,t)=>e.fieldName===t.fieldName)),expressionInfos:e(m,((e,t)=>e.expression===t.expression))}}async function $(e,i,r){const{fieldInfos:p,expressionInfos:a}=i,l=await t(\"esri/smartMapping/t9n/smartMapping\");if(p.length>2)return[new o({fieldInfos:p})];const u=[];for(const t of p){const i=t.fieldName||\"\";let o=t.label;if(!o){const t=r?x(e,i):e.getField(i);if(t)o=t.alias||i;else if(a){const e=i.split(c)[1],t=a[a.findIndex((t=>t.name===e))];t&&(o=t.title||t.name)}}u.push(new s({text:n(l.fieldInfo,{fieldLabel:o,fieldValue:`{${i}}`})}))}return u}function h(e){return!(!(\"normalizationField\"in e)||!e.normalizationField)||\"hasVisualVariables\"in e&&e.hasVisualVariables()&&e.visualVariables.some((e=>!(!(\"normalizationField\"in e)||!e.normalizationField)))}export{c as expressionFieldPrefix,$ as getContentFromFieldInfos,F as getExpressionInfo,y as getFieldAndExpressionInfos,j as getFieldInfo,g as getFieldInfoFromExpressionInfo,b as getPrimaryVisualVariables,h as hasNormalizedField,d as resetSuffixForTests};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{unique as n}from\"../../core/arrayUtils.js\";import{createMD5Hash as e}from\"../../core/MD5.js\";import{isValidNumber as i}from\"../../renderers/visualVariables/support/sizeVariableUtils.js\";import{getPrimaryVisualVariables as t}from\"../popup/support/utils.js\";import{getNormalizationType as o}from\"./utils.js\";const l=\"cluster_count\";function r(n,e){return n.split(`cluster_${e}_`).pop()}function a(n){if(!n)return null;const{field:e,valueExpression:t,normalizationField:l,normalizationType:r,normalizationTotal:a}=n;let u=null;if(t)u=t;else if(e){const n=o({normalizationType:r,normalizationField:l,normalizationTotal:a});if(n){const t=n.toLowerCase();if(u=e.toLowerCase()+\",norm:\"+t,l)u+=\",\"+l.toLowerCase();else if(\"percent-of-total\"===t){let n=a;i(n)&&0!==n||(n=null),u+=\",\"+n}}}return u}function u(n){return e(n)}function s(n,e){const i=a(n);return`${e}_${null!=i?u(i):n.field}`}function p(n,e){return`cluster_${s(n,e)}`}function f(n,e){const i=e.getField(n);return i?.type}function c(n,e){const i=\"field\"in e?e.field:null,t=i?f(i,n):null;return{field:i,fieldType:null!=t?t:null,valueExpression:\"valueExpression\"in e?e.valueExpression:null,valueExpressionTitle:\"valueExpressionTitle\"in e?e.valueExpressionTitle:null,normalizationField:\"normalizationField\"in e?e.normalizationField:null,normalizationType:\"normalizationType\"in e?e.normalizationType:null,normalizationTotal:\"normalizationTotal\"in e?e.normalizationTotal:null}}function m(n,e){const i=\"rotation\"===e.type?e.rotationType:null,t=e.legendOptions?.title,o=e.field,l=o?f(o,n):null;return{field:o,fieldType:null!=l?l:null,rotationType:i,valueExpression:e.valueExpression,valueExpressionTitle:e.valueExpressionTitle||e.valueExpression&&t,normalizationField:\"normalizationField\"in e?e.normalizationField:null,vvType:e.type}}function v(n){return n.map((n=>`{\\n        \"value\": \"${String(n.value)}\",\\n        \"label\": \"${T(String(n.label))}\"\\n      }`))}function T(n){return n?n.replaceAll('\"','\\\\\"'):\"\"}function d(n,e,i){return`\\n  var uvInfos = [${v(n).join(\", \")}];\\n  var predominantType = Text($feature[\"${e}\"]);\\n  var label = \"${T(i)}\";\\n\\n  for (var i = 0; i < Count(uvInfos); i++) {\\n    if (uvInfos[i].value == predominantType) {\\n      label = uvInfos[i].label;\\n      break;\\n    }\\n  }\\n\\n  return label;\\n  `}function y(n,e){const i=[s(n,e)];return\"date\"===n.fieldType&&i.push(n.fieldType.toLowerCase()),n.rotationType&&i.push(n.rotationType.toLowerCase()),i.join(\"_\")}function z(n,e){return{statisticHash:y(n,e),attributeInfo:n,statisticType:e}}function x(e,i,o=!0){const l=[],r=c(e,i);\"class-breaks\"===i.type?l.push(z(r,\"avg\")):\"unique-value\"===i.type&&l.push(z(r,\"type\"));const a=t(i);for(const n of a){const i=m(e,n);l.push(z(i,\"avg\"))}return o?n(l,((n,e)=>n.statisticHash===e.statisticHash)):l}export{l as clusterCountField,p as getClusterField,r as getClusterFieldHash,d as getPredominantTypeExpression,c as getRendererAttributeInfo,s as getStatisticId,z as getStatisticInfo,x as getStatisticInfos,m as getVariableAttributeInfo};\n"],"names":["async","s","r","_n$featureReduction","layer","n","renderer","t","load","featureReduction","type","e","i","o","a","l","name","concat","labelingInfo","fieldName","c","Promise","all","m","clusters","predominantNoneValue","field","primaryScheme","secondarySchemes","f","d","u","fields","map","filter","toLowerCase","push","statisticType","_n$uniqueValueInfos","getFieldDomain","onStatisticField","codedValues","value","code","label","uniqueValueInfos","clone","arguments","length","undefined","haloColor","haloSize","color","font","family","size","weight","symbol","deconflictionStrategy","labelPlacement","labelExpressionInfo","expression","view","sqlExpression","b","hasVisualVariables","visualVariables","test","valueExpression","target","x","find","j","popupTemplate","fieldInfos","getField","some","_e$fieldName","includes","p","isEditable","editable","visible","format","places","digitSeparator","alias","F","title","returnType","g","y","normFieldExpressionTemplate","isFeatureReduction","normalizationField","normFieldLabelAsPercent","normFieldLabel","expression1","expression2","expressionInfos","$","split","findIndex","text","fieldInfo","fieldLabel","fieldValue","h","pop","normalizationType","normalizationTotal","_e$legendOptions","rotationType","legendOptions","fieldType","valueExpressionTitle","vvType","T","replaceAll","String","v","join","z","statisticHash","attributeInfo"],"sourceRoot":""}