{"version":3,"file":"static/js/14321.6cf62478.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/TimeSlider/TimeSliderViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import i from\"../../core/Evented.js\";import n from\"../../core/Logger.js\";import{after as l,isAbortError as s}from\"../../core/promiseUtils.js\";import{watch as r,whenOnce as o,initial as a,syncAndInitial as u}from\"../../core/reactiveUtils.js\";import{offsetDate as m}from\"../../core/timeUtils.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import{ensureType as h}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import c from\"../../time/TimeExtent.js\";import f from\"../../time/TimeInterval.js\";import w from\"../../webdoc/Widgets.js\";import g from\"../../webdoc/widgets/TimeSlider.js\";const v=1e4;function T(t){return null!=t&&void 0!==t.count}function x(t){return null!=t&&void 0!==t.interval}function E(t){return null!=t&&void 0!==t.dates}let _=class extends i.EventedAccessor{constructor(t){super(t),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new e,this.fullTimeExtent=null,this.loop=!1,this.mode=\"time-window\",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([r((()=>this.effectiveStops),(()=>{null==this.timeExtent&&(this.timeExtent=this._getDefaultTimeExtent())}),a),r((()=>this.view),((t,e)=>{this._unregisterWidget(e),this._registerWidget(t)}),u),r((()=>this.timeExtent),(t=>{if(null==this.view)return;const e=this.view.timeExtent;(null!=t&&!t.isAllTime||null!=e&&!e.isAllTime)&&(null!=t&&null!=e&&t.equals(e)||(this.view.timeExtent=t))}),a),r((()=>this.view?.timeExtent),(t=>{this._isViewTimeExtentInitialized?(null!=t&&!t.isAllTime||null!=this.timeExtent&&!this.timeExtent.isAllTime)&&(null!=t&&null!=this.timeExtent&&t.equals(this.timeExtent)||(this.timeExtent=t)):this._isViewTimeExtentInitialized=!0}))])}destroy(){null!=this._timerId&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,null!=this._animationController&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(E(e)){const{dates:i}=e;if(null==i||0===i.length)return null;const n=i.sort(((t,e)=>t.getTime()-e.getTime()));if(null==t)return n;const{start:l,end:s}=t;if(null==l||null==s)return n;return n.filter((t=>!(t.getTime()<l.getTime()||t.getTime()>s.getTime())))}if(T(e)){const i=e.timeExtent??t;return this._divideTimeExtentByCount(i,e.count)}if(x(e)){const i=e.timeExtent??t;return this._divideTimeExtentByInterval(i,e.interval)}return[]}set playRate(t){t<=0||t>36e5||(\"playing\"===this.state&&this._startAnimation(),this._set(\"playRate\",t))}get state(){return null==this.fullTimeExtent?\"disabled\":null!=this._animationController?\"playing\":\"ready\"}get timeExtentValues(){const{mode:t,timeExtent:e}=this;if(null==e||e.isAllTime||e.isEmpty)return null;const{start:i,end:n}=e;switch(t){case\"cumulative-from-end\":case\"instant\":return null!=i?[i.getTime()]:null;case\"cumulative-from-start\":return null!=n?[n.getTime()]:null;case\"time-window\":return null!=i&&null!=n?[i.getTime(),n.getTime()]:null}}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(t){this.emit(\"trigger-action\",{action:t})}updateWebDocument(t){const e=new g({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:T(this.stops)?this.stops.count:null,numThumbs:\"time-window\"===this.mode?2:1,stopDelay:this.playRate,stopInterval:x(this.stops)?this.stops.interval:null,stops:E(this.stops)?this.stops.dates:null});t.widgets?t.widgets.timeSlider=e:t.widgets=new w({timeSlider:e})}valuesToTimeExtent(t){if(null==t)return null;const e=t.sort(((t,e)=>t-e)).map((t=>new Date(t))),i=e.length>0?e[0]:null,n=e.length>1?e[1]:null;switch(this.mode){case\"time-window\":return new c({start:i,end:n});case\"instant\":return new c({start:i,end:i});case\"cumulative-from-start\":return new c({start:null,end:i});case\"cumulative-from-end\":return new c({start:i,end:null});default:return c.allTime}}async _animate(){try{const t=this.view,e=this._animationController?.signal;await Promise.all([l(this.playRate,null,e),null!=t&&o((()=>!1===t.updating),e)])}catch(t){return s(t)||n.getLogger(this).error(t),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),null!=this._animationController&&this._animate()}_divideTimeExtentByCount(t,e=10){if(!t||!e)return[];const{start:i,end:n}=t;if(null==i||null==n)return[];if(e>v)return this._divideTimeExtentByCount(t);const l=[],s=i.getTime(),r=n.getTime()-s;for(let o=0;o<=e;o++)l.push(new Date(s+o/e*r));return l}_divideTimeExtentByInterval(t,e,i=v){if(!t||!e)return[];const{start:n,end:l}=t;if(null==n||null==l)return[];const s=l.getTime()-n.getTime(),r=e.toMilliseconds();if(r<=0||s/r>i)return this._divideTimeExtentByCount(t);const o=[],{value:a,unit:u}=e;let p=n;for(;p.getTime()<=l.getTime();)o.push(new Date(p.getTime())),p=m(p,a,u);return o}_getDefaultTimeExtent(){const{effectiveStops:t,mode:e}=this;if(null==t||!e)return null;switch(e){case\"time-window\":return t.length>1?new c({start:t[0],end:t[1]}):null;case\"cumulative-from-start\":return t.length>0?new c({start:null,end:t[0]}):null;case\"cumulative-from-end\":return t.length>0?new c({start:t[0],end:null}):null;case\"instant\":return t.length>0?new c({start:t[0],end:t[0]}):null;default:return null}}_registerWidget(t){if(null!=t){t.persistableViewModels.includes(this)||t.persistableViewModels.add(this)}}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(t){const{forward:e,allowRestart:i}=t,{effectiveStops:n}=this;if(null==this.timeExtentValues||null==n)return;const l=n.map((t=>t.getTime())),s=this.timeExtentValues.map((t=>{const e=l.indexOf(t);if(-1!==e)return e;const i=l.reduce(((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e));return l.indexOf(i)})),r=s.map((t=>t+(e?1:-1))),o=r.some((t=>t<0||t>l.length-1)),{loop:a,state:u}=this;if(o)if(a||i){const t=Math.min(...s),i=Math.max(...s),n=(e?s.map((e=>e-t)):s.map((t=>t+(l.length-1-i)))).map((t=>l[t]));this.timeExtent=this.valuesToTimeExtent(n)}else\"playing\"===u&&this.stop();else{const t=r.map((t=>l[t]));this.timeExtent=this.valuesToTimeExtent(t)}}_stopAnimation(){null!=this._animationController&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(t){null!=t&&t.persistableViewModels.remove(this)}};t([p()],_.prototype,\"_animationController\",void 0),t([p({type:e})],_.prototype,\"actions\",void 0),t([p({readOnly:!0})],_.prototype,\"effectiveStops\",null),t([p({type:c})],_.prototype,\"fullTimeExtent\",void 0),t([p({nonNullable:!0})],_.prototype,\"loop\",void 0),t([p({nonNullable:!0})],_.prototype,\"mode\",void 0),t([p({nonNullable:!0,value:1e3})],_.prototype,\"playRate\",null),t([p({readOnly:!0})],_.prototype,\"state\",null),t([p({cast:t=>null==t?null:(x(t)&&(t.interval=h(f,t.interval)),(x(t)||T(t))&&(t.timeExtent=h(c,t.timeExtent)),t)})],_.prototype,\"stops\",void 0),t([p({type:c})],_.prototype,\"timeExtent\",void 0),t([p({readOnly:!0})],_.prototype,\"timeExtentValues\",null),t([p()],_.prototype,\"view\",void 0),t([p()],_.prototype,\"next\",null),t([p()],_.prototype,\"play\",null),t([p()],_.prototype,\"previous\",null),t([p()],_.prototype,\"stop\",null),t([p()],_.prototype,\"updateWebDocument\",null),_=t([d(\"esri.widgets.TimeSlider.TimeSliderViewModel\")],_);const y=_;export{y as default};\n"],"names":["T","t","count","x","interval","E","dates","_","i","EventedAccessor","constructor","super","this","_animationController","_isViewTimeExtentInitialized","_timerId","actions","e","fullTimeExtent","loop","mode","stops","timeExtent","view","initialize","addHandles","r","effectiveStops","_getDefaultTimeExtent","a","_unregisterWidget","_registerWidget","u","isAllTime","equals","_this$view","destroy","clearInterval","abort","length","n","sort","getTime","start","l","end","s","filter","_e$timeExtent","_divideTimeExtentByCount","_e$timeExtent2","_divideTimeExtentByInterval","playRate","state","_startAnimation","_set","timeExtentValues","isEmpty","next","_step","forward","allowRestart","play","previous","stop","_stopAnimation","triggerAction","emit","action","updateWebDocument","g","currentTimeExtent","numStops","numThumbs","stopDelay","stopInterval","widgets","timeSlider","w","valuesToTimeExtent","map","Date","c","allTime","_animate","_this$_animationContr","signal","Promise","all","o","updating","getLogger","error","arguments","undefined","push","toMilliseconds","value","unit","p","m","persistableViewModels","includes","add","AbortController","indexOf","reduce","Math","abs","some","min","max","remove","prototype","type","readOnly","nonNullable","cast","h","f","d","y"],"sourceRoot":""}