"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[62735],{62735:(t,e,i)=>{i.r(e),i.d(e,{default:()=>_});var o=i(89379),a=i(35143),n=i(48053),r=i(19276),l=i(50076),s=i(54099),u=i(46053),c=i(21403),d=(i(81806),i(47249),i(85842)),p=i(994),v=i(59909),k=i(79535);const w=r.default.ofType(v.default),h={width:128,height:128,format:"png"},m={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},b={time:!0};let f=class extends((0,k.A)(s.A.EventedAccessor)){constructor(t){super(t),this.capabilities=(0,o.A)({},b),this.activeBookmark=null,this.view=null}destroy(){this.view=null,this._set("activeBookmark",null)}castCapabilities(t){return(0,o.A)((0,o.A)({},b),t)}get bookmarks(){var t,e;return null!==(t=null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.bookmarks)&&void 0!==t?t:new w}set bookmarks(t){this._overrideIfSome("bookmarks",t)}set defaultCreateOptions(t){this._set("defaultCreateOptions",(0,o.A)((0,o.A)({},m),t))}get defaultCreateOptions(){return m}set defaultEditOptions(t){this._set("defaultEditOptions",(0,o.A)((0,o.A)({},m),t))}get defaultEditOptions(){return m}get state(){const{view:t}=this;return t&&!t.ready?"loading":"ready"}async createBookmark(t){const{view:e,defaultCreateOptions:i,capabilities:a}=this;if(!e)throw new l.default("create-bookmark:invalid-view","Cannot create a bookmark without a view.");const{takeScreenshot:n,screenshotSettings:r,captureViewpoint:s,captureRotation:u,captureScale:c,captureTimeExtent:d}=(0,o.A)((0,o.A)({},i),t),p=n?await this._createThumbnail(r):void 0,k=a.time&&d&&null!=e.timeExtent?e.timeExtent.clone():void 0;return new v.default((0,o.A)((0,o.A)((0,o.A)({},p&&{thumbnail:p}),d&&{timeExtent:k}),s&&{viewpoint:this._createViewpoint({view:e,captureScale:c,captureRotation:u})}))}async editBookmark(t,e){if(!t)return t;const{view:i,defaultEditOptions:a}=this;if(!i)throw new l.default("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");const{takeScreenshot:n,screenshotSettings:r,captureViewpoint:s,captureRotation:u,captureScale:c,captureTimeExtent:d}=(0,o.A)((0,o.A)({},a),e),p=n?await this._createThumbnail(r):void 0;return p&&(t.thumbnail=p),s&&(t.viewpoint=this._createViewpoint({view:i,captureScale:c,captureRotation:u})),d&&null!=i.timeExtent&&(t.timeExtent=i.timeExtent.clone()),this.emit("bookmark-edit",{bookmark:t}),t}goTo(t){const{capabilities:e,view:i}=this;if(!i)throw new l.default("go-to:invalid-view","Cannot go to a bookmark without a view");const o=null===t||void 0===t?void 0:t.viewpoint;if(!o)throw new l.default("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:t});this._set("activeBookmark",t);const a=this.callGoTo({target:o}),n=null===t||void 0===t?void 0:t.timeExtent;return e.time&&n&&(i.timeExtent=n),this.emit("bookmark-select",{bookmark:t}),a.catch((()=>{})).then((()=>this._set("activeBookmark",null))),a}async _createThumbnail(t){const{view:e}=this;if(!e)throw new l.default("bookmark:invalid-view","Cannot create slide thumbnail without a view");const i=await e.takeScreenshot((0,o.A)((0,o.A)({},h),t));return new p.o({url:i.dataUrl})}_createViewpoint(t){var e,i,o,a;let{view:r,captureRotation:l,captureScale:s}=t;const u=null===(e=r.viewpoint)||void 0===e?void 0:e.clone();return new n.default({targetGeometry:null===(i=r.extent)||void 0===i?void 0:i.clone(),rotation:null!==(o=l?null===u||void 0===u?void 0:u.rotation:null)&&void 0!==o?o:0,scale:null!==(a=s?null===u||void 0===u?void 0:u.scale:null)&&void 0!==a?a:0})}};(0,a._)([(0,u.MZ)()],f.prototype,"capabilities",void 0),(0,a._)([(0,c.w)("capabilities")],f.prototype,"castCapabilities",null),(0,a._)([(0,u.MZ)({readOnly:!0})],f.prototype,"activeBookmark",void 0),(0,a._)([(0,u.MZ)({type:w})],f.prototype,"bookmarks",null),(0,a._)([(0,u.MZ)()],f.prototype,"defaultCreateOptions",null),(0,a._)([(0,u.MZ)()],f.prototype,"defaultEditOptions",null),(0,a._)([(0,u.MZ)({readOnly:!0})],f.prototype,"state",null),(0,a._)([(0,u.MZ)()],f.prototype,"view",void 0),f=(0,a._)([(0,d.$)("esri.widgets.Bookmarks.BookmarksViewModel")],f);const _=f}}]);
//# sourceMappingURL=62735.19e15665.chunk.js.map