"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[16563],{8445:(t,e,n)=>{n.d(e,{O:()=>a});var s=n(82103);class a extends s.d{getOperatorType(){return 4}execute(t,e,n,a){return!(0,s.r)(t,e,n,4,a)}}},16563:(t,e,n)=>{n.r(e),n.d(e,{execute:()=>h,isAsync:()=>f});var s=n(11217),a=n(49177),i=n(52847),r=n(81130),o=n(66388),l=n(98685),p=n(58067);function h(t){if(function(t){return null!=t.parentTemplate&&(0,r.Rg)(t.shape)}(t)&&"digitizing"!==t.mode)return async function(t){var e,n;let{templatePart:o,parentTemplate:h,shape:f,edits:g,relationships:u,mode:d}=t;const{builderConfig:m}=o,y=(0,s.V2)(m),B=(0,s.YI)(m),P=(0,s.RT)(m),R=(0,s.Gr)(m,B),S=P||0===y?f:(0,a.cY)(f,y);if(null===S)return;const v=h.layer.createQuery();v.geometry=S,v.spatialRelationship="intersects",v.returnM=!0,v.returnZ=!0,v.outSpatialReference=S.spatialReference,v.cacheHint=!1,v.returnGeometry=!0,v.historicMoment=h.layer.historicMoment,v.gdbVersion=h.layer.gdbVersion;const A=2*(null!==(e=null===(n=(0,p.fromSpatialReference)(S.spatialReference))||void 0===n?void 0:n.getTolerance())&&void 0!==e?e:.001);v.distance=A;const{features:T}=await h.layer.queryFeatures(v);if(0===T.length)return;const x=[];for(const s of T)x.push(c(s.geometry));const b=(0,s.TR)(S);let V=0,Z=0;for(let a=0;a<S.paths.length&&!(g.length>r.Cg);a++){const t=S.paths[a].length;for(let e=0;e<t;e++){let n=S.getPoint(a,e);if(null!=n){for(const r of x)if((0,l.e)(n,r)){if(e>0&&0!==R&&(V+=S.hasZ?(0,i.Py)(S.paths[a][e-1],S.paths[a][e],b):(0,i.eS)(S.paths[a][e-1],S.paths[a][e])),0!==R){let s=1;if(B){const n=R<0?e-1:e+1;if(n>=t||n<0)return;s=S.hasZ?(0,i.Py)(S.paths[a][e],S.paths[a][n],b):(0,i.eS)(S.paths[a][e],S.paths[a][n])}const r=V+s*R;n=S.hasZ?(0,i.mw)(S,r,y,b):(0,i.a1)(S,r,y)}else 0!==y&&(n=(0,i.LB)(n,e===t-1?[S.paths[a][e-1],S.paths[a][e]]:[S.paths[a][e],S.paths[a][e+1]],y));n&&(0,s.fS)({templatePart:o,shape:n,edits:g,relationships:u,mode:d},"V".concat(Z.toString()));break}Z++}}}}(t)}function c(t){const e=[];for(const n of t.paths)for(const t of n)e.push([...t]);return new o.default({spatialReference:t.spatialReference,points:e})}const f=!0},49177:(t,e,n)=>{n.d(e,{Ii:()=>s,LT:()=>u,cY:()=>f,nI:()=>a,tr:()=>c});var s,a,i,r=n(11217),o=n(52847),l=n(81130),p=n(70968),h=n(19902);function c(t){let{templatePart:e,edits:n,relationships:a,shape:i,distance:p,isProportional:c,offsetDistance:g,vertexBeforeOffset:u,vertexPlacement:d,mode:m}=t;const y=u||0===g?i:f(i,g);if(null===y||!(0,h.isPolyline)(y))return;const B=(0,r.TR)(y);g=u?g:0;let P=0,R=null,S=0;for(let h=0;h<y.paths.length;h++){if(n.length>l.Cg&&"digitizing"===m)return;const t=y.paths[h].length,i=h===y.paths.length-1;for(let f=0;f<t;f++){if(n.length>l.Cg&&"digitizing"===m)return;if(f>0&&0!==p&&(P+=y.hasZ?(0,o.Py)(y.paths[h][f-1],y.paths[h][f],B):(0,o.eS)(y.paths[h][f-1],y.paths[h][f])),(0!==f||d!==s.NotBeginning)&&!(f===t-1&&d===s.NotEnd&&i||(0===f||f===t-1&&i)&&d===s.Interior||0===f&&p<0&&c||f===t-1&&p>0&&c)){if(0!==p){let e=1;if(c){const n=p<0?f-1:f+1;if(n>=t||n<0)continue;e=y.hasZ?(0,o.Py)(y.paths[h][f],y.paths[h][n],B):(0,o.eS)(y.paths[h][f],y.paths[h][n])}const n=P+e*p;R=y.hasZ?(0,o.mw)(y,n,g,B):(0,o.a1)(y,n,0)}else R=(0,o.RT)(y,h,f),0!==g&&(R=(0,o.LB)(R,f===t-1?[y.paths[h][f-1],y.paths[h][f]]:[y.paths[h][f],y.paths[h][f+1]],g));R&&(0,r.fS)({templatePart:e,shape:R,edits:n,relationships:a,mode:m},"V".concat((S+f).toString()))}}S+=t}}function f(t,e){return(0,p.e)(t,e,{unit:"meters",joins:"miter",miterLimit:2})}function g(t){let e=0;for(const n of t.paths)e+=n.length;return e}function u(t){let{templatePart:e,edits:n,relationships:s,shape:i,distance:l,isProportional:p,offsetDistance:c,vertexBeforeOffset:u,vertexPlacement:d,mode:m}=t;const y=u||0===c?i:f(i,c);if(null===y||!(0,h.isPolyline)(y))return;const B=(0,r.TR)(y);c=u?c:0;let P=null,R="";if(0!==l){const t=d===a.AtBeginning?0:y.paths.length-1,e=d===a.AtBeginning?0:y.paths[y.paths.length-1].length-1,n=d===a.AtBeginning?0:(0,o.Ex)(y),s=d===a.AtBeginning?y.paths[0].length:y.paths[y.paths.length-1].length;let i=1;if(p){const n=l<0?e-1:e+1;if(n>=s||n<0)return;i=y.hasZ?(0,o.Py)(y.paths[t][e],y.paths[t][n],B):(0,o.eS)(y.paths[t][e],y.paths[t][n])}const r=n+i*l;P=y.hasZ?(0,o.mw)(y,r,c,B):(0,o.a1)(y,r,c),R=d===a.AtBeginning?"V0":"V".concat((g(y)-1).toString())}else{if(P=d===a.AtBeginning?(0,o.RT)(y,0,0):(0,o.RT)(y,y.paths.length-1,y.paths[y.paths.length-1].length-1),0!==c)if(d===a.AtBeginning)P=(0,o.LB)(P,[y.paths[0][0],y.paths[0][1]],c);else{const t=y.paths[y.paths.length-1];P=(0,o.LB)(P,[t[t.length-2],t[t.length-1]],c)}R=d===a.AtBeginning?"V0":"V".concat((g(y)-1).toString())}P&&(0,r.fS)({templatePart:e,shape:P,edits:n,relationships:s,mode:m},R)}(i=s||(s={}))[i.All=0]="All",i[i.NotBeginning=1]="NotBeginning",i[i.NotEnd=2]="NotEnd",i[i.Interior=3]="Interior",function(t){t[t.AtBeginning=4]="AtBeginning",t[t.AtEnd=5]="AtEnd"}(a||(a={}))},98685:(t,e,n)=>{n.d(e,{a:()=>r,e:()=>o,i:()=>p,s:()=>l});var s=n(8445),a=n(58067);const i=new s.O;function r(t){const e=(0,a.getSpatialReference)(t);return i.accelerateGeometry((0,a.fromGeometry)(t),(0,a.fromSpatialReference)(e),1)}function o(t,e){return i.execute((0,a.fromGeometry)(t),(0,a.fromGeometry)(e),(0,a.fromSpatialReference)(t.spatialReference),null)}const l=i.supportsCurves(),p=Object.freeze(Object.defineProperty({__proto__:null,accelerateGeometry:r,execute:o,supportsCurves:l},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=16563.9ba8582e.chunk.js.map