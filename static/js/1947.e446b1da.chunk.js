"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[1947],{1947:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var s=a(35143),i=a(28899),l=a(63241),o=a(76460),n=a(68134),r=a(46053),d=(a(81806),a(47249),a(85842)),c=a(86300),m=a(25329),p=a(71276);const h="esri-basemap-gallery",u={base:h,sourceLoading:"".concat(h,"--source-loading"),loader:"".concat(h,"__loader"),item:"".concat(h,"__item"),itemContainer:"".concat(h,"__item-container"),itemContent:"".concat(h,"__item-content"),itemTitle:"".concat(h,"__item-title"),itemTagsContainer:"".concat(h,"__item-tags-container"),itemThumbnail:"".concat(h,"__item-thumbnail"),selectedItem:"".concat(h,"__item--selected"),itemError:"".concat(h,"__item--error")};var g=a(94126),v=a(98108),_=a(87540),b=a(20459),y=a(63582),w=a(54761);a(76099);let B=class extends m.default{constructor(e,t){super(e,t),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new p.default,this._focusBasemapItemEnabled=!1,(0,l.ED)(o.A.getLogger(this),"Basemap Gallery","arcgis-basemap-gallery",{version:"4.32"})}initialize(){this.addHandles((0,n.when)((()=>this.source),(()=>this.viewModel.loadSource()),{sync:!0,initial:!0}))}loadDependencies(){return(0,g.W)({scrim:()=>Promise.resolve().then(a.bind(a,32263)),chip:()=>Promise.resolve().then(a.bind(a,10239))})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get icon(){return"basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="loading"===this.source.state,t=this.disabled||"disabled"===this.viewModel.state,a={[u.sourceLoading]:e,[v.D.disabled]:t};return(0,w.K)("div",{class:this.classes(u.base,v.D.widget,v.D.panel,a),key:"container"},this._getContext())}_getContext(){if("unsupported"===this.viewModel.state)return(0,w.K)("div",{class:v.D.empty,key:"empty-message"},(0,w.K)(_.D,{level:this.headingLevel},this.messages.unsupported));if("loading"===this.source.state)return(0,w.K)("div",{class:u.loader,key:"loader"});const e=this.viewModel.items;return e.length>0?(0,w.K)("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:u.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},e.map(((e,t)=>this._renderBasemapGalleryItem(e,t))).toArray()):(0,w.K)("div",{class:v.D.empty,key:"empty-message"},(0,w.K)(_.D,{level:this.headingLevel},this.messages.noBasemaps))}_getRoundRobinIndex(e,t){return(e+t)%t}_handleKeyDown(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t))return;e.preventDefault();const{items:a,activeBasemapIndex:s}=this.viewModel,i="ArrowUp"===t||"ArrowLeft"===t?this._getRoundRobinIndex(Math.max(s-1,-1),a.length):this._getRoundRobinIndex(s+1,a.length),l=a.at(i);"ready"===(null===l||void 0===l?void 0:l.state)&&(this.viewModel.activeBasemap=l.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&0===e.tabIndex&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e,t){var a,s;const l=(0,c.hA)(e.basemap)||(0,i.s)("esri/themes/base/images/basemap-toggle-64.svg"),o=e.basemap.title,n=null===(a=e.basemap.portalItem)||void 0===a?void 0:a.snippet,r=(null===(s=e.error)||void 0===s?void 0:s.message)||n||o,{viewModel:{state:d,activeBasemapIndex:m}}=this,p=this.disabled||"disabled"===d,h=m===t,g=h||-1===m&&0===t?0:-1,_="loading"===d,b={[u.selectedItem]:h,[u.itemError]:"error"===e.state},y="basemapgallery-item-".concat(e.uid);return(0,w.K)("li",{afterUpdate:this._focusBasemapItem,"aria-checked":h.toString(),"aria-disabled":p.toString(),"aria-labelledby":y,bind:this,class:this.classes(u.item,b),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:g,title:r},(0,w.K)("img",{alt:"",class:u.itemThumbnail,src:l}),(0,w.K)("div",{class:u.itemContent,key:"content"},(0,w.K)("div",{class:u.itemTitle,key:"title"},(0,w.K)("span",{id:y},o)),(0,c.$P)(e.basemap)?this._renderTags(e.basemap):null),"loading"===e.state||h&&_?(0,w.K)("calcite-scrim",null,(0,w.K)("span",{"aria-hidden":"true",class:v.D.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return(0,w.K)("div",{class:u.itemTagsContainer,key:"tag"},this._render3DTag(),(0,c.t5)(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return(0,w.K)("calcite-chip",{key:"tag-3d",label:e.tag3D,scale:"s"},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return(0,w.K)("calcite-chip",{appearance:"outline-fill",key:"tag-beta",label:e.tagBeta,scale:"s"},this.messages.tagBeta)}};(0,s._)([(0,r.MZ)()],B.prototype,"activeBasemap",null),(0,s._)([(0,r.MZ)()],B.prototype,"disabled",void 0),(0,s._)([(0,r.MZ)()],B.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],B.prototype,"icon",null),(0,s._)([(0,r.MZ)()],B.prototype,"label",null),(0,s._)([(0,r.MZ)(),(0,y.G)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],B.prototype,"messages",void 0),(0,s._)([(0,r.MZ)()],B.prototype,"source",null),(0,s._)([(0,r.MZ)()],B.prototype,"view",null),(0,s._)([(0,r.MZ)()],B.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)()],B.prototype,"_focusBasemapItemEnabled",void 0),(0,s._)([(0,b.$)()],B.prototype,"_handleClick",null),B=(0,s._)([(0,d.$)("esri.widgets.BasemapGallery")],B);const M=B}}]);
//# sourceMappingURL=1947.e446b1da.chunk.js.map