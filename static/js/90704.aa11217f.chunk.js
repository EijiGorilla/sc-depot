"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[76106,90704],{28383:(n,e,t)=>{t.d(e,{$r:()=>x,D9:()=>C,Jc:()=>w,Lc:()=>E,MH:()=>S,Wk:()=>I,a:()=>A,gV:()=>F,hw:()=>T,lX:()=>N,rb:()=>V,sf:()=>b});var a=t(89379),l=t(36140),o=t(50076),i=t(76931),r=t(18288),u=t(19247),c=t(13312),s=t(76279),f=t(80963),d=t(53430),m=t(4414),p=t(42633),v=t(72003),g=t(98976);let h=null;const y=(0,l.A)(/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:([0-5][0-9]))?([.](\d+))?$/,{hh:1,mm:4,ss:6,ms:8});function x(n,e,t,a){const l=(0,f.d9)(t)?(0,f.Vp)(t):null,o=l?Math.round((l.valid[1]-l.valid[0])/e.scale[0]):null;return n.map((n=>{const t=new u.default(n.geometry);return(0,s.Gy)(e,t,t),n.geometry=l?function(n,e,t){return n.x<0?n.x+=e:n.x>t&&(n.x-=e),n}(t,null!==o&&void 0!==o?o:0,a[0]):t,n}))}function F(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;const o=new Float64Array(a*l);e=Math.round((0,i.Lz)(e));let r=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;const c=(0,m.YW)(t);for(const{geometry:i,attributes:s}of n){const{x:n,y:t}=i,f=Math.max(0,n-e),d=Math.max(0,t-e),p=Math.min(l,t+e),v=Math.min(a,n+e),g=+c(s);for(let l=d;l<p;l++)for(let i=f;i<v;i++){const c=l*a+i,s=(0,m.hv)(i-n,l-t,e)*g,f=o[c]+=s;r=Math.min(r,f),u=Math.max(u,f)}}return{min:r,max:u}}function V(n){const e=y.exec(n);if(!e)return null;const{hh:t,mm:a,ss:l,ms:o}=e.groups;return Number(t)*r.vf.hours+Number(a)*r.vf.minutes+Number(l)*r.vf.seconds+Number(o||0)}async function w(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return[];const{field:l,field2:o,field3:i,fieldDelimiter:r,fieldInfos:u,timeZone:s}=n,f=l&&(null===u||void 0===u?void 0:u.find((n=>n.name.toLowerCase()===l.toLowerCase()))),m=!!f&&(0,d.isTimeOnlyField)(f),y=!!f&&(0,p.fs)(f),x=n.valueExpression,F=n.normalizationType,w=n.normalizationField,E=n.normalizationTotal,N=[],A=n.viewInfoParams;let T=null,b=null;if(x){if(!h){const{arcadeUtils:n}=await(0,g.lw)();h=n}h.hasGeometryOperations(x)&&await h.enableGeometryOperations(),T=h.createFunction(x),b=A?h.getViewInfo({viewingMode:A.viewingMode,scale:A.scale,spatialReference:new c.default(A.spatialReference)}):null}const I=n.fieldInfos,S=e[0]&&"declaredClass"in e[0]&&"esri.Graphic"===e[0].declaredClass||!I?null:{fields:I};return e.forEach((n=>{const e=n.attributes;let u;if(x){const e=S?(0,a.A)((0,a.A)({},n),{},{layer:S}):n,t=h.createExecContext(e,b,s);u=h.executeFunction(T,t)}else e&&(u=e[l],o?(u="".concat((0,v.gJ)(u)).concat(r).concat((0,v.gJ)(e[o])),i&&(u="".concat(u).concat(r).concat((0,v.gJ)(e[i])))):"string"==typeof u&&t&&(y?u=u?new Date(u).getTime():null:m&&(u=u?V(u):null)));if(F&&"number"==typeof u&&isFinite(u)){const n=e&&parseFloat(e[w]);u=(0,v.zS)(u,F,n,E)}N.push(u)})),N}function E(n){const e=n.field,t=n.normalizationType,a=n.normalizationField;let l;return"field"===t?l="(NOT "+a+" = 0)":"log"!==t&&"natural-log"!==t&&"square-root"!==t||(l="(".concat(e," > 0)")),l}function N(n,e,t){const a=null!=e?n+" >= "+e:"",l=null!=t?n+" <= "+t:"";let o="";return o=a&&l?b(a,l):a||l,o?"("+o+")":""}function A(n,e,t,a){let l;return e?e.name!==n.objectIdField&&a.includes(e.type)||(l=new o.default(t,"'field' should be one of these types: "+a.join(","))):l=new o.default(t,"'field' is not defined in the layer schema"),l}function T(n,e,t){let a;return e?e.name!==n.objectIdField&&(0,d.isNumericField)(e)||(a=new o.default(t,"'field' should be one of these numeric types: "+d.numericTypes.join(","))):a=new o.default(t,"'field' is not defined in the layer schema"),a}function b(n,e){let t=null!=n?n:"";return null!=e&&e&&(t=t?"("+t+") AND ("+e+")":e),t}function I(n,e){if(n&&"intersects"!==n.spatialRelationship)return new o.default(e,"Only 'intersects' spatialRelationship is supported for featureFilter")}function S(n,e,t){const a=function(n){const e=n.layer;return n.fields.filter((n=>!e.getField(n)))}({layer:n,fields:e});if(a.length)return new o.default(t,"Unknown fields: "+a.join(", ")+". You can only use fields defined in the layer schema");const l=function(n){const e=n.layer;return n.fields.filter((n=>{const t=e.getFieldUsageInfo(n);return!t||!t.supportsStatistics}))}({layer:n,fields:e});return l.length?new o.default(t,"Unsupported fields: "+l.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}function C(n,e,t){const a=[],l=[],o=[],i=[],r=[];n.forEach(((n,e)=>{const u=n.field?"field":"expression",c=n.field||n.valueExpression;n.field?(r.push(c),l.push("var ".concat(u).concat(e,' = Number($feature["').concat(c,'"]);'))):(a.push("function getValueForExpr".concat(e,"() {\n  ").concat(c," \n}")),l.push("var ".concat(u).concat(e," = Number(getValueForExpr").concat(e,"());"))),t||o.push("".concat(u).concat(e," = IIf(").concat(u).concat(e," < 0, 0, ").concat(u).concat(e,");")),i.push("".concat(u).concat(e))}));const u=a.length?null:r.reduce(((n,e)=>"".concat(n," + ").concat(e)));let c=null;return e||t?e?t||u&&(c="(( ".concat(u," ) >= 0)")):u&&(c="(( ".concat(u," ) <> 0)")):u&&(c="(( ".concat(u," ) > 0)")),{valueExpression:[a.length?a.join("\n"):"",l.join("\n"),o.join("\n"),"var total = ".concat(i.join(" + "),";"),"return total;"].filter(Boolean).join("\n\n"),sqlExpression:u,sqlWhere:c}}},76106:(n,e,t)=>{t.r(e),t.d(e,{fieldNamesFromFieldInfos:()=>p,getArcadeForOrderedFields:()=>y,getArcadeForPredominanceMargin:()=>v,getArcadeForPredominantCategory:()=>f,getArcadeForPredominantCategoryAlias:()=>m,getArcadeForPredominantCategoryValue:()=>d,getArcadeForStrengthOfPredominance:()=>h,getArcadeForSumOfFields:()=>g,getPredominanceExpressions:()=>u,getSQLForPredominantCategoryName:()=>i,noDominantCategoryField:()=>l});var a=t(42633);const l="no_dominant_category";function o(n){return"(".concat(n.map((n=>"".concat(n," >= 0"))).join(" OR "),")")}function i(n){return{expression:r(n,{returnFieldName:!0,defaultValue:"'".concat(l,"'")})}}function r(n,e){const{returnFieldName:t,defaultValue:l,layer:o}=e,i=[];if(t&&l){const e=n.map((n=>"".concat(n," <= 0"))).join(" AND ");i.push("WHEN ".concat(e," THEN ").concat(l))}for(const r of n){const e=n.reduce(((n,e)=>(r!==e&&n.push("".concat(r," > ").concat(e)),n)),[]).join(" AND "),l=o&&(0,a.R3)(o,r),u=t&&"'".concat(r,"'")?"'".concat(r,"'"):l?(0,a.Ll)(r):r;i.push("WHEN ".concat(e," THEN ").concat(u))}return"CASE ".concat(i.join(" ")," ELSE ").concat(l||"0"," END")}function u(n,e){const t=e.join(" + "),a={sqlExpression:"(".concat(t,")"),sqlWhere:o(e)},l={sqlExpression:"(( (".concat(r(e,{layer:n}),") / (").concat(t,") ) * 100)"),sqlWhere:"".concat(o(e)," AND ((").concat(t,") > 0)")};return{predominantCategory:{valueExpression:f(e)},size:{valueExpression:g(e),statisticsQuery:a,histogramQuery:a},opacity:{valueExpression:h(e),statisticsQuery:l,histogramQuery:l}}}function c(n){return n&&n.map((n=>'$feature["'.concat(n,'"];'))).join("\n")+"\n"||""}function s(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=n.map((n=>'"'.concat(n,'"')));return"\n  var fieldNames = [ ".concat(t.join(", ")," ];\n  var numFields = ").concat(t.length,";\n  var maxValueField = null;\n  var maxValue = -Infinity;\n  var value, i, totalValue = null;\n\n  for(i = 0; i < numFields; i++) {\n    value = $feature[fieldNames[i]];\n\n    if(value > 0) {\n      if(value > maxValue) {\n        maxValue = value;\n        maxValueField = fieldNames[i];\n      }\n      else if (value == maxValue) {\n        maxValueField = null;\n      }\n    }\n    ").concat(e?"\n  if(value != null && value >= 0) {\n    if (totalValue == null) { totalValue = 0; }\n    totalValue = totalValue + value;\n  }\n  ":"","\n  }\n  ")}function f(n){const e=s(n);return"\n  ".concat(c(n),"\n  ").concat(e,"\n  return maxValueField;\n  ")}function d(n){const e=s(n);return"\n  ".concat(c(n),"\n  ").concat(e,"\n  return maxValue;\n  ")}function m(n,e){const t=p(n),a=c(t),l=n.map((n=>n.label?'"'.concat(n.label,'"'):'"'.concat(n.fieldName,'"'))),o=t.map((n=>'Number($feature["'.concat(n,'"])'))),i=[];return e&&e.forEach(((n,e)=>{i.push("function getValueForExpr".concat(e,"() {\n  ").concat(n.expression," \n}")),o.push("Number(getValueForExpr".concat(e,"())")),l.push('"'.concat(n.title||n.name,'"'))})),"\n  ".concat(a,"\n\n  ").concat(i.length?i.join("\n"):"","\n\n  var values = [ ").concat(o.join(", ")," ];\n  var aliases = [ ").concat(l.join(", ")," ];\n  var numValues = ").concat(o.length,';\n  var maxValueAlias = null;\n  var maxValue = -Infinity;\n  var value, i, totalValue = null;\n\n  for(i = 0; i < numValues; i++) {\n    value = values[i];\n\n    if(value > 0) {\n      if(value > maxValue) {\n        maxValue = value;\n        maxValueAlias = aliases[i];\n      }\n      else if (value == maxValue) {\n        maxValueAlias = "Tie";\n      }\n    }\n  }\n  return maxValueAlias;\n  ')}function p(n){return n.filter((n=>{let{fieldName:e}=n;return!!e})).map((n=>n.fieldName))}function v(n){return"\n  ".concat(c(n),"\n  var fieldValues = [ ").concat(n.map((n=>'$feature["'.concat(n,'"]'))).join(", ")," ];\n  var totalValue = Sum(fieldValues);\n  var order = Reverse(Sort(fieldValues));\n  return IIF(totalValue > 0, Round(((order[0] - order[1]) / totalValue) * 100, 2), null);\n  ")}function g(n){const e=c(n),t=n.map((n=>'"'.concat(n,'"')));return"\n  ".concat(e,"\n  var fieldNames = [ ").concat(t.join(", ")," ];\n  var numFields = ").concat(t.length,";\n  var value, i, totalValue = null;\n\n  for(i = 0; i < numFields; i++) {\n    value = $feature[fieldNames[i]];\n\n    if(value != null && value >= 0) {\n      if (totalValue == null) { totalValue = 0; }\n      totalValue = totalValue + value;\n    }\n  }\n\n  return totalValue;\n  ")}function h(n){const e=s(n,!0);return"\n  ".concat(c(n),"\n  ").concat(e,"\n\n  var strength = null;\n\n  if (maxValueField != null && totalValue > 0) {\n    strength = (maxValue / totalValue) * 100;\n  }\n\n  return strength;\n  ")}function y(n,e){const t=c(p(n)),a=n.map((n=>'{\n    value: Number($feature["'.concat(n.fieldName,'"]),\n    alias: "').concat(n.label||n.fieldName,'"\n    }'))),l=[];return e&&e.forEach(((n,e)=>{l.push("function getValueForExpr".concat(e,"() {\n  ").concat(n.expression," \n}")),a.push("{\n          value: Number(getValueForExpr".concat(e,'()),\n          alias: "').concat(n.title||n.name,'"\n          }'))})),"\n  ".concat(t,"\n\n  ").concat(l.length?l.join("\n"):"","\n\n  var groups = [ ").concat(a.join(", "),' ];\n  var numTopValues = Count(groups);\n\n  function getValuesArray(arr){\n    var valuesArray = []\n    for(var i in arr){\n      valuesArray[i] = arr[i].value;\n    }\n    return valuesArray;\n  }\n\n  function findAliases(top5Array, fullArray){\n    var aliases = [];\n    var found = "";\n    for(var i in top5Array){\n      for(var k in fullArray){\n        if(top5Array[i] == fullArray[k].value && Find(fullArray[k].alias, found) == -1){\n          found += fullArray[k].alias;\n          aliases[Count(aliases)] = {\n            alias: fullArray[k].alias,\n            value: top5Array[i]\n          };\n        }\n      }\n    }\n    return aliases;\n  }\n\n  function getTopGroups(groupsArray){\n    var values = getValuesArray(groupsArray);\n    var top5Values = IIF(Max(values) > 0, Top(Reverse(Sort(values)),numTopValues), "no data");\n    var top5Aliases = findAliases(top5Values,groupsArray);\n\n    if(TypeOf(top5Values) == "String"){\n      return top5Values;\n    } else {\n      var content = "";\n      for(var i in top5Aliases){\n        if(top5Aliases[i].value > 0){\n          content += (i+1) + ". " + top5Aliases[i].alias + " (" + Text(top5Aliases[i].value, "#,###") + ")";\n          content += IIF(i < numTopValues-1, TextFormatting.NewLine, "");\n        }\n      }\n    }\n\n    return content;\n  }\n\n  getTopGroups(groups);\n  ')}},90704:(n,e,t)=>{t.d(e,{Co:()=>M,I$:()=>V,KY:()=>h,Qm:()=>x,Rm:()=>L,Zw:()=>T,aG:()=>b,aI:()=>D,a_:()=>F,iN:()=>R,iX:()=>E,o6:()=>C,qI:()=>q,sQ:()=>y,tM:()=>w,uw:()=>O,w1:()=>j,xK:()=>P});var a=t(18690),l=t(50346),o=t(92115),i=(t(81806),t(72599)),r=(t(44631),t(32173),t(50654),t(44135)),u=t(53430),c=t(21820),s=t(76106),f=t(28383),d=t(42633),m=t(72003);const p=/_value$/i,v=Math.LOG10E,g={SECOND:1e3,MINUTE:6e4,HOUR:36e5},h=10;function y(n){return n.map((n=>n.toJSON()))}function x(n,e){var t;const a=[],l=n.layer,o="featureReduction"in l?l.featureReduction:null,i="binning"===(null===o||void 0===o?void 0:o.type),r=null!=o&&"fields"in o?null===(t=o.fields)||void 0===t?void 0:t.map((n=>{var e;return null===(e=n.name)||void 0===e?void 0:e.toLowerCase()})).filter(Boolean):[];if(!i||!e)return a;for(const u of e)r.includes(u.toLowerCase())||a.push(u);return a}function F(n,e,t){const a=[];if(e)for(const o of e){var l;const e=n.getField(o);e&&t&&"availableFields"in t&&(null===(l=t.availableFields)||void 0===l||!l.includes(e.name))&&a.push(e.name)}return a}function V(n,e){var t;const a=n&&n.features;if(0===(null===a||void 0===a?void 0:a.length))return{avg:null,count:0,max:null,median:null,min:null,nullcount:0,stddev:null,sum:null,variance:null};const l=null===a||void 0===a||null===(t=a[0])||void 0===t?void 0:t.attributes,o={};for(const i in l)o[i.replace(p,"").toLowerCase()]=l[i];return null!=o.totalcount&&o.totalcount>=o.count&&(o.nullcount=o.totalcount-o.count),delete o.totalcount,o.min===o.max&&null!=o.min&&null==o.stddev&&(o.stddev=o.variance=0),e&&(["min","max","avg","stddev","sum","variance"].forEach((n=>{null!=o[n]&&(o[n]=Math.ceil(o[n]))})),o.min===o.max&&null!=o.min&&(o.avg=o.min,o.stddev=o.variance=0)),o}function w(n){const e=[],t=n.classBreaks,a=t[0].minValue,l=t[t.length-1].maxValue;t.forEach((n=>{e.push([n.minValue,n.maxValue])}));const o={field:n.field,normalizationType:n.normalizationType,normalizationField:n.normalizationField,normalizationTotal:n.normalizationTotal,layer:n.layer};return{min:a,max:l,intervals:e,sqlExpr:E(o),excludeZerosExpr:n.where,normTotal:n.normalizationTotal}}function E(n){const{field:e,normalizationType:t,normalizationField:a,normalizationTotal:l,layer:o}=n,i=(0,d.R3)(o,e);let r=e;return"percent-of-total"===t?r="((".concat(i?(0,d.Ll)(e):e," / ").concat(l,") * 100)"):"log"===t?r="(log(".concat(e,") * ").concat(v,")"):"field"===t?r="(".concat(i?(0,d.Ll)(e):e," / ").concat(a,")"):"natural-log"===t?r="(log(".concat(i?(0,d.Ll)(e):e,"))"):"square-root"===t&&(r="(power(".concat(i?(0,d.Ll)(e):e,", 0.5))")),r}function N(n,e){let t;if(e=e.toLowerCase(),n)for(const a in n)if(a.toLowerCase()!==e){t=n[a];break}return t}function A(n,e){let t;if(e=e.toLowerCase(),n)for(const a in n)if(a.toLowerCase()===e){t=n[a];break}return t}function T(n,e,t,a,l){const o={},i="countOFExpr";n&&n.features&&n.features.forEach((n=>{const e=n.attributes,t=N(e,i),a=A(e,i);null!=t&&null!=a&&0!==t&&(o[t]=a)}));const r=[];return(0,m.OR)(e,t,a).forEach(((n,e)=>{const t=(e+1).toString();r.push({minValue:n[0],maxValue:n[1],count:o.hasOwnProperty(t)?o[t]:0})})),{bins:r,minValue:e,maxValue:t,normalizationTotal:l}}async function b(n,e){const t=n&&n.features,{field:a,field2:o,field3:i,fieldDelimiter:r,layer:u,view:c,signal:s,labels:f}=e,d="countOF".concat(a&&o?"Expr":a||"Expr"),p={};let v=!1;for(const l of t){const n=l.attributes,e=A(n,d);let t=a?A(n,a):N(n,d),u=o?A(n,o):null,c=i?A(n,i):null;null===t&&0===e&&(v=!0),(null==t||"string"==typeof t&&""===t.trim())&&(t=null),o&&(null==u||"string"==typeof u&&""===u.trim())&&(u=null),i&&(null==c||"string"==typeof c&&""===c.trim())&&(c=null);let s=t;o&&(s="".concat((0,m.gJ)(s)).concat(r).concat((0,m.gJ)(u)),i&&(s="".concat(s).concat(r).concat((0,m.gJ)(c)))),null==p[s]?p[s]={count:e,data:s}:p[s].count=p[s].count+e}if(a&&v){const n=a+" is NULL";try{const e=await u.queryFeatureCount({whereClause:n,view:c,signal:s});return p.null.count=p.null.count+e,I(p,f)}catch(g){return(0,l.throwIfAborted)(s),I(p,f)}}return I(p,f)}function I(n,e){if(e)for(const t in n)n[t].label=e[t];return{count:n}}async function S(n,e,t){const a=n?t.getField(n):null,l=a?t.getFieldDomain(a.name):null;if(l)return l;const{uniqueValueInfos:r}=await t.uniqueValues({field:n,sqlWhere:e.sqlWhere,features:e.features,useFeaturesInView:e.useFeaturesInView,view:e.view,signal:e.signal}),u=r.map((n=>new o.H({code:n.value})));return new i.default({codedValues:u})}async function C(n,e){if(!n.returnAllCodedValues)return[];const{field:t,field2:a,field3:l}=n;if(t&&!a){const n=t?e.getField(t):null,a=n?e.getFieldDomain(n.name):null;return a?[a]:[]}const o=[];return t&&(o.push(S(t,n,e)),a&&(o.push(S(a,n,e)),l&&o.push(S(l,n,e)))),Promise.all(o)}function z(n){return n?(0,d.Ll)(["HOUR","MINUTE","SECOND"].map((e=>"(".concat(function(n,e){return"EXTRACT(".concat(e," FROM ").concat(n,") * ").concat(g[e])}(n,e),")"))).join(" + ")):null}function O(n){var e;return{viewingMode:"2d"===n.type?"map":n.viewingMode,scale:n.scale,spatialReference:null===(e=n.spatialReference)||void 0===e?void 0:e.toJSON()}}function j(n,e){const t=new Set(n.map((n=>n.value))),a=e.filter((n=>!t.has(n)));for(const l of a)n.push({value:l,count:0});n.sort(((n,t)=>e.indexOf(n.value)-e.indexOf(t.value)));for(const l of n)l.value===s.noDominantCategoryField&&(l.value=null);return{predominantCategoryInfos:n}}function L(n){var e;const t="featureReduction"in n?n.featureReduction:null;return(null!==(e=null!=t&&"fields"in t?t.fields:null)&&void 0!==e?e:[]).map((e=>{const t=function(n,e){var t,a,l,o;switch(n.statisticType){case"avg":case"avg_angle":return"double";case"count":return"integer";case"min":case"max":case"sum":return n.onStatisticField?null!==(t=null===(a=e.get(n.onStatisticField))||void 0===a?void 0:a.type)&&void 0!==t?t:null:n.onStatisticExpression?"string"===n.onStatisticExpression.returnType?null:"double":null;case"mode":return n.onStatisticField?null!==(l=null===(o=e.get(n.onStatisticField))||void 0===o?void 0:o.type)&&void 0!==l?l:null:n.onStatisticExpression?"string"===n.onStatisticExpression.returnType?"string":"double":null;default:return null}}(e,n.fieldsIndex);return t?new r.default({type:t,name:e.name,alias:e.alias}):null})).filter(a.Ru)}function R(n,e){return(0,d.fs)(e)?function(n,e){return(0,d.aM)(n,new Date(0),e,"milliseconds").sqlExpression}(n,null===e||void 0===e?void 0:e.name):(0,u.isTimeOnlyField)(e)?z(null===e||void 0===e?void 0:e.name):null}function q(n,e,t){const{field:a,normalizationType:l,normalizationField:o,normalizationTotal:i,minValue:r,maxValue:s,filter:d}=e,p=n.supportsSQLExpression?R(n,t)||e.sqlExpression:null,v=E({field:a,normalizationType:l,normalizationField:o,normalizationTotal:i,layer:n}),g=p||v,h=g?(0,f.lX)(g,r,s):null,y=(0,f.Lc)({field:a,normalizationField:o,normalizationType:l}),x=(0,f.sf)(e.sqlWhere,y),F=(0,f.sf)(x,h),V=(0,m.Vb)({normalizationField:o,normalizationType:l,sqlExpression:p,supportsSQLExpression:n.supportsSQLExpression,minValue:r,maxValue:s}),w=(0,u.isStringField)(n.getField(null!==a&&void 0!==a?a:void 0)),{include:N,exclude:A}=e.outStatisticTypes||{},T=m.wy.filter((n=>(!N||N.includes(n))&&(!A||!A.includes(n))&&("nullcount"===n?V:!w||"count"===n))),b=n.createQuery();return b.where=(0,f.sf)(b.where,F),b.sqlFormat=p?"standard":null,b.outStatistics=T.map((e=>{const t=new c.default;let a=null,l=null,o="".concat(e,"_value");if("variance"===e)a="var",l=g;else if("nullcount"===e){const e=n.objectIdField;a="count",l=e&&n.getField(e)?e:"1",o="totalcount_value"}else"median"===e?(a="percentile-continuous",l=g,t.statisticParameters={value:.5}):(a=e,l=g);return t.statisticType=a,t.onStatisticField=l,t.outStatisticFieldName=o,t})),M(b,d),b}function M(n,e){e&&(n.geometry=e.geometry,n.spatialRelationship=e.spatialRelationship)}function D(n,e){const{field:t,field2:a,field3:l,sqlExpression:o}=e,i=!(!t||!a),r=n.createQuery();return r.where=(0,f.sf)(r.where,e.sqlWhere),r.sqlFormat=o?"standard":null,r.outStatistics=[k(i?null:t,i?"1":o)].filter(Boolean),r.groupByFieldsForStatistics=[t||o,a,l].filter(Boolean),M(r,e.filter),r}function k(n,e){const t="countOF"+(n||"Expr"),a=new c.default;return a.statisticType="count",a.onStatisticField=e?"1":n,a.outStatisticFieldName=t,a}function P(n,e,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,l=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;const{min:r,max:u,normTotal:c,excludeZerosExpr:s}=e,d=e.intervals||(0,m.OR)(r,u,a),p=e.sqlExpr||t;return function(n,e,t,a,l,o,i){const r=[],u=e.length;for(let c=0;c<u;c++){const n=(0,f.sf)(a,(0,f.sf)(t+" >= "+e[c][0],null!==e[c][1]?t+(c===u-1?" <= ":" < ")+e[c][1]:""));r.push(n)}return Promise.allSettled(r.map((e=>n.queryFeatureCount({whereClause:e,view:l,filter:o,signal:i}))))}(n,d,p,s,l,o,i).then((n=>({bins:n.map(((n,e)=>({minValue:d[e][0],maxValue:d[e][1],count:"fulfilled"===n.status?n.value:0}))),minValue:r,maxValue:u,normalizationTotal:c})))}}}]);
//# sourceMappingURL=90704.aa11217f.chunk.js.map