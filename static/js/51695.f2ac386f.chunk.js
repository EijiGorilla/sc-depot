"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[9912,51695,87531],{9912:(e,t,n)=>{n.r(t),n.d(t,{applyTextFormattingHTML:()=>K,createFieldInfoMap:()=>W,findRelatedLayer:()=>se,findUtilityNetwork:()=>ue,fixTokens:()=>q,formatAttributes:()=>X,formatEditInfo:()=>B,formatValueToFieldInfo:()=>z,getAllFieldInfos:()=>$,getFieldInfo:()=>Q,getFieldInfoLabel:()=>M,getFixedFieldName:()=>O,getFixedFieldNames:()=>k,getHighlightKeyForFeature:()=>pe,getSourceLayer:()=>A,graphicCallback:()=>Z,htmlEntities:()=>J,isAssociatedFeatureSupportedLayer:()=>D,isExpressionField:()=>L,isFeatureSupportedLayer:()=>j,isGraphicForRelatableFeatureSupportedLayer:()=>G,isRelatableFeatureSupportedLayer:()=>V,isRelatableLayer:()=>S,isRelatedField:()=>ne,preLayerQueryCallback:()=>ae,preRequestCallback:()=>oe,querySourceLayer:()=>ee,queryUpdatedFeature:()=>te,shouldOpenInNewTab:()=>E,substituteAttributes:()=>x,substituteFieldsInLinksAndAttributes:()=>N});var i=n(89379),r=n(81806),l=n(76460),a=n(88685),o=n(65256),s=n(50265),u=n(53430),d=n(31933),c=n(42633),p=n(98976),f=n(67478);const y=()=>l.A.getLogger("esri.widgets.Feature.support.featureUtils"),m=/href=(""|'')/gi,v=/(\{([^{\r\n]+)\})/g,b=/'/g,g=/^\s*expression\//i,h=/(\n)/gi,w=/[\u00A0-\u9999<>&]/gim,I=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,F=/^(?:mailto:|tel:)/,_="relationships/",T=(0,o.J2)("short-date-short-time");function A(e){var t;if(null!=e)return null!==(t=e.sourceLayer||e.layer)&&void 0!==t?t:void 0}async function Z(e){let{type:t,value:n,event:i}=e;try{return"function"==typeof n?n(i):await n}catch(r){return void y().error("error",'An error occurred when calling the "'.concat(t,'" function'),{error:r,graphic:i.graphic,value:n})}}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return!F.test(e.trim().toLowerCase())}function L(e){return!!e&&g.test(e)}function M(e,t){const n=function(e,t){if(!t||!L(t)||!e)return;const n=t.replace(g,"").toLowerCase();return e.find((e=>{let{name:t}=e;return t.toLowerCase()===n}))}(t,null===e||void 0===e?void 0:e.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function O(e,t){const n=C(t,e);return n?n.name:e}function k(e,t){return e&&e.map((e=>O(e,t)))}function C(e,t){var n;return e&&"function"==typeof e.getField&&t&&null!==(n=e.getField(t))&&void 0!==n?n:null}function U(e){return"".concat(e).trim()}function N(e){let{attributes:t,globalAttributes:n,layer:r,text:l,expressionAttributes:a,fieldInfoMap:o}=e;return l?x({formattedAttributes:n,template:P(l,(0,i.A)((0,i.A)((0,i.A)({},n),a),t),r),fieldInfoMap:o}):""}function x(e){let{formattedAttributes:t,template:n,fieldInfoMap:i}=e;return U(function(e){return e.replaceAll(m,"")}((0,a.HC)((0,a.HC)(n,(e=>function(e,t){const n=t.get(e.toLowerCase());return"{".concat((null===n||void 0===n?void 0:n.fieldName)||e,"}")}(e,i))),t)))}function R(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,i.A)({},e);return Object.keys(n).forEach((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t[e];if("string"==typeof i){const r="%27",l=(n?encodeURIComponent(i):i).replaceAll(b,r);t[e]=l}}(e,n,t))),n}function q(e,t){return e.replaceAll(v,((e,n,i)=>{const r=C(t,i);return r?"{".concat(r.name,"}"):n}))}function P(e,t,n){const i=q(e,n);return i?i.replaceAll(I,((e,n,i)=>function(e,t,n){const i=(t=U(t))&&"{"!==t[0];return(0,a.HC)(e,R(n,i||!1))}(e,n||i,t))):i}function j(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&("feature"===e.type||"scene"===e.type||"subtype-group"===e.type||"subtype-sublayer"===e.type||"sublayer"===e.type)&&"when"in e}function S(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function V(e){return j(e)&&S(e)}function D(e){return!(!(e&&"object"==typeof e&&"createQuery"in e&&"getField"in e&&"queryFeatureCount"in e&&"queryFeatures"in e&&"queryObjectIds"in e&&"capabilities"in e&&"fields"in e&&"fieldsIndex"in e&&"type"in e)||"feature"!==e.type&&"subtype-group"!==e.type&&"subtype-sublayer"!==e.type&&"sublayer"!==e.type||!("when"in e))&&("subtype-sublayer"===e.type&&"parent"in e&&e.parent&&"object"==typeof e.parent?"globalIdField"in e.parent:"globalIdField"in e)}function G(e){return!!e&&"object"==typeof e&&"sourceLayer"in e&&V(e.sourceLayer)}function z(e,t){const{fieldInfos:n,fieldName:r,preventPlacesFormatting:l,layer:a,timeZone:o}=t,d=Q(n,r),p=C(a,r);if(d&&!(0,u.isRasterPixelValueField)(r)){var f;const t=null===p||void 0===p?void 0:p.type,n=null===(f=d.format)||void 0===f?void 0:f.dateFormat;if("date"===t||"date-only"===t||"time-only"===t||"timestamp-offset"===t||n)return(0,c.i0)(e,{format:n,fieldType:t,timeZoneOptions:{layerTimeZone:a&&"preferredTimeZone"in a?a.preferredTimeZone:null,viewTimeZone:o,datesInUnknownTimezone:!(!a||!("datesInUnknownTimezone"in a))&&!!a.datesInUnknownTimezone}})}const y=null===d||void 0===d?void 0:d.format;return"string"==typeof e&&(0,u.isRasterPixelValueField)(r)&&y?function(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?H(e,",",", ",t):e.includes(";")?H(e,";","; ",t):e.includes(" ")?H(e," "," ",t):(0,s.ZV)(Number(e),(0,s.yx)(t))}(e,y):"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}(e,y))||null==e||null==y?K(e):(0,s.ZV)(e,l?(0,i.A)((0,i.A)({},(0,s.yx)(y)),{},{minimumFractionDigits:0,maximumFractionDigits:20}):(0,s.yx)(y))}function H(e,t,n,i){return e.trim().split(t).map((e=>(0,s.ZV)(Number(e),(0,s.yx)(i)))).join(n)}function Q(e,t){if(null!==e&&void 0!==e&&e.length&&t)return e.find((e=>{var n;return(null===(n=e.fieldName)||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()}))}function B(e,t,n,r){const{creatorField:l,creationDateField:a,editorField:s,editDateField:u}=e;if(!t)return;const d=(0,f.hv)(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,n,T,"date"),c=(0,i.A)((0,i.A)({},T),d),p=t[u];if("number"==typeof p){const e=t[s];return{type:"edit",date:(0,o.Yq)(p,c),user:e}}const y=t[a];if("number"==typeof y){const e=t[l];return{type:"create",date:(0,o.Yq)(y,c),user:e}}return null}function W(e,t){const n=new Map;if(!e)return n;for(const i of e){if(!i.fieldName)continue;const e=O(i.fieldName,t);i.fieldName=e,n.set(e.toLowerCase(),i)}return n}function $(e){const t=[];if(!e)return t;const{fieldInfos:n,content:i}=e;return n&&t.push(...n),i&&Array.isArray(i)?(i.forEach((e=>{if("fields"===e.type){const n=null===e||void 0===e?void 0:e.fieldInfos;n&&t.push(...n)}})),t):t}function J(e){return e.replaceAll(w,(e=>"&#".concat(e.charCodeAt(0),";")))}function K(e){return"string"==typeof e?e.replaceAll(h,'<br class="esri-text-new-line" />'):e}function Y(e){var t;const{value:n,fieldName:i,fieldInfos:l,fieldInfoMap:a,layer:o,graphic:s,timeZone:d}=e;if(null==n)return"";const p=function(e){let{fieldName:t,value:n,graphic:i,layer:l}=e;if(ne(t))return null;if(!l||"function"!=typeof l.getFieldDomain)return null;const a=i&&l.getFieldDomain(t,{feature:i,excludeImpliedDomains:(0,r.A)("esri-widget-legacy-field-domain-calculation")});return a&&"coded-value"===a.type?a.getName(n):null}({fieldName:i,value:n,graphic:s,layer:o});if(p)return p;const f=function(e){let{fieldName:t,graphic:n,layer:i}=e;if(ne(t))return null;if(!i||"function"!=typeof i.getFeatureType)return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const l=i.getFeatureType(n);return l?l.name:null}({fieldName:i,graphic:s,layer:o});if(f)return f;if(a.get(i.toLowerCase()))return z(n,{fieldInfos:l||Array.from(a.values()),fieldName:i,layer:o,timeZone:d});const y=null===o||void 0===o||null===(t=o.fieldsIndex)||void 0===t?void 0:t.get(i);return y&&((0,c.fs)(y)||(0,u.isTimeOnlyField)(y))?(0,c.i0)(n,{fieldType:y.type,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:d,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}}):K(n)}function X(e){let{fieldInfos:t,attributes:n,layer:i,graphic:r,fieldInfoMap:l,relatedInfos:a,timeZone:o}=e;const s={};return null!==a&&void 0!==a&&a.forEach((e=>function(e){var t,n;let{attributes:i,relatedInfo:r,fieldInfoMap:l,fieldInfos:a,layer:o,timeZone:s}=e;i&&r&&(null!==(t=r.relatedFeatures)&&void 0!==t&&t.forEach((e=>ie({attributes:i,graphic:e,relatedInfo:r,fieldInfoMap:l,fieldInfos:a,layer:o,timeZone:s}))),null===(n=r.relatedStatsFeatures)||void 0===n||n.forEach((e=>ie({attributes:i,graphic:e,relatedInfo:r,fieldInfoMap:l,fieldInfos:a,layer:o,timeZone:s}))))}({attributes:s,relatedInfo:e,fieldInfoMap:l,fieldInfos:t,layer:i,timeZone:o}))),n&&Object.keys(n).forEach((e=>{const a=n[e];s[e]=Y({fieldName:e,fieldInfos:t,fieldInfoMap:l,layer:i,value:a,graphic:r,timeZone:o})})),s}async function ee(e,t){var n;const{layer:i,graphic:r,outFields:l,objectIds:a,returnGeometry:o,spatialReference:s}=e,u=a[0];if("number"!=typeof u&&"string"!=typeof u){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:i,graphic:r,objectId:u,requiredFields:l};return y().warn(e,t),null}if(null===(n=(0,d.BR)(i))||void 0===n||null===(n=n.operations)||void 0===n||!n.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:i,graphic:r,requiredFields:l,returnGeometry:o};return y().warn(e,t),null}const c=i.createQuery();return c.objectIds=a,c.outFields=null!==l&&void 0!==l&&l.length?l:[i.objectIdField],c.returnGeometry=!!o,c.returnZ=!!o,c.returnM=!!o,c.outSpatialReference=s,(await i.queryFeatures(c,t)).features[0]}async function te(e,t){let{graphic:n,popupTemplate:r,layer:l,spatialReference:a}=e;if(!l||!r)return;if("function"==typeof l.load&&await l.load(t),!n.attributes)return;const o=l.objectIdField,s=n.attributes[o];if(null==s)return;const d=[s],c=await r.getRequiredFields(l.fieldsIndex),f=(0,u.featureHasFields)(c,n),y=f?[]:c.includes(o)?c:[...c,o],m=r.returnGeometry||await async function(e){var t;if(null===(t=e.expressionInfos)||void 0===t||!t.length)return!1;const n=await(0,p.lw)(),{arcadeUtils:{hasGeometryFunctions:i}}=n;return i(e)}(r);if(f&&!m)return;const v=await ee({layer:l,graphic:n,outFields:y,objectIds:d,returnGeometry:m,spatialReference:a},t);v&&(v.geometry&&(n.geometry=v.geometry),v.attributes&&(n.attributes=(0,i.A)((0,i.A)({},n.attributes),v.attributes)))}function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e&&e.includes(_)}function ie(e){let{attributes:t,graphic:n,relatedInfo:i,fieldInfos:r,fieldInfoMap:l,layer:a,timeZone:o}=e;t&&n&&i&&Object.keys(n.attributes).forEach((e=>{const s=function(e){return"".concat(_).concat(e.layerId,"/").concat(e.fieldName)}({layerId:i.relation.id.toString(),fieldName:e}),u=n.attributes[e];t[s]=Y({fieldName:s,fieldInfos:r,fieldInfoMap:l,layer:a,value:u,graphic:n,timeZone:o})}))}const re=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},le=e=>{var t;let{layer:n,method:i,query:r,definitionExpression:l}=e;if(null===(t=n.capabilities)||void 0===t||null===(t=t.query)||void 0===t||!t.supportsCacheHint||"attachments"===i)return;const a=null!=r.where?r.where:null,o=null!=r.geometry?r.geometry:null;re(l)||re(a)||"extent"===(null===o||void 0===o?void 0:o.type)||"tile"===r.resultType||(r.cacheHint=!0)},ae=e=>{var t;let{query:n,layer:i,method:r}=e;le({layer:i,method:r,query:n,definitionExpression:"".concat(i.definitionExpression," ").concat(null!==(t=i.serviceDefinitionExpression)&&void 0!==t?t:"")})},oe=e=>{var t;let{queryPayload:n,layer:i,method:r}=e;le({layer:i,method:r,query:n,definitionExpression:"".concat(i.definitionExpression," ").concat(null!==(t=i.serviceDefinitionExpression)&&void 0!==t?t:"")})};function se(e,t,n){var i,r;return e&&t&&n?"sublayer"===t.type?ce({layers:null===(i=t.layer)||void 0===i?void 0:i.sublayers,map:e,relatedLayer:t,relationship:n})||ce({layers:null===(r=t.layer)||void 0===r?void 0:r.subtables,map:e,relatedLayer:t,relationship:n}):ce({layers:e.allLayers,map:e,relatedLayer:t,relationship:n})||ce({layers:e.allTables,map:e,relatedLayer:t,relationship:n}):null}function ue(e,t){var n;return e&&"utilityNetworks"in e&&t?null===(n=e.utilityNetworks)||void 0===n?void 0:n.find((e=>e.isUtilityLayer(t))):null}function de(e,t){return null===e||void 0===e?void 0:e.allTables.find((e=>{var n;return"feature"===e.type&&e.layerId===t.id&&e.url===(null===(n=t.layer)||void 0===n?void 0:n.url)}))}function ce(e){let{map:t,relationship:n,relationship:{relatedTableId:i},relatedLayer:r,layers:l}=e;if(!l)return null;for(const o of l){var a;if("map-image"===o.type){const e=ce({layers:o.sublayers,map:t,relatedLayer:r,relationship:n})||ce({layers:o.subtables,map:t,relatedLayer:r,relationship:n});if(e)return e;continue}if(!V(o))continue;if("sublayer"===r.type){if(o!==r&&o.id===i)return o.isTable?de(t,o):o;continue}const e="scene"===r.type&&r.associatedLayer?r.associatedLayer.url:r.url;if(!e)return null;if("sublayer"!==o.type){if(o!==r&&o.url===e&&o.layerId===i)return o}else if(o!==r&&(null===(a=o.layer)||void 0===a?void 0:a.url)===e&&o.id===i)return o.isTable?de(t,o):o}return null}function pe(e){const t=e.getObjectId();return null!=t?"oid:".concat(t):"uid:".concat(e.uid)}},51695:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var i=n(35143),r=n(91967),l=n(46053),a=(n(81806),n(76460)),o=(n(47249),n(85842)),s=n(31933),u=n(12482);let d=class extends r.default{constructor(e){super(e),this.layer=null}get attachments(){var e;return{enabled:this._effectiveEnabled&&!(null===(e=this._effectiveCapabilities)||void 0===e||!e.data.supportsAttachment)}}get create(){var e;const{_effectiveCapabilities:t,layer:n}=this,i=this._createEnabled,r=i,l=null===(e=n.capabilities)||void 0===e?void 0:e.operations.supportsAdd,a=!(null===t||void 0===t||!t.operations.supportsAdd);return{attachments:{enabled:i&&this.attachments.enabled},attributes:i,enabled:i,geometry:r,reliesOnOwnerAdminPrivileges:!l&&a}}get delete(){var e;const{_effectiveCapabilities:t,layer:n}=this,i=null===(e=n.capabilities)||void 0===e?void 0:e.operations.supportsDelete,r=!(null===t||void 0===t||!t.operations.supportsDelete);return{enabled:this._effectiveEnabled&&!(null===t||void 0===t||!t.operations.supportsDelete),reliesOnOwnerAdminPrivileges:!i&&r}}get reliesOnOwnerAdminPrivileges(){return this._effectiveEnabled&&!this.layer.editingEnabled||this.create.reliesOnOwnerAdminPrivileges||this.update.reliesOnOwnerAdminPrivileges||this.delete.reliesOnOwnerAdminPrivileges}get update(){var e;const{_effectiveCapabilities:t,layer:n}=this,i=this._updateEnabled,r=!(!i||null===t||void 0===t||!t.editing.supportsGeometryUpdate),l=null===(e=n.capabilities)||void 0===e?void 0:e.operations.supportsUpdate,a=!(null===t||void 0===t||!t.operations.supportsUpdate),o=this.attachments.enabled,s=o&&this._canCreateOrUpdate;return{attachments:{enabled:o,create:s,update:s},attributes:i,enabled:i,geometry:r,reliesOnOwnerAdminPrivileges:!l&&a}}get _createEnabled(){var e;return this._effectiveEnabled&&!(null===(e=this._effectiveCapabilities)||void 0===e||!e.operations.supportsAdd)}get _updateEnabled(){var e;return this._effectiveEnabled&&!(null===(e=this._effectiveCapabilities)||void 0===e||!e.operations.supportsUpdate)}get _canCreateOrUpdate(){return!(!this._createEnabled&&!this._updateEnabled)}get _effectiveEnabled(){return(0,s.tk)(this.layer)}get _effectiveCapabilities(){return(0,s.BR)(this.layer)}};(0,i._)([(0,l.MZ)()],d.prototype,"attachments",null),(0,i._)([(0,l.MZ)()],d.prototype,"create",null),(0,i._)([(0,l.MZ)()],d.prototype,"delete",null),(0,i._)([(0,l.MZ)()],d.prototype,"layer",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"reliesOnOwnerAdminPrivileges",null),(0,i._)([(0,l.MZ)()],d.prototype,"update",null),(0,i._)([(0,l.MZ)()],d.prototype,"_createEnabled",null),(0,i._)([(0,l.MZ)()],d.prototype,"_updateEnabled",null),(0,i._)([(0,l.MZ)()],d.prototype,"_canCreateOrUpdate",null),(0,i._)([(0,l.MZ)()],d.prototype,"_effectiveEnabled",null),(0,i._)([(0,l.MZ)()],d.prototype,"_effectiveCapabilities",null),d=(0,i._)([(0,o.$)("esri.layers.support.EditingCapabilities")],d);const c=d;var p=n(80963),f=n(19463),y=n(64465);const m="esri.views.layers.support.editableLayerViews";var v=n(9912);let b=class extends c{constructor(e){super(e),this.layerInfo=null,this.layerView=null}get attachments(){const e=this.defaults.attachments.enabled,t=this.layerInfo;return{enabled:e&&!1!==(null===t||void 0===t?void 0:t.enabled)}}get create(){const{attachments:e,defaults:t,layerInfo:n,layer:i,layerView:r}=this,l=t.create,a=!1!==(null===n||void 0===n?void 0:n.enabled)&&!1!==(null===n||void 0===n?void 0:n.addEnabled),o=l.enabled&&a;return{attributes:o&&l.attributes,enabled:o,geometry:o&&l.geometry&&g(i,r),attachments:{enabled:e.enabled&&o&&!1!==(null===n||void 0===n?void 0:n.attachmentsOnCreateEnabled)},reliesOnOwnerAdminPrivileges:l.reliesOnOwnerAdminPrivileges}}get defaults(){return new c({layer:this.layer})}get delete(){const{defaults:e,layerInfo:t}=this,n=e.delete,i=!1!==(null===t||void 0===t?void 0:t.enabled)&&!1!==(null===t||void 0===t?void 0:t.deleteEnabled);return{enabled:n.enabled&&i,reliesOnOwnerAdminPrivileges:n.reliesOnOwnerAdminPrivileges}}get formTemplate(){const{layer:e,layerInfo:t}=this;return null!==t&&void 0!==t&&t.formTemplate?t.formTemplate:e&&"formTemplate"in e?e.formTemplate:null}get relationship(){var e,t;const{layer:n}=this,i=!(!(0,v.isRelatableFeatureSupportedLayer)(n)||null===(e=n.relationships)||void 0===e||!e.length),r=!(null===(t=this.formTemplate)||void 0===t||null===(t=t.elements)||void 0===t||!t.some((e=>"relationship"===e.type)));return{enabled:i&&r}}get update(){const{attachments:e,defaults:t,layerInfo:n,layer:i,layerView:r}=this,l=t.update,a=!1!==(null===n||void 0===n?void 0:n.enabled)&&!1!==(null===n||void 0===n?void 0:n.updateEnabled),o=l.enabled&&a,s=o&&l.attributes&&!1!==(null===n||void 0===n?void 0:n.attributeUpdatesEnabled),u=o&&l.geometry&&!1!==(null===n||void 0===n?void 0:n.geometryUpdatesEnabled)&&g(i,r),d=e.enabled&&!1!==(null===n||void 0===n?void 0:n.attachmentsOnUpdateEnabled);return{attributes:s,enabled:o,geometry:u,attachments:{enabled:d,create:d&&l.attachments.create,update:d&&l.attachments.update},reliesOnOwnerAdminPrivileges:l.reliesOnOwnerAdminPrivileges}}};function g(e,t){return"scene"!==e.type||null!=t&&"type"in t&&"scene-layer-3d"===t.type&&function(e,t){var n,i,r,l,o,s;const{associatedLayer:u}=e,d=null===u||void 0===u?void 0:u.infoFor3D;if(!d)return!1;const c=(0,f.U9)(d);if(null==c||!d.queryFormats.includes(c))return a.A.getLogger(m).warnOnce("SceneLayer (".concat(null!==(n=e.title)&&void 0!==n?n:"Untitled layer",", ").concat(e.id,") does not support geometry edits because it does not support GLB queries.")),!1;const v=e.spatialReference,b=u.spatialReference;if(!(0,p.aI)(v,b))return a.A.getLogger(m).warnOnce("SceneLayer (".concat(null!==(i=e.title)&&void 0!==i?i:"Untitled layer",", ").concat(e.id,") does not support geometry edits because its spatial reference (wkid:").concat(v.wkid,") is different from its associated FeatureLayer's spatial reference (wkid:").concat(b.wkid,").")),!1;const g=u.sourceJSON.sourceSpatialReference;if(null!=g&&!(0,p.aI)(g,b))return a.A.getLogger(m).warnOnce("SceneLayer (".concat(null!==(r=e.title)&&void 0!==r?r:"Untitled layer",", ").concat(e.id,") does not support geometry edits because the spatial reference of its associated FeatureLayer's service (wkid:").concat(b.wkid,") is different from its source spatial reference (wkid:").concat(g.wkid,").")),!1;const{view:h}=t;if(t.destroyed||null==h)return!1;const w=h.spatialReference,{viewingMode:I}=h.state,F=(0,p.EA)(v),_=I===y.RT.Global;return F&&!_?(a.A.getLogger(m).warnOnce("SceneLayer (".concat(null!==(l=e.title)&&void 0!==l?l:"Untitled layer",", ").concat(e.id,") does not support geometry edits in local viewing mode because its spatial reference (wkid:").concat(v.wkid,") is geographic. Please consider changing the viewing mode to global.")),!1):!F&&_?(a.A.getLogger(m).warnOnce("SceneLayer (".concat(null!==(o=e.title)&&void 0!==o?o:"Untitled layer",", ").concat(e.id,") does not support geometry edits in global viewing mode because its spatial reference (wkid:").concat(v.wkid,") is projected. Please consider changing the viewing mode to local.")),!1):!!((0,p.aI)(v,w)||_&&(0,p.K8)(w)&&(0,p.oT)(v))||(a.A.getLogger(m).warnOnce("SceneLayer (".concat(null!==(s=e.title)&&void 0!==s?s:"Untitled layer",", ").concat(e.id,") does not support geometry edits because its spatial reference (wkid:").concat(v.wkid,") does not match the view spatial reference (wkid:").concat(w.wkid,").")),!1)}(e,t)}(0,i._)([(0,l.MZ)()],b.prototype,"attachments",null),(0,i._)([(0,l.MZ)()],b.prototype,"create",null),(0,i._)([(0,l.MZ)()],b.prototype,"defaults",null),(0,i._)([(0,l.MZ)()],b.prototype,"delete",null),(0,i._)([(0,l.MZ)()],b.prototype,"formTemplate",null),(0,i._)([(0,l.MZ)()],b.prototype,"layerInfo",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"layerView",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"relationship",null),(0,i._)([(0,l.MZ)()],b.prototype,"update",null),b=(0,i._)([(0,o.$)("esri.widgets.Editor.support.EditorEditingCapabilities")],b);const h=b;var w=n(3320);let I=class extends r.default{constructor(e){super(e),this.disabled=!1,this.layer=null,this.layerInfo=null,this.layerView=null}get _suspended(){var e;return!(null===(e=this.layerView)||void 0===e||!e.suspended)}get capabilities(){return new h({layer:this.layer,layerInfo:this.layerInfo,layerView:this.layerView})}get editable(){const{create:e,relationship:t,update:n,delete:{enabled:i}}=this.capabilities,r=e.attachments.enabled||n.attachments.enabled;return!this.disabled&&(e.enabled||n.enabled||r||i||t.enabled)}get formTemplate(){return this.capabilities.formTemplate}get hasInvalidFormTemplate(){return(0,w.lB)(this.layer,this.formTemplate)}get isTable(){return(0,s.bI)(this.layer)}get supportsCreateFeaturesWorkflow(){var e;if(this.disabled)return!1;if("3d"===(null===(e=this.layerView)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.type)&&(0,u.wz)(this.layer.elevationInfo))return!1;const{enabled:t,geometry:n}=this.capabilities.create;return this.isTable?t:t&&n}get supportsUpdateWorkflow(){const{capabilities:e}=this;return!this.disabled&&(e.update.enabled||e.update.attachments.enabled||e.delete.enabled)}get visible(){const{layer:e}=this,t=e.parent;return!this._suspended&&e.visible&&(!t||!("visible"in t)||t.visible)}};(0,i._)([(0,l.MZ)()],I.prototype,"_suspended",null),(0,i._)([(0,l.MZ)()],I.prototype,"capabilities",null),(0,i._)([(0,l.MZ)()],I.prototype,"disabled",void 0),(0,i._)([(0,l.MZ)()],I.prototype,"editable",null),(0,i._)([(0,l.MZ)()],I.prototype,"formTemplate",null),(0,i._)([(0,l.MZ)()],I.prototype,"hasInvalidFormTemplate",null),(0,i._)([(0,l.MZ)()],I.prototype,"isTable",null),(0,i._)([(0,l.MZ)()],I.prototype,"layer",void 0),(0,i._)([(0,l.MZ)()],I.prototype,"layerInfo",void 0),(0,i._)([(0,l.MZ)()],I.prototype,"layerView",void 0),(0,i._)([(0,l.MZ)()],I.prototype,"supportsCreateFeaturesWorkflow",null),(0,i._)([(0,l.MZ)()],I.prototype,"supportsUpdateWorkflow",null),(0,i._)([(0,l.MZ)()],I.prototype,"visible",null),I=(0,i._)([(0,o.$)("esri.widgets.Editor.support.EditorItem")],I);const F=I}}]);
//# sourceMappingURL=51695.f2ac386f.chunk.js.map