{"version":3,"file":"static/js/34881.874c96e2.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/Editor/Upload.js","../node_modules/@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js","../node_modules/@arcgis/core/support/progressUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{createTask as t}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import{on as s}from\"../../core/events.js\";import has from\"../../core/has.js\";import{throwIfAborted as i,createResolver as a}from\"../../core/promiseUtils.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"../../geometry/Point.js\";import{initializeProjection as c,project as u}from\"../../geometry/projection.js\";import{equalsWithProjectionEngine as f}from\"../../geometry/support/spatialReferenceUtils.js\";import{uploadProgressWeights as m}from\"../../layers/graphics/sources/support/uploadProgressWeights.js\";import{getSupportedExtensions as d}from\"../../layers/support/infoFor3D.js\";import{makeProgressManager as h,estimatedTransferTime as y}from\"../../support/progressUtils.js\";let g=class extends r{constructor(){super({}),this.files=[],this.progress=0,this._uploadTask=null,this._layer=null}destroy(){this.cancel(),this.files=[],this._layer=null,this._uploadTask=null}get state(){const e=this._uploadTask;return e&&0!==this.files.length?e.finished?e.error?\"error\":\"success\":\"pending\":\"default\"}get result(){return this._uploadTask?.value??null}get error(){return this._uploadTask?.error??null}uploadTo(e){this.cancel(),this.files=[],this._layer=e,this._uploadTask=t((async r=>{const t=await v(e);i(r),this.progress=0,this.files=t;const s=h(m.upload,(e=>{this.progress=e}),\"Upload.uploadTo\");if(0===t.length)return null;i(r);const a=await e.extractAndFilterFiles(t);i(r),a.length>0&&(this.files=a);const l=await e.convertMesh(a,{signal:r,onProgress:s.makeOnProgress(\"createFromFiles\")});if(i(r),!l)throw new o(\"editor:upload\",\"could not upload or convert model\");const n=a.reduce(((e,r)=>e+r.size),0),p=s.simulate(\"loadMesh\",y(n));try{await l.load()}finally{p.remove()}if(has(\"enable-feature:georeferenced-uploads\")&&l.metadata.georeferenced){if(await f(e.spatialReference,l.origin?.spatialReference))return{type:\"georeferenced\",mesh:l};if((e.spatialReference.isWebMercator||e.spatialReference.isWGS84)&&await R(l,e.spatialReference))return{type:\"georeferenced-reprojected\",mesh:l}}return l.spatialReference=e.spatialReference,l.vertexSpace.origin=[0,0,0],{type:\"non-georeferenced\",mesh:l}}))}retry(){this._layer&&this.uploadTo(this._layer)}cancel(){this._uploadTask?.abort()}};e([l()],g.prototype,\"files\",void 0),e([l()],g.prototype,\"progress\",void 0),e([l()],g.prototype,\"state\",null),e([l()],g.prototype,\"result\",null),e([l()],g.prototype,\"error\",null),e([l()],g.prototype,\"_uploadTask\",void 0),e([l()],g.prototype,\"_layer\",void 0),g=e([n(\"esri.widgets.Editor.Upload\")],g);let j=null;async function v(e){const{resolve:r,promise:t}=a(),o=document.createElement(\"input\");o.type=\"file\",o.multiple=!1,o.accept=[...d(e.infoFor3D),\".zip\"].join(\",\"),o.style.display=\"none\",document.body.appendChild(o);const i=s(o,\"change\",(()=>r(o.files?Array.from(o.files):[])));return j?j(o):o.click(),t.finally((()=>{i.remove(),o.remove()}))}function _(e,r){j=t=>{r?.(),Promise.resolve().then((()=>e)).then((e=>{if(!j)return;const r=new DataTransfer;e.forEach((e=>r.items.add(e))),t.files=r.files,t.dispatchEvent(new Event(\"change\"))}))}}function w(){j=null}async function R(e,r){if(await c(e.spatialReference,r),!e.vertexSpace.origin)return!1;const[t,o,s]=e.vertexSpace.origin,i=new p({x:t,y:o,z:s,spatialReference:e.spatialReference}),a=u(i,r);return!!a&&(e.vertexSpace.origin=[a.x,a.y,a.z??0],e.spatialReference=r,!0)}export{g as Upload,w as clearPromptForFilesStub,_ as stubFilePickerToSelect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst e={upload:{createFromFiles:.8,loadMesh:.2},uploadAssetBlobs:{prepareAssetItems:.9,uploadAssetItems:.1},uploadConvertibleSource:{uploadEditSource:.5,serviceAssetsToGlb:.5},uploadLocalMesh:{meshToAssetBlob:.5,uploadAssetBlobs:.5}};export{e as uploadProgressWeights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{makeHandle as s}from\"../core/handleUtils.js\";import has from\"../core/has.js\";import{getOrCreateMapValue as t}from\"../core/MapUtils.js\";import{millisecondsFromSeconds as e,Seconds as r,Milliseconds as o}from\"../core/time.js\";function i(s,t=s=>{},e){return new n(s,t,e)}class n{constructor(s,t=s=>{},e){if(this.onProgress=t,this.taskName=e,this._progressMap=new Map,this._startTime=void 0,this._timingsMap=new Map,\"number\"==typeof s){this._weights={};for(let t=0;t<s;t++){const e=t,r=1/s;this._weights[e]=r,this._progressMap.set(e,0)}}else this._weights=s;this.emitProgress()}emitProgress(){let s=0;for(const[t,e]of this._progressMap.entries()){s+=e*this._weights[t]}if(1===s&&has(\"enable-feature:esri-3dofl-upload-timings\")){const s=Math.round(performance.now()-(this._startTime??0))/1e3;console.log(`${this.taskName} done in ${s} sec`);for(const[t,e]of this._timingsMap){const r=Math.round(e.end-e.start)/1e3,o=Math.round(r/s*100);console.log(this.taskName??\"Task\",{stepKey:t,stepTime:r,relativeTime:o})}}this.onProgress(s)}setProgress(s,e){if(this._progressMap.set(s,e),has(\"enable-feature:esri-3dofl-upload-timings\")){const r=performance.now();this._startTime??=r;const o=t(this._timingsMap,s,(()=>({start:r,end:0})));1===e&&(o.end=r)}this.emitProgress()}simulate(s,t){return a((t=>this.setProgress(s,t)),t)}makeOnProgress(s){return t=>this.setProgress(s,t)}}function a(t=s=>{},e=l){const r=performance.now();t(0);const o=setInterval((()=>{const s=performance.now()-r,o=1-Math.exp(-s/e);t(o)}),g);return s((()=>{clearInterval(o),t(1)}))}function h(s,t=c){return e(r(s*f/t))}function m(s,t=p){return e(r(s*f/t))}const c=10,p=10,f=8e-6,g=o(50),l=o(1e3);export{n as ProgressManager,m as estimatedConversionTime,h as estimatedTransferTime,i as makeProgressManager,a as simulateProgress};\n"],"names":["g","r","constructor","super","this","files","progress","_uploadTask","_layer","destroy","cancel","state","e","length","finished","error","result","_this$_uploadTask$val","_this$_uploadTask","value","_this$_uploadTask$err","_this$_uploadTask2","uploadTo","t","async","resolve","promise","a","o","document","createElement","type","multiple","accept","d","infoFor3D","join","style","display","body","appendChild","i","s","Array","from","j","click","finally","remove","v","h","m","upload","extractAndFilterFiles","l","convertMesh","signal","onProgress","makeOnProgress","n","reduce","size","p","simulate","y","load","has","metadata","georeferenced","_l$origin","f","spatialReference","origin","mesh","isWebMercator","isWGS84","_a$z","c","vertexSpace","x","z","u","R","retry","_this$_uploadTask3","abort","prototype","createFromFiles","loadMesh","uploadAssetBlobs","prepareAssetItems","uploadAssetItems","uploadConvertibleSource","uploadEditSource","serviceAssetsToGlb","uploadLocalMesh","meshToAssetBlob","arguments","undefined","taskName","_progressMap","Map","_startTime","_timingsMap","_weights","set","emitProgress","entries","_this$_startTime","Math","round","performance","now","console","log","concat","_this$taskName","end","start","stepKey","stepTime","relativeTime","setProgress","_this$_startTime2","setInterval","exp","clearInterval"],"sourceRoot":""}