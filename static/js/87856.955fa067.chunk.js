"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[87856],{51576:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var i=s(35143),a=s(46053),n=(s(81806),s(76460),s(47249),s(85842)),o=s(77200);let l=class extends o.default{constructor(t){super(t),this.handlesSyncedToPrimary=!0}set primaryHandleEnabled(t){this._set("primaryHandleEnabled",t)}get primaryHandleEnabled(){const{stops:t}=this;if(null===t||void 0===t||!t.length)return!1;const e=t.length;return(3===e||5===e)&&this._get("primaryHandleEnabled")}get values(){const{primaryHandleEnabled:t,stops:e}=this;if(null===e||void 0===e||!e.length||e.length<2)return[];const s=this.getValuesFromStops();return t?3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]]:[s[0],s[s.length-1]]}setValue(t,e){const{max:s,min:i,values:a}=this,n=a[t];if(isNaN(e)||n===e||e>s||e<i)return;e=this.toPrecision(e);const o=this.primaryHandleEnabled&&this.handlesSyncedToPrimary;if(o){const s=a.slice().sort(((t,e)=>t>e?1:-1))[1];(0===t&&e>s||2===t&&e<s)&&(e=s)}const l=this.getStopChanges(t,e);this.updateStops(l),o?this.notifyChange("values"):(a[t]=e,this._set("values",[...a])),this.notifyChange("labels")}getStopIndexFromValueIndex(t){const{handlesSyncedToPrimary:e,primaryHandleEnabled:s}=this;if(s){const{values:s}=this,i=s[t];if(e)return t;const a=s.slice().sort(((t,e)=>t>e?1:-1)),n=a.indexOf(i);return s.some(((t,e)=>t===i&&e!==n))?a.lastIndexOf(i):n}return super.getStopIndexFromValueIndex(t)}getStopChanges(t,e){return this.primaryHandleEnabled?this._getStopChanges(t,e):super.getStopChanges(t,e)}_getStopChanges(t,e){const{max:s,min:i,stops:a,values:n}=this,o=this.handlesSyncedToPrimary&&1===t,l=n[t],r=n.slice();o||(r[t]=e);const d=r.sort(((t,e)=>t>e?1:-1)),h=o?e:d[1],u=e-l,m=o?this.toPrecision(Math.max(Math.min(d[0]+u,s),i)):d[0],p=o?this.toPrecision(Math.max(Math.min(d[2]+u,s),i)):d[2];return 5===a.length?[{index:0,value:m},{index:1,value:this.toPrecision((h+m)/2)},{index:2,value:h},{index:3,value:this.toPrecision((h+p)/2)},{index:4,value:p}]:[{index:0,value:m},{index:1,value:h},{index:2,value:p}]}};(0,i._)([(0,a.MZ)()],l.prototype,"handlesSyncedToPrimary",void 0),(0,i._)([(0,a.MZ)()],l.prototype,"primaryHandleEnabled",null),(0,i._)([(0,a.MZ)({dependsOn:["handlesSyncedToPrimary"],readOnly:!0})],l.prototype,"values",null),l=(0,i._)([(0,n.$)("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],l);const r=l},69205:(t,e,s)=>{function i(t){return a(null===t||void 0===t?void 0:t.visualVariables[0])}function a(t){var e,s;return[null!==(e=null===t||void 0===t?void 0:t.minSliderValue)&&void 0!==e?e:0,null!==(s=null===t||void 0===t?void 0:t.maxSliderValue)&&void 0!==s?s:0]}s.d(e,{N:()=>i,n:()=>a})},71973:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var i=s(35143),a=s(46053),n=(s(81806),s(76460),s(47249),s(85842)),o=s(51576);let l=class extends o.default{constructor(t){super(t),this.persistSizeRangeEnabled=!1}updateStops(t){const{primaryHandleEnabled:e,persistSizeRangeEnabled:s,stops:i}=this,a=this.getValuesFromStops();if(null!==a&&void 0!==a&&a.length&&(t.sort(((t,e)=>t.value>e.value?1:-1)).forEach((t=>{a[t.index]=t.value})),i.forEach(((t,e)=>t.value=a[e])),e&&s)){const{stops:t}=this,e=this.getValuesFromStops(),s=t.map((t=>t.size)),i=Math.max(...s),a=Math.min(...s),n=Math.max(...e),o=Math.min(...e),l=t[5===t.length?2:1].value,r=Math.abs(n-l),d=Math.abs(o-l),h=r>d?r:d,u=i-a;if(0===h)return;t.forEach((t=>{t.size=Math.abs(t.value-l)/h*u+a}))}}};(0,i._)([(0,a.MZ)()],l.prototype,"persistSizeRangeEnabled",void 0),l=(0,i._)([(0,n.$)("esri.widgets.smartMapping.SizeSlider.SizeSliderViewModel")],l);const r=l},77200:(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});var i=s(89379),a=s(35143),n=s(46053),o=(s(81806),s(76460),s(47249),s(85842)),l=s(6515),r=s(7095);let d=class extends l.default{constructor(t){super(t),this._initialStopValues=[],this._max=null,this._min=null,this.hasTimeData=!1,this.inputFormatFunction=(t,e)=>"max"===e?this.getUnzoomedMax().toString():"min"===e?this.getUnzoomedMin().toString():t.toString(),this.inputParseFunction=null,this.labelFormatFunction=t=>{if(this.hasTimeData)return(0,r.formatDateLabel)(t);const{max:e,min:s,precision:i}=this,a=e-s>10?2:i;return(0,r.formatNumberLabel)(parseFloat(t.toFixed(a)))},this.thumbsConstrained=!1,this.zoomingEnabled=!0}set breaks(t){this._set("breaks",t),this.notifyChange("max"),this.notifyChange("min")}set stops(t){if(null!==t&&void 0!==t&&t.length){const{max:e,min:s}=this,a=this.getValuesFromStops(t),n={};null!=s&&a.some((t=>t<s))&&(n.min=Math.min(...a)),null!=e&&a.some((t=>t>e))&&(n.max=Math.max(...a)),this.set((0,i.A)({},n)),this._initialStopValues=a}else this._initialStopValues=null;this._set("stops",t||null),this.notifyChange("values")}get labels(){const{values:t}=this,e=t&&t.length?t.map(((t,e)=>this.getLabelForValue(t,"value",e))):[],s=this.getUnzoomedMax(),i=this.getUnzoomedMin();return{max:this.getLabelForValue(s,"max"),min:this.getLabelForValue(i,"min"),values:e}}get max(){const{breaks:t}=this;return null!==t&&void 0!==t&&t.length?t[t.length-1].max:this.max}set max(t){const{zoomOptions:e}=this;if(null!=(null===e||void 0===e?void 0:e.max)){const s=this.values;let i=e.max;if(t<i&&(i=t,e.max=t),s&&s.length)for(let e=0;e<s.length;e++)t<s[e]&&this.setValue(e,t);this._storeZoomMax(i,t)}else this.updateBreakMax(t),this.setMax(t);this.notifyChange("labels")}get min(){const{breaks:t}=this;return null!==t&&void 0!==t&&t.length?t[0].min:this.min}set min(t){const{zoomOptions:e}=this;if(null!=(null===e||void 0===e?void 0:e.min)){const s=this.values;let i=e.min;if(t>i&&(i=t,e.min=t),s&&s.length)for(let e=0;e<s.length;e++)t>s[e]&&this.setValue(e,t);this._storeZoomMin(i,t)}else this.updateBreakMin(t),this.setMin(t);this.notifyChange("labels")}get state(){const{max:t,min:e,values:s}=this;return null!=t&&null!=e&&s.length>0?"ready":"disabled"}get values(){const{breaks:t,stops:e}=this;if(!t&&!e)return[];if(null!==t&&void 0!==t&&t.length){const e=t.map((t=>t.max));return e.pop(),e}if((null===e||void 0===e?void 0:e.length)<2)return[];const s=this.getValuesFromStops();return[s[0],s[s.length-1]]}set zoomOptions(t){const{zoomingEnabled:e,zoomOptions:s}=this;if(e){if(s){const e=null!=this._max?this._max:this.max,s=null!=this._min?this._min:this.min;if(t){const{max:i,min:a}=t,n=null!=i,o=null!=a,l=o?t.min:s,r=o?s:null,d=n?t.max:e,h=n?e:null;this._storeZoomMin(l,r),this._storeZoomMax(d,h)}else this.setMax(e),this.setMin(s),this._min=null,this._max=null}else if(t){const{max:e,min:s}=t;null!=s&&this._storeZoomMin(t.min,this.min),null!=e&&this._storeZoomMax(t.max,this.max)}this._set("zoomOptions",t),this.notifyChange("max"),this.notifyChange("min")}}getStopIndexFromValueIndex(t){const{stops:e}=this,s=this.values[t];return 0===t?s<=this.values[1]?0:e.length-1:1===t?this.values[0]>=s?0:e.length-1:null}getStopChanges(t,e){const s=this.stops,i=this.getStopIndexFromValueIndex(t),a=this.getValuesFromStops();a[i]=e;const[n,o]=[a[0],a[a.length-1]].sort(((t,e)=>t>e?1:-1)),l=o-n,r=s.length-1;return a.map(((t,e)=>({index:e,value:this.toPrecision(n+e*l/r)})))}setValue(t,e){var s;const{max:i,min:a,values:n}=this,o=n[t];if(isNaN(e)||o===e||e>i||e<a)return;n[t]=this.toPrecision(e),this._set("values",[...n]);const l=n.slice().sort(((t,e)=>t>e?1:-1)),d=l[0],h=l[l.length-1],u=(0,r.getStopChanges)(d,h,null!==(s=this._initialStopValues)&&void 0!==s?s:[]);this.updateStops(u),this.updateBreaks(),this.notifyChange("labels")}getValuesFromStops(t){const e=t||this.stops;return null===e||void 0===e?void 0:e.map((t=>t.hasOwnProperty("ratio")?t.ratio:t.value))}updateBreaks(){const{breaks:t,values:e}=this;(null===t||void 0===t?void 0:t.length)&&e.slice().sort(((t,e)=>t>e?1:-1)).forEach(((e,s)=>{t[s].max=e,null!=t[s+1]&&(t[s+1].min=e)}))}updateBreakMax(t){const{breaks:e,max:s,min:i}=this;!isNaN(t)&&s!==t&&null!=i&&t>i&&(null===e||void 0===e?void 0:e.length)&&(e[e.length-1].max=t)}updateBreakMin(t){const{breaks:e,max:s,min:i}=this;!isNaN(t)&&i!==t&&null!=s&&t<s&&(null===e||void 0===e?void 0:e.length)&&(e[0].min=t)}updateStops(t){const{stops:e}=this,s=this.getValuesFromStops();if(null!==s&&void 0!==s&&s.length){for(const e of t)s[e.index]=e.value;e.forEach(((t,e)=>{t.hasOwnProperty("ratio")?t.ratio=s[e]:t.value=s[e]}))}}getUnzoomedMax(){return this.zoomOptions&&null!=this._max?this._max:this.max}getUnzoomedMin(){return this.zoomOptions&&null!=this._min?this._min:this.min}_storeZoomMax(t,e){this._max=e,this.setMax(t)}_storeZoomMin(t,e){this._min=e,this.setMin(t)}};(0,a._)([(0,n.MZ)()],d.prototype,"breaks",null),(0,a._)([(0,n.MZ)()],d.prototype,"stops",null),(0,a._)([(0,n.MZ)()],d.prototype,"hasTimeData",void 0),(0,a._)([(0,n.MZ)()],d.prototype,"inputFormatFunction",void 0),(0,a._)([(0,n.MZ)()],d.prototype,"inputParseFunction",void 0),(0,a._)([(0,n.MZ)()],d.prototype,"labelFormatFunction",void 0),(0,a._)([(0,n.MZ)({readOnly:!0})],d.prototype,"labels",null),(0,a._)([(0,n.MZ)()],d.prototype,"max",null),(0,a._)([(0,n.MZ)()],d.prototype,"min",null),(0,a._)([(0,n.MZ)({readOnly:!0})],d.prototype,"state",null),(0,a._)([(0,n.MZ)()],d.prototype,"thumbsConstrained",void 0),(0,a._)([(0,n.MZ)({readOnly:!0})],d.prototype,"values",null),(0,a._)([(0,n.MZ)()],d.prototype,"zoomingEnabled",void 0),(0,a._)([(0,n.MZ)()],d.prototype,"zoomOptions",null),d=(0,a._)([(0,o.$)("esri.widgets.smartMapping.SmartMappingSliderViewModel")],d);const h=d},87856:(t,e,s)=>{s.r(e),s.d(e,{default:()=>z});var i,a=s(89379),n=s(35143),o=s(69539),l=s(46053),r=s(21403),d=(s(81806),s(47249),s(85842)),h=s(69205),u=s(43996),m=s(63040),p=s(51313),c=s(71973),g=s(7095),v=s(98108),x=s(76099),y=s(63582),_=s(54761);const f="esri-size-slider",b={base:f,rampElement:"".concat(f,"__ramp"),sliderContainer:"".concat(f,"__slider-container"),histogramContainer:"".concat(f,"__histogram-container"),zoomCapTop:"".concat(f,"__zoom-cap-top"),zoomCapBottom:"".concat(f,"__zoom-cap-bottom"),zoomCapLine:"".concat(f,"__zoom-cap-line"),zoomCapMask:"".concat(f,"__zoom-cap-mask"),zoomCapUnderline:"".concat(f,"__zoom-cap-underline"),primaryHandle:"".concat(f,"--primary-handle"),track:"".concat(f,"--interactive-track")},M={trackFillColor:new o.default([149,149,149]),trackBackgroundColor:new o.default([224,224,224])};let S=i=class extends p.default{constructor(t,e){super(t,e),this._maxRampFillWidth=1,this._minRampFillWidth=.2,this._rampNode=null,this.messages=null,this.style=(0,a.A)({},M),this.viewModel=new c.default}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(t){this.viewModel.handlesSyncedToPrimary=t}get label(){var t,e;return null!==(t=null===(e=this.messages)||void 0===e?void 0:e.widgetLabel)&&void 0!==t?t:""}set label(t){this._overrideIfSome("label",t)}get persistSizeRangeEnabled(){return this.viewModel.persistSizeRangeEnabled}set persistSizeRangeEnabled(t){this.viewModel.persistSizeRangeEnabled=t}get primaryHandleEnabled(){return this.viewModel.primaryHandleEnabled}set primaryHandleEnabled(t){this.viewModel.primaryHandleEnabled=t}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}castStyle(t){return(0,a.A)((0,a.A)({},M),t)}static fromRendererResult(t,e){var s,a;const{visualVariables:n,statistics:o}=t,{avg:l,stddev:r}=o,d=n[0],[u,p]=(0,g.getSizesFromVariable)(d),[c,v]=(0,h.N)(t.renderer.authoringInfo);return new i({max:v,min:c,stops:[new m.default({value:null!==(s=d.minDataValue)&&void 0!==s?s:void 0,size:p}),new m.default({value:null!==(a=d.maxDataValue)&&void 0!==a?a:void 0,size:u})],histogramConfig:{average:null!==l&&void 0!==l?l:void 0,standardDeviation:null!==r&&void 0!==r?r:void 0,bins:e?e.bins:[]}})}updateFromRendererResult(t,e){const{visualVariables:s,statistics:i}=t,{avg:a,stddev:n}=i,o=s[0],[l,r]=(0,g.getSizesFromVariable)(o),[d,u]=(0,h.N)(t.renderer.authoringInfo);this.set({max:u,min:d,stops:[{value:o.minDataValue,size:r},{value:o.maxDataValue,size:l}],histogramConfig:{average:a,standardDeviation:n,bins:e?e.bins:[]}})}updateVisualVariable(t){const e=t.clone(),{stops:s}=this;if(!t||!s)return null;if(e.stops)return e.stops=s,e;const i=s[0],a=s[s.length-1];let n=e.maxSize,o=e.minSize;if(n instanceof u.default){const t=n.stops,e=a.size/t[0].size,s=t.map((t=>(t.size*=e,t)));n.stops=s}else n=a.size;if(o instanceof u.default){const t=o.stops,e=i.size/t[0].size,s=t.map((t=>(t.size*=e,t)));o.stops=s}else o=i.size;return e.set({maxDataValue:a.value,minDataValue:i.value,maxSize:n,minSize:o}),e}updateFromVisualVariable(t){if(!t)return;const{maxDataValue:e,minDataValue:s,stops:i}=t;if(i)this.stops=i;else{const[i,a]=(0,g.getSizesFromVariable)(t);this.stops=[new m.default({value:null!==s&&void 0!==s?s:void 0,size:a}),new m.default({value:null!==e&&void 0!==e?e:void 0,size:i})]}}render(){const{label:t,primaryHandleEnabled:e,state:s,visibleElements:i}=this,a="disabled"===s,n=this.classes(b.base,v.D.widget,v.D.panel,{[v.D.disabled]:a,[b.primaryHandle]:e,[b.track]:!!i.interactiveTrack});return(0,_.K)("div",{"aria-label":t,class:n},a?null:this.renderContent(this._renderRamp(),b.sliderContainer,b.histogramContainer))}_renderRamp(){const{style:{trackBackgroundColor:t},zoomOptions:e}=this;return(0,_.K)("div",{afterCreate:x.cA,bind:this,class:b.rampElement,"data-node-ref":"_rampNode"},(0,_.K)("svg",{key:"ramp-svg",xmlns:"http://www.w3.org/2000/svg"},(0,_.K)("rect",{fill:(0,g.getFillFromColor)(t),height:"100%",width:"100%",x:"0",y:"0"}),this._renderPath()),e?this.renderZoomCaps():null)}_renderPath(){if(!this._rampNode)return;const{offsetHeight:t=0,offsetWidth:e=0}=this._rampNode;if(null==t||null==e)return;const{primaryHandleEnabled:s,stops:i,style:{trackFillColor:a},values:n,viewModel:{max:o,min:l},_maxRampFillWidth:r,_minRampFillWidth:d}=this,h=[r,d];i[0].size<i[i.length-1].size&&h.reverse();const u=n.slice().sort(((t,e)=>t>e?1:-1)),[m,p]=h,[c,v]=u,x=s?(0,g.getDynamicPathForSizeStops)({max:o,min:l,pathHeight:t,pathWidth:e,stops:i,padding:p}):(0,g.getPathForSizeStops)({bottomValue:c,bottomWidth:m,max:o,min:l,pathHeight:t,pathWidth:e,topValue:v,topWidth:p});return(0,_.K)("path",{d:x,fill:(0,g.getFillFromColor)(a)})}};(0,n._)([(0,l.MZ)()],S.prototype,"handlesSyncedToPrimary",null),(0,n._)([(0,l.MZ)()],S.prototype,"label",null),(0,n._)([(0,l.MZ)(),(0,y.G)("esri/widgets/smartMapping/SizeSlider/t9n/SizeSlider")],S.prototype,"messages",void 0),(0,n._)([(0,l.MZ)()],S.prototype,"persistSizeRangeEnabled",null),(0,n._)([(0,l.MZ)()],S.prototype,"primaryHandleEnabled",null),(0,n._)([(0,l.MZ)()],S.prototype,"stops",null),(0,n._)([(0,l.MZ)()],S.prototype,"style",void 0),(0,n._)([(0,r.w)("style")],S.prototype,"castStyle",null),(0,n._)([(0,l.MZ)({type:c.default})],S.prototype,"viewModel",void 0),S=i=(0,n._)([(0,d.$)("esri.widgets.smartMapping.SizeSlider")],S);const z=S}}]);
//# sourceMappingURL=87856.955fa067.chunk.js.map