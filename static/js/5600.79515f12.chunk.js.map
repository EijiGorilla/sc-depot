{"version":3,"file":"static/js/5600.79515f12.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/editing/templateUtils.js","../node_modules/@arcgis/core/undoredo/support/ServiceVersionInfo.js","../node_modules/@arcgis/core/undoredo/support/Services.js","../node_modules/@arcgis/core/editing/sharedTemplates/templateDefinitions/templateDefinitionUtils.js","../node_modules/@arcgis/core/portal/support/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../core/Logger.js\";import{getOrCreateMapValue as t}from\"../core/MapUtils.js\";import{throwIfAborted as r}from\"../core/promiseUtils.js\";import{addMaybe as n}from\"../core/SetUtils.js\";import{isFeatureTemplateDefinition as i,isGroupTemplateDefinition as o,isPresetTemplateDefinition as s}from\"./sharedTemplates/templateDefinitions/templateDefinitionUtils.js\";import{isSubtypeGroupLayer as a,isSubtypeSublayer as l,isFeatureLayer as f}from\"../layers/support/layerUtils.js\";import{getServices as u}from\"../undoredo/support/Services.js\";const p=()=>e.getLogger(\"esri.editing.templateUtils\");function c(e){return null!=e&&\"prototype\"in e}function m(e){return d(e)&&!(\"definition\"in e)}function y(e){return d(e)&&\"definition\"in e}function d(e){return null!=e&&\"templateId\"in e}function g(e){return y(e)&&\"feature\"===e?.type&&(null==e.definition||i(e.definition))}function w(e){return y(e)&&\"group\"===e?.type&&(null==e.definition||o(e.definition))}function A(e){return y(e)&&\"preset\"===e?.type&&(null==e.definition||s(e.definition))}function v(e){return y(e)&&null!=e?.definition}const S=e=>{if(null==e||\"object\"!=typeof e)return[];return[...\"templates\"in e&&Array.isArray(e.templates)?e.templates:[],...\"types\"in e&&Array.isArray(e.types)?e.types.flatMap((e=>e.templates)):[]]};async function b(e,t,n){if(null==t)return e.map((e=>({layer:e,templates:S(e)})));const i=await M(e,t);r(n);const o=new Map,s=Array.from(i).map((e=>h({serviceInfo:e,out:o,signal:n,view:t}))),a=await Promise.allSettled(s);for(const r of a.filter((e=>\"rejected\"===e.status)))p().warn(\"Failed to fetch shared templates for service. Will use standard templates if available.\",r.reason);return e.map((e=>({layer:e,templates:o.get(e)??S(e)})))}async function h({serviceInfo:e,out:t,signal:n}){const{featureService:i,layersAndTables:o}=e,s=await j({featureService:i,layers:o.toArray(),signal:n});r(n);for(const[r,l]of s.entries())if(0!==l.length)if(a(r)){const e=U(l),n=[],i=e.get(1/0)??n;for(const o of r.sublayers){const r=e.get(o.subtypeCode)??n;t.set(o,[...r,...i])}}else t.set(r,l)}async function j({featureService:e,layers:r,signal:n}){if(!e.capabilities?.editing.supportsSharedTemplates)return new Map;const i=new Map(r.map((e=>[e.layerId,e]))),o=await e.querySharedTemplates({query:{layers:Array.from(i.keys())},requestOptions:{signal:n}}),s=new Map;for(const a of o)for(const e of a.layerIds)i.has(e)&&t(s,i.get(e),(()=>[])).push(a);return s}async function M(e,t){const r=await u(t).load(),i=new Set;for(const o of e)n(i,L(r,o));return await Promise.all(Array.from(i).map((e=>e.featureService.load()))),i}function L(e,t){return l(t)&&t.parent?e.tablesAndLayersLookup.get(t.parent):f(t)?e.tablesAndLayersLookup.get(t):null}function U(e){const r=new Map;for(const n of e)t(r,n.subtypeCode??1/0,(()=>[])).push(n);return r}export{S as getAllStandardFeatureTemplatesForLayer,L as getServiceInfoForLayer,b as getTemplatesForLayers,v as isLoadedSharedTemplate,g as isSharedFeatureTemplate,w as isSharedGroupTemplate,A as isSharedPresetTemplate,y as isSharedTemplate,m as isSharedTemplateMetadata,d as isSharedTemplateOrMetadata,c as isStandardFeatureTemplate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import o from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let n=class extends o{constructor(e){super(e),this.layers=new r,this.lockType=\"none\",this.tables=new r,this.versionInfo=null,this.versionService=null}get layersAndTables(){return new r([...this.layers.toArray(),...this.tables.toArray()])}updateLockType(){this.lockType=this.versionInfo?this.versionService.getLockType(this.versionInfo.versionIdentifier)??\"none\":\"none\"}get featureServiceVersion(){return this.featureService.sourceJSON?.currentVersion??0}};e([t({constructOnly:!0})],n.prototype,\"canCreateVersion\",void 0),e([t({constructOnly:!0})],n.prototype,\"canEditVersionedData\",void 0),e([t({constructOnly:!0})],n.prototype,\"featureService\",void 0),e([t({constructOnly:!0})],n.prototype,\"layers\",void 0),e([t()],n.prototype,\"layersAndTables\",null),e([t()],n.prototype,\"lockType\",void 0),e([t({constructOnly:!0})],n.prototype,\"tables\",void 0),e([t()],n.prototype,\"versionInfo\",void 0),e([t({constructOnly:!0})],n.prototype,\"versionService\",void 0),e([t()],n.prototype,\"hasAdvancedEditingUserTypeExtension\",void 0),e([t()],n.prototype,\"loggedInServiceUser\",void 0),e([t()],n.prototype,\"featureServiceVersion\",null),n=e([s(\"esri.undoredo.support.ServiceVersionInfo\")],n);export{n as ServiceVersionInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{id as i}from\"../../kernel.js\";import r from\"../../core/Collection.js\";import s from\"../../core/Error.js\";import n from\"../../core/Evented.js\";import t from\"../../core/Loadable.js\";import o from\"../../core/Logger.js\";import{getOrCreateMapValue as a}from\"../../core/MapUtils.js\";import d from\"../../core/Promise.js\";import{debounce as c,throwIfAborted as v}from\"../../core/promiseUtils.js\";import l from\"../../core/ReactiveMap.js\";import{watch as p,whenOnce as u}from\"../../core/reactiveUtils.js\";import{normalize as f}from\"../../core/urlUtils.js\";import{property as m}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as h}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as g}from\"../../core/support/UpdatingHandles.js\";import{parse as w}from\"../../layers/support/arcgisLayerUrl.js\";import{isSubtypeGroupLayer as y,isFeatureLayer as S}from\"../../layers/support/layerUtils.js\";import I from\"../../portal/Portal.js\";import{hasUserTypeExtension as _}from\"../../portal/support/utils.js\";import b from\"../../rest/featureService/FeatureService.js\";import{ServiceVersionInfo as L}from\"./ServiceVersionInfo.js\";import V from\"../../versionManagement/VersionManagementService.js\";function U(e){return!e||0===e.trim().length}const A=new Map;function T(e){return a(A,e,(()=>{const i=new j({view:e});return e.addHandles({remove(){A.delete(e),i.destroy()}}),i.load().catch((e=>{o.getLogger(\"esri.views.Services\").error(\"Failed to load service metadata\",e)})),i}))}let j=class extends(t.LoadableMixin(d.EsriPromiseMixin(n.EventedAccessor))){constructor(e){super(e),this._updatingHandles=new g,this.items=new r,this.tablesAndLayersLookup=new l,this.additionalLayers=new r,this._debouncedCheckAndUpdateServiceInfos=c((async()=>{const e=[];for(const i of this.items){if(0===i.layersAndTables.length)continue;const r=i.layersAndTables.getItemAt(0);r?.gdbVersion!==i.versionInfo?.versionIdentifier.name&&e.push(i)}0!==e.length&&(await u((()=>!this.updating)),await this._updateVersionInfos(e))})),this._debouncedLayersChanged=c((async()=>{const e=this._detectNewLayersAndTables();0!==e.length&&(await u((()=>!this._updatingHandles.updating)),await this._updatingHandles.addPromise((async()=>{const i=new Set;for(const s of e)if(\"feature\"===s.type||\"subtype-group\"===s.type){if(!s.url)continue;const e=w(s.url).url.path,n=this._findServiceInfo(e);if(n)this.tablesAndLayersLookup.set(s,n),s.isTable?n.tables.push(s):n.layers.push(s);else if(!i.has(e))try{await this._addServiceInfo(e,s)}catch(r){o.getLogger(this).error(`Failed to load feature service: ${e}`,r)}finally{i.add(e)}}})()))})),this._processed=new Set}destroy(){this._set(\"view\",null),this.items.removeAll(),this.tablesAndLayersLookup.clear()}async load(e){return v(e),this.addHandles([p((()=>this._allLayersAndTables),(()=>{this._debouncedLayersChanged().catch((e=>{o.getLogger(this).warn(\"Failed to update service info\",e)}))})),p((()=>this.items.map((e=>e.layersAndTables.map((e=>e.gdbVersion??\"\")).join(\",\")))),(()=>{this.checkAndUpdateServiceInfos().catch((e=>{o.getLogger(this).warn(\"Failed to update service info\",e)}))}))]),this.addResolvingPromise(this._debouncedLayersChanged()),this}get updating(){return\"loading\"===this.loadStatus||this._updatingHandles.updating}checkAndUpdateServiceInfos(){return this._debouncedCheckAndUpdateServiceInfos()}changeVersion(e,i,r){return this._updatingHandles.addPromise((async()=>{await this._changeVersionInternal(e,i,r)})())}createVersion(e){return this._updatingHandles.addPromise((async()=>{const i=e.featureServerUrl,r=this._findServiceInfo(i);if(!r?.versionService)throw new s(\"services:no-version-management-service\");const n=r.hasAdvancedEditingUserTypeExtension,t=r.loggedInServiceUser.toUpperCase(),o=U(e.ownerName)?t:e.ownerName?.trim().toUpperCase();if(o!==t){if(r.featureServiceVersion<=11.1)throw new s(\"services:versioning-api-error\");if(!n)throw new s(\"services:no-advanced-editing-user-type-extension\")}if(\"SDE\"===o?.toUpperCase()&&\"DEFAULT\"===e.versionName.toUpperCase())throw new s(\"services:no-valid-version-name\");{const i=await r.versionService.getVersionInfos();if(i?.find((i=>i.versionIdentifier.name.toUpperCase()===(o+\".\"+e.versionName).toUpperCase()||i.versionIdentifier.name.toUpperCase()===(t+\".\"+e.versionName).toUpperCase())))throw new s(\"services:no-valid-version-name\")}const a=await r.versionService.createVersion({versionName:e.versionName,access:o!==t?\"public\":e.access,description:e.description});if(o!==t){const{guid:i,name:s}=a.versionIdentifier;await r.versionService.alterVersion({guid:i,name:s},{ownerName:o,access:e.access})}e.switchToVersion&&await this._changeVersionInternal(i,a.versionIdentifier.name,a.versionIdentifier.guid),this.emit(\"version-created\",{versionIdentifier:a.versionIdentifier,versionManagementService:r.versionService})})())}deleteVersion(e,i,r){return this._updatingHandles.addPromise((async()=>{const n=this._findServiceInfo(e);if(!n?.versionService)throw new s(\"services:no-version-management-service\");if(n.featureServiceVersion<=11.1)throw new s(\"services:versioning-api-error\");if(!n.hasAdvancedEditingUserTypeExtension)throw new s(\"services:no-advanced-editing-user-type-extension\");const t={name:i,guid:r};await n.versionService.deleteVersion(t)&&(await this._updateVersionInfo(n),this.emit(\"version-deleted\",{versionIdentifier:t,versionManagementService:n.versionService}))})())}startEditing(e){return this._updatingHandles.addPromise((async()=>{const i=this._findServiceInfo(e);if(!i?.versionService)throw new s(\"services:no-version-management-service\");if(!i.hasAdvancedEditingUserTypeExtension)throw new s(\"services:no-advanced-editing-user-type-extension\");const r=i.versionInfo?.versionIdentifier??{name:i.versionService.defaultVersionIdentifier.name,guid:i.versionService.defaultVersionIdentifier.guid};let n=!0;(\"none\"!==i.versionService.getLockType(r)||(n=await i.versionService.startReading(r),n))&&(n=await i.versionService.startEditing(r),i.updateLockType())})())}finishEditing(e,i){return this._updatingHandles.addPromise((async()=>{const r=this._findServiceInfo(e);if(!r?.versionService)throw new s(\"services:no-version-management-service\");if(!r.hasAdvancedEditingUserTypeExtension)throw new s(\"services:no-advanced-editing-user-type-extension\");const n=r.versionInfo?.versionIdentifier??{name:r.versionService.defaultVersionIdentifier.name,guid:r.versionService.defaultVersionIdentifier.guid},t=r.versionService.getLockType(n);if(\"none\"!==t)return\"read\"===t?(await r.versionService.stopReading(n),void r.updateLockType()):\"edit\"===t?(await r.versionService.stopEditing(n,i),await r.versionService.stopReading(n),void r.updateLockType()):void 0})())}async _changeVersionInternal(e,i,r){const n=this._findServiceInfo(e);if(!n?.versionService)throw new s(\"services:no-version-management-service\");const t=n.versionInfo?.versionIdentifier??{name:n.versionService.defaultVersionIdentifier.name,guid:n.versionService.defaultVersionIdentifier.guid},o={name:i,guid:r};await n.versionService.changeVersion(this.view?.map,t,o)&&await this._updateVersionInfo(n)}async _updateVersionInfo(e){const i=e.versionService;if(!i)return;if(0===e.layersAndTables.length)return;const r=e.layersAndTables.getItemAt(0)?.gdbVersion,s=r?await i.getVersionIdentifierFromName(r):i.defaultVersionIdentifier;e.versionInfo=await i.getVersionInfoExtended(s)}_findServiceInfo(e){return this.items.find((i=>i.featureService.url===e))??null}_removeFeatureService(e){this.items.remove(e)}async _findPortal(e){const r=i?.findServerInfo(e??\"\");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,n=I.getDefault();if(n?.loaded&&f(n.restUrl)===f(s))return n;return new I({authMode:\"immediate\",url:r.owningSystemUrl}).load()}_updateVersionInfos(e){return this._updatingHandles.addPromise((async()=>{for(const i of e)await this._updateVersionInfo(i).catch((e=>{o.getLogger(this).error(\"Failed to update version details\",e)}))})())}async _addServiceInfo(e,i){const s=new b({url:e});await s.load();const n=await this._findPortal(e),t=n?.user?.username;let o=!1;t&&(o=await _(n,t,\"advediting\"));let a=null;s.versionManagementServiceUrl&&(a=new V({url:s.versionManagementServiceUrl}),await a.load());const d=i.isTable?[]:[i],c=i.isTable?[i]:[],v=new L({loggedInServiceUser:t??\"\",hasAdvancedEditingUserTypeExtension:o,versionInfo:null,lockType:\"none\",canEditVersionedData:!0,canCreateVersion:!0,featureService:s,versionService:a,layers:new r(d),tables:new r(c)});return a&&await this._updateVersionInfo(v),this.items.push(v),this.tablesAndLayersLookup.set(i,v),i.isTable?v.tables.push(i):v.layers.push(i),v}get _allLayersAndTables(){return[...this.view.map.allLayers,...this.view.map.allTables,...this.additionalLayers]}_detectNewLayersAndTables(){const e=new Set(this._allLayersAndTables),i=[];for(const r of e)\"feature\"!==r.type&&\"subtype-group\"!==r.type||this._processed.has(r)||i.push(r);for(const r of this._processed)if(!e.has(r)&&(y(r)||S(r))){const e=this.tablesAndLayersLookup.get(r);if(!e)continue;this.tablesAndLayersLookup.delete(r),r.isTable?e.tables.remove(r):e.layers.remove(r),0===e.layersAndTables.length&&this._removeFeatureService(e)}return this._processed=e,i}};e([m({constructOnly:!0})],j.prototype,\"view\",void 0),e([m()],j.prototype,\"items\",void 0),e([m()],j.prototype,\"tablesAndLayersLookup\",void 0),e([m()],j.prototype,\"additionalLayers\",void 0),e([m()],j.prototype,\"updating\",null),e([m()],j.prototype,\"_allLayersAndTables\",null),j=e([h(\"esri.undoredo.support.Services\")],j);export{j as Services,T as getServices};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction t(t){return\"feature\"===t.type}function e(t){return\"group\"===t.type}function r(t){return\"preset\"===t.type}export{t as isFeatureTemplateDefinition,e as isGroupTemplateDefinition,r as isPresetTemplateDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{id as e}from\"../../kernel.js\";import n from\"../../request.js\";async function r(r,t,s){const u=e?.findCredential(r.restUrl);if(!u)return null;if(\"loaded\"===r.loadStatus&&\"\"===t&&r.user?.sourceJSON&&!1===s)return r.user.sourceJSON;const o={responseType:\"json\",query:{f:\"json\"}};if(s&&(o.query.returnUserLicenseTypeExtensions=!0),\"\"===t){const e=await n(r.restUrl+\"/community/self\",o);if(e.data){const n=e.data;if(n?.username)return n}return null}const i=await n(r.restUrl+\"/community/users/\"+t,o);if(i.data){const e=i.data;return e.error?null:e}return null}async function t(e,n,t){const s=await r(e,n,!0);return s?.privileges?.includes(t)??!1}async function s(e,n,t){const s=await r(e,n,!0);return s?.userLicenseTypeExtensions?.includes(t)??!1}export{t as hasPrivilege,s as hasUserTypeExtension,r as lookupUser};\n"],"names":["p","e","getLogger","c","m","d","y","g","type","definition","i","w","o","A","s","v","S","Array","isArray","templates","types","flatMap","async","b","t","n","map","layer","r","u","load","Set","L","Promise","all","from","featureService","M","Map","_ref","serviceInfo","out","signal","layersAndTables","_ref2","_e$capabilities","layers","capabilities","editing","supportsSharedTemplates","layerId","querySharedTemplates","query","keys","requestOptions","a","layerIds","has","get","push","j","toArray","l","entries","length","_e$get","U","sublayers","_e$get2","subtypeCode","set","h","view","allSettled","filter","status","warn","reason","_o$get","parent","tablesAndLayersLookup","f","_n$subtypeCode","constructor","super","this","lockType","tables","versionInfo","versionService","updateLockType","_this$versionService$","getLockType","versionIdentifier","featureServiceVersion","_this$featureService$","_this$featureService$2","sourceJSON","currentVersion","constructOnly","prototype","T","addHandles","remove","delete","destroy","catch","error","LoadableMixin","EsriPromiseMixin","EventedAccessor","_updatingHandles","items","additionalLayers","_debouncedCheckAndUpdateServiceInfos","_i$versionInfo","getItemAt","gdbVersion","name","updating","_updateVersionInfos","_debouncedLayersChanged","_detectNewLayersAndTables","addPromise","url","path","_findServiceInfo","isTable","_addServiceInfo","concat","add","_processed","_set","removeAll","clear","_allLayersAndTables","_e$gdbVersion","join","checkAndUpdateServiceInfos","addResolvingPromise","loadStatus","changeVersion","_changeVersionInternal","createVersion","featureServerUrl","hasAdvancedEditingUserTypeExtension","loggedInServiceUser","toUpperCase","trim","ownerName","_e$ownerName","versionName","getVersionInfos","find","access","description","guid","alterVersion","switchToVersion","emit","versionManagementService","deleteVersion","_updateVersionInfo","startEditing","_i$versionInfo$versio","_i$versionInfo2","defaultVersionIdentifier","startReading","finishEditing","_r$versionInfo$versio","_r$versionInfo","stopReading","stopEditing","_n$versionInfo$versio","_n$versionInfo","_this$view","_e$layersAndTables$ge","getVersionIdentifierFromName","getVersionInfoExtended","_this$items$find","_removeFeatureService","_findPortal","findServerInfo","owningSystemUrl","I","getDefault","loaded","restUrl","authMode","_n$user","user","username","_","versionManagementServiceUrl","V","canEditVersionedData","canCreateVersion","allLayers","allTables","_r$user","findCredential","responseType","returnUserLicenseTypeExtensions","data","_s$privileges$include","_s$privileges","privileges","includes","_s$userLicenseTypeExt","_s$userLicenseTypeExt2","userLicenseTypeExtensions"],"sourceRoot":""}