"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[18535],{18535:(t,e,s)=>{s.r(e),s.d(e,{default:()=>k});var i,n=s(89379),a=s(35143),o=s(69539),l=s(46053),r=s(21403),h=(s(81806),s(47249),s(85842)),m=s(29380),u=s(51313),d=s(26211),p=s(7095),c=s(98108),g=s(76099),b=s(63582),v=s(54761);const _="esri-classed-size-slider",x={base:_,rampElement:"".concat(_,"__ramp"),sliderContainer:"".concat(_,"__slider-container"),histogramContainer:"".concat(_,"__histogram-container"),track:"".concat(_,"--interactive-track")},f={trackFillColor:new o.default([149,149,149]),trackBackgroundColor:new o.default([224,224,224])};let M=i=class extends u.default{constructor(t,e){super(t,e),this._rampNode=null,this.messages=null,this.style=(0,n.A)({},f),this.viewModel=new d.default}get breaks(){return this.viewModel.breaks}set breaks(t){this.viewModel.breaks=t}get label(){var t,e;return null!==(t=null===(e=this.messages)||void 0===e?void 0:e.widgetLabel)&&void 0!==t?t:""}set label(t){this._overrideIfSome("label",t)}castStyle(t){return(0,n.A)((0,n.A)({},f),t)}static fromRendererResult(t,e){const{renderer:{classBreakInfos:s}}=t,n=s.map((t=>{const e=t.symbol;let s;switch(e.type){case"simple-line":s=e.width;break;case"simple-marker":s=e.size;break;case"picture-marker":s=e.height}return{min:t.minValue,max:t.maxValue,size:s}}));return new i({breaks:n,histogramConfig:{bins:e?e.bins:[]}})}updateClassBreakInfos(t){const e=this.breaks;if(e.length===t.length)return t.map(((t,s)=>{const i=t.symbol;switch(i.type){case"simple-line":i.width=e[s].size;break;case"simple-marker":i.size=e[s].size;break;case"picture-marker":{const t=e[s].size,n=i.width,a=i.height;i.height=t,i.width=t/a*n;break}}return new m.default({minValue:e[s].min,maxValue:e[s].max,symbol:i})}));console.error("Number of input breakInfos must match number of slider breaks: ".concat(e.length))}updateFromRendererResult(t,e){const{renderer:{classBreakInfos:s}}=t,i=s.map((t=>{const e=t.symbol;let s;switch(e.type){case"simple-line":s=e.width;break;case"simple-marker":s=e.size;break;case"picture-marker":s=e.height}return{min:t.minValue,max:t.maxValue,size:s}}));this.set({breaks:i}),(null===e||void 0===e?void 0:e.bins)&&(this.histogramConfig.bins=e.bins)}render(){const{state:t,label:e,visibleElements:s}=this,i="disabled"===t,n=this.classes(x.base,c.D.widget,c.D.panel,{[c.D.disabled]:i,[x.track]:!!s.interactiveTrack});return(0,v.K)("div",{"aria-label":e,class:n},i?null:this.renderContent(this._renderRamp(),x.sliderContainer,x.histogramContainer))}_renderRamp(){const{style:{trackBackgroundColor:t}}=this;return(0,v.K)("div",{afterCreate:g.cA,bind:this,class:x.rampElement,"data-node-ref":"_rampNode"},(0,v.K)("svg",{xmlns:"http://www.w3.org/2000/svg"},(0,v.K)("rect",{fill:(0,p.getFillFromColor)(t),height:"100%",width:"100%",x:"0",y:"0"}),this._renderPath()))}_renderPath(){if(!this._rampNode)return;const{offsetHeight:t=0,offsetWidth:e=0}=this._rampNode;if(null==t||null==e)return;const{breaks:s,viewModel:{max:i,min:n},style:{trackFillColor:a}}=this,o=i-n,l=e/s.length,r=s.map((e=>t-Math.round((e.min-n)/o*t)+1)).reverse(),h=s[0].size>s[s.length-1].size||!1;let m=h?l:e,u="M".concat(m," 0 ");return r.forEach(((t,s)=>{const i=l*(s+1);u+="L".concat(m," ").concat(t," "),m=h?l+i:e-i,u+="L".concat(m," ").concat(t," ")})),u+="L0 ".concat(t," L0 ").concat(t," L0 0 Z"),(0,v.K)("path",{d:u,fill:(0,p.getFillFromColor)(a)})}};(0,a._)([(0,l.MZ)()],M.prototype,"breaks",null),(0,a._)([(0,l.MZ)()],M.prototype,"label",null),(0,a._)([(0,l.MZ)(),(0,b.G)("esri/widgets/smartMapping/ClassedSizeSlider/t9n/ClassedSizeSlider")],M.prototype,"messages",void 0),(0,a._)([(0,l.MZ)()],M.prototype,"style",void 0),(0,a._)([(0,r.w)("style")],M.prototype,"castStyle",null),(0,a._)([(0,l.MZ)({type:d.default})],M.prototype,"viewModel",void 0),M=i=(0,a._)([(0,h.$)("esri.widgets.smartMapping.ClassedSizeSlider")],M);const k=M},26211:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var i=s(35143),n=s(46053),a=(s(81806),s(76460),s(47249),s(85842)),o=s(77200);let l=class extends o.default{constructor(t){super(t),this.zoomingEnabled=!1}};(0,i._)([(0,n.MZ)({readOnly:!0})],l.prototype,"zoomingEnabled",void 0),l=(0,i._)([(0,a.$)("esri.widgets.smartMapping.ClassedSizeSlider.ClassedSizeSliderViewModel")],l);const r=l},77200:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});var i=s(89379),n=s(35143),a=s(46053),o=(s(81806),s(76460),s(47249),s(85842)),l=s(6515),r=s(7095);let h=class extends l.default{constructor(t){super(t),this._initialStopValues=[],this._max=null,this._min=null,this.hasTimeData=!1,this.inputFormatFunction=(t,e)=>"max"===e?this.getUnzoomedMax().toString():"min"===e?this.getUnzoomedMin().toString():t.toString(),this.inputParseFunction=null,this.labelFormatFunction=t=>{if(this.hasTimeData)return(0,r.formatDateLabel)(t);const{max:e,min:s,precision:i}=this,n=e-s>10?2:i;return(0,r.formatNumberLabel)(parseFloat(t.toFixed(n)))},this.thumbsConstrained=!1,this.zoomingEnabled=!0}set breaks(t){this._set("breaks",t),this.notifyChange("max"),this.notifyChange("min")}set stops(t){if(null!==t&&void 0!==t&&t.length){const{max:e,min:s}=this,n=this.getValuesFromStops(t),a={};null!=s&&n.some((t=>t<s))&&(a.min=Math.min(...n)),null!=e&&n.some((t=>t>e))&&(a.max=Math.max(...n)),this.set((0,i.A)({},a)),this._initialStopValues=n}else this._initialStopValues=null;this._set("stops",t||null),this.notifyChange("values")}get labels(){const{values:t}=this,e=t&&t.length?t.map(((t,e)=>this.getLabelForValue(t,"value",e))):[],s=this.getUnzoomedMax(),i=this.getUnzoomedMin();return{max:this.getLabelForValue(s,"max"),min:this.getLabelForValue(i,"min"),values:e}}get max(){const{breaks:t}=this;return null!==t&&void 0!==t&&t.length?t[t.length-1].max:this.max}set max(t){const{zoomOptions:e}=this;if(null!=(null===e||void 0===e?void 0:e.max)){const s=this.values;let i=e.max;if(t<i&&(i=t,e.max=t),s&&s.length)for(let e=0;e<s.length;e++)t<s[e]&&this.setValue(e,t);this._storeZoomMax(i,t)}else this.updateBreakMax(t),this.setMax(t);this.notifyChange("labels")}get min(){const{breaks:t}=this;return null!==t&&void 0!==t&&t.length?t[0].min:this.min}set min(t){const{zoomOptions:e}=this;if(null!=(null===e||void 0===e?void 0:e.min)){const s=this.values;let i=e.min;if(t>i&&(i=t,e.min=t),s&&s.length)for(let e=0;e<s.length;e++)t>s[e]&&this.setValue(e,t);this._storeZoomMin(i,t)}else this.updateBreakMin(t),this.setMin(t);this.notifyChange("labels")}get state(){const{max:t,min:e,values:s}=this;return null!=t&&null!=e&&s.length>0?"ready":"disabled"}get values(){const{breaks:t,stops:e}=this;if(!t&&!e)return[];if(null!==t&&void 0!==t&&t.length){const e=t.map((t=>t.max));return e.pop(),e}if((null===e||void 0===e?void 0:e.length)<2)return[];const s=this.getValuesFromStops();return[s[0],s[s.length-1]]}set zoomOptions(t){const{zoomingEnabled:e,zoomOptions:s}=this;if(e){if(s){const e=null!=this._max?this._max:this.max,s=null!=this._min?this._min:this.min;if(t){const{max:i,min:n}=t,a=null!=i,o=null!=n,l=o?t.min:s,r=o?s:null,h=a?t.max:e,m=a?e:null;this._storeZoomMin(l,r),this._storeZoomMax(h,m)}else this.setMax(e),this.setMin(s),this._min=null,this._max=null}else if(t){const{max:e,min:s}=t;null!=s&&this._storeZoomMin(t.min,this.min),null!=e&&this._storeZoomMax(t.max,this.max)}this._set("zoomOptions",t),this.notifyChange("max"),this.notifyChange("min")}}getStopIndexFromValueIndex(t){const{stops:e}=this,s=this.values[t];return 0===t?s<=this.values[1]?0:e.length-1:1===t?this.values[0]>=s?0:e.length-1:null}getStopChanges(t,e){const s=this.stops,i=this.getStopIndexFromValueIndex(t),n=this.getValuesFromStops();n[i]=e;const[a,o]=[n[0],n[n.length-1]].sort(((t,e)=>t>e?1:-1)),l=o-a,r=s.length-1;return n.map(((t,e)=>({index:e,value:this.toPrecision(a+e*l/r)})))}setValue(t,e){var s;const{max:i,min:n,values:a}=this,o=a[t];if(isNaN(e)||o===e||e>i||e<n)return;a[t]=this.toPrecision(e),this._set("values",[...a]);const l=a.slice().sort(((t,e)=>t>e?1:-1)),h=l[0],m=l[l.length-1],u=(0,r.getStopChanges)(h,m,null!==(s=this._initialStopValues)&&void 0!==s?s:[]);this.updateStops(u),this.updateBreaks(),this.notifyChange("labels")}getValuesFromStops(t){const e=t||this.stops;return null===e||void 0===e?void 0:e.map((t=>t.hasOwnProperty("ratio")?t.ratio:t.value))}updateBreaks(){const{breaks:t,values:e}=this;(null===t||void 0===t?void 0:t.length)&&e.slice().sort(((t,e)=>t>e?1:-1)).forEach(((e,s)=>{t[s].max=e,null!=t[s+1]&&(t[s+1].min=e)}))}updateBreakMax(t){const{breaks:e,max:s,min:i}=this;!isNaN(t)&&s!==t&&null!=i&&t>i&&(null===e||void 0===e?void 0:e.length)&&(e[e.length-1].max=t)}updateBreakMin(t){const{breaks:e,max:s,min:i}=this;!isNaN(t)&&i!==t&&null!=s&&t<s&&(null===e||void 0===e?void 0:e.length)&&(e[0].min=t)}updateStops(t){const{stops:e}=this,s=this.getValuesFromStops();if(null!==s&&void 0!==s&&s.length){for(const e of t)s[e.index]=e.value;e.forEach(((t,e)=>{t.hasOwnProperty("ratio")?t.ratio=s[e]:t.value=s[e]}))}}getUnzoomedMax(){return this.zoomOptions&&null!=this._max?this._max:this.max}getUnzoomedMin(){return this.zoomOptions&&null!=this._min?this._min:this.min}_storeZoomMax(t,e){this._max=e,this.setMax(t)}_storeZoomMin(t,e){this._min=e,this.setMin(t)}};(0,n._)([(0,a.MZ)()],h.prototype,"breaks",null),(0,n._)([(0,a.MZ)()],h.prototype,"stops",null),(0,n._)([(0,a.MZ)()],h.prototype,"hasTimeData",void 0),(0,n._)([(0,a.MZ)()],h.prototype,"inputFormatFunction",void 0),(0,n._)([(0,a.MZ)()],h.prototype,"inputParseFunction",void 0),(0,n._)([(0,a.MZ)()],h.prototype,"labelFormatFunction",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],h.prototype,"labels",null),(0,n._)([(0,a.MZ)()],h.prototype,"max",null),(0,n._)([(0,a.MZ)()],h.prototype,"min",null),(0,n._)([(0,a.MZ)({readOnly:!0})],h.prototype,"state",null),(0,n._)([(0,a.MZ)()],h.prototype,"thumbsConstrained",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],h.prototype,"values",null),(0,n._)([(0,a.MZ)()],h.prototype,"zoomingEnabled",void 0),(0,n._)([(0,a.MZ)()],h.prototype,"zoomOptions",null),h=(0,n._)([(0,o.$)("esri.widgets.smartMapping.SmartMappingSliderViewModel")],h);const m=h}}]);
//# sourceMappingURL=18535.579294ac.chunk.js.map