"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[69003],{48975:(e,t,i)=>{i.d(t,{t:()=>c});var n=i(35143),o=i(91967),s=i(19276),a=i(68134),r=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),h=i(54054),d=i(68999);let c=class extends o.default{constructor(e){super(e),this._hoveredPoints=new s.default}initialize(){this.addHandles((0,a.watch)((()=>this._hoveredPoints.toArray().map((e=>{let{anchor:t,element:i}=e;return{screenLocation:t.screenLocation,element:i}}))),(e=>{for(const{screenLocation:t,element:i}of e)t&&(i.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"))}),a.syncAndInitial))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const t=this.view,i=this._hoveredPoints,n=e.length;for(;this._hoveredPoints.length>n;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<n;){var o;const e=this._makeHoveredPoint();i.push(e),null===(o=t.surface)||void 0===o||o.appendChild(e.element)}for(let s=0;s<n;++s){const t=i.at(n-1-s),o=e[s];this._updateHoveredPoint(t,o)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:i,borderWidth:n,boxShadow:o}=(0,h.zj)().hoveredPointsStyle,s=this.view,a=new d.A({view:s,screenLocationEnabled:!0}),r=document.createElement("div"),l=r.style;return l.position="absolute",l.top="0",l.left="0",l.contain="strict",l.boxSizing="border-box",l.width="".concat(e,"px"),l.height="".concat(e,"px"),l.marginTop="-".concat(e/2,"px"),l.marginLeft="-".concat(e/2,"px"),l.border="".concat(t," ").concat(n,"px ").concat(i),l.borderRadius="".concat(e,"px"),l.boxShadow=o,{anchor:a,element:r}}_updateHoveredPoint(e,t){let{anchor:i,element:n}=e;i.screenLocationEnabled=!0,i.location=t.hoveredPoint;const o=n.style;o.display="block",o.background=t.color.toCss()}_destroyHoveredPoint(e){var t;let{anchor:i,element:n}=e;i.destroy(),null===(t=this.view.surface)||void 0===t||t.removeChild(n)}};(0,n._)([(0,r.MZ)()],c.prototype,"view",void 0),(0,n._)([(0,r.MZ)()],c.prototype,"_hoveredPoints",void 0),c=(0,n._)([(0,l.$)("esri.widgets.ElevationProfile.support.HoveredPoints")],c)},68999:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(35143),o=i(54099),s=i(68134),a=i(46053),r=(i(81806),i(76460),i(47249),i(85842)),l=i(9624);let h=class extends o.A.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,s.when)((()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,s.watch)((()=>this.screenLocation),((e,t)=>{null!=e&&null!=t&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,n=null===t||void 0===t?void 0:t.spatialReference,o=n?(0,l.projectOrLoad)(e,n).geometry:null;return i&&o&&null!==t&&void 0!==t&&t.ready?t.toScreen(o):null}};(0,n._)([(0,a.MZ)()],h.prototype,"location",void 0),(0,n._)([(0,a.MZ)()],h.prototype,"screenLocation",null),(0,n._)([(0,a.MZ)()],h.prototype,"screenLocationEnabled",void 0),(0,n._)([(0,a.MZ)()],h.prototype,"view",void 0),h=(0,n._)([(0,r.$)("esri.widgets.support.AnchorElementViewModel")],h);const d=h},69003:(e,t,i)=>{i.r(t),i.d(t,{ElevationProfileView2D:()=>L});var n=i(88321),o=i(30726),s=i(68134),a=i(54054),r=i(48975),l=i(98773),h=i(50346),d=i(90992);class c{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=(0,o.DC)(this._highlightTask),this._highlightHandle=(0,o.xt)(this._highlightHandle)}update(e){if(this.remove(),null==e||(null==(t=e).geometry||"polyline"!==t.geometry.type))return;var t;const i=e.layer;this._highlightTask=(0,l.UT)((async t=>{const n=await this._params.view.whenLayerView(i);(0,h.throwIfAborted)(t);const o=(0,d.Of)(n)?n:null;o&&(this._highlightHandle=o.highlight(e))}))}}var p=i(35143),u=i(39356),v=i(91967),_=i(59784),y=i(79468),w=i(46053),f=(i(81806),i(76460),i(47249),i(85842)),g=i(63733),m=i(89465),b=i(75042);let P=class extends v.default{constructor(e){super(e),this._chartData=null,this._graphic=new u.default,this._layer=new g.default({listMode:"hide",internal:!0,title:"Profile line"}),this._update=e=>{var t;const{chartData:i}=e;if(null==i)return this.remove();if(!i.refined)return;const n=i.lines.find((e=>e.viewVisualizationEnabled));if(!n)return;this._graphic.geometry=(0,b.T)(n,e.spatialReference),this._graphic.symbol=new m.default({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:n.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:(0,_.bJ)(n.color).toArray()}]}}});const o=null===(t=this.view)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.layers;o&&!o.includes(this._layer)&&o.add(this._layer)}}initialize(){this._layer.add(this._graphic);const e=(0,a.zj)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const i=(0,y.n)(this._update,e);this.addHandles(i),t=i}this.addHandles((0,s.watch)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),t,s.syncAndInitial))}destroy(){this.remove()}remove(){var e;null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e||e.remove(this._layer)}update(e){this._chartData=e}};(0,p._)([(0,w.MZ)()],P.prototype,"view",void 0),(0,p._)([(0,w.MZ)()],P.prototype,"_chartData",void 0),P=(0,p._)([(0,f.$)("esri.widgets.ElevationProfile.support.ProfileLine2D")],P);class L{constructor(e,t){this._handles=new n.default,this._inputRepresentation=new c({view:e}),this._hoveredPoints=new r.t({view:e}),this._profileLine=new P({view:e}),this._handles.add([(0,s.watch)((()=>t.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),s.syncAndInitial),(0,s.watch)((()=>{const{state:e,highlightEnabled:i,viewModel:n}=t;return{input:n.input,state:e,highlightEnabled:i}}),(e=>this._updateInputRepresentation(e)),s.syncAndInitial),(0,s.watch)((()=>t.viewModel.chartData),(e=>this._profileLine.update(e)),s.syncAndInitial),(0,s.watch)((()=>{var e;return null===(e=t.viewModel.input)||void 0===e?void 0:e.geometry}),(()=>{this._profileLine.remove()}),s.syncAndInitial)])}destroy(){this._handles=(0,o.pR)(this._handles),this._inputRepresentation=(0,o.pR)(this._inputRepresentation),this._hoveredPoints=(0,o.pR)(this._hoveredPoints),this._profileLine=(0,o.pR)(this._profileLine)}_updateInputRepresentation(e){let{input:t,state:i,highlightEnabled:n}=e;i===a.o8.Selected&&n?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}},75042:(e,t,i)=>{i.d(t,{T:()=>o});var n=i(23701);function o(e,t){var i;const o=null!==(i=e.samples)&&void 0!==i?i:[],s=o.length-1,a=[];let r=[];for(let n=0;n<=s;n++){const{x:e,y:t,z:i}=o[n];null!=i&&r.push([e,t,i]),n!==s&&null!=i||!r.length||(a.push(r),r=[])}return new n.default({paths:a,hasZ:!0,spatialReference:t})}}}]);
//# sourceMappingURL=69003.dbfadb0e.chunk.js.map