{"version":3,"file":"static/js/82745.7181ed2c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/DirectRenderer.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/LodRenderer.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/FeaturePipelineRenderManager.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipelineWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipeline.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{property as r}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{glLayout as i}from\"../../../../support/buffer/glUtil.js\";import{ShaderOutput as s}from\"../../../../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as o}from\"../../../../webgl-engine/effects/RenderPlugin.js\";import{GLMaterials as n}from\"../../../../webgl-engine/lib/GLMaterials.js\";import{RenderSlot as a}from\"../../../../webgl-engine/lib/RenderSlot.js\";import{DrawParameters as l}from\"../../../../webgl-engine/materials/DrawParameters.js\";let m=class extends o{constructor(e){super(e),this._glMaterials=null,this._produces=new Map,this._renderGeometries=new Map,this._vaoCache=null,this._drawParameters=new l,this._bufferWriter=null}get produces(){return this._produces}get numFeatures(){const e=6;let r=0;return this._renderGeometries.forEach((t=>r+=t.numElements/e)),r}get usedMemory(){let e=0;return this._renderGeometries.forEach((r=>{e+=r.vao.usedMemory})),e}initialize(){this._bufferWriter=this.material.createBufferWriter(),this.material.produces.forEach(((e,r)=>{this._produces.set(r,(r=>r!==s.Highlight&&r!==s.ShadowHighlight&&e(r)))}))}destroy(){this._glMaterials.dispose();const e=this._renderGeometries.keys();for(const r of e)this.removeRenderGeometry(r)}acquireTechniques(e){const r=this.material;if(!r.shouldRender(e))return null;const{output:t,bind:i}=e,o=r.produces.get(i.slot);if(!o?.(t))return null;if(t===s.Highlight||t===s.ShadowHighlight)return null;const n=this._glMaterials.load(e.rctx,i.slot,t);return n?.beginSlot(i)}render(e,r){const t=this._renderGeometries;if(0===t.size)return;const{bind:i}=e,s=i.slot===a.OCCLUDER_MATERIAL||i.slot===a.TRANSPARENT_OCCLUDER_MATERIAL?i.slot:null,o=e.rctx;o.runAppleAmdDriverHelper(),o.bindTechnique(r,i,this.material.parameters);const n=r.program;for(const[a,l]of t)this._drawParameters.origin=l.localOrigin,n.bindDraw(i,this.material.parameters,this._drawParameters),r.ensureAttributeLocations(l.vao),o.bindVAO(l.vao),o.setPipelineState(r.getPipeline(!1,s)),o.drawArrays(r.primitiveType,0,l.numElements)}initializeRenderContext(e,r){this._glMaterials=new n(this.material,e.materials),this._vaoCache=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,i(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}addRenderGeometry(e,r,t){this.removeRenderGeometry(e);const i=this._vaoCache.newVao(r.data.byteLength);i.vertexBuffers.get(\"geometry\").setSubData(new Uint8Array(r.data),0,0,r.data.byteLength);const s={localOrigin:t,vao:i,numElements:r.elementCount};return this._renderGeometries.set(e,s),s}removeRenderGeometry(e){const r=this._renderGeometries.get(e);null!=r&&(this._vaoCache.deleteVao(r.vao),this._renderGeometries.delete(e))}hasHighlightOptions(e){return!1}};e([r({constructOnly:!0})],m.prototype,\"material\",void 0),m=e([t(\"esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer\")],m);export{m as DirectRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import has from\"../../../../../../core/has.js\";import{throwIfAborted as r}from\"../../../../../../core/promiseUtils.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{VertexAttribute as o}from\"../../../../webgl-engine/lib/VertexAttribute.js\";import{LodRenderer as n}from\"../../../../webgl-engine/lib/lodRendering/LodRenderer.js\";import{LodComponentRenderGeometry as t,LodComponentResources as i,LodLevelResources as a,LodResources as d}from\"../../../../webgl-engine/lib/lodRendering/LodResources.js\";let l=class{constructor(e){this._optionalFields=new Array,this._featureIdToInstanceIndex=new Map,this._disposeResourceHandles=new Array,this._lodRendererResources=null,this.layerUid=e.layerUid,this.view=e.view,this.sharedResources=this.view.sharedSymbolResources,this.scheduler=this.view.resourceController.scheduler}get numFeatures(){return this._featureIdToInstanceIndex.size}get usedMemory(){const e=this._lodRendererResources?.lodRenderer,r=e?.symbol;return(r?.computeUsedMemory()??0)+16*this._featureIdToInstanceIndex.size}destroy(){this._disposeResourceHandles.forEach((e=>e()))}async doLoad(e,s,n){has(\"enable-feature:objectAndLayerId-rendering\")&&this._optionalFields.push(o.OBJECTANDLAYERIDCOLOR);const t=c((e=>s(e)),e),i=this.view._stage,a=t.getMaterials();i.addMany(a),this._addDisposeResource((()=>i.removeMany(a)));const d=t.getTextures();i.addMany(d),this._addDisposeResource((()=>{d.forEach((e=>e.unload())),i.removeMany(d)})),await Promise.all(d.map((e=>this.view._stage.schedule((()=>e.load(i.renderView.renderingContext)),n)))),r(n);const l=await this._createLodRenderer(t,n);this._lodRendererResources={lodRenderer:l,materials:a,textures:d}}addInstances(e){const r=this._lodRendererResources;if(null==r)return;const{featureIds:s,localTransforms:o,globalTransforms:n}=e,t=r.lodRenderer;if(null==t)return;const i=t.instanceData,a=s.length;for(let d=0;d<a;++d){const e=s[d],r=i.addInstance(),t=i.view,a=16*d;t.localTransform.copyFromTypedBuffer(r,o,a),t.globalTransform.copyFromTypedBuffer(r,n,a),i.updateModelTransform(r),i.setVisible(r,!0),this._featureIdToInstanceIndex.set(e,r)}}removeInstances(e){const r=this._lodRendererResources;if(null==r)return;const s=r.lodRenderer.instanceData,o=this._featureIdToInstanceIndex,n=e.length;for(let t=0;t<n;++t){const r=e[t],n=o.get(r);null!=n&&(s.removeInstance(n),o.delete(r))}}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createLodRenderer(e,r){const s=this.view._stage,o={layerUid:this.layerUid,graphicUid:e=>1,notifyGraphicGeometryChanged:e=>1,notifyGraphicVisibilityChanged:e=>1},t=new n({symbol:e,optionalFields:this._optionalFields,metadata:o,shaderTransformation:null},this.scheduler);return t.slicePlaneEnabled=!1,this._addDisposeResource((()=>{s.removeRenderPlugin(t),t.destroy()})),await s.addRenderPlugin(t,r),t}};function c(e,r){const s=r.levels.map((r=>{const s=r.components.map((r=>{const s=e(r.materialId);if(!u(s))throw new Error(\"LodRenderer only supports DefaultMaterial\");const o=new t(s,r.renderGeometryBuffer.data,r.renderGeometryBuffer.elementCount,r.boundingInfo);return new i(o)}));return new a(s,r.minScreenSpaceRadius)}));return new d(s)}function u(e){return null!=e&&\"materialType\"in e&&\"default\"===e.materialType}l=e([s(\"esri.views.3d.layers.graphics.pipeline.rendering.LodRenderer\")],l);export{l as LodRenderer,u as isDefaultMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import{makeHandle as t}from\"../../../../../../core/handleUtils.js\";import{releaseMaybe as s}from\"../../../../../../core/maybe.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{ONES as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ViewingMode as d}from\"../../../../../ViewingMode.js\";import{namedAnchorToHUDMaterialAnchorPos as c}from\"../../placementUtils.js\";import{DirectRenderer as l}from\"./DirectRenderer.js\";import{LodRenderer as m}from\"./LodRenderer.js\";import{defaultBoundingBox as u,createTexture as h,requiresHalfTexelOffset as p}from\"../../../../support/engineContent/sdfPrimitives.js\";import{CullFaceOptions as f}from\"../../../../webgl-engine/lib/basicInterfaces.js\";import{DefaultMaterial as w}from\"../../../../webgl-engine/materials/DefaultMaterial.js\";import{HUDMaterial as g}from\"../../../../webgl-engine/materials/HUDMaterial.js\";import{schematicMRRFactors as y}from\"../../../../webgl-engine/materials/pbrUtils.js\";let _=class extends r{constructor(e){super(),this.view=null,this.layerUid=null,this._renderGeometries=new Map,this._materials=new Map,this._directRenderers=new Map,this._lodRenderers=new Map,this.totalFeatures=0,this.view=e.view,this.layerUid=e.layerUid}initialize(){}destroy(){this.removeAllHandles(),this._lodRenderers.forEach((e=>e.destroy()))}async executeRenderCommands(e){for(const r of e)switch(r.id){case\"create-material\":await this._createMaterial(r);break;case\"create-direct-renderer\":await this._createDirectRenderer(r);break;case\"add-direct-renderer-geometry\":await this._addDirectRendererGeometry(r),this._updateFeatureCount();break;case\"remove-direct-renderer-geometry\":await this._removeDirectRendererGeometry(r),this._updateFeatureCount();break;case\"create-lod-renderer\":await this._createLodRenderer(r);break;case\"add-lod-instances\":await this._addLodInstances(r),this._updateFeatureCount();break;case\"remove-lod-instances\":await this._removeLodInstances(r),this._updateFeatureCount()}}_updateFeatureCount(){let e=0;for(const r of this._directRenderers.values())e+=r.numFeatures;for(const r of this._lodRenderers.values())e+=r.numFeatures;this._set(\"totalFeatures\",e)}get usedMemory(){let e=0;for(const r of this._directRenderers.values())e+=r.usedMemory;for(const r of this._lodRenderers.values())e+=r.usedMemory;return e}async _createMaterial(e){const{view:r}=this,{sharedSymbolResources:i}=r;if(null==i)throw new Error(\"No shared symbol resources found!\");const{textures:o}=i,a=r.state.viewingMode===d.Global;let n=null;switch(e.type){case\"default\":n=v(i,{physicalBasedRenderingEnabled:!0,slicePlaneEnabled:!1,castShadows:!0,isPrimitive:!0,screenSizePerspectiveEnabled:!0,doublePrecisionRequiresObfuscation:r._stage.renderView.renderingContext.driverTest.doublePrecisionRequiresObfuscation.result},a);break;case\"hud\":{const[e,r]=R(o,a);this.addHandles([t((()=>s(r)))]),n=e}break;default:throw new Error(`unable to create unknown material type ${e.type}`)}this._materials.set(e.materialId,n)}_getMaterial(e){return this._materials.get(e)}async _createDirectRenderer(e){const r=e.materialId,t=this._getMaterial(r);if(null==t)throw new Error(`material not found ${r}`);const{view:s}=this,i=new l({material:t});this._directRenderers.set(r,i),s._stage.addRenderPlugin(i),s._stage.renderView.renderer.updateHasFlags()}async _addDirectRendererGeometry(e){const r=e.renderGeometryId,t=e.materialId;await this._removeDirectRendererGeometry({renderGeometryId:r});const s=this._directRenderers.get(t);if(null==s)return void console.error(\"no renderer assigned to provided material\");const i=s.addRenderGeometry(r,e.renderGeometryBuffer,e.localOrigin);this._renderGeometries.set(r,{renderGeometry:i,materialId:t}),this.view._stage.renderView.requestRender()}async _removeDirectRendererGeometry(e){const r=e.renderGeometryId,t=this._renderGeometries.get(r);if(null==t)return;const s=t.materialId,i=this._directRenderers.get(s);null!=i?i.removeRenderGeometry(e.renderGeometryId):console.error(\"no renderer assigned to provided material\")}async _createLodRenderer(e){const r=new m({view:this.view,layerUid:this.layerUid}),t=new AbortController,s=e=>this._getMaterial(e);await r.doLoad(e.lodRenderGeometry,s,t.signal),this._lodRenderers.set(e.lodRendererId,r)}async _addLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.addInstances(e.data)}async _removeLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.removeInstances(e.featureIds)}};function R(e,r){const t={anchorPosition:c.center,occlusionTest:!0,hasSlicePlane:!1,color:[1,0,0,1],outlineColor:[0,0,0,1],outlineSize:1,distanceFieldBoundingBox:u},s=null;if(null!=e){const r=e.fromData(\"circle-icon\",(()=>h(\"circle\")));t.textureId=r.texture.id,t.textureIsSignedDistanceField=!0,t.sampleSignedDistanceFieldTexelCenter=p(\"circle\")}return[new g(t,r),s]}function v(e,r,t){const s={usePBR:r.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:y,ambient:a,diffuse:a,hasSlicePlane:r.slicePlaneEnabled,castShadows:r.castShadows,offsetTransparentBackfaces:!r.isPrimitive};return b(s),r.screenSizePerspectiveEnabled&&(s.screenSizePerspective=e.screenSizePerspectiveSettings),s.externalColor=n,s.isInstanced=!0,new w(s,{spherical:t,doublePrecisionRequiresObfuscation:!0})}function b(e){const r=e.opacity??1,t=r<1;return e.transparent=t,e.opacity=r,e.cullFace=t?f.None:f.Back,e}e([i({readOnly:!0})],_.prototype,\"totalFeatures\",void 0),_=e([o(\"esri.views.3d.layers.graphics.pipeline.rendering.FeaturePipelineRenderManager\")],_);export{_ as FeaturePipelineRenderManager,v as createDefaultMaterial,R as createHudMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Promise.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{WorkerHandle as n}from\"../../../../../core/workers/WorkerHandle.js\";import i from\"../../../../../geometry/Extent.js\";import s from\"../../../../../rest/support/FeatureSet.js\";let a=class extends t{constructor(e){super(e),this.schedule=null,this._workerUpdating=!0}get updating(){return this._workerUpdating}initialize(){this._workerHandle=new d(this.schedule,this);const{layer:e,viewSpatialReference:t,renderSpatialReference:r}=this;this.addResolvingPromise((async()=>{await e.load();const{fullExtent:o}=e;await this._workerHandle.invokeMethod(\"setup\",{url:e.parsedUrl?.path??\"\",baseQuery:e.createQuery().toJSON(),viewSpatialReference:t.toJSON(),renderSpatialReference:r.toJSON(),viewingMode:this.viewingMode,objectIdField:e.objectIdField,capabilities:e.capabilities,timeInfo:e.timeInfo?.toJSON(),fieldsIndex:e.fieldsIndex.toJSON(),fullExtent:o?.toJSON()})})()),this.addHandles(this._workerHandle.on(\"notify-updating\",(({updating:e})=>{this._workerUpdating=e})))}onTileTreeChange({added:e,removed:t}){if(0===e.length&&0===t.length)return;const r=e.map(c),o=t.map(c);this._workerHandle.invokeMethod(\"onTileTreeChange\",{added:r,removed:o})}async executeQuery(e,t){const r=await this._workerHandle.invokeMethod(\"executeQuery\",e?.toJSON(),t),o=s.fromJSON(r);return this._ensureLayerOnFeatures(o),o}async executeQueryForIds(e,t){return await this._workerHandle.invokeMethod(\"executeQueryForIds\",e?.toJSON(),t)}async executeQueryForCount(e,t){return await this._workerHandle.invokeMethod(\"executeQueryForCount\",e?.toJSON(),t)}async executeQueryForExtent(e,t){const{count:r,extent:o}=await this._workerHandle.invokeMethod(\"executeQueryForExtent\",e?.toJSON(),t);return{count:r,extent:i.fromJSON(o)}}async executeQueryForLatestObservations(e,t){const r=await this._workerHandle.invokeMethod(\"executeQueryForLatestObservations\",e?.toJSON(),t),o=s.fromJSON(r);return this._ensureLayerOnFeatures(o),o}_ensureLayerOnFeatures(e){const{layer:t}=this;for(const r of e.features)r.layer=t,r.sourceLayer=t}};e([r()],a.prototype,\"updating\",null),e([r({constructOnly:!0})],a.prototype,\"schedule\",void 0),e([r({constructOnly:!0})],a.prototype,\"layer\",void 0),e([r({constructOnly:!0})],a.prototype,\"viewSpatialReference\",void 0),e([r({constructOnly:!0})],a.prototype,\"renderSpatialReference\",void 0),e([r({constructOnly:!0})],a.prototype,\"viewingMode\",void 0),e([r({constructOnly:!0})],a.prototype,\"dispatchRenderCommands\",void 0),e([r()],a.prototype,\"_workerUpdating\",void 0),a=e([o(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorkerHandle\")],a);class d extends n{constructor(e,t){super(\"Feature3DPipelineWorker\",\"setup\",{},e,{strategy:\"dedicated\",client:t})}}function c({id:e,lij:t,extent:r}){return{id:e,lij:t,extent:r}}export{a as Feature3DPipelineWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Error.js\";import{makeHandle as t}from\"../../../../../core/handleUtils.js\";import{destroyMaybe as o}from\"../../../../../core/maybe.js\";import i from\"../../../../../core/Promise.js\";import{on as n}from\"../../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{FeatureLayerViewPerformanceInfo as u}from\"../../FeatureLayerViewPerformanceInfo.js\";import{Feature3DPipelineWorkerHandle as l}from\"./Feature3DPipelineWorkerHandle.js\";import{FeaturePipelineRenderManager as d}from\"./rendering/FeaturePipelineRenderManager.js\";import{emptyHighlightHandle as p}from\"../../support/highlightUtils.js\";import{LayerViewPerformanceInfo as m}from\"../../support/LayerViewPerformanceInfo.js\";import{UpdatePolicy as c}from\"../../../webgl-engine/lib/UpdatePolicy.js\";let y=class extends i{constructor(e){super(e),this._renderer=null,this.graphicsQuery={queryForSymbologySnapping:(e,t)=>{throw new r(\"unsupported-symbology-snapping\")},executeQuery:async(e,r)=>await this._workerHandle.executeQuery(e,r),executeQueryForIds:async(e,r)=>await this._workerHandle.executeQueryForIds(e,r),executeQueryForCount:async(e,r)=>await this._workerHandle.executeQueryForCount(e,r),executeQueryForExtent:async(e,r)=>await this._workerHandle.executeQueryForExtent(e,r),executeQueryForLatestObservations:async(e,r)=>await this._workerHandle.executeQueryForLatestObservations(e,r)},this.maximumNumberOfFeatures=1e3}initialize(){if(\"point\"!==this.layerView.layer.geometryType)throw new r(\"unsupported-geometry-type\",`${this.layerView.layer.geometryType} is not supported`);this.addResolvingPromise(this.setup())}destroy(){this.removeAllHandles(),this._workerHandle.destroy(),o(this._renderer)}async setup(){const{layer:e,view:r}=this.layerView,{spatialReference:t,renderSpatialReference:o,resourceController:i}=r,s=r.state.viewingMode;if(this._renderer=new d({view:r,layerUid:e.uid}),\"feature\"!==e.type)throw new Error(\"Only FeatureLayer is supported\");const a=new l({schedule:e=>i.immediate.schedule(e),layer:e,viewSpatialReference:t,renderSpatialReference:o,viewingMode:s,dispatchRenderCommands:e=>this._renderer.executeRenderCommands(e)});this._workerHandle=await a.when(),this.addHandles([this.layerView.view.featureTiles.addClient(),n((()=>this.layerView.view.featureTiles.tiles),\"change\",(e=>{this._workerHandle.onTileTreeChange(e)}),{onListenerAdd:e=>this._workerHandle.onTileTreeChange({added:e.toArray(),removed:[]}),onListenerRemove:e=>this._workerHandle.onTileTreeChange({added:[],removed:e.toArray()})})])}get legendEnabled(){return!1}get hasAllFeatures(){return!1}get hasAllFeaturesInView(){return!1}get hasFullGeometries(){return!1}get symbologySnappingSupported(){return!1}get scaleVisibilitySuspended(){return!1}get suspendInfo(){return{}}get updating(){return this._workerHandle.updating}get dataUpdating(){return!1}get updatePolicy(){return c.ASYNC}get maximumNumberOfFeaturesExceeded(){return!1}get updatingProgressValue(){return 1}get usedMemory(){return this._renderer?.usedMemory??0}get unloadedMemory(){return 0}get ignoresMemoryFactor(){return!0}get totalFeatures(){return this._renderer?.totalFeatures??0}get performanceInfo(){const e=this.totalFeatures;return new u(new m(this.usedMemory,e,e,this.maximumNumberOfFeatures,0,null),e,e,this.maximumNumberOfFeaturesExceeded,\"tiles\",\"n/a\")}get suspendResumeExtentMode(){return\"computed\"}forEachGraphic(e){}findGraphic(e){return null}highlight(e){return p}maskOccludee(e){return t()}async whenGraphicBounds(e,r){return null}computeAttachmentOrigin(e,r){return null}elevationAlignPointsInFeatures(e,t){throw new r(\"unsupported-elevation-alignment\")}async doRefresh(e){}setVisibility(e,r){}getMissingAttributesForFeature(e){return null}getHydratedGeometry(e){return null}};e([s()],y.prototype,\"layerView\",void 0),e([s()],y.prototype,\"updating\",null),e([s()],y.prototype,\"totalFeatures\",null),y=e([a(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipeline\")],y);export{y as Feature3DPipeline};\n"],"names":["m","o","constructor","e","super","this","_glMaterials","_produces","Map","_renderGeometries","_vaoCache","_drawParameters","l","_bufferWriter","produces","numFeatures","r","forEach","t","numElements","usedMemory","vao","initialize","material","createBufferWriter","set","s","Highlight","ShadowHighlight","destroy","dispose","keys","removeRenderGeometry","acquireTechniques","shouldRender","output","bind","i","get","slot","n","load","rctx","beginSlot","render","size","a","OCCLUDER_MATERIAL","TRANSPARENT_OCCLUDER_MATERIAL","runAppleAmdDriverHelper","bindTechnique","parameters","program","origin","localOrigin","bindDraw","ensureAttributeLocations","bindVAO","setPipelineState","getPipeline","drawArrays","primitiveType","initializeRenderContext","materials","renderContext","getVaoCache","vertexAttributeLocations","vertexBufferLayout","uninitializeRenderContext","addRenderGeometry","newVao","data","byteLength","vertexBuffers","setSubData","Uint8Array","elementCount","deleteVao","delete","hasHighlightOptions","constructOnly","prototype","_optionalFields","Array","_featureIdToInstanceIndex","_disposeResourceHandles","_lodRendererResources","layerUid","view","sharedResources","sharedSymbolResources","scheduler","resourceController","_this$_lodRendererRes","_r$computeUsedMemory","lodRenderer","symbol","computeUsedMemory","doLoad","has","push","OBJECTANDLAYERIDCOLOR","levels","map","components","materialId","materialType","u","Error","renderGeometryBuffer","boundingInfo","minScreenSpaceRadius","d","c","_stage","getMaterials","addMany","_addDisposeResource","removeMany","getTextures","unload","Promise","all","schedule","renderView","renderingContext","_createLodRenderer","textures","addInstances","featureIds","localTransforms","globalTransforms","instanceData","length","addInstance","localTransform","copyFromTypedBuffer","globalTransform","updateModelTransform","setVisible","removeInstances","removeInstance","graphicUid","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","optionalFields","metadata","shaderTransformation","slicePlaneEnabled","removeRenderPlugin","addRenderPlugin","_","_materials","_directRenderers","_lodRenderers","totalFeatures","removeAllHandles","executeRenderCommands","id","_createMaterial","_createDirectRenderer","_addDirectRendererGeometry","_updateFeatureCount","_removeDirectRendererGeometry","_addLodInstances","_removeLodInstances","values","_set","state","viewingMode","Global","type","usePBR","physicalBasedRenderingEnabled","isSchematic","mrrFactors","y","ambient","diffuse","hasSlicePlane","castShadows","offsetTransparentBackfaces","isPrimitive","_e$opacity","opacity","transparent","cullFace","f","None","Back","b","screenSizePerspectiveEnabled","screenSizePerspective","screenSizePerspectiveSettings","externalColor","isInstanced","w","spherical","doublePrecisionRequiresObfuscation","v","driverTest","result","R","addHandles","concat","_getMaterial","renderer","updateHasFlags","renderGeometryId","console","error","renderGeometry","requestRender","AbortController","lodRenderGeometry","signal","lodRendererId","anchorPosition","center","occlusionTest","color","outlineColor","outlineSize","distanceFieldBoundingBox","fromData","h","textureId","texture","textureIsSignedDistanceField","sampleSignedDistanceFieldTexelCenter","p","g","readOnly","_workerUpdating","updating","_workerHandle","layer","viewSpatialReference","renderSpatialReference","addResolvingPromise","_e$parsedUrl$path","_e$parsedUrl","_e$timeInfo","fullExtent","invokeMethod","url","parsedUrl","path","baseQuery","createQuery","toJSON","objectIdField","capabilities","timeInfo","fieldsIndex","on","_ref","onTileTreeChange","_ref2","added","removed","executeQuery","fromJSON","_ensureLayerOnFeatures","executeQueryForIds","executeQueryForCount","executeQueryForExtent","count","extent","executeQueryForLatestObservations","features","sourceLayer","strategy","client","_ref3","lij","_renderer","graphicsQuery","queryForSymbologySnapping","async","maximumNumberOfFeatures","layerView","geometryType","setup","spatialReference","uid","immediate","dispatchRenderCommands","when","featureTiles","addClient","tiles","onListenerAdd","toArray","onListenerRemove","legendEnabled","hasAllFeatures","hasAllFeaturesInView","hasFullGeometries","symbologySnappingSupported","scaleVisibilitySuspended","suspendInfo","dataUpdating","updatePolicy","ASYNC","maximumNumberOfFeaturesExceeded","updatingProgressValue","_this$_renderer$usedM","_this$_renderer","unloadedMemory","ignoresMemoryFactor","_this$_renderer$total","_this$_renderer2","performanceInfo","suspendResumeExtentMode","forEachGraphic","findGraphic","highlight","maskOccludee","whenGraphicBounds","computeAttachmentOrigin","elevationAlignPointsInFeatures","doRefresh","setVisibility","getMissingAttributesForFeature","getHydratedGeometry"],"sourceRoot":""}