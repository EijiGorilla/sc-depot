"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[79256],{20639:(e,t,n)=>{n.d(t,{Ng:()=>Z,OM:()=>g,Q0:()=>O,T8:()=>b,ZP:()=>M,ZT:()=>T,eX:()=>w,fD:()=>x,fb:()=>p,fl:()=>h,iP:()=>S,oh:()=>D,rX:()=>A,sH:()=>y,yk:()=>N});var i=n(89379),o=(n(11265),n(81806),n(50076)),r=n(15941),l=n(65256),u=n(96017),a=n(85632),s=n(36693),d=n(24241),f=n(38042);const c=s.n$,m={date:null,time:null,timeZoneOffset:null},h=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),p="latn",y=new Set(["date-only","time-only","timestamp-offset"]),v=e=>"valueAsDate"in e;function g(e){return{locale:(0,f.JK)(),numberingSystem:p,zone:null!==e&&void 0!==e?e:c}}function _(e,t){return null==e?null:d.c9.fromMillis(e,g(t))}function b(e,t){if(null==e||!(0,a.Kg)(e)||""===e){if(t){const e=d.c9.local({zone:t});return{date:null,time:null,timeZoneOffset:e.isValid?e.offset.toString():null}}return m}const n=d.c9.fromISO(e,{setZone:!0});return{date:n.toFormat(u.mo,g()),time:n.toFormat(u.Uq.HMS_MS,g()),timeZoneOffset:n.offset.toString()}}function O(e,t){if(null==e||!(0,a.Et)(e)||isNaN(e))return m;const n=_(e,t);return n?{date:n.toFormat(u.mo,g(t)),time:n.toFormat(u.Fj,g(t))}:m}function T(e){switch(e.type){case"date":default:return(0,l.J2)("short-date-short-time");case"date-only":return(0,l.J2)("short-date");case"time-only":return(0,l.J2)("short-time");case"timestamp-offset":return(0,i.A)((0,i.A)({},(0,l.J2)("short-date-short-time")),{},{timeZone:void 0,timeZoneName:"short"})}}function M(e,t,n){if(!e||null==t)return null;switch(e.type){case"date":return(0,l.Yq)(t,n);case"date-only":return(0,l.iS)(t,n);case"time-only":return(0,l.F8)(t,n);case"timestamp-offset":return(0,l.Ey)(t,n);default:return null}}function Z(e){var t;const{dateComponent:n,defaultTimeZone:i,timeComponent:o,timeZoneComponent:r,oldValue:l}=e;if(null===n||void 0===n||!n.value)return null;const{year:a,month:f,day:c}=d.c9.fromFormat(n.value,u.mo),{hour:m,minute:h,second:p,millisecond:y}=null!==(t=F(o,s.n$))&&void 0!==t?t:d.c9.now(),v=b(l,i),g=null!==r&&void 0!==r&&r.value?parseInt(r.value,10):null!=v.timeZoneOffset?parseInt(v.timeZoneOffset,10):(new Date).getTimezoneOffset(),_=d.mQ.instance(g),O=d.c9.fromObject({year:a,month:f,day:c,hour:m,minute:h,second:p,millisecond:y},{zone:_});return O.isValid?O.toISO({includeOffset:!0}):null}function D(e){const{dateComponent:t,timeComponent:n,timeZone:i,max:o,min:r,oldValue:l}=e,u=F(t,i);let a=!!e.applyRange;if(!u)return null;let s=null;if(null!=(null===n||void 0===n?void 0:n.value)){const e=F(n,i),t=Date.now(),r=null!=o&&o<t?o:t,l=d.c9.fromMillis(r,g(i)),a=u||l,{year:f,month:c,day:m}=a,{hour:h,minute:p,second:y,millisecond:v}=e||l;s=a.set({year:f,month:c,day:m,hour:h,minute:p,second:y,millisecond:v})}else{const e=_(E({value:null!==l&&void 0!==l?l:Date.now(),max:o,min:r}),i),{year:t,month:n,day:d}=u,{hour:f,minute:c,second:m,millisecond:h}=e;a=!0,s=u.set({year:t,month:n,day:d,hour:f,minute:c,second:m,millisecond:h})}if(!s.isValid)return null;const f=s.toMillis();return a?E({value:f,max:o,min:r}):f}function F(e,t){var n;if(null==(null===e||void 0===e?void 0:e.value)||Array.isArray(e.value))return null;let i=null;return i=v(e)?d.c9.fromFormat(e.value,u.mo,g(t)):(0,u.UE)(e.value),null!==(n=i)&&void 0!==n&&n.isValid?i:null}function w(e){const{max:t,min:n,value:i}=e;return!isNaN(i)&&!(null!=t&&i>t)&&!(null!=n&&i<n)}function E(e){const{max:t,min:n,value:i}=e;return null!=t&&null!=n?(0,r.qE)(i,n,t):null!=t&&i>t?t:null!=n&&i<n?n:i}function S(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new o.default("invalid time-only field","Cannot parse valid time-only field value from ".concat(e));const n=t.split(":"),i=new Array(3);for(let o=0;o<3;o++){var r;const e=null!==(r=n.at(o))&&void 0!==r?r:"";i[o]=e.padStart(2,"0")}return i.join(":")}function x(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return S(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function A(e){return!!e&&"object"==typeof e&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function N(e){var t,n;const{type:i,range:o,value:r}=e;if(null==r||!o||r===o.min||r===o.max)return!0;if("date"===i)return w({value:r,min:o.min,max:o.max});const{rawMax:l,rawMin:a}=o;let s=null,d=null,f=null;switch(i){case"date-only":s=(0,u.Xi)(l),d=(0,u.Xi)(a),f=(0,u.Xi)(r);break;case"time-only":s=(0,u.UE)(l),d=(0,u.UE)(a),f=(0,u.UE)(r);break;case"timestamp-offset":s=(0,u.gz)(l),d=(0,u.gz)(a),f=(0,u.gz)(r)}return!f||w({value:f.valueOf(),min:null===(t=d)||void 0===t?void 0:t.valueOf(),max:null===(n=s)||void 0===n?void 0:n.valueOf()})}},23301:(e,t,n)=>{n.d(t,{$$:()=>O,D_:()=>c,Gd:()=>f,Kx:()=>i,PA:()=>v,Po:()=>m,Qv:()=>g,gK:()=>o,hQ:()=>b,jl:()=>p,of:()=>d,qn:()=>_,zU:()=>h});var i,o,r,l=n(71764),u=n(15142),a=n(53430),s=n(20639);(r=i||(i={})).Text="text",r.Number="number",r.Date="date",r.Unsupported="unsupported",function(e){e.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"}(o||(o={}));const d=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};function f(e,t){var n;const{dataType:i,domain:r,field:l,maxLength:d,minLength:f,range:c,required:m}=t;if(null==e)return m?o.CANNOT_BE_EMPTY:null;if("text"===i&&"string"==typeof e){if(f>-1&&e.length<f)return o.TOO_SHORT;if(d>-1&&e.length>d)return o.TOO_LONG}return"date"!==i||(0,s.yk)({type:l.type,range:c,value:e})?r?(0,u.wb)(l,e,r):null!==(n=(0,a.validateFieldValue)(l,e))&&void 0!==n?n:(0,u.wb)(l,e):a.NumericRangeValidationError.OUT_OF_RANGE}function c(e,t){return!(!m(e)||!m(t))||e===t}function m(e){return null==e||""===e}function h(e){let{dataType:t,field:n,input:o}=e;if(t===i.Date)return-1;const r=y(n.length);if(!o||!(0,l.AI)(o))return r;const u=y(o.maxLength);return-1===u?r:-1===r?u:Math.min(r,u)}function p(e){let{dataType:t,field:n,input:o}=e;if(t===i.Date)return-1;if(!o||!(0,l.AI)(o))return-1;const r=y(o.minLength);if(r<0)return-1;const u=y(n.length);return u>-1&&u<r?-1:r}function y(e){return"number"==typeof e&&e>-1?e:-1}const v={type:"number"},g={type:"number",intlOptions:{notation:"scientific"}};function _(e){return e>=1e7||e<=-1e7}function b(e,t){return null!=e.max&&null!=e.min?t.outsideRange:null!=e.max?t.outsideRangeMax:t.outsideRangeMin}const O=e=>e&&!Number.isNaN(e.valueOf())},79256:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(35143),o=n(91967),r=n(50346),l=n(46053),u=(n(81806),n(76460),n(47249),n(85842)),a=n(41289),s=n(23301);let d=class extends o.default{constructor(e){super(e),this._stagedForDelete=!1,this.feature=null,this.initialFeature=null,this.submittable=!1,this.displayTitle=null,this.isAssociation=!1,this._debouncedRefreshDisplayTitle=(0,r.debounce)(this._refreshDisplayTitle.bind(this),100)}get attributesModified(){var e,t;return!function(e,t){const n=null!==e&&void 0!==e?e:{},i=null!==t&&void 0!==t?t:{},o=new Set(Object.keys(n));(0,a.FB)(o,Object.keys(i));for(const r of o){const e=n[r],t=i[r];if(!(0,s.D_)(e,t))return!1}return!0}(null===(e=this.initialFeature)||void 0===e?void 0:e.attributes,null===(t=this.feature)||void 0===t?void 0:t.attributes)}get geometryModified(){return this._stringifyGeometry(this.feature)!==this._stringifyGeometry(this.initialFeature)}get stagedForDelete(){return this._stagedForDelete}get modified(){return this.attributesModified||this.geometryModified||this._stagedForDelete}set timeZone(e){this._set("timeZone",e),(0,r.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}stageDelete(){this._stagedForDelete=!0}unstageDelete(){this._stagedForDelete=!1}trackChanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.feature;this.initialFeature=null===e||void 0===e?void 0:e.clone(),(0,r.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}updateAttributes(e){const{feature:t}=this;t&&(t.attributes=e,this.notifyChange("attributesModified")),(0,r.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}updateGeometry(e){const{feature:t}=this;t&&(t.geometry=e,this.notifyChange("geometryModified"))}_stringifyGeometry(e){const t=null===e||void 0===e?void 0:e.geometry;return function(e){return null==e?null:JSON.stringify(e)}("mesh"===(null===t||void 0===t?void 0:t.type)?{transform:t.transform,vertexSpace:t.vertexSpace}:t)}async _refreshDisplayTitle(e){const t=this.feature,n=null===t||void 0===t?void 0:t.sourceLayer;if(!n||!("getFeatureTitle"in n))return;const i=await n.getFeatureTitle(t,{fetchMissingFields:!1,timeZone:this.timeZone});e.aborted||(this.displayTitle=""===i?null:i)}};(0,i._)([(0,l.MZ)()],d.prototype,"_stagedForDelete",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"attributesModified",null),(0,i._)([(0,l.MZ)()],d.prototype,"feature",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"geometryModified",null),(0,i._)([(0,l.MZ)()],d.prototype,"initialFeature",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"modified",null),(0,i._)([(0,l.MZ)()],d.prototype,"submittable",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"displayTitle",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"isAssociation",void 0),(0,i._)([(0,l.MZ)()],d.prototype,"timeZone",null),d=(0,i._)([(0,u.$)("esri.widgets.Editor.Edits")],d);const f=d}}]);
//# sourceMappingURL=79256.838cdd02.chunk.js.map