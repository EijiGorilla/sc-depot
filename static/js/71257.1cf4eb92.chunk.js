"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[71257],{9003:(e,t,n)=>{n.d(t,{BR:()=>s,mH:()=>i});var r=n(50912);const i=e=>l(e)||a(e),l=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},a=e=>{const t=(0,r.oZ)(e);if(null!=t&&e.hasOwnProperty(t)&&null!=e[t])for(const n of e[t])if(i(n))return!0;return!1},s=(e,t)=>null!=t&&null!=e&&(t.test(e.title)?"self":!!e.children.some((e=>!1!==s(e,t)))&&"children")},71257:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var r,i=n(35143),l=n(91967),a=n(50076),s=n(68134),o=n(46053),p=(n(81806),n(76460),n(47249),n(85842)),d=n(3589),u=n(83973),c=n(50912),y=n(19276),h=n(38283),v=n(9003),g=n(18690),f=n(30545);let w=r=class extends f.default{constructor(e){super(e),this.children=new y.default,this.parent=null}get enabled(){const{children:e}=this;if(0===e.length)return null!=this.featureSource&&this.featureSource.enabled?"enabled":"disabled";let t=!1,n=!1;for(const r of e){if("indeterminate"===r.enabled)return r.enabled;if("enabled"===r.enabled?t=!0:"disabled"===r.enabled&&(n=!0),n&&t)return"indeterminate"}return n?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap((e=>{var t;return[null===(t=e.layer)||void 0===t?void 0:t.id,...e.childLayerIds]}))}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find((t=>t.layer===e))}_initializeChildLayers(e){if(!e)return;const t=e.filter(v.mH);super._initializeChildLayers(t)}_createChildItems(e){return e.map((e=>(0,c.oU)(e)?new r({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null)).filter(g.Ru).reverse()}};(0,i._)([(0,o.MZ)()],w.prototype,"enabled",null),(0,i._)([(0,o.MZ)()],w.prototype,"children",void 0),(0,i._)([(0,o.MZ)()],w.prototype,"childLayerIds",null),(0,i._)([(0,o.MZ)()],w.prototype,"featureSource",null),(0,i._)([(0,o.MZ)({constructOnly:!0})],w.prototype,"getFeatureSnappingSources",void 0),(0,i._)([(0,o.MZ)()],w.prototype,"parent",void 0),w=r=(0,i._)([(0,p.$)("esri.widgets.support.SnappingControls.SnappingListItem")],w);let S=class extends h.default{constructor(){super(...arguments),this.featureSnappingSources=new y.default}get operationalItemsFlat(){return this.operationalItems.flatten((e=>e.children))}get selectableItems(){return this.operationalItemsFlat.filter((e=>{var t;return!(null!==(t=e.children)&&void 0!==t&&t.length)}))}_compileList(){var e;const t=null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.layers;if(!t)return;const n=t.filter(v.mH);this._watchLayersListMode(n);const r=this._getViewableLayers(n);null!==r&&void 0!==r&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createListItem(e){return new w({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};(0,i._)([(0,o.MZ)()],S.prototype,"featureSnappingSources",void 0),(0,i._)([(0,o.MZ)()],S.prototype,"operationalItems",void 0),(0,i._)([(0,o.MZ)()],S.prototype,"operationalItemsFlat",null),(0,i._)([(0,o.MZ)()],S.prototype,"selectableItems",null),S=(0,i._)([(0,p.$)("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],S);let b=class extends l.default{constructor(e){super(e),this.layerListViewModel=new S,this.snappingOptions=new u.default,this.view=null}initialize(){this.addHandles([(0,s.watch)((()=>({viewModel:this.layerListViewModel,view:this.view})),(e=>{let{viewModel:t,view:n}=e;t.view=n}),s.initial),(0,s.watch)((()=>{var e;return{viewModel:this.layerListViewModel,sources:null===(e=this.snappingOptions)||void 0===e?void 0:e.featureSources}}),(e=>{let{viewModel:t,sources:n}=e;t.featureSnappingSources=n}),s.initial)])}get allLayersEnabled(){var e,t;return(null!==(e=null===(t=this.layerListViewModel)||void 0===t?void 0:t.selectableItems)&&void 0!==e?e:[]).every((e=>"enabled"===e.enabled))}get allLayersDisabled(){var e,t;return(null!==(e=null===(t=this.layerListViewModel)||void 0===t?void 0:t.selectableItems)&&void 0!==e?e:[]).every((e=>!e.enabled))}get layersEnabledCount(){var e,t;return null!==(e=null===(t=this.layerListViewModel)||void 0===t||null===(t=t.selectableItems)||void 0===t?void 0:t.filter((e=>"enabled"===e.enabled)).length)&&void 0!==e?e:0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){null===e||void 0===e||e.forEach((e=>t?this.enableSnappingForLayer(e):this.disableSnappingForLayer(e)))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach((t=>{let{layer:n}=t;const r=null===n||void 0===n?void 0:n.id;e?this.enableSnappingForLayer(r):this.disableSnappingForLayer(r)}))}enableSnappingForLayer(e){var t;const n=null!==(t=this._findSnappingSourceForLayer(e))&&void 0!==t?t:this._makeSnappingSourceForLayer(e);n&&(n.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)(0,c.oU)(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find((t=>t.layer.id===e))}_makeSnappingSourceForLayer(e){var t;const n=null===(t=this.layerListViewModel.operationalItemsFlat.find((t=>{var n;return(null===(n=t.layer)||void 0===n?void 0:n.id)===e})))||void 0===t?void 0:t.layer;if(!n)throw new a.default("snapping-controls:layer-not-found","cannot enable snapping for layer with id ".concat(e," because no such layer was found in the view"));if("group"===n.type)return;const r=new d.default({layer:n});return this.snappingOptions.featureSources.add(r),r}};(0,i._)([(0,o.MZ)()],b.prototype,"allLayersEnabled",null),(0,i._)([(0,o.MZ)()],b.prototype,"allLayersDisabled",null),(0,i._)([(0,o.MZ)({constructOnly:!0})],b.prototype,"layerListViewModel",void 0),(0,i._)([(0,o.MZ)()],b.prototype,"layersEnabledCount",null),(0,i._)([(0,o.MZ)({type:u.default,nonNullable:!0})],b.prototype,"snappingOptions",void 0),(0,i._)([(0,o.MZ)()],b.prototype,"state",null),(0,i._)([(0,o.MZ)()],b.prototype,"view",void 0),b=(0,i._)([(0,p.$)("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],b);const L=b}}]);
//# sourceMappingURL=71257.1cf4eb92.chunk.js.map