"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[88877],{88877:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});var i=s(89379),n=s(35143),o=s(50076),a=s(54099),r=s(50346),h=s(46053),l=(s(81806),s(76460),s(47249),s(85842)),d=s(19451);let p=class extends a.A.EventedAccessor{constructor(t){super(t),this._indexHistory=[],this._lastStepIndex=-1,this._stepIndex=-1,this._updatingHandles=new d.U,this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},this.data=void 0,this.started=!1,this.steps=[],this.type=null,this._pendingOperation=null}destroy(){this._updatingHandles.destroy()}get hasNextStep(){const{steps:t}=this;return!!(t&&this._stepIndex<t.filter((t=>!t.parent)).length-1)}get hasPreviousStep(){return this._stepIndex>0}get reliesOnOwnerAdminPrivileges(){return!1}get hasInvalidFormTemplate(){return!1}get shouldShowAttachments(){return!1}get shouldAllowAttachmentEditing(){return!1}get stepId(){const{steps:t}=this,e=t&&t[this._stepIndex];return e&&e.id}get helpMessage(){}get hasPendingEdits(){return!1}get keyboardCancellationEnabled(){return!0}get updating(){return this._updatingHandles.updating}async back(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>Promise.resolve(!0);this.hasPendingEdits&&!await t()||(this.hasPreviousStep?await this.previous({cancelCurrentStep:!0}):await this.cancel({force:!0}))}async cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!0};return!1!==t.force?this._cancel(t):new Promise(((e,s)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel((0,i.A)((0,i.A)({},t),{},{force:!0})).then(e)},deny:()=>s(new o.default("workflow:cancel-denied","Request to cancel workflow was denied."))}})}))}async commit(){this.removeHandles(this._handleKeys.beforeCommit),this.onCommit&&await this.onCommit(this.data),this.removeHandles(this._handleKeys.afterCommit),this.emit("commit")}async go(t){const{steps:e}=this,s=e.findIndex((e=>e.id===t));this._indexHistory.push(this._stepIndex),await this._go(s)}async next(){this._indexHistory.push(this._stepIndex),await this._go(this._stepIndex+1)}async previous(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cancelCurrentStep:!1};await this._go(this._indexHistory.pop(),t.cancelCurrentStep)}async reset(){await this._cancel({emitCancelEvent:!1}),await this.start()}async save(){await this.commit(),await this.reset()}async start(){this._set("started",!0);const t=-1===this._stepIndex?0:this._stepIndex;await this._go(t)}async _cancel(){let{emitCancelEvent:t=!0,error:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started&&(this._set("started",!1),await this._transaction((()=>{var t;return null===(t=this.steps[this._stepIndex])||void 0===t?void 0:t.tearDown({canceled:!0})}))),this.removeHandles([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(t),t&&this.emit("cancel",{error:e})}_go(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._transaction((async()=>{const{steps:s}=this;if(!(t<=-1||t>=s.length)){if(!this.started)return this._stepIndex=t,void this._notifyStepProps();this._lastStepIndex>-1&&await s[this._lastStepIndex].tearDown({canceled:e});try{await s[t].setUp()}catch(i){(0,r.throwIfNotAbortError)(i)}this._lastStepIndex=t,this._stepIndex=t,this._notifyStepProps()}}))}async _transaction(t){const e=this._pendingOperation,s=(0,r.createResolver)(),i=(null!==e&&void 0!==e?e:Promise.resolve()).then((()=>s.promise));this._pendingOperation=i,this._updatingHandles.addPromise(i);try{e&&await e,await t()}finally{s.resolve(),i===this._pendingOperation&&(this._pendingOperation=null)}}_resetIndexing(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,t&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}};(0,n._)([(0,h.MZ)()],p.prototype,"data",void 0),(0,n._)([(0,h.MZ)()],p.prototype,"hasNextStep",null),(0,n._)([(0,h.MZ)()],p.prototype,"hasPreviousStep",null),(0,n._)([(0,h.MZ)()],p.prototype,"onCommit",void 0),(0,n._)([(0,h.MZ)()],p.prototype,"reliesOnOwnerAdminPrivileges",null),(0,n._)([(0,h.MZ)()],p.prototype,"hasInvalidFormTemplate",null),(0,n._)([(0,h.MZ)()],p.prototype,"shouldShowAttachments",null),(0,n._)([(0,h.MZ)()],p.prototype,"shouldAllowAttachmentEditing",null),(0,n._)([(0,h.MZ)()],p.prototype,"started",void 0),(0,n._)([(0,h.MZ)({readOnly:!0})],p.prototype,"stepId",null),(0,n._)([(0,h.MZ)()],p.prototype,"steps",void 0),(0,n._)([(0,h.MZ)({readOnly:!0})],p.prototype,"type",void 0),(0,n._)([(0,h.MZ)()],p.prototype,"helpMessage",null),(0,n._)([(0,h.MZ)()],p.prototype,"hasPendingEdits",null),(0,n._)([(0,h.MZ)()],p.prototype,"keyboardCancellationEnabled",null),(0,n._)([(0,h.MZ)()],p.prototype,"updating",null),p=(0,n._)([(0,l.$)("esri.widgets.Editor.Workflow")],p);const c=p}}]);
//# sourceMappingURL=88877.39e900b3.chunk.js.map