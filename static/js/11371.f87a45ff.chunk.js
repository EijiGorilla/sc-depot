"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[11371,62315,68479],{11371:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var s=i(35143),n=i(68479),r=i(19276),o=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),a=i(29078);const c=new Set;let u=class extends a.D{constructor(e){super(e),this.analysis=null,this.supportedViewType="3d",this.unsupportedErrorMessage="SliceViewModel is only supported in 3D views.",c.add(this)}destroy(){c.delete(this)}get state(){return this.disabled||!this.ready?"disabled":null==this.tool?"ready":this.tool.state}get shape(){return this.analysis.shape}set shape(e){this.analysis.shape=e}get tiltEnabled(){return this.analysis.tiltEnabled}set tiltEnabled(e){this.analysis.tiltEnabled=e}get layersMode(){var e,t;return null!==(e=null===(t=this.tool)||void 0===t?void 0:t.layersMode)&&void 0!==e?e:"none"}get excludedLayers(){return this.analysis.excludedLayers}set excludedLayers(e){this.analysis.excludedLayers=r.default.isCollection(e)?e:new r.default(e)}get excludeGroundSurface(){return this.analysis.excludeGroundSurface}set excludeGroundSurface(e){this.analysis.excludeGroundSurface=e}async start(){await super.start(),c.forEach((e=>{e.view===this.view&&e!==this&&e.clear()})),null!=this.analysisView&&(this.analysisView.active=!0)}enterExcludeLayerMode(){null!=this.tool&&this.tool.enterExcludeLayerMode()}exitExcludeLayerMode(){null!=this.tool&&this.tool.exitExcludeLayerMode()}onConnectToAnalysisView(e){e.active=!0}constructAnalysis(){return new n.default}};(0,s._)([(0,o.MZ)({type:n.default})],u.prototype,"analysis",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],u.prototype,"state",null),(0,s._)([(0,o.MZ)()],u.prototype,"shape",null),(0,s._)([(0,o.MZ)()],u.prototype,"tiltEnabled",null),(0,s._)([(0,o.MZ)()],u.prototype,"layersMode",null),(0,s._)([(0,o.MZ)()],u.prototype,"excludedLayers",null),(0,s._)([(0,o.MZ)({nonNullable:!0})],u.prototype,"excludeGroundSurface",null),u=(0,s._)([(0,l.$)("esri.widgets.Slice.SliceViewModel")],u);const d=u},29078:(e,t,i)=>{i.d(t,{D:()=>w});var s=i(53986),n=i(35143),r=i(91967),o=i(98773),l=(i(81806),i(76460)),a=i(30726),c=i(50346),u=i(68134),d=i(46053),p=(i(47249),i(85842));const h=["analysis"];var y,v;(v=y||(y={}))[v.PENDING=0]="PENDING",v[v.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",v[v.RUNNING=2]="RUNNING";let w=class extends r.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.view=null,this.analysisView=null,this._reconnectViewTask=null,this._forceInteractiveHandle=null,this._parentChangeFromReconnect=!1,this._startUserOperation=null;const t=null===e||void 0===e?void 0:e.analysis;null!=t?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0)),null!=(null===e||void 0===e?void 0:e.visible)&&(this.visible=e.visible)}normalizeCtorArgs(e){const{analysis:t}=e;return(0,s.A)(e,h)}initialize(){this.addHandles([(0,u.watch)((()=>({readyAndNotSupported:null!=this.view&&this.view.ready&&!this.supported})),(e=>{let{readyAndNotSupported:t}=e;t&&l.A.getLogger(this).errorOnce(this.unsupportedErrorMessage)}),u.syncAndInitial),(0,u.watch)((()=>{var e;return null===(e=this.analysis)||void 0===e?void 0:e.parent}),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),u.sync),(0,u.watch)((()=>({view:this.view,ready:null!=this.view&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:i}=e;const s=null===t||void 0===t?void 0:t.view;i!==s&&(this._startUserOperation=(0,a.DC)(this._startUserOperation),this._disconnectFromView(s)),this._scheduleViewReconnect()}),u.syncAndInitial)])}destroy(){this._reconnectViewTask=(0,a.DC)(this._reconnectViewTask),this._startUserOperation=(0,a.DC)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),this._set("view",null),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}get supported(){return null==this.view||this.view.type===this.supportedViewType}set visible(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,a.DC)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return null!=this.analysisView&&!this.connectingToView}get connectingToView(){return null!=this._reconnectViewTask}get isAnalysisOwner(){return this._get("isAnalysisOwner")}get tool(){return null!=this.analysisView?this.analysisView.tool:null}clear(){this._startUserOperation=(0,a.DC)(this._startUserOperation),this._resetInteractiveCreationState(),null!=this.tool&&null!=this.view&&this.view.activeTool===this.tool&&(this.view.activeTool=null)}async start(){if(!this.visible)return void l.A.getLogger(this).warn("Cannot start analysis when not visible");this.clear();const e={task:null,abort:null,state:y.PENDING},t=(0,o.UT)((async t=>{if(e.state=y.WAIT_FOR_VIEW_READY,await(0,u.whenOnce)((()=>this.ready),t),e.state=y.RUNNING,null==this.analysisView||null==this.view)return;const i=this.analysisView.tool;null!=i&&(this.view.activeTool=i,(0,u.when)((()=>i.created),(()=>{i.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0}))}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,a.DC)(this._reconnectViewTask);const e=(0,o.UT)((async t=>{try{await this._reconnectView(t)}catch(i){if((0,c.throwIfAborted)(t),!(0,c.isAbortError)(i))return void l.A.getLogger(this).warn("Failed to use analysis in view model",i);throw i}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,i=null!=t&&t.ready&&this.supported,s=this.analysis;if(this._startUserOperation=_(this._startUserOperation),this._disconnectFromView(t),i&&null!=t&&null!=s){if(this.isAnalysisOwner){if(null!=s.parent)return void l.A.getLogger(this).errorOnce("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(s)}this.analysisView=await t.whenAnalysisView(s),(0,c.isAborted)(e)?this._startUserOperation=_(this._startUserOperation):(this.analysisView.visible=this.visible,this._forceInteractiveHandle=this.analysisView.forceInteractiveForViewModel(),this.addHandles(this._forceInteractiveHandle),this.onConnectToAnalysisView(this.analysisView))}}_disconnectFromView(e){null!=e&&this.isAnalysisOwner&&e.analyses.includes(this.analysis)&&(this._parentChangeFromReconnect=!0,this.analysis.clear(),e.analyses.remove(this.analysis)),this.onDisconnectFromAnalysisView(),this._forceInteractiveHandle=(0,a.xt)(this._forceInteractiveHandle),this.analysisView=null}_setExternalAnalysis(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=void 0,this._forceInteractiveHandle=(0,a.xt)(this._forceInteractiveHandle)),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}_resetInteractiveCreationState(){this.analysis.clear(),null!=this.tool&&this.tool.resetCreated()}get testInfo(){}};function _(e){return null!=e&&e.state>=y.RUNNING?(e.abort(),null):e}(0,n._)([(0,d.MZ)()],w.prototype,"supported",null),(0,n._)([(0,d.MZ)()],w.prototype,"view",void 0),(0,n._)([(0,d.MZ)({type:Boolean,value:!0})],w.prototype,"visible",null),(0,n._)([(0,d.MZ)()],w.prototype,"active",null),(0,n._)([(0,d.MZ)()],w.prototype,"disabled",null),(0,n._)([(0,d.MZ)({nonNullable:!0})],w.prototype,"analysis",null),(0,n._)([(0,d.MZ)()],w.prototype,"analysisView",void 0),(0,n._)([(0,d.MZ)()],w.prototype,"ready",null),(0,n._)([(0,d.MZ)()],w.prototype,"connectingToView",null),(0,n._)([(0,d.MZ)({readOnly:!0})],w.prototype,"isAnalysisOwner",null),(0,n._)([(0,d.MZ)()],w.prototype,"_reconnectViewTask",void 0),(0,n._)([(0,d.MZ)()],w.prototype,"_forceInteractiveHandle",void 0),(0,n._)([(0,d.MZ)()],w.prototype,"tool",null),w=(0,n._)([(0,p.$)("esri.widgets.support.AnalysisViewModel")],w)},37546:(e,t,i)=>{i.d(t,{P:()=>y});var s=i(89379),n=i(50076),r=i(53514),o=i(24387),l=i(90534),a=i(49723),c=i(19258),u=i(49140),d=i(46053),p=i(73093),h=i(79453);function y(e){var t;const i=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,n)=>{const r=function(e,t,i){var n;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,i){var n;const r=(0,c.z4)(t,i);return{type:String,read:(e,t,i)=>{const s=(0,h.r)(e,t,i);return r.type===String?s:"function"==typeof r.type?new r.type({url:s}):void 0},write:{isRequired:null===(n=r.json)||void 0===n||null===(n=n.write)||void 0===n?void 0:n.isRequired,writer(t,n,a,c){if(null===c||void 0===c||!c.resources)return"string"==typeof t?void(n[a]=(0,h.t)(t,c)):void(n[a]=t.write({},c));const d=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),y=(0,h.t)(d,(0,s.A)((0,s.A)({},c),{},{verifyItemRelativeUrls:null!==c&&void 0!==c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0}),h.M.NO),g=r.type!==String&&(!(0,o.H)(this)||(null===c||void 0===c?void 0:c.origin)&&this.originIdOf(i)>(0,u.aB)(c.origin)),f={object:this,propertyName:i,value:t,targetUrl:y,dest:n,targetPropertyName:a,context:c,params:e};null!==c&&void 0!==c&&c.portalItem&&y&&!(0,l.isAbsolute)(y)?g&&null!==e&&void 0!==e&&e.contentAddressed?v(f):g?function(e){var t;const{context:i,targetUrl:n,params:r,value:o,dest:a,targetPropertyName:c}=e;if(!i.portalItem)return;const u=i.portalItem.resourceFromPath(n),d=_(o,n,i),h=(0,p.n)(d),y=(0,l.getPathExtension)(u.path),g=null!==(t=null===r||void 0===r?void 0:r.compress)&&void 0!==t&&t;h===y?(i.resources&&w((0,s.A)((0,s.A)({},e),{},{resource:u,content:d,compress:g,updates:i.resources.toUpdate})),a[c]=n):v(e)}(f):function(e){let{context:t,targetUrl:i,dest:s,targetPropertyName:n}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),s[n]=i)}(f):null!==c&&void 0!==c&&c.portalItem&&(null==y||null!=(0,h.i)(y)||(0,l.isBlobProtocol)(y)||g)?v(f):n[a]=y}}}}(e,t,i);switch(null!==(n=null===e||void 0===e?void 0:e.type)&&void 0!==n?n:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=h.b;return{read:e,write:t}}}}(e,t,n);for(const e of i){const i=(0,d.rM)(t,e,n);for(const e in r)i[e]=r[e]}}}function v(e){var t,i,o,c;const{targetUrl:u,params:d,value:y,context:v,dest:g,targetPropertyName:f}=e;if(!v.portalItem)return;const m=(0,h.p)(u),b=_(y,u,v);if(null!==d&&void 0!==d&&d.contentAddressed&&"json"!==b.type)return void(null===(t=v.messages)||void 0===t||t.push(new n.default("persistable:contentAddressingUnsupported",'Property "'.concat(f,'" is trying to serializing a resource with content of type ').concat(b.type," with content addressing. Content addressing is only supported for json resources."),{content:b})));const V=null!==d&&void 0!==d&&d.contentAddressed&&"json"===b.type?(0,r.d)(b.jsonString):null!==(i=null===m||void 0===m?void 0:m.filename)&&void 0!==i?i:(0,a.lk)(),A=(0,l.join)(null!==(o=null===d||void 0===d?void 0:d.prefix)&&void 0!==o?o:null===m||void 0===m?void 0:m.prefix,V),x="".concat(A,".").concat((0,p.n)(b));if(null!==d&&void 0!==d&&d.contentAddressed&&v.resources&&"json"===b.type){var M;const e=null!==(M=v.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===x})))&&void 0!==M?M:v.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===x}));if(e)return void(g[f]=e.resource.itemRelativeUrl)}const I=v.portalItem.resourceFromPath(x);(0,l.isBlobProtocol)(u)&&v.resources&&v.resources.pendingOperations.push((0,l.blobUrlToBlob)(u).then((e=>{I.path="".concat(A,".").concat((0,p.n)({type:"blob",blob:e})),g[f]=I.itemRelativeUrl})).catch((()=>{})));const N=null!==(c=null===d||void 0===d?void 0:d.compress)&&void 0!==c&&c;v.resources&&w((0,s.A)((0,s.A)({},e),{},{resource:I,content:b,compress:N,updates:v.resources.toAdd})),g[f]=I.itemRelativeUrl}function w(e){let{object:t,propertyName:i,updates:s,resource:n,content:r,compress:o}=e;s.push({resource:n,content:r,compress:o,finish:e=>{!function(e,t,i){"string"==typeof e[t]?e[t]=i.url:e[t].url=i.url}(t,i,e)}})}function _(e,t,i){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(i))}}},62315:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var s=i(35143),n=i(69098),r=i(73582),o=i(42553),l=i(30726),a=i(46053),c=i(21403),u=(i(81806),i(47249),i(85842)),d=i(40565),p=i(37546),h=i(19247);let y=class extends(n.A.ClonableMixin(o.A)){constructor(e){super(e),this.type="plane",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}equals(e){return this.heading===e.heading&&this.tilt===e.tilt&&(0,l.CM)(this.position,e.position)&&this.width===e.width&&this.height===e.height}};(0,s._)([(0,a.MZ)({readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),(0,s._)([(0,a.MZ)({type:h.default}),(0,p.P)()],y.prototype,"position",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,p.P)(),(0,c.w)((e=>r.ie.normalize((0,d.GB)(e),0,!0)))],y.prototype,"heading",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,p.P)(),(0,c.w)((e=>r.ie.normalize((0,d.GB)(e),0,!0)))],y.prototype,"tilt",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0}),(0,p.P)()],y.prototype,"width",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0}),(0,p.P)()],y.prototype,"height",void 0),y=(0,s._)([(0,u.$)("esri.analysis.SlicePlane")],y);const v=y},68479:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var s=i(35143),n=i(95085),r=i(62315),o=i(19276),l=i(3975),a=i(46053),c=(i(81806),i(76460),i(47249),i(85842));let u=class extends n.A{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new o.default}set excludedLayers(e){this._set("excludedLayers",(0,l.V)(e,this._get("excludedLayers")))}get requiredPropertiesForEditing(){var e;return[null===(e=this.shape)||void 0===e?void 0:e.position]}clear(){this.shape=null}};(0,s._)([(0,a.MZ)({type:["slice"]})],u.prototype,"type",void 0),(0,s._)([(0,a.MZ)()],u.prototype,"tiltEnabled",void 0),(0,s._)([(0,a.MZ)({types:{key:"type",base:null,typeMap:{plane:r.default},defaultKeyValue:"plane"}})],u.prototype,"shape",void 0),(0,s._)([(0,a.MZ)({cast:l.H,clonable:e=>e.slice()})],u.prototype,"excludedLayers",null),(0,s._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],u.prototype,"excludeGroundSurface",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],u.prototype,"requiredPropertiesForEditing",null),u=(0,s._)([(0,c.$)("esri.analysis.SliceAnalysis")],u);const d=u},73093:(e,t,i)=>{i.d(t,{n:()=>n});var s=i(90534);function n(e){return r[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,s.getPathExtension)(e);return a[t]||o}(e.url)}(e)]||l}const r={},o="text/plain",l=r[o],a={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in a)r[a[c]]=c}}]);
//# sourceMappingURL=11371.f87a45ff.chunk.js.map