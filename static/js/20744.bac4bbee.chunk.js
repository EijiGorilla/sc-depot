"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[20744,94131],{20744:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i,a=n(35143),r=(n(11265),n(46053)),s=(n(81806),n(76460),n(47249),n(85842)),o=n(25329),l=n(94131),d=n(98108),u=n(76099),h=n(63582),c=n(54761),g=n(39348);const _="esri-histogram",p={base:_,horizontalLayout:"".concat(_,"--horizontal"),verticalLayout:"".concat(_,"--vertical"),content:"".concat(_,"__content"),svg:"".concat(_,"__svg"),bar:"".concat(_,"__bar"),bars:"".concat(_,"__bars"),label:"".concat(_,"__label"),dataLines:"".concat(_,"__data-lines"),dataLinesSubgroup:"".concat(_,"__data-lines-subgroup"),dataLine:"".concat(_,"__data-line"),averageLabel:"".concat(_,"__average-label"),averageDataLine:"".concat(_,"__average-data-line"),averageSymbol:"".concat(_,"__average-symbol")};let b=i=class extends o.default{constructor(e,t){super(e,t),this._bgFillId="".concat(this.id,"-bg-fill"),this._containerNode=null,this._containerDimensions={width:0,height:0},this._defaultBarColor="#d8d8d8",this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.dataLineUpdatedFunction=null,this.messages=null,this.viewModel=new l.default}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get icon(){return"graph-histogram"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get state(){return this.viewModel.state}static fromHistogramResult(e){const{bins:t,maxValue:n,minValue:a}=e;return new i({bins:t,max:n,min:a})}render(){const{label:e,layout:t,state:n}=this,i=this.classes(p.base,d.D.widget,"horizontal"===t?p.horizontalLayout:p.verticalLayout,"disabled"===n?d.D.disabled:null);return(0,c.K)("div",{afterCreate:this._afterContainerNodeCreate,"aria-label":e,bind:this,class:i},"ready"===n?this._renderContent():null)}_renderContent(){if(!this._containerNode)return;const e=this._bgFillId,t="clip-path: url(#".concat(e,")");return(0,c.K)("div",{class:p.content},(0,c.K)("svg",{class:p.svg,xmlns:"http://www.w3.org/2000/svg"},(0,c.K)("defs",null,this._renderFillDefinition(e)),(0,c.K)("g",{style:t},this._renderBarsGroup()),this._renderLinesGroup()))}_renderBarsGroup(){return(0,c.K)("g",{class:this.classes(p.bars)},this._renderBars())}_renderBars(){const{layout:e,viewModel:{binRange:t,range:n}}=this;if(!t||!n)return;const i=t/n,{width:a,height:r}=this._containerDimensions;if(0===r&&0===a)return;if(0===r&&0!==a)return void this.scheduleRender();const[s,o]="vertical"===e?[r*i,a]:[r,a*i];return this._getBarDimensions(s,o).map(((e,t)=>{let[n,i]=e;return this._renderBar(t,n,i)}))}_renderBar(e,t,n){const{bins:i,layout:a,max:r,messages:s,viewModel:{range:o}}=this;if(!i||null==r)return;const{width:l,height:d}=this._containerDimensions,u=i.slice()[e],{count:h,maxValue:_,minValue:b}=u,v=r-_,[m,y]="vertical"===a?[0,v*(d/o)]:[l-n-v*(l/o),d-t],L=(0,g.V)(s.barLabel,{count:h,maxValue:_,minValue:b});return(0,c.K)("rect",{afterCreate:this._afterBarCreate,"aria-label":L,bind:this,class:p.bar,"data-index":e,fill:this._defaultBarColor,height:t,role:"img","shape-rendering":"crispEdges","stroke-width":"0",width:n,x:m,y:y})}_renderLinesGroup(){return(0,c.K)("g",{class:this.classes(p.dataLines)},this._renderAverageLine(),this._renderCustomLines())}_renderAverageLine(){const{average:e}=this;if(null==e)return;const t=[(0,c.K)("tspan",{class:this.classes(p.averageSymbol)},"x\u0304 "),(0,c.K)("tspan",{class:this.classes(p.averageLabel)},this.labelFormatFunction?this.labelFormatFunction(e,"average"):e)];return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup)},(0,c.K)("title",{key:"title"},e),this._renderLine(e,this.classes(p.averageDataLine)),this._renderLabel({label:t,value:e}))}_renderCustomLines(){var e;if(null!==(e=this.dataLines)&&void 0!==e&&e.length)return this.dataLines.map(((e,t)=>this._renderLineSubgroup(e,t)))}_renderLineSubgroup(e,t){const{value:n}=e;return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup),"data-index":t},(0,c.K)("title",{key:"title"},n),this._renderLine(n),this._renderLabel(e))}_renderLine(e,t){const[n,i,a,r]=this._getLinePosition(e);return(0,c.K)("line",{class:this.classes(p.dataLine,t),"shape-rendering":"crispEdges",x1:n,x2:i,y1:a,y2:r})}_renderLabel(e,t){const{label:n,value:i}=e,[a,r]=this._getLabelPosition(i);return(0,c.K)("text",{class:this.classes(p.label,t),"text-anchor":"end",transform:"horizontal"===this.layout?"rotate(270)":null,x:a,y:r-2},null!==n&&void 0!==n?n:"")}_renderFillDefinition(e){const{width:t,height:n}=this._containerDimensions;return(0,c.K)("clipPath",{id:e},(0,c.K)("rect",{height:n,width:t,x:"0",y:"0"}))}_afterContainerNodeCreate(e){this._containerNode=e,this.addHandles((0,u.EV)(e,(e=>{const{width:t,height:n}=e.contentRect;this._containerDimensions={width:t,height:n}})))}_getIndexFromElement(e){var t;const n=null===(t=e.dataset)||void 0===t?void 0:t.index,i=e.getAttribute("data-index");return null!=n?parseInt(n,10):null!=i?parseInt(i,10):null}_afterBarCreate(e){if(this.barCreatedFunction){var t;const n=null!==(t=this._getIndexFromElement(e))&&void 0!==t?t:-1;this.barCreatedFunction(n,e)}}_afterLinesSubgroupCreate(e){if(this.dataLineCreatedFunction){const t=this._getIndexFromElement(e),n=e.childNodes[1],i=e.childNodes[2]?e.childNodes[2]:null;this.dataLineCreatedFunction(n,i,t)}}_afterLinesSubgroupUpdate(e){if(this.dataLineUpdatedFunction){const t=this._getIndexFromElement(e),n=e.childNodes[1],i=e.childNodes[2]?e.childNodes[2]:null;this.dataLineUpdatedFunction(n,i,t)}}_getBarDimensions(e,t){const{bins:n,layout:i}=this,a=n?n.map((e=>e.count)):[],r=Math.max.apply(Math,a);return a.map((n=>"vertical"===i?[e/a.length,0!==r?n/r*t:0]:[0!==r?n/r*e:0,t/a.length]))}_getLinePosition(e){const{layout:t,min:n,viewModel:{range:i}}=this;if(null==n)return[0,0,0,0];const a=Math.round((e-n)/i*100)/100,{width:r,height:s}=this._containerDimensions,[o,l]=[a*r||1,s-a*s||1];return"vertical"===t?[0,"100%",l,l]:[o,o,"100%",0]}_getLabelPosition(e){const{layout:t,min:n,viewModel:{range:i}}=this;if(null==n)return[0,0];const a=Math.round((e-n)/i*100)/100,{width:r,height:s}=this._containerDimensions;return"vertical"===t?[r,s-a*s]:[0,a*r]}};(0,a._)([(0,r.MZ)()],b.prototype,"_bgFillId",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"_containerNode",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"_containerDimensions",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"_defaultBarColor",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"average",null),(0,a._)([(0,r.MZ)()],b.prototype,"barCreatedFunction",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"dataLines",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"dataLineCreatedFunction",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"dataLineUpdatedFunction",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"icon",null),(0,a._)([(0,r.MZ)()],b.prototype,"label",null),(0,a._)([(0,r.MZ)()],b.prototype,"labelFormatFunction",null),(0,a._)([(0,r.MZ)({value:"horizontal"})],b.prototype,"layout",null),(0,a._)([(0,r.MZ)()],b.prototype,"max",null),(0,a._)([(0,r.MZ)(),(0,h.G)("esri/widgets/Histogram/t9n/Histogram")],b.prototype,"messages",void 0),(0,a._)([(0,r.MZ)()],b.prototype,"min",null),(0,a._)([(0,r.MZ)({readOnly:!0})],b.prototype,"state",null),(0,a._)([(0,r.MZ)({type:l.default})],b.prototype,"viewModel",void 0),b=i=(0,a._)([(0,s.$)("esri.widgets.Histogram")],b);const v=b},94131:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(35143),a=n(91967),r=n(46053),s=(n(81806),n(76460),n(47249),n(85842));let o=class extends a.default{constructor(e){super(e),this.average=null,this.bins=null,this.max=null,this.min=null}get binRange(){const{bins:e}=this;return e&&e.length>1?e[e.length-1].maxValue-e[0].minValue:0}set labelFormatFunction(e){this._set("labelFormatFunction",e)}get range(){const{max:e,min:t}=this;return null!=e&&null!=t?e-t:0}get state(){const{bins:e,range:t}=this;return t>0&&null!==e&&void 0!==e&&e.length?"ready":"disabled"}};(0,i._)([(0,r.MZ)()],o.prototype,"average",void 0),(0,i._)([(0,r.MZ)()],o.prototype,"bins",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],o.prototype,"binRange",null),(0,i._)([(0,r.MZ)()],o.prototype,"labelFormatFunction",null),(0,i._)([(0,r.MZ)()],o.prototype,"max",void 0),(0,i._)([(0,r.MZ)()],o.prototype,"min",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],o.prototype,"range",null),(0,i._)([(0,r.MZ)({readOnly:!0})],o.prototype,"state",null),o=(0,i._)([(0,s.$)("esri.widgets.Histogram.HistogramViewModel")],o);const l=o}}]);
//# sourceMappingURL=20744.bac4bbee.chunk.js.map