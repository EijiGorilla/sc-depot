{"version":3,"file":"static/js/79743.bc2ad065.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Identifiable.js\";import i from\"../../../core/Promise.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,n)=>{let l=class extends(i.EsriPromiseMixin(r.IdentifiableMixin(t.EventedMixin(p)))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([s()],l.prototype,\"sublayer\",void 0),e([s()],l.prototype,\"parent\",void 0),e([s({readOnly:!0})],l.prototype,\"suspended\",null),e([s({type:Boolean,readOnly:!0})],l.prototype,\"updating\",null),e([s()],l.prototype,\"view\",void 0),e([s()],l.prototype,\"visible\",null),e([s()],l.prototype,\"fullOpacity\",null),l=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],l),l};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as o}from\"../support/symbolColorUtils.js\";var a;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(a||(a={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:a.Solid};case\"wire-frame\":return{mode:a.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:a.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,void(e.edgeMaterial=null);switch(r.mode){case a.Solid:return;case a.WireFrame:return e.color[3]=0,void(e.edgeMaterial=r.edgeMaterial);case a.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=o.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=s(e.edgeMaterial))}}function s(e){return null==e?null:(d.lastMaterial!==e&&(d.cachedMaterial=n(e),d.lastMaterial=e),d.cachedMaterial)}function n(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const d={cachedMaterial:null,lastMaterial:null};export{a as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as a}from\"../../../core/promiseUtils.js\";import{syncAndInitial as o,initial as n}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as f}from\"../../../layers/support/fieldUtils.js\";import g from\"../../../rest/support/Query.js\";import{isNumber as m}from\"../../../support/guards.js\";import{BuildingSublayerView3DMixin as F}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as b}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as _}from\"./II3SMeshView3D.js\";import{applyFilterMode as w}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as E}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as x}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as S}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as j,I3SQueryFeature as v}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as I}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as Q,getIndexCrs as q}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as R}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as L}from\"./support/TemporalSceneLayerView.js\";import V from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as U,getRequiredFields as A,getFetchPopupTemplate as C}from\"../../layers/support/popupUtils.js\";import{isInEffectiveScaleRange as H}from\"../../support/layerViewUtils.js\";import{TaskPriority as O}from\"../../support/Scheduler.js\";let D=class extends(L(R(b(F(V))))){constructor(){super(...arguments),this.type=\"building-component-sublayer-3d\",this.layerView=null,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&U(this.sublayer,this.layerView?.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>this.mergedFilter),(e=>{null!=e&&x.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new x({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)}),o),this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),n);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>this._i3sFilter?.sortedObjectIds),e),this._updatingHandles.add((()=>this._i3sFilter?.parsedWhereClause),e),this._updatingHandles.add((()=>this.getTimeFilterDependencies()),e),this._updatingHandles.add((()=>this.mergedFilter),e),this._updatingHandles.add((()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),n),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"!==this.sublayer.modelName&&this.layerView?this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=p.create(e,{fieldsIndex:this.sublayer.fieldsIndex})}catch(a){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+a),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return Q(l,this.sublayer.fields,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e)):[]}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",x.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return w(t,l)}catch(i){this.logError(i)}return w(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}_createLayerGraphic(e){return new r({attributes:e,layer:this.sublayer.layer,sourceLayer:this.sublayer})}canResume(){return super.canResume()&&H(this.i3slayer.effectiveScaleRange,this.view.scale)&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],o=[],n=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await A(n,C(this.sublayer,r)));l(r);const d=new Set;for(const i of e)f(u,i,d)?o.push(i):s.push(i);return 0===o.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(o,Array.from(d)).catch((e=>(a(e),o))).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?C(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new g(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}async queryObjectIds(e,r){return(await this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)).filter(m)}_ensureQueryEngine(){return this._queryEngine??=this._createQueryEngine(),this._queryEngine}_createQueryEngine(){const e=E(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new S({layerView:this,priority:O.FEATURE_QUERY_ENGINE,spatialIndex:new I({featureAdapter:new j({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e(new v(r,t,i))),r,_.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:q(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():g.from(e))}};e([u()],D.prototype,\"i3slayer\",null),e([u()],D.prototype,\"layerView\",void 0),e([u()],D.prototype,\"lodFactor\",null),e([u({readOnly:!0})],D.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],D.prototype,\"filter\",null),e([u()],D.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],D.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],D.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],D.prototype,\"availableFields\",null),D=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],D);const G=D;export{G as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Accessor.js\";import t from\"../../../core/Collection.js\";import{handlesGroup as s}from\"../../../core/handleUtils.js\";import i from\"../../../core/Logger.js\";import{getOrCreateMapValue as o}from\"../../../core/MapUtils.js\";import{abortMaybe as n}from\"../../../core/maybe.js\";import{isAbortError as l,allSettledValues as a,throwIfAborted as u,createResolver as p}from\"../../../core/promiseUtils.js\";import{watch as h,syncAndInitial as c}from\"../../../core/reactiveUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import{isQuery as g,isGraphic as f}from\"../../../support/guards.js\";import m from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as w}from\"./BuildingSublayerView3D.js\";import{LayerView3D as b}from\"./LayerView3D.js\";import{parseFilterMode as V}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as j}from\"./i3s/I3SUtil.js\";import{emptyHighlightHandle as C,normalizeHighlightTargetExceptQuery as _}from\"./support/highlightUtils.js\";import{LayerViewPerformanceInfo as S}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as v}from\"../support/updatingProperties.js\";import B from\"../../layers/BuildingSceneLayerView.js\";import{isInEffectiveScaleRange as L}from\"../../support/layerViewUtils.js\";const F=w(r);let M=class extends(b(B)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new t,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,t=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return t?t.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",V(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}get visibleAtCurrentScale(){return L(this.layer.effectiveScaleRange,this.view.scale)}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){j(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController=n(this._abortController)}_initializeSubLayerViews(e,r){const t=this,s=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const t=new F({sublayer:e,view:s,parent:r});this._initializeSubLayerViews(e.sublayers,t)}else\"mesh\"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const i=new m({sublayer:e,layerView:t,view:s,parent:r});this.sublayerViews.push(i);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(i);this._pendingWhenSublayerViews.delete(e)}this.addHandles([h((()=>i.updating),(()=>this.notifyChange(\"updating\")),c),h((()=>i.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),c)])})).catch((r=>{l(r)||i.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})))}))}getGraphicFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorTarget(e);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const t=P(e,(e=>e.sourceLayer)),s=[];for(const[o,n]of t){const e=this._findComponent(o);null!=e&&s.push(e.fetchPopupFeaturesFromGraphics(n,r))}const i=await a(s);return u(r),i.flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const t=this._pendingWhenSublayerViews.get(e),s=p();return t?t.push(s):this._pendingWhenSublayerViews.set(e,[s]),s.promise}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e,r){if(g(e))return C;const t=_(e);if(0===t.length)return C;if(f(t[0])){const e=t,i=new Map;for(const r of e)o(i,r.sourceLayer,(()=>[])).push(r);const n=[];return this.sublayerViews.forEach((e=>{const t=i.get(e.sublayer);t&&n.push(e.highlight(t,r))})),s(n)}return C}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}get performanceInfo(){return new S(this.usedMemory)}};function P(e,r){const t=new Map,s=e.length;for(let i=0;i<s;i++){const s=e[i],o=r(s,i,e),n=t.get(o);n?n.push(s):t.set(o,[s])}return t}e([y()],M.prototype,\"sublayerViews\",void 0),e([y({readOnly:!0})],M.prototype,\"filterExpression\",null),e([y({readOnly:!0})],M.prototype,\"filterExpressions\",null),e([y(v)],M.prototype,\"updatingProgress\",void 0),e([y({readOnly:!0,dependsOn:[]})],M.prototype,\"updatingProgressValue\",null),e([y({readOnly:!0})],M.prototype,\"visibleAtCurrentScale\",null),M=e([d(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],M);const E=M;export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n"],"names":["o","e","constructor","super","arguments","this","sublayer","updating","suspended","availableFields","filter","r","Error","queryFeatures","queryObjectIds","queryFeatureCount","createQuery","queryExtent","highlight","t","prototype","p","n","l","i","EsriPromiseMixin","IdentifiableMixin","EventedMixin","parent","view","initialize","canResume","isUpdating","visible","_this$sublayer","_overrideIfSome","fullOpacity","_this$sublayer2","_this$parent","opacity","_this$parent2","_this$view","ready","s","readOnly","type","Boolean","a","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","c","color","colorMixMode","Replace","castShadows","pickable","d","lastMaterial","cachedMaterial","_objectSpread","D","L","R","b","F","V","layerView","_elevationContext","_isIntegratedMesh","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerUid","layer","uid","sublayerUid","layerId","id","sublayerId","layerPopupEnabledAndHasTemplate","_this$layerView","popupEnabled","U","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","x","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","fieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","renderer","definitionExpressionFields","filterExpressionFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","_this$_i3sFilter","sortedObjectIds","_this$_i3sFilter2","parsedWhereClause","getTimeFilterDependencies","_this$_i3sFilter3","_this$filter","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","addResolvingPromise","lodFactor","qualitySettings","sceneService","object","modelName","filterExpressions","map","_ref","create","getLogger","error","isStandardized","fieldNames","Q","fields","missingFields","length","concat","join","_get","_set","_this$_i3sFilter$upda","_this$_i3sFilter4","_setSymbologyOverride","testFeature","w","y","reduce","_ref2","Array","outFields","_createLayerGraphic","attributes","sourceLayer","H","effectiveScaleRange","scale","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","associatedLayer","load","u","A","C","Set","f","push","catch","warn","whenGraphicAttributes","from","then","getRequiredFields","getFilters","_this$_i3sFilter5","addFilters","crsIndex","_collection","returnGeometry","outSpatialReference","spatialReference","g","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","signal","executeQueryForCount","executeQuery","features","executeQueryForIds","m","_this$_queryEngine","_createQueryEngine","E","renderSpatialReference","S","priority","O","FEATURE_QUERY_ENGINE","spatialIndex","I","featureAdapter","j","objectIdField","attributeStorageInfo","getFeatureExtent","forAllFeatures","_forAllFeatures","v","_","QUERYABLE","sourceSpatialReference","q","viewSpatialReference","_addDefinitionExpressionToQuery","h","String","G","M","B","sublayerViews","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","Map","ignoresMemoryFactor","filterExpression","_r$filterBlocks","activeFilterId","filters","find","filterBlocks","toArray","_e$filterExpression","updatingProgressValue","updatingProgress","visibleAtCurrentScale","some","viewingMode","_initializeSubLayerViews","sublayers","destroy","forEach","isEmpty","geometryType","get","resolve","delete","addHandles","notifyChange","url","getGraphicFromIntersectorTarget","items","set","P","_findComponent","flat","whenGraphicBounds","Promise","reject","getAABBFromIntersectorTarget","whenSublayerView","promise","usedMemory","unloadedMemory","performanceInfo","dependsOn"],"sourceRoot":""}