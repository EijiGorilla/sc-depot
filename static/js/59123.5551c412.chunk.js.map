{"version":3,"file":"static/js/59123.5551c412.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/draw/MultipointDrawAction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/Logger.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import\"../../core/Error.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import o from\"./DrawAction.js\";import{VertexRemoveEvent as s,VertexAddEvent as r,CursorUpdateEvent as n,DrawCompleteEvent as a}from\"./input/DrawEvents.js\";import{ViewEventPriorities as d}from\"../input/InputManager.js\";import{sketchKeys as p}from\"../interactive/keybindings.js\";import{createScreenPointFromEvent as h}from\"../support/screenUtils.js\";const l=Symbol(\"view-handles\"),c=Symbol(\"undo-redo-handles\");let _=class extends o{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit(\"destroy\")}undo(){super.undo(),this.notifyChange(\"vertices\")}redo(){super.redo(),this.notifyChange(\"vertices\")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this.addHandles([this.view.on(\"click\",(e=>{e.stopPropagation()}),d.TOOL),this.view.on(\"pointer-down\",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=h(e),\"touch\"===e.pointerType&&this._updateCursor())}),d.TOOL),this.view.on(\"pointer-move\",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=h(e),\"touch\"!==e.pointerType&&this._updateCursor()}),d.TOOL),this.view.on(\"pointer-drag\",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)}),d.TOOL),this.view.on(\"pointer-up\",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t=\"touch\"===e.pointerType;this._updateCursor(t)}}),d.TOOL),this.view.on(\"drag\",[\"Shift\"],(e=>{e.stopPropagation()}),d.TOOL),this.view.on(\"double-click\",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),d.TOOL),this.view.on(\"double-click\",[\"Control\"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),d.TOOL),this.view.on(\"key-down\",(e=>{const{key:t,repeat:i}=e;t===p.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==p.complete||i?t!==p.undo||this.interactiveUndoDisabled||i?t!==p.redo||this.interactiveUndoDisabled||i?t!==p.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),d.TOOL),this.view.on(\"key-up\",(e=>{e.key===p.pan&&e.stopPropagation()}),d.TOOL)],l)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this.addHandles([this._editGeometryOperations.on(\"vertex-remove\",(e=>{if(this.notifyChange(\"vertices\"),\"undo\"===e.operation){const t=[...this._committedVertices];null!=this._stagedVertex&&t.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit(\"undo\",new s(this.view,e.vertices[0].index,t))}})),this._editGeometryOperations.on(\"vertex-add\",(e=>{if(this.notifyChange(\"vertices\"),\"apply\"===e.operation){const e=this._committedVertices.length-1,t=new r(this.view,e,this.vertices);this.emit(\"vertex-add\",t),t.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(\"redo\"===e.operation){const t=[...this._committedVertices];null!=this._stagedVertex&&t.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit(\"redo\",new r(this.view,e.vertices[0].index,t))}}))],c)}_removeViewHandles(){this.removeHandles(l)}_removeUndoRedoHandles(){this.removeHandles(c)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||this._editGeometryOperations.appendVertex(t)}_updateCursor(e=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);null==t||e||this._pushCursorVertex(t.vertex,(()=>this.emit(\"cursor-update\",new n(this.view,this._activeComponent.vertices.length,this.vertices,null!=this._stagedVertex?new i(this._stagedVertex):null))))}_completeDrawing(){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),null!=this._snappingManager&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const e=new a(this.vertices);this.emit(\"draw-complete\",e),e.defaultPrevented||this._removeViewHandles()}};_=e([t(\"esri.views.draw.MultipointDrawAction\")],_);const u=_;export{u as default};\n"],"names":["l","Symbol","c","_","o","constructor","e","super","this","_popVertexOnPointerMove","_addVertexOnPointerUp","initialize","_addViewHandles","_addUndoRedoHandles","destroy","_removeViewHandles","_removeUndoRedoHandles","emit","undo","notifyChange","redo","complete","_completeDrawing","addHandles","view","on","stopPropagation","d","TOOL","_shouldHandlePointerEvent","_abortSnapping","_activePointerId","pointerId","_cursorScreenPoint","h","pointerType","_updateCursor","_vertexAddHandler","t","_drawCompleteHandler","key","repeat","i","p","vertexAdd","interactiveUndoDisabled","pan","_editGeometryOperations","operation","_committedVertices","_stagedVertex","push","_coordinateHelper","pointToArray","s","vertices","index","length","r","defaultPrevented","removeHandles","_addVertex","arrayToVector","_isDuplicateOfLastVertex","appendVertex","arguments","undefined","_popCursorVertex","getCoordsAndPointFromScreenPoint","_pushCursorVertex","vertex","n","_activeComponent","_snappingManager","doneSnapping","a","u"],"sourceRoot":""}