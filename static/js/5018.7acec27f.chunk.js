"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[5018],{5018:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var s,n=i(89379),a=i(35143),o=i(69539),l=i(46053),r=i(21403),d=(i(81806),i(47249),i(85842)),u=i(69205),h=i(63040),m=i(29632),p=i(51313),c=i(11815),v=i(7095),g=i(98108),y=i(76099),f=i(63582),_=i(54761);const b="esri-binary-color-size-slider",x={base:b,rampElement:"".concat(b,"__ramp"),sliderContainer:"".concat(b,"__slider-container"),histogramContainer:"".concat(b,"__histogram-container"),zoomCapTop:"".concat(b,"__zoom-cap-top"),zoomCapBottom:"".concat(b,"__zoom-cap-bottom"),zoomCapLine:"".concat(b,"__zoom-cap-line"),zoomCapMask:"".concat(b,"__zoom-cap-mask"),zoomCapUnderline:"".concat(b,"__zoom-cap-underline"),primaryHandle:"".concat(b,"--primary-handle"),track:"".concat(b,"--interactive-track")},M={trackBackgroundColor:new o.default([224,224,224]),trackAboveFillColor:new o.default([149,149,149]),trackBelowFillColor:new o.default([149,149,149])};let S=s=class extends p.default{constructor(e,t){super(e,t),this._minRampFillWidth=.2,this._rampNode=null,this.messages=null,this.style=(0,n.A)({},M),this.viewModel=new c.default,this._rampFillId="".concat(this.id,"-linear-gradient")}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get persistSizeRangeEnabled(){return this.viewModel.persistSizeRangeEnabled}set persistSizeRangeEnabled(e){this.viewModel.persistSizeRangeEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}castStyle(e){return(0,n.A)((0,n.A)({},M),e)}static fromRendererResult(e,t){const{size:{visualVariables:i},statistics:n}=e,{avg:a,stddev:o}=n,l=i[0].stops,[r,d]=(0,u.N)(e.renderer.authoringInfo),h=C(e.renderer.classBreakInfos);return new s({max:d,min:r,stops:null!==l&&void 0!==l?l:void 0,histogramConfig:{average:null!==a&&void 0!==a?a:void 0,standardDeviation:null!==o&&void 0!==o?o:void 0,bins:t?t.bins:[]},style:h,handlesSyncedToPrimary:!0,persistSizeRangeEnabled:!0})}updateFromRendererResult(e,t){const{size:{visualVariables:i},statistics:s}=e,{avg:n,stddev:a}=s,o=i[0].stops,[l,r]=(0,u.N)(e.renderer.authoringInfo),d=C(e.renderer.classBreakInfos);this.set({max:r,min:l,stops:o,histogramConfig:{average:n,standardDeviation:a,bins:t?t.bins:[]},style:d,handlesSyncedToPrimary:!0,persistSizeRangeEnabled:!0})}updateRenderer(e){var t,i,s;if("univariate-color-size"!==(null===(t=e.authoringInfo)||void 0===t?void 0:t.type)||"above-and-below"!==(null===(i=e.authoringInfo)||void 0===i?void 0:i.univariateTheme))return console.error("Input renderer must be a univariate renderer with an above-and-below theme."),null;const n=e.clone(),a=null===(s=n.visualVariables)||void 0===s?void 0:s.find((e=>"size"===e.type&&"outline"!==e.target&&e.stops)),{stops:o}=this;if(!n.visualVariables||!a||!o)return console.error("No size stops available."),null;const l=n.visualVariables.indexOf(a);n.visualVariables.splice(l,1),a.stops=o,n.visualVariables.push(a);const r=o[5===o.length?2:1].value;return n.classBreakInfos[0].maxValue=r,n.classBreakInfos[1].minValue=r,n}updateFromVisualVariable(e){if(!e)return;const{maxDataValue:t,minDataValue:i,stops:s}=e;if(s)this.stops=s;else{const[s,n]=(0,v.getSizesFromVariable)(e);this.stops=[new h.default({value:null!==i&&void 0!==i?i:void 0,size:n}),new h.default({value:null!==t&&void 0!==t?t:void 0,size:s})]}}render(){const{label:e,state:t,viewModel:{primaryHandleEnabled:i},visibleElements:s}=this,n="disabled"===t,a=this.classes(x.base,g.D.widget,g.D.panel,{[g.D.disabled]:n,[x.primaryHandle]:i,[x.track]:!!s.interactiveTrack});return(0,_.K)("div",{"aria-label":e,class:a},n?null:this.renderContent(this._renderRamp(),x.sliderContainer,x.histogramContainer))}_renderRamp(){const{style:{trackBackgroundColor:e},zoomOptions:t}=this;return(0,_.K)("div",{afterCreate:y.cA,bind:this,class:x.rampElement,"data-node-ref":"_rampNode"},(0,_.K)("svg",{key:"ramp-svg",xmlns:"http://www.w3.org/2000/svg"},(0,_.K)("rect",{fill:(0,v.getFillFromColor)(e),height:"100%",width:"100%",x:"0",y:"0"}),this._renderPrimaryRamp(),this._renderPath()),t?this.renderZoomCaps():null)}_renderPrimaryRamp(){const{_rampFillId:e,style:{trackAboveFillColor:t,trackBelowFillColor:i},viewModel:s}=this;return[(0,_.K)("defs",null,this.renderRampFillDefinition(e,s.getGradientStopInfo(t,i)))]}_renderPath(){if(!this._rampNode)return;const{offsetHeight:e=0,offsetWidth:t=0}=this._rampNode;if(null==e||null==t)return;const{stops:i,viewModel:{max:s,min:n},_rampFillId:a,_minRampFillWidth:o}=this,l=(0,v.getDynamicPathForSizeStops)({max:s,min:n,pathHeight:e,pathWidth:t,stops:i,padding:o});return(0,_.K)("path",{d:l,fill:"url(#".concat(a,")")})}};(0,a._)([(0,l.MZ)()],S.prototype,"handlesSyncedToPrimary",null),(0,a._)([(0,l.MZ)()],S.prototype,"label",null),(0,a._)([(0,l.MZ)(),(0,f.G)("esri/widgets/smartMapping/SizeSlider/t9n/SizeSlider")],S.prototype,"messages",void 0),(0,a._)([(0,l.MZ)()],S.prototype,"persistSizeRangeEnabled",null),(0,a._)([(0,l.MZ)()],S.prototype,"stops",null),(0,a._)([(0,l.MZ)()],S.prototype,"style",void 0),(0,a._)([(0,r.w)("style")],S.prototype,"castStyle",null),(0,a._)([(0,l.MZ)({type:c.default})],S.prototype,"viewModel",void 0),S=s=(0,a._)([(0,d.$)("esri.widgets.smartMapping.BinaryColorSizeSlider")],S);const z=S;function C(e){var t,i;if(e.length<=1)return{};const s=e=>{if("cim"===e.type)return(0,m.getCIMSymbolColor)(e);if(e.symbolLayers){var t,i;return null===(i=(null===(t=e.symbolLayers)||void 0===t?void 0:t.at(0)).material)||void 0===i?void 0:i.color}return e.color};return{trackBelowFillColor:null!==(t=s(e[0].symbol))&&void 0!==t?t:void 0,trackAboveFillColor:null!==(i=s(e[1].symbol))&&void 0!==i?i:void 0}}},11815:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var s=i(35143),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),o=i(71973);let l=class extends o.default{constructor(e){super(e),this.primaryHandleEnabled=!0}getGradientStopInfo(e,t){var i;if(null===(i=this.stops)||void 0===i||!i.length)return[];const{min:s,max:n,stops:a}=this,o=[t,t,t,e,e],l=[],r=n-s;return a.forEach(((e,t)=>{const i=o[t],s=(n-e.value)/r,d=0===t?s:(n-a[t-1].value)/r;l.push({offset:d,color:i},{offset:s,color:i})})),l}};(0,s._)([(0,n.MZ)({readOnly:!0})],l.prototype,"primaryHandleEnabled",void 0),l=(0,s._)([(0,a.$)("esri.widgets.smartMapping.BinaryColorSizeSlider.BinaryColorSizeSliderViewModel")],l);const r=l},51576:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var s=i(35143),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),o=i(77200);let l=class extends o.default{constructor(e){super(e),this.handlesSyncedToPrimary=!0}set primaryHandleEnabled(e){this._set("primaryHandleEnabled",e)}get primaryHandleEnabled(){const{stops:e}=this;if(null===e||void 0===e||!e.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")}get values(){const{primaryHandleEnabled:e,stops:t}=this;if(null===t||void 0===t||!t.length||t.length<2)return[];const i=this.getValuesFromStops();return e?3===i.length?[i[0],i[1],i[2]]:[i[0],i[2],i[4]]:[i[0],i[i.length-1]]}setValue(e,t){const{max:i,min:s,values:n}=this,a=n[e];if(isNaN(t)||a===t||t>i||t<s)return;t=this.toPrecision(t);const o=this.primaryHandleEnabled&&this.handlesSyncedToPrimary;if(o){const i=n.slice().sort(((e,t)=>e>t?1:-1))[1];(0===e&&t>i||2===e&&t<i)&&(t=i)}const l=this.getStopChanges(e,t);this.updateStops(l),o?this.notifyChange("values"):(n[e]=t,this._set("values",[...n])),this.notifyChange("labels")}getStopIndexFromValueIndex(e){const{handlesSyncedToPrimary:t,primaryHandleEnabled:i}=this;if(i){const{values:i}=this,s=i[e];if(t)return e;const n=i.slice().sort(((e,t)=>e>t?1:-1)),a=n.indexOf(s);return i.some(((e,t)=>e===s&&t!==a))?n.lastIndexOf(s):a}return super.getStopIndexFromValueIndex(e)}getStopChanges(e,t){return this.primaryHandleEnabled?this._getStopChanges(e,t):super.getStopChanges(e,t)}_getStopChanges(e,t){const{max:i,min:s,stops:n,values:a}=this,o=this.handlesSyncedToPrimary&&1===e,l=a[e],r=a.slice();o||(r[e]=t);const d=r.sort(((e,t)=>e>t?1:-1)),u=o?t:d[1],h=t-l,m=o?this.toPrecision(Math.max(Math.min(d[0]+h,i),s)):d[0],p=o?this.toPrecision(Math.max(Math.min(d[2]+h,i),s)):d[2];return 5===n.length?[{index:0,value:m},{index:1,value:this.toPrecision((u+m)/2)},{index:2,value:u},{index:3,value:this.toPrecision((u+p)/2)},{index:4,value:p}]:[{index:0,value:m},{index:1,value:u},{index:2,value:p}]}};(0,s._)([(0,n.MZ)()],l.prototype,"handlesSyncedToPrimary",void 0),(0,s._)([(0,n.MZ)()],l.prototype,"primaryHandleEnabled",null),(0,s._)([(0,n.MZ)({dependsOn:["handlesSyncedToPrimary"],readOnly:!0})],l.prototype,"values",null),l=(0,s._)([(0,a.$)("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],l);const r=l},69205:(e,t,i)=>{function s(e){return n(null===e||void 0===e?void 0:e.visualVariables[0])}function n(e){var t,i;return[null!==(t=null===e||void 0===e?void 0:e.minSliderValue)&&void 0!==t?t:0,null!==(i=null===e||void 0===e?void 0:e.maxSliderValue)&&void 0!==i?i:0]}i.d(t,{N:()=>s,n:()=>n})},71973:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var s=i(35143),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),o=i(51576);let l=class extends o.default{constructor(e){super(e),this.persistSizeRangeEnabled=!1}updateStops(e){const{primaryHandleEnabled:t,persistSizeRangeEnabled:i,stops:s}=this,n=this.getValuesFromStops();if(null!==n&&void 0!==n&&n.length&&(e.sort(((e,t)=>e.value>t.value?1:-1)).forEach((e=>{n[e.index]=e.value})),s.forEach(((e,t)=>e.value=n[t])),t&&i)){const{stops:e}=this,t=this.getValuesFromStops(),i=e.map((e=>e.size)),s=Math.max(...i),n=Math.min(...i),a=Math.max(...t),o=Math.min(...t),l=e[5===e.length?2:1].value,r=Math.abs(a-l),d=Math.abs(o-l),u=r>d?r:d,h=s-n;if(0===u)return;e.forEach((e=>{e.size=Math.abs(e.value-l)/u*h+n}))}}};(0,s._)([(0,n.MZ)()],l.prototype,"persistSizeRangeEnabled",void 0),l=(0,s._)([(0,a.$)("esri.widgets.smartMapping.SizeSlider.SizeSliderViewModel")],l);const r=l},77200:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=i(89379),n=i(35143),a=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),l=i(6515),r=i(7095);let d=class extends l.default{constructor(e){super(e),this._initialStopValues=[],this._max=null,this._min=null,this.hasTimeData=!1,this.inputFormatFunction=(e,t)=>"max"===t?this.getUnzoomedMax().toString():"min"===t?this.getUnzoomedMin().toString():e.toString(),this.inputParseFunction=null,this.labelFormatFunction=e=>{if(this.hasTimeData)return(0,r.formatDateLabel)(e);const{max:t,min:i,precision:s}=this,n=t-i>10?2:s;return(0,r.formatNumberLabel)(parseFloat(e.toFixed(n)))},this.thumbsConstrained=!1,this.zoomingEnabled=!0}set breaks(e){this._set("breaks",e),this.notifyChange("max"),this.notifyChange("min")}set stops(e){if(null!==e&&void 0!==e&&e.length){const{max:t,min:i}=this,n=this.getValuesFromStops(e),a={};null!=i&&n.some((e=>e<i))&&(a.min=Math.min(...n)),null!=t&&n.some((e=>e>t))&&(a.max=Math.max(...n)),this.set((0,s.A)({},a)),this._initialStopValues=n}else this._initialStopValues=null;this._set("stops",e||null),this.notifyChange("values")}get labels(){const{values:e}=this,t=e&&e.length?e.map(((e,t)=>this.getLabelForValue(e,"value",t))):[],i=this.getUnzoomedMax(),s=this.getUnzoomedMin();return{max:this.getLabelForValue(i,"max"),min:this.getLabelForValue(s,"min"),values:t}}get max(){const{breaks:e}=this;return null!==e&&void 0!==e&&e.length?e[e.length-1].max:this.max}set max(e){const{zoomOptions:t}=this;if(null!=(null===t||void 0===t?void 0:t.max)){const i=this.values;let s=t.max;if(e<s&&(s=e,t.max=e),i&&i.length)for(let t=0;t<i.length;t++)e<i[t]&&this.setValue(t,e);this._storeZoomMax(s,e)}else this.updateBreakMax(e),this.setMax(e);this.notifyChange("labels")}get min(){const{breaks:e}=this;return null!==e&&void 0!==e&&e.length?e[0].min:this.min}set min(e){const{zoomOptions:t}=this;if(null!=(null===t||void 0===t?void 0:t.min)){const i=this.values;let s=t.min;if(e>s&&(s=e,t.min=e),i&&i.length)for(let t=0;t<i.length;t++)e>i[t]&&this.setValue(t,e);this._storeZoomMin(s,e)}else this.updateBreakMin(e),this.setMin(e);this.notifyChange("labels")}get state(){const{max:e,min:t,values:i}=this;return null!=e&&null!=t&&i.length>0?"ready":"disabled"}get values(){const{breaks:e,stops:t}=this;if(!e&&!t)return[];if(null!==e&&void 0!==e&&e.length){const t=e.map((e=>e.max));return t.pop(),t}if((null===t||void 0===t?void 0:t.length)<2)return[];const i=this.getValuesFromStops();return[i[0],i[i.length-1]]}set zoomOptions(e){const{zoomingEnabled:t,zoomOptions:i}=this;if(t){if(i){const t=null!=this._max?this._max:this.max,i=null!=this._min?this._min:this.min;if(e){const{max:s,min:n}=e,a=null!=s,o=null!=n,l=o?e.min:i,r=o?i:null,d=a?e.max:t,u=a?t:null;this._storeZoomMin(l,r),this._storeZoomMax(d,u)}else this.setMax(t),this.setMin(i),this._min=null,this._max=null}else if(e){const{max:t,min:i}=e;null!=i&&this._storeZoomMin(e.min,this.min),null!=t&&this._storeZoomMax(e.max,this.max)}this._set("zoomOptions",e),this.notifyChange("max"),this.notifyChange("min")}}getStopIndexFromValueIndex(e){const{stops:t}=this,i=this.values[e];return 0===e?i<=this.values[1]?0:t.length-1:1===e?this.values[0]>=i?0:t.length-1:null}getStopChanges(e,t){const i=this.stops,s=this.getStopIndexFromValueIndex(e),n=this.getValuesFromStops();n[s]=t;const[a,o]=[n[0],n[n.length-1]].sort(((e,t)=>e>t?1:-1)),l=o-a,r=i.length-1;return n.map(((e,t)=>({index:t,value:this.toPrecision(a+t*l/r)})))}setValue(e,t){var i;const{max:s,min:n,values:a}=this,o=a[e];if(isNaN(t)||o===t||t>s||t<n)return;a[e]=this.toPrecision(t),this._set("values",[...a]);const l=a.slice().sort(((e,t)=>e>t?1:-1)),d=l[0],u=l[l.length-1],h=(0,r.getStopChanges)(d,u,null!==(i=this._initialStopValues)&&void 0!==i?i:[]);this.updateStops(h),this.updateBreaks(),this.notifyChange("labels")}getValuesFromStops(e){const t=e||this.stops;return null===t||void 0===t?void 0:t.map((e=>e.hasOwnProperty("ratio")?e.ratio:e.value))}updateBreaks(){const{breaks:e,values:t}=this;(null===e||void 0===e?void 0:e.length)&&t.slice().sort(((e,t)=>e>t?1:-1)).forEach(((t,i)=>{e[i].max=t,null!=e[i+1]&&(e[i+1].min=t)}))}updateBreakMax(e){const{breaks:t,max:i,min:s}=this;!isNaN(e)&&i!==e&&null!=s&&e>s&&(null===t||void 0===t?void 0:t.length)&&(t[t.length-1].max=e)}updateBreakMin(e){const{breaks:t,max:i,min:s}=this;!isNaN(e)&&s!==e&&null!=i&&e<i&&(null===t||void 0===t?void 0:t.length)&&(t[0].min=e)}updateStops(e){const{stops:t}=this,i=this.getValuesFromStops();if(null!==i&&void 0!==i&&i.length){for(const t of e)i[t.index]=t.value;t.forEach(((e,t)=>{e.hasOwnProperty("ratio")?e.ratio=i[t]:e.value=i[t]}))}}getUnzoomedMax(){return this.zoomOptions&&null!=this._max?this._max:this.max}getUnzoomedMin(){return this.zoomOptions&&null!=this._min?this._min:this.min}_storeZoomMax(e,t){this._max=t,this.setMax(e)}_storeZoomMin(e,t){this._min=t,this.setMin(e)}};(0,n._)([(0,a.MZ)()],d.prototype,"breaks",null),(0,n._)([(0,a.MZ)()],d.prototype,"stops",null),(0,n._)([(0,a.MZ)()],d.prototype,"hasTimeData",void 0),(0,n._)([(0,a.MZ)()],d.prototype,"inputFormatFunction",void 0),(0,n._)([(0,a.MZ)()],d.prototype,"inputParseFunction",void 0),(0,n._)([(0,a.MZ)()],d.prototype,"labelFormatFunction",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],d.prototype,"labels",null),(0,n._)([(0,a.MZ)()],d.prototype,"max",null),(0,n._)([(0,a.MZ)()],d.prototype,"min",null),(0,n._)([(0,a.MZ)({readOnly:!0})],d.prototype,"state",null),(0,n._)([(0,a.MZ)()],d.prototype,"thumbsConstrained",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],d.prototype,"values",null),(0,n._)([(0,a.MZ)()],d.prototype,"zoomingEnabled",void 0),(0,n._)([(0,a.MZ)()],d.prototype,"zoomOptions",null),d=(0,n._)([(0,o.$)("esri.widgets.smartMapping.SmartMappingSliderViewModel")],d);const u=d}}]);
//# sourceMappingURL=5018.7acec27f.chunk.js.map