"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[8380],{25213:(e,t,a)=>{a.d(t,{E9:()=>f,Tw:()=>v,X6:()=>m});var i=a(89379),l=a(3825),n=a(76797),r=a(19247),o=a(13312),s=a(41882),u=a(49653),d=a(54994),c=a(77725);async function p(e,t,a){var p,v,m,f,h,y,g,b,x,w;const R=(0,d.Dl)(e),{rasterFunction:S,sourceJSON:M}=t||{},V=S?JSON.stringify(S.rasterFunctionDefinition||S):null,D=(0,d.lF)((0,i.A)((0,i.A)({},R.query),{},{renderingRule:V,f:"json"})),T=(0,d.jV)(D,a);e=R.path;const I=M||await(0,l.default)(e,T).then((e=>e.data)),N=I.hasRasterAttributeTable?(0,l.default)("".concat(e,"/rasterAttributeTable"),T):null,j=I.hasColormap?(0,l.default)("".concat(e,"/colormap"),T):null,P=I.hasHistograms?(0,l.default)("".concat(e,"/histograms"),T):null,_=I.currentVersion>=10.3?(0,l.default)("".concat(e,"/keyProperties"),T):null,k=I.hasMultidimensions?(0,l.default)("".concat(e,"/multidimensionalInfo"),T):null,C=await Promise.allSettled([N,j,P,_,k]);let A=null;if(I.minValues&&I.minValues.length===I.bandCount){A=[];for(let e=0;e<I.minValues.length;e++)A.push({min:I.minValues[e],max:I.maxValues[e],avg:I.meanValues[e],stddev:I.stdvValues[e]})}const O=n.default.fromJSON(I.extent),J=Math.ceil(O.width/I.pixelSizeX-.1),Z=Math.ceil(O.height/I.pixelSizeY-.1),z=o.default.fromJSON(I.spatialReference||I.extent.spatialReference),F="fulfilled"===C[0].status?null===(p=C[0].value)||void 0===p?void 0:p.data:null,q=null!==F&&void 0!==F&&null!==(v=F.features)&&void 0!==v&&v.length?c.default.fromJSON(F):null,H="fulfilled"===C[1].status?null===(m=C[1].value)||void 0===m?void 0:m.data.colormap:null,E=null!==H&&void 0!==H&&H.length?H:null,L="fulfilled"===C[2].status?null===(f=C[2].value)||void 0===f?void 0:f.data.histograms:null,X=null!==L&&void 0!==L&&null!==(h=L[0])&&void 0!==h&&null!==(h=h.counts)&&void 0!==h&&h.length?L:null,B="fulfilled"===C[3].status&&null!==(y=null===(g=C[3].value)||void 0===g?void 0:g.data)&&void 0!==y?y:{},W="fulfilled"===C[4].status?null===(b=C[4].value)||void 0===b?void 0:b.data.multidimensionalInfo:null,Y=null!==W&&void 0!==W&&null!==(x=W.variables)&&void 0!==x&&x.length?W:null;Y&&Y.variables.forEach((e=>{var t,a;null!==(t=e.statistics)&&void 0!==t&&t.length&&e.statistics.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),null===(a=e.dimensions)||void 0===a||a.forEach((e=>{"StdTime"!==e.name||e.recurring||e.unit||(e.unit="ISO8601")}))}));const{defaultVariable:$,serviceDataType:G}=I;$&&$!==B.DefaultVariable&&(B.DefaultVariable=$),(null===G||void 0===G?void 0:G.includes("esriImageServiceDataTypeVector"))&&!G.includes(B.DataType)&&(B.DataType=G.replace("esriImageServiceDataType",""));let K=I.noDataValue;(null===(w=I.noDataValues)||void 0===w?void 0:w.length)&&I.noDataValues.some((e=>e!==K))&&(K=I.noDataValues);const Q=I.transposeInfo?new u.A({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:"lerc",origin:new r.default({x:I.extent.xmin,y:I.extent.ymax,spatialReference:z}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(J,Z))/Math.LN2-8)),transposeInfo:I.transposeInfo}):void 0;return new s.default({width:J,height:Z,bandCount:I.bandCount,extent:n.default.fromJSON(I.extent),spatialReference:z,pixelSize:new r.default({x:I.pixelSizeX,y:I.pixelSizeY,spatialReference:z}),pixelType:I.pixelType.toLowerCase(),statistics:A,attributeTable:q,colormap:E,histograms:X,keyProperties:B,noDataValue:K,multidimensionalInfo:Y,storageInfo:Q})}function v(e,t,a){return p(e,{sourceJSON:t},a)}function m(e,t,a){return p(e,{rasterFunction:t},a)}function f(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}},26324:(e,t,a)=>{a.d(t,{H:()=>o});var i=a(35143),l=a(46053),n=(a(81806),a(76460),a(47249),a(85842)),r=a(45378);const o=e=>{let t=class extends e{constructor(){super(...arguments),this.activePresetRendererName=null,this.presetRenderers=null}};return(0,i._)([(0,l.MZ)({type:String,json:{name:"layerDefinition.activePresetRendererName",write:{allowNull:!0}}})],t.prototype,"activePresetRendererName",void 0),(0,i._)([(0,l.MZ)({type:[r.default],json:{name:"layerDefinition.presetRenderers",write:!0}})],t.prototype,"presetRenderers",void 0),t=(0,i._)([(0,n.$)("esri.layers.mixins.RasterPresetRendererMixin")],t),t}},45378:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=a(35143),l=a(69098),n=a(42553),r=a(46053),o=a(40565),s=(a(81806),a(47249),a(6409)),u=a(85842),d=a(88205);let c=class extends(l.A.ClonableMixin(n.A)){constructor(e){super(e),this.name=void 0,this.method="none",this.value=void 0,this.bandIds=void 0,this.renderer=void 0}};(0,i._)([(0,r.MZ)({type:String,json:{write:{isRequired:!0}}})],c.prototype,"name",void 0),(0,i._)([(0,r.MZ)({type:["raster-function-template","variable","none"],json:{write:{isRequired:!0}}}),(0,s.e)({rasterFunctionTemplate:"raster-function-template",variable:"variable",none:"none"})],c.prototype,"method",void 0),(0,i._)([(0,r.MZ)({type:String,json:{write:{isRequired:!0}}})],c.prototype,"value",void 0),(0,i._)([(0,r.MZ)({type:[o.jz],json:{write:{isRequired:!0}}})],c.prototype,"bandIds",void 0),(0,i._)([(0,r.MZ)({types:d.uy,json:{write:!0,origins:{"web-scene":{types:d.Gj,write:{overridePolicy:e=>({enabled:e&&"vector-field"!==e.type&&"flow"!==e.type})}}}}})],c.prototype,"renderer",void 0),c=(0,i._)([(0,u.$)("esri.renderers.support.RasterPresetRenderer")],c);const p=c}}]);
//# sourceMappingURL=8380.f32e0ec7.chunk.js.map