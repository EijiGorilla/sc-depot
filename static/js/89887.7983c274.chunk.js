"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[72934,89887],{72934:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var l=i(35143),n=i(73204),o=i(5632),r=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(85842));let u=class extends(o.A.IdentifiableMixin(r.A)){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};(0,l._)([(0,s.MZ)()],u.prototype,"autoNavigate",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"filter",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"getResults",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"getSuggestions",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"maxResults",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"maxSuggestions",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"minSuggestCharacters",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"outFields",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"placeholder",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"popupEnabled",void 0),(0,l._)([(0,s.MZ)({type:n.default})],u.prototype,"popupTemplate",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"prefix",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"resultGraphicEnabled",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"resultSymbol",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"suggestionsEnabled",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"suffix",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"withinViewEnabled",void 0),(0,l._)([(0,s.MZ)()],u.prototype,"zoomScale",void 0),u=(0,l._)([(0,a.$)("esri.widgets.Search.SearchSource")],u);const d=u},86100:(e,t,i)=>{i.d(t,{DN:()=>s,Sv:()=>r,ZY:()=>a,z8:()=>o});var l=i(76797),n=i(68002);function o(e){var t;switch(null===e||void 0===e?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return null===(t=e.extent)||void 0===t?void 0:t.center;default:return null}}async function r(e,t){var i,l;if(e.hasZ||"2d"===t.type)return e;const n=null===(i=t.map)||void 0===i?void 0:i.ground;if(null===n||void 0===n||!n.layers.length)return e;const{geometry:o}=await n.queryElevation(e,{cache:null===(l=t.basemapTerrain)||void 0===l?void 0:l.elevationQueryCache});return o}function s(e,t,i){return u(e.center,t,i)}function a(e,t,i){switch(null===e||void 0===e?void 0:e.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return u(e,t,i);default:return null}}function u(e,t,i){const o=e.hasZ?e.z:void 0;if(null!==t&&void 0!==t&&t.map)return(null!=i?(0,n.eU)(t,i):t.extent).clone().centerAt(e).set({zmax:o,zmin:o});const{x:r,y:s,spatialReference:a}=e;return new l.default({xmin:r-.25,ymin:s-.25,xmax:r+.25,ymax:s+.25,spatialReference:a,zmin:o,zmax:o})}},89887:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var l=i(89379),n=i(35143),o=i(53084),r=i(46053),s=i(81806),a=i(76460),u=i(85842),d=i(72934),c=(i(11265),i(50076)),p=i(30726),v=i(31633),h=i(65215),f=i(86100),g=i(77269),y=i(39348),m=i(65256);const x=/https?:\/\/services.*\.arcgis\.com/i,F=/(?:\{([^}]+)\})/g,S=()=>a.A.getLogger("esri.widgets.Search.support.layerSearchUtils");function w(e,t){const{exactMatch:i=!1,location:l,maxResults:n,spatialReference:o,source:r,sourceIndex:s,suggestResult:a,view:u}=e,{layer:d,filter:p,zoomScale:h}=r,f=null===u||void 0===u?void 0:u.scale,g=M(r,u),y=null===t||void 0===t?void 0:t.signal;return T(d).then((()=>{const e=d.popupTemplate;return e?e.getRequiredFields(d.fieldsIndex):null})).then((e=>{var t,m;const{objectIdField:x,returnZ:F}=d,w=A(r);if(!N(d,w))throw S().error("invalid-field: displayField is invalid."),new c.default("getResults():invalid-field","displayField is invalid.");const b=null!==e&&void 0!==e&&e.length?e:[w],M=r.outFields||b,T=_(M);if(M.includes(x)||T||M.push(x),(null===(t=d.floorInfo)||void 0===t?void 0:t.floorField)&&M.push(d.floorInfo.floorField),!T&&!C(d,M))throw S().error("invalid-field: outField is invalid."),new c.default("getResults():invalid-field","outField is invalid.");const z=d.createQuery(),{orderByFields:q}=r;if(q&&(z.orderByFields=q),o){z.outSpatialReference=o;const e=1/(0,v.GA)(o);e&&(z.maxAllowableOffset=e)}const V="mesh"===d.geometryType||"multipatch"===d.geometryType,G=(null===(m=d.capabilities)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.supportsZ)&&!V;if(z.returnZ=G&&!1!==F,z.returnGeometry=!0,z.multipatchOption=V?"xyFootprint":null,M&&(z.outFields=M),l)z.geometry=l;else if(a.key)z.objectIds=[a.key];else{var B;const e=r.searchFields||[w];if(!C(d,e))throw S().error("invalid-field: search field is invalid."),new c.default("getResults():invalid-field","search field is invalid.");L(d)&&(z.num=n),g&&(z.geometry=g);if(!(null===(B=a.text)||void 0===B?void 0:B.trim()))return[];const t=a.text,{prefix:l="",suffix:o=""}=r,s=j("".concat(l).concat(t).concat(o));R(d)&&E(d,e)&&!i&&t&&(z.fullText=I({text:t,searchFields:e}));const u=D({searchTerm:s,layer:d,searchFields:e,filter:p,exactMatch:i,query:z,type:"search"});if(z.where=u,!Z(z))return[]}return d.queryFeatures(z,{signal:y}).then((e=>function(e,t,i,l,n,o,r){return e.features.map((e=>k(e,t,i,l,n,o,r)))}(e,u,r,s,w,f,h)))}))}function b(e,t){const{source:i,spatialReference:l,view:n,suggestTerm:o,maxSuggestions:r,sourceIndex:s,exactMatch:a}=e,{layer:u,filter:d}=i,p=null===t||void 0===t?void 0:t.signal,v=M(i,n);return T(u).then((()=>{if(!L(u))return[];const e=A(i),t=i.searchFields||[e],n=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(F,((e,t)=>(n.push(t),e))):n.push(e);const h=_(n);n.includes(u.objectIdField)||h||n.push(u.objectIdField);const f=N(u,e),g=h||C(u,n),y=C(u,t);if(!f)throw S().error("invalid-field: displayField is invalid."),new c.default("getSuggestions():invalid-field","displayField is invalid.");if(!g)throw S().error("invalid-field: outField is invalid."),new c.default("getSuggestions():invalid-field","outField is invalid.");if(!y)throw S().error("invalid-field: search field is invalid."),new c.default("getSuggestions():invalid-field","search field is invalid.");const m=u.createQuery(),{orderByFields:x}=i;if(x&&(m.orderByFields=x),m.outSpatialReference=l,m.returnGeometry=!1,m.num=r,m.outFields=n,v&&(m.geometry=v),!o.trim())return[];const{prefix:w="",suffix:b=""}=i,M=j("".concat(w).concat(o).concat(b));R(u)&&E(u,t)&&!a&&o&&(m.fullText=I({text:o,searchFields:t}));const T=D({searchTerm:M,layer:u,searchFields:t,filter:d,exactMatch:a,query:m,type:"suggest"});return m.where=T,Z(m)?u.queryFeatures(m,{signal:p}).then((t=>function(e,t,i,l){return e.features.map((e=>function(e,t,i,l){const n=e.sourceLayer,{attributes:o}=e,{objectIdField:r}=n,s=r?o[r]:null;return{text:q(e,t.suggestionTemplate,l),key:s,sourceIndex:i}}(e,t,i,l)))}(t,i,s,e))):[]}))}function M(e,t){const{filter:i,withinViewEnabled:l}=e,n=null===t||void 0===t?void 0:t.extent,o=null===i||void 0===i?void 0:i.geometry;return null!==o&&void 0!==o?o:l&&n?n:void 0}function _(e){return e&&e.includes("*")}async function T(e){e&&await e.load()}function Z(e){return!(!e.fullText&&!e.where)}function E(e,t){const i=null===e||void 0===e?void 0:e.indexes;return!(!i||null===t||void 0===t||!t.length)&&i.filter((e=>"FullText"===e.indexType)).some((e=>{var i;const l=(null===(i=e.fields)||void 0===i?void 0:i.split(",").map((e=>e.trim().toLowerCase())))||[];return t.every((e=>l.includes(e.toLowerCase())))}))}function I(e){let{text:t,searchFields:i}=e;return t.trim().split(" ").filter((e=>!!e.trim())).map((e=>new g.A({onFields:i,searchTerm:e,searchType:"prefix"})))}function R(e){var t,i;return null!==(t=null===e||void 0===e||null===(i=e.capabilities)||void 0===i||null===(i=i.query)||void 0===i?void 0:i.supportsFullTextSearch)&&void 0!==t&&t}function L(e){var t,i;return null!==(t=null===e||void 0===e||null===(i=e.capabilities)||void 0===i||null===(i=i.query)||void 0===i?void 0:i.supportsPagination)&&void 0!==t&&t}function A(e){return e.displayField||e.layer.displayField||function(e){var t,i;return null!==(t=null===e||void 0===e||null===(i=e.fieldsIndex)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i.find((e=>"string"===e.type)))||void 0===i?void 0:i.name)&&void 0!==t?t:""}(e.layer)}function C(e,t){return!(!e||null===t||void 0===t||!t.length)&&t.every((t=>N(e,t)))}function N(e,t){return!!e.getField(t)}function j(e){return e.replaceAll("'","''")}function z(e,t){const i=null===t||void 0===t?void 0:t.where;return i?"(".concat(e,") AND (").concat(i,")"):e}function D(e){let{searchTerm:t,layer:i,searchFields:l,filter:n,exactMatch:o,query:r,type:a}=e;const{definitionExpression:u,url:d}=i;let c="";return!r.fullText&&t&&l&&l.forEach((e=>{var l;const r=i.getField(e),u=null===(l=i.getFieldDomain)||void 0===l?void 0:l.call(i,e,{excludeImpliedDomains:(0,s.A)("esri-widget-legacy-field-domain-calculation")}),v=(u&&"coded-value"===u.type?function(e,t,i){var l;let{codedValues:n}=e;return null!==(l=(0,p.Pb)(null!==n&&void 0!==n?n:[],(e=>{const l=e.name,n=i?l:l.toLowerCase();return(i?t:t.toLowerCase())===n?e.code.toString():null})))&&void 0!==l?l:null}(u,t,o):null)||t||null;if(null!==v){const e=function(e){let{currentTerm:t,field:i,filter:l,exactMatch:n,url:o,type:r}=e;const s=null===i||void 0===i?void 0:i.type,a=null===i||void 0===i?void 0:i.name;if("string"===s||"date"===s||"global-id"===s){const e=x.test(null!==o&&void 0!==o?o:""),i=e&&function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(t)?"N":"";return z(n&&"search"===r?"".concat(a," = ").concat(i,"'").concat(t,"'"):e?"".concat(a," LIKE ").concat(i,"'".concat(t,"%'")):"".concat("LOWER(".concat(a,")")," LIKE ",i,"'".concat(t.toLowerCase(),"%'")),l)}if("oid"===s||"small-integer"===s||"integer"===s||"single"===s||"double"===s){const e=Number(t);return isNaN(e)?null:z("".concat(a," = ").concat(e),l)}return z("".concat(a," = ").concat(t),l)}({currentTerm:v,field:r,filter:n,exactMatch:o,url:d,type:a});e&&(c+=function(e,t){return e?" OR (".concat(t,")"):"(".concat(t,")")}(c,e))}})),u&&c?"(".concat(u,") AND (").concat(c,")"):u||c}function q(e,t,i){var l;const n=e.sourceLayer,{attributes:o}=e,r=null===(l=n.getFieldDomain)||void 0===l?void 0:l.call(n,i,{feature:e,excludeImpliedDomains:(0,s.A)("esri-widget-legacy-field-domain-calculation")});if(t)return(0,y.V)(t,o);if(i&&o){var a;const e=n.getField(i),t=function(e,t){var i;return null!==(i=e[t])&&void 0!==i?i:e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}(o,i);return null==t?"":r&&"coded-value"===r.type?null!==(a=function(e,t){let i=null;const{codedValues:l}=e;return l&&l.length&&l.some((e=>e.code===t&&(i=e.name,!0))),i}(r,t))&&void 0!==a?a:"":"date"===(null===e||void 0===e?void 0:e.type)?(0,m.Yq)(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return""}function k(e,t,i,l,n,r,s){const a=e.clone(),u=e.sourceLayer,d=null===u||void 0===u?void 0:u.objectIdField,c=d?e.attributes[d]:null,p=q(e,i.searchTemplate,n);null!=r&&function(e){return null!=e&&null!=e.minScale&&null!=e.maxScale}(u)&&(u.minScale&&u.minScale<r?r=u.minScale:u.maxScale&&u.maxScale>r&&(r=u.maxScale));const v=a.geometry?(0,f.ZY)(a.geometry,null!==t&&void 0!==t?t:void 0,null!==r&&void 0!==r?r:void 0):void 0,g="number"==typeof s&&v?(0,f.DN)((0,o.clone)(v),null!==t&&void 0!==t?t:void 0,s):v,y=e.clone();return null!=g&&(y.geometry=h.default.fromExtent(g)),{extent:g,target:y,feature:a,key:c,name:p,sourceIndex:l}}var V;let G=V=class extends d.default{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>w((0,l.A)({source:this},e),t),this.getSuggestions=(e,t)=>b((0,l.A)({source:this},e),t)}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}))}get name(){var e;return null!==(e=this._getLayerTitle())&&void 0!==e?e:""}set name(e){this._overrideIfSome("name",e)}clone(){return new V({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,o.clone)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,o.clone)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return null!==(e=null===(t=this.layer.fieldsIndex)||void 0===t||null===(t=t.fields.find((e=>"string"===e.type)))||void 0===t?void 0:t.name)&&void 0!==e?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?": ".concat((t||[this._getDisplayField()]).map((t=>{const i=e.getField(t);return(null===i||void 0===i?void 0:i.alias)||t})).join(", ")):""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?"".concat(t).concat(this._getSearchFieldsString()):void 0}};(0,n._)([(0,r.MZ)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],G.prototype,"displayField",void 0),(0,n._)([(0,r.MZ)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],G.prototype,"exactMatch",void 0),(0,n._)([(0,r.MZ)({value:null})],G.prototype,"layer",null),(0,n._)([(0,r.MZ)()],G.prototype,"name",null),(0,n._)([(0,r.MZ)({type:[String],json:{write:!0}})],G.prototype,"orderByFields",void 0),(0,n._)([(0,r.MZ)()],G.prototype,"searchFields",void 0),(0,n._)([(0,r.MZ)()],G.prototype,"searchTemplate",void 0),(0,n._)([(0,r.MZ)()],G.prototype,"suggestionTemplate",void 0),G=V=(0,n._)([(0,u.$)("esri.widgets.Search.LayerSearchSource")],G);const B=G}}]);
//# sourceMappingURL=89887.7983c274.chunk.js.map