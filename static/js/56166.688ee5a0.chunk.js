"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[56166],{56166:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var i=s(35143),r=s(19276),n=s(67993),l=s(60767),o=s(90632),a=s(46053),u=(s(81806),s(76460),s(47249),s(85842)),d=s(19451),p=s(53430),h=s(3320),c=s(84668);var _=s(89379);let x;const b=["blockquote","html","hr","checkbox","table","tablerow","tablecell","image"];async function y(){const{Marked:e}=await s.e(20096).then(s.bind(s,20096)),t=()=>"",i={};for(const s of b)i[s]=t;x=new e({renderer:(0,_.A)({del:function(e){let{text:t}=e;return'<span style="text-decoration:line-through;">'.concat(t,"</span>")},link:function(e){let{href:t,text:s,title:i}=e;return"<a".concat(null!=t?' href="'.concat(t,'"'):"").concat(null!=i?' title="'.concat(i,'"'):"",' target="_blank">').concat(null!==s&&void 0!==s?s:"","</a>")}},i)})}var f=s(76099);let v=class extends c.A{constructor(e){super(e),this.group=null,this.id="TextElementInput-".concat((0,o.c)()),this.type="text",this._expressionReferences=new n.A,this._expressionsUsed=new l.A,this._fieldsUsed=new l.A,this._literalParts=new r.default,this._templateParts=new r.default,this._updatingHandles=new d.U}initialize(){const{rawText:e}=this;e?"markdown"===this.textFormat?this._updatingHandles.addPromise(async function(e){return x||await y(),x.parse(e)}(e).then((e=>this._initializeTextParts(e)))):this._initializeTextParts(e):this._literalParts.push("")}get expressionsUsed(){return Array.from(this._expressionsUsed)}get fieldsIndex(){return this.layer.fieldsIndex}set fieldsIndex(e){this._overrideIfSome("fieldsIndex",e)}get fieldsUsed(){return Array.from(this._fieldsUsed)}get rawText(){return this.element.text}get text(){const e=this._templateParts.map((e=>{var t,s;return"".concat(null!==(t=null===(s=this._expressionReferences.get(e))||void 0===s?void 0:s.lastEvaluatedValue)&&void 0!==t?t:"")}));return f.W5.sanitize(function(e,t){return t.reduce(((t,s,i)=>t.concat(e.at(i),s)),"").concat(e.at(-1))}(this._literalParts,e))}get textFormat(){return this.element.textFormat}get updating(){return this._updatingHandles.updating||Array.from(this._expressionReferences.values()).some((e=>null===e||void 0===e?void 0:e.updating))}setExpressionExecutor(e,t){this._expressionReferences.set((0,h.t6)(e),t)}setFieldExecutor(e,t){this._expressionReferences.set((0,h.H1)(e),t)}_initializeTextParts(e){const{fieldsIndex:t}=this,{literals:s,templates:i}=function(e){const t=[...e.matchAll(/{[^{]+?}/g)];let s=0;const i=[],r=[];for(const n of t){const t=n[0];i.push(e.slice(s,n.index)),r.push(t),s=n.index+t.length}return i.push(e.slice(s)),{literals:i,templates:r}}(e),r=[],n=[];for(let l=0;l<i.length;l++){const e=s[l],o=(0,p.extractSubstitutionTemplatesFromString)(i[l])[0];if((0,h.s9)(o))this._expressionsUsed.add((0,h.oc)(o)),this._expressionReferences.set(o,null),r.push(e),n.push(o);else if((0,h.qG)(o)){this._expressionsUsed.add(o);const t=(0,h.t6)(o);this._expressionReferences.set(t,null),r.push(e),n.push(t)}else if(null!==t&&void 0!==t&&t.has(o)){const s=t.normalizeFieldName(o);this._fieldsUsed.add(s);const i=(0,h.H1)(s);this._expressionReferences.set(i,null),r.push(e),n.push(i)}else s[l+1]=e.concat(o,s[l+1])}r.push(s.at(-1)),this._literalParts.addMany(r),this._templateParts.addMany(n)}};(0,i._)([(0,a.MZ)()],v.prototype,"expressionsUsed",null),(0,i._)([(0,a.MZ)()],v.prototype,"fieldsIndex",null),(0,i._)([(0,a.MZ)()],v.prototype,"fieldsUsed",null),(0,i._)([(0,a.MZ)()],v.prototype,"group",void 0),(0,i._)([(0,a.MZ)()],v.prototype,"id",void 0),(0,i._)([(0,a.MZ)()],v.prototype,"rawText",null),(0,i._)([(0,a.MZ)()],v.prototype,"text",null),(0,i._)([(0,a.MZ)()],v.prototype,"textFormat",null),(0,i._)([(0,a.MZ)()],v.prototype,"type",void 0),(0,i._)([(0,a.MZ)()],v.prototype,"updating",null),v=(0,i._)([(0,u.$)("esri.widgets.FeatureForm.TextElementInput")],v);const g=v},60767:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(99486),r=s(99702);class n{constructor(e){this._observable=new r.I,this._set=new Set(e)}get size(){return(0,i.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,i.gc)(this._observable),this._set.entries()}forEach(e,t){(0,i.gc)(this._observable),this._set.forEach(((s,i)=>e.call(t,s,i,this)),t)}has(e){return(0,i.gc)(this._observable),this._set.has(e)}keys(){return(0,i.gc)(this._observable),this._set.keys()}values(){return(0,i.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,i.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},84668:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(35143),r=s(91967),n=s(46053),l=(s(81806),s(76460),s(47249),s(85842)),o=s(3320);let a=class extends r.default{constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.timeZone=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){var e;return this.getFormattedLabel(null===(e=this.element)||void 0===e?void 0:e.description)}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get label(){var e;return this.getFormattedLabel(null===(e=this.element)||void 0===e?void 0:e.label)}get updating(){return!1}get visible(){return null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element}getFormattedLabel(e){const{feature:t,layer:s,timeZone:i}=this;return null==s||null==e?e:(0,o.LZ)({label:e,attributes:t.attributes,fieldsIndex:s.fieldsIndex,timeZone:i})}};(0,i._)([(0,n.MZ)({readOnly:!0})],a.prototype,"description",null),(0,i._)([(0,n.MZ)({constructOnly:!0})],a.prototype,"element",void 0),(0,i._)([(0,n.MZ)()],a.prototype,"evaluatedVisibilityExpression",null),(0,i._)([(0,n.MZ)()],a.prototype,"feature",void 0),(0,i._)([(0,n.MZ)()],a.prototype,"label",null),(0,i._)([(0,n.MZ)()],a.prototype,"layer",void 0),(0,i._)([(0,n.MZ)()],a.prototype,"timeZone",void 0),(0,i._)([(0,n.MZ)()],a.prototype,"type",void 0),(0,i._)([(0,n.MZ)()],a.prototype,"updating",null),(0,i._)([(0,n.MZ)()],a.prototype,"visible",null),(0,i._)([(0,n.MZ)()],a.prototype,"visibilityExpressionExecutor",void 0),a=(0,i._)([(0,l.$)("esri.widgets.FeatureForm.InputBase")],a);const u=a}}]);
//# sourceMappingURL=56166.688ee5a0.chunk.js.map