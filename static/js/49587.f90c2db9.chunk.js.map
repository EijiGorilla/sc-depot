{"version":3,"file":"static/js/49587.f90c2db9.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/catalog/CatalogDynamicGroupLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Collection.js\";import{makeHandle as r}from\"../../core/handleUtils.js\";import{LRUCache as o}from\"../../core/LRUCache.js\";import{someMap as i,getOrCreateMapValue as s}from\"../../core/MapUtils.js\";import{MultiOriginJSONMixin as a}from\"../../core/MultiOriginJSONSupport.js\";import n from\"../../core/ReactiveMap.js\";import{watch as l}from\"../../core/reactiveUtils.js\";import{signal as p}from\"../../core/signal.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as y}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../Layer.js\";import{BlendLayer as u}from\"../mixins/BlendLayer.js\";import{ScaleRangeLayer as m}from\"../mixins/ScaleRangeLayer.js\";import{legendEnabled as f,opacity as _}from\"../support/commonProperties.js\";import g from\"../support/OrderByInfo.js\";import{getAttributeComparator as j}from\"../../statistics/utils.js\";let v=class extends(m(u(a(h)))){constructor(e){super(e),this._layerCache=new o(20,(e=>e.destroy())),this._oidToReference=new n,this._layerToReference=new Map,this.legendEnabled=!0,this.layers=new t,this.maximumVisibleSublayers=10,this.opacity=1,this.parent=null,this.persistenceEnabled=!0,this.title=\"Layers in view\",this.type=\"catalog-dynamic-group\",this.visible=!0}initialize(){this.addHandles([this.layers.on(\"after-add\",(({item:e})=>{e.parent=this})),this.layers.on(\"after-remove\",(({item:e})=>{e.parent=null})),l((()=>this._orderBy),(()=>{this._updateLayerSortValues(),this._sortAllLayers()}))])}load(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}destroy(){this._layerCache.destroy(),this._oidToReference.clear(),this._layerToReference.clear()}get _orderBy(){return this.parent?this.parent.orderBy?.find((e=>!e.valueExpression&&e.field))??new g({field:this.parent.objectIdField}):null}get _referenceComparator(){const e=this._orderBy;if(!this.parent||!e)return()=>0;const t=this.parent.fieldsIndex.get(e.field),r=j(t?.toJSON().type,\"descending\"===e.order),o=j(\"esriFieldTypeOID\",\"descending\"===e.order);return(e,t)=>r(t.sortValue,e.sortValue)||o(t.objectId,e.objectId)}get fullExtent(){return this.parent?.fullExtent??null}get updating(){return i(this._oidToReference,(({pending:e})=>null!=e))}acquireLayer(e){if(this.destroyed)return r();const t=this._getLayerReference(e);return t.count++,r((()=>{t.count--,t.count||this._destroyLayerReference(t)}))}_getLayerReference(e){const t=e.getObjectId();return s(this._oidToReference,t,(()=>{const t=e.getObjectId(),r=`${t}`,o=e.getAttribute(this.parent.itemSourceField),i=new L(e,t,o),s=this._layerCache.pop(r);return s?(this._addLayer(i,s),i):(i.pending=this.parent.createLayerFromFootprint(e).then((e=>{i.count?this._addLayer(i,e):(this.destroyed||this._layerCache.get(r)||this._layerCache.put(r,e),i.layer=null)})).catch((()=>{})).finally((()=>{i.pending=null})),i)}))}_destroyLayerReference(e){e.layer&&(this._layerToReference.delete(e.layer),this.layers.remove(e.layer),this.destroyed?e.layer.destroy():this._layerCache.put(`${e.objectId}`,e.layer),e.layer=null),this._oidToReference.delete(e.objectId)}_addLayer(e,t){e.layer=t,t.persistenceEnabled=!1,this._layerToReference.set(t,e),this._updateLayerSortValue(e),this.layers.add(t),this._sortAllLayers()}_updateLayerSortValues(){for(const e of this._layerToReference.values())this._updateLayerSortValue(e)}_updateLayerSortValue(e){this._orderBy&&(e.sortValue=e.footprint.getAttribute(this._orderBy.field))}_sortAllLayers(){this.layers.sort(((e,t)=>this._referenceComparator(this._layerToReference.get(e),this._layerToReference.get(t))))}};e([d()],v.prototype,\"_orderBy\",null),e([d({readOnly:!0})],v.prototype,\"_referenceComparator\",null),e([d(f)],v.prototype,\"legendEnabled\",void 0),e([d({type:[\"show\",\"hide\",\"hide-children\"],json:{write:!0}})],v.prototype,\"listMode\",void 0),e([d({readOnly:!0})],v.prototype,\"fullExtent\",null),e([d({type:String,json:{origins:{service:{read:!1},\"portal-item\":{read:!1}},write:{ignoreOrigin:!0,isRequired:!0}}})],v.prototype,\"id\",void 0),e([d({readOnly:!0})],v.prototype,\"layers\",void 0),e([d({type:y,range:{min:0,max:50},json:{write:!0,default:10}})],v.prototype,\"maximumVisibleSublayers\",void 0),e([d(_)],v.prototype,\"opacity\",void 0),e([d({clonable:!1})],v.prototype,\"parent\",void 0),e([d({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],v.prototype,\"title\",void 0),e([d({json:{read:!1}})],v.prototype,\"type\",void 0),e([d({readOnly:!0})],v.prototype,\"updating\",null),e([d({type:Boolean,json:{name:\"visibility\",write:!0}})],v.prototype,\"visible\",void 0),v=e([c(\"esri.layers.catalog.CatalogDynamicGroupLayer\")],v);const b=v;class L{constructor(e,t,r){this.footprint=e,this.objectId=t,this.itemSource=r,this.count=0,this.layer=null,this.sortValue=void 0,this._pending=p(null)}get pending(){return this._pending.value}set pending(e){this._pending.value=e}}export{b as default};\n"],"names":["v","m","u","a","h","constructor","e","super","this","_layerCache","o","destroy","_oidToReference","n","_layerToReference","Map","legendEnabled","layers","t","maximumVisibleSublayers","opacity","parent","persistenceEnabled","title","type","visible","initialize","addHandles","on","_ref","item","_ref2","l","_orderBy","_updateLayerSortValues","_sortAllLayers","load","addResolvingPromise","Promise","resolve","clear","_this$parent$orderBy$","_this$parent$orderBy","orderBy","find","valueExpression","field","g","objectIdField","_referenceComparator","fieldsIndex","get","r","j","toJSON","order","sortValue","objectId","fullExtent","_this$parent$fullExte","_this$parent","updating","i","_ref3","pending","acquireLayer","destroyed","_getLayerReference","count","_destroyLayerReference","getObjectId","s","concat","getAttribute","itemSourceField","L","pop","_addLayer","createLayerFromFootprint","then","put","layer","catch","finally","delete","remove","set","_updateLayerSortValue","add","values","footprint","sort","d","prototype","readOnly","f","json","write","String","origins","service","read","ignoreOrigin","isRequired","y","range","min","max","default","_","clonable","nonNullable","Boolean","name","c","b","itemSource","_pending","p","value"],"sourceRoot":""}