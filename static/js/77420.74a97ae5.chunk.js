"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[77420],{21904:(e,t,i)=>{i.d(t,{m:()=>c});var n=i(89379),l=i(99486),o=i(99702),s=i(85827),a=i(17400),r=i(8794);class c extends r.q{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this._children=[],this._childrenObservable=new o.I,this._effectView=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get children(){return(0,l.gc)(this._childrenObservable),this._children}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){var e,t;return null!==(e=null===(t=this._effectView)||void 0===t?void 0:t.effects)&&void 0!==e?e:null}get effect(){var e,t;return null!==(e=null===(t=this._effectView)||void 0===t?void 0:t.effect)&&void 0!==e?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new a.$B,this.addTransitionable(this._effectView)),this._effectView.effect=e,this.requestRender())}get highlightGradient(){return this._highlightGradient}set highlightGradient(e){this._highlightGradient=e,this.requestRender()}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some((e=>e.hasHighlight))}get hasLabels(){return this.children.some((e=>e.hasLabels))}get requiresDedicatedFBO(){return this.children.some((e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode))}get isReady(){return this.children.every((e=>e.isReady))}get sortFunction(){return this._sortFunction}set sortFunction(e){this._sortFunction=e,e&&(this._needsSort=!0)}doRender(e){var t;const i=this.createRenderParams(e),{painter:n}=i;n.beforeRenderLayer(i,null!==(t=this._clips)&&void 0!==t&&t.length?255:0,this.computedOpacity),this.renderChildren(i),n.afterRenderLayer(i,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length;if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),this._childrenObservable.notify(),e}contains(e){return(0,l.gc)(this._childrenObservable),this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0,this._childrenObservable.notify()}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,this._childrenObservable.notify(),t}beforeRender(e){super.beforeRender(e),this.sortFunction&&this._needsSort&&(this.children.sort(this.sortFunction),this._needsSort=!1,this._childrenObservable.notify());for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{displayViewScreenMat3:(0,s.vt)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return(0,n.A)((0,n.A)({},e),{},{requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient})}isTransitioning(){return super.isTransitioning()||this.children.some((e=>e.transitioning))}}},30599:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ce});var n=i(35143),l=i(53084),o=i(68134),s=i(46053),a=(i(81806),i(76460),i(85842)),r=i(65256),c=i(69539),d=i(48053),h=i(91967),u=i(54099),v=i(30726),p=i(91291),g=i(21403),m=(i(47249),i(40565)),y=i(76797),f=i(19247),b=i(13312),_=i(94454),w=i(23290),M=i(88235),K=i(54154),k=i(3717),V=i(37551),P=i(46242),x=i(51034),S=(i(50076),i(52394),i(15434),i(59784),i(86560),i(13442),i(28808),i(14522),i(89189),i(66388),i(65215),i(23701),i(5095),i(62484),i(15941),i(61425),i(3789),i(5568),i(80963),i(62032),i(89425),i(15709),i(88764),i(9435),i(50724),i(94046),i(94168),i(73988),i(27847),i(33049),i(4754),i(31385),i(278),i(71687),i(6134),i(9190),i(5104),i(41704),i(16083),i(27150),i(19313),i(59422),i(71447),i(84202),i(48988),i(17400),i(81447),i(61551),i(28608),i(93345),i(61247),i(61678),i(89241),i(84662),i(35048),i(63584),i(99588),i(19457),i(83531),i(29492),i(76418),i(8254),i(47709),i(3825),i(90534),i(29234),i(56789),i(32743),i(98590),i(5096),i(72729),i(12331),i(16946),i(89179),i(28972),i(69543),i(90113),i(81320),i(13308),i(33346),i(13720),i(88075),i(38550),i(9410),i(57156),i(98112),i(42294),i(81615),i(29300),i(64346),i(26455),i(4480),i(46405),i(41406),i(57162),i(86955),i(33721),i(68009),i(69679),i(38983),i(83755),i(73548),i(14556),i(55171),i(13692),i(28606)),C=(i(98773),i(19451),i(57105),i(31633),i(34111),i(7724),i(482),i(86599),i(63885),i(5883)),O=i(46901),R=i(23717),Z=i(88684),A=i(97055),T=i(28914);const E=new c.default("#000");let z;const D=.01;let q=class extends h.default{};q=(0,n._)([(0,a.$)("esri.views.VideoView.Base")],q);let I=class extends((0,V.g)((0,k.u)(u.A.EventedMixin(p.A.EsriPromiseMixin(q))))){constructor(e){super(e),this._isValid=!1,this.stage=null,this.layer=null,this.navigation=new Z.default,this.ready=!1,this.stateManager=new C.O({constraints:new x.A({view:this,minScale:1,maxScale:D})}),this.spatialReference=new b.default({wkid:0}),this.type="2d",this.ui=new T.A,this.addHandles([(0,o.watch)((()=>this.preconditionsReady),(e=>e?this._startup():this._teardown())),(0,o.watch)((()=>this.layer),(()=>this.addResolvingPromise((0,o.whenOnce)((()=>this.ready)))),o.initial),(0,o.watch)((()=>{var e;return[null===(e=this.layer)||void 0===e?void 0:e.effect,this._overlayContainer,this.effect]}),(()=>{var e,t,i;this._overlayContainer&&(this._overlayContainer.effect=null!==(e=null!==(t=this.effect)&&void 0!==t?t:null===(i=this.layer)||void 0===i?void 0:i.effect)&&void 0!==e?e:null)}),o.syncAndInitial),(0,o.watch)((()=>this.videoSize),(e=>{let[t,i]=e;this._extent&&t&&i&&(this._extent.xmax=t,this._extent.ymax=i)}))])}initialize(){this.addResolvingPromise(async function(){const[,{Stage:e}]=await Promise.all([i.e(22475).then(i.bind(i,22475)),Promise.all([i.e(8995),i.e(17560),i.e(37356),i.e(37430)]).then(i.bind(i,37430))]);z=e}().then((()=>(this._isValid=!0,(0,o.whenOnce)((()=>this.ready))))))}destroy(){this._teardown()}get constraintsInfo(){return{lods:null,spatialReference:this.spatialReference}}get effect(){var e;return null===(e=this.layer)||void 0===e?void 0:e.effect}set effect(e){this._override("effect",e)}get preconditionsReady(){return!(!this._isValid||0===this.width||0===this.height||0===this.videoSize[0]||0===this.videoSize[1])}get rendering(){var e,t;return null!==(e=null===(t=this.stage)||void 0===t?void 0:t.renderRequested)&&void 0!==e&&e}get videoSize(){var e,t,i,n;if(null===(e=this.layer)||void 0===e||!e.videoWidth||null===(t=this.layer)||void 0===t||!t.videoHeight)return[0,0];const[l,o]=this.size,s=((null===(i=this.layer)||void 0===i?void 0:i.videoWidth)||0)/((null===(n=this.layer)||void 0===n?void 0:n.videoHeight)||0),a=o*s,r=l/s;return l/o>=1?s>=1?a<=l?[a,o]:[l,r]:r<=o?[l,r]:[a,o]:s>=1?r<=o?[l,r]:[a,o]:a<=l?[a,o]:[l,r]}get scale(){var e,t;return null!==(e=null===(t=this.stateManager)||void 0===t?void 0:t.scale)&&void 0!==e?e:0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}_startup(){if(!this.layer)return;const e=this._getViewpoint();this.stateManager.startup(e,this.size,e.targetGeometry.spatialReference),this.stage=new z(this.surface,{renderingOptions:this.renderingOptions,backgroundColor:E}),this._prepareStage(this.stage);const t=new P.A({view:this});this._set("animationManager",t);const i=new S.A({view:this,animationManager:t});this._set("mapViewNavigation",i),this._updateConstraints(),this.frameTask.start(),this._set("ready",!0)}_teardown(){this.stage.destroy(),this.stage=null,this._videoElementView=null,this._overlayContainer.removeAllChildren(),this._overlayContainer=null,this.removeAllHandles(),this._set("ready",!1),this.stateManager.teardown(),this.frameTask.stop(),this.stationaryManager.clear(),this.frameTask=(0,v.pR)(this.frameTask),this.goToManager.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}_getViewpoint(){return new d.default({targetGeometry:new f.default({x:this.videoSize[0]/2,y:this.videoSize[1]/2,spatialReference:this.spatialReference}),scale:1})}_prepareStage(e){var t;this.addHandles([(0,o.watch)((()=>this.stationary),(t=>e.stationary=t),o.syncAndInitial),(0,o.watch)((()=>this.state.id),(()=>e.state=this.state),o.syncAndInitial),(0,o.watch)((()=>this.renderingOptions),(t=>e.renderingOptions=t),o.syncAndInitial)],"video-view"),this._extent=new y.default({xmin:0,ymin:0,xmax:this.videoSize[0],ymax:this.videoSize[1],spatialReference:{wkid:0}}),this._videoElementView=new w._({element:new K.default({video:null===(t=this.layer)||void 0===t?void 0:t.videoElement,georeference:new _.default({extent:this._extent}),autoplay:!1}),spatialReference:this.spatialReference});const i=new O.A(this._videoElementView);this._overlayContainer=new R.A,this._overlayContainer.addChild(i),this.stage.addChild(this._overlayContainer)}_updateConstraints(){this._updateZoomConstraints(),this._updatePanConstraints()}_updateZoomConstraints(){const e=this.videoSize,t=Math.max(e[0]/this.size[0],e[1]/this.size[1]),i=[];for(let l=t;l>D;l/=2)i.push(l);i.push(D);const{lods:n}=M.default.create({scales:i});this.constraints.set({lods:n,minScale:t})}_updatePanConstraints(){const e=e=>{if(!e.targetGeometry)return e;const[t,i]=this.videoSize,n=t*e.scale/2,l=i*e.scale/2,o=e.targetGeometry.clone();return o.x=Math.max(n,Math.min(t-n,o.x)),o.y=Math.max(l,Math.min(i-l,o.y)),e.targetGeometry=o,e};this.constraints.customConstraints.add({constrain:e,applyPanConstraint:e})}};(0,n._)([(0,s.MZ)()],I.prototype,"_overlayContainer",void 0),(0,n._)([(0,s.MZ)()],I.prototype,"_isValid",void 0),(0,n._)([(0,s.MZ)()],I.prototype,"constraintsInfo",null),(0,n._)([(0,s.MZ)()],I.prototype,"effect",null),(0,n._)([(0,s.MZ)()],I.prototype,"layer",void 0),(0,n._)([(0,s.MZ)({type:Z.default,nonNullable:!0})],I.prototype,"navigation",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],I.prototype,"preconditionsReady",null),(0,n._)([(0,s.MZ)({readOnly:!0})],I.prototype,"ready",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],I.prototype,"rendering",null),(0,n._)([(0,s.MZ)()],I.prototype,"stateManager",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],I.prototype,"videoSize",null),(0,n._)([(0,s.MZ)()],I.prototype,"scale",null),(0,n._)([(0,s.MZ)()],I.prototype,"spatialReference",void 0),(0,n._)([(0,s.MZ)()],I.prototype,"type",void 0),(0,n._)([(0,s.MZ)(),(0,g.w)((e=>e instanceof A.default?e:(0,m.PZ)(T.A,e)))],I.prototype,"ui",void 0),I=(0,n._)([(0,a.$)("esri.views.VideoView")],I);const F=I;var B=i(22785),G=i(25329),H=i(94126),L=i(98108),W=(i(76099),i(63582)),j=i(54761);const N="esri-video-player",U={base:N,color:"".concat(N,"__color-block"),colorActive:"".concat(N,"__color-block__active"),colorPicker:"".concat(N,"__color-picker"),playerActions:"".concat(N,"__actions"),playerControls:"".concat(N,"__controls"),playerTimecode:"".concat(N,"__timecode"),playerToolbar:"".concat(N,"__toolbar"),progress:"".concat(N,"__progress"),rangeSlider:"".concat(N,"__range-slider"),settings:"".concat(N,"__settings"),settingsFlow:"".concat(N,"__settings-flow"),slider:"".concat(N,"__slider"),sliderProgressContainer:"".concat(N,"__slider-progress-container"),videoView:"".concat(N,"__video-view")};var $=i(19583);const Q="esri-metadata-table",Y={table:Q,data:"".concat(Q,"__data"),emptyState:"".concat(Q,"__empty-state")};function J(e){let{viewModel:t,messages:i}=e;const{metadata:n}=t;return n?(0,j.K)("calcite-block",{heading:i.metadata,open:!0},(0,j.K)("calcite-accordion",{appearance:"solid",selectionMode:"single"},(0,j.K)("calcite-accordion-item",{heading:i.missionInfo},(0,j.K)("div",{class:Y.table},Object.keys(n.missionInfo).map((e=>[(0,j.K)("div",{class:Y.data},e),(0,j.K)("div",{class:Y.data},n.missionInfo[e])])))),(0,j.K)("calcite-accordion-item",{heading:i.platformInfo},(0,j.K)("div",{class:Y.table},Object.keys(n.platformInfo).map((e=>[(0,j.K)("div",{class:Y.data},e),(0,j.K)("div",{class:Y.data},n.platformInfo[e])])))),(0,j.K)("calcite-accordion-item",{heading:i.frameInfo},(0,j.K)("div",{class:Y.table},Object.keys(n.frameInfo).map((e=>[(0,j.K)("div",{class:Y.data},e),(0,j.K)("div",{class:Y.data},n.frameInfo[e])])))))):(0,j.K)("calcite-tile",{class:Y.emptyState,description:i.metadataDescription,heading:i.metadataNotLoaded})}function X(e){let{viewModel:t,messages:i}=e;const{state:n,playing:l}=t,o="not-ready"===n||"waiting"===n,s=l?i.pause:i.play,a=(0,j.K)("calcite-action",{active:l,alignment:"center",bind:t,disabled:o,icon:l?"pause-f":"play-f",key:"play",onclick:l?t.pause:t.play,scale:"s",text:s,title:s}),r=i.reverse,c=(0,j.K)("calcite-action",{alignment:"center",bind:t,disabled:o,icon:"reverse-f",key:"reverse",onclick:t.seekBackward,scale:"s",text:r,title:r}),d=i.forward,h=(0,j.K)("calcite-action",{alignment:"center",bind:t,disabled:o,icon:"forward-f",key:"forward",onclick:t.seekForward,scale:"s",text:d,title:d}),u=i.beginning,v=(0,j.K)("calcite-action",{alignment:"center",bind:t,disabled:o,icon:"beginning-f",key:"beginning",onclick:t.seekToBeginning,scale:"s",text:u,title:u}),p=i.end,g=(0,j.K)("calcite-action",{alignment:"center",bind:t,disabled:o,icon:"end-f",key:"end",onclick:t.seekToEnding,scale:"s",text:p,title:p});return(0,j.K)("calcite-action-bar",{class:U.playerActions,expandDisabled:!0,layout:"horizontal",scale:"s"},[v,c,a,h,g])}const ee={active:null,speed:"1x",quality:"Auto",color:null},te=new c.default([255,127,0]);let ie=null;function ne(e){var t,i,n,l;let{viewModel:o,settings:s,messages:a}=e;const{state:r}=o,d="not-ready"===r||"waiting"===r,h=(0,j.K)("calcite-flow-item",{heading:a.playbackSpeed,key:"playback-speed",selected:"speed"===s.active,onCalciteFlowItemBack:()=>{s.active=null}},(0,j.K)("calcite-list",{label:a.playbackSpeed,selectionMode:"single-persist"},[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}].map((e=>{let{label:t,value:i}=e;return(0,j.K)("calcite-list-item",{key:t,label:t,onclick:()=>{s.speed=t,o.changePlaybackSpeed(i)},selected:t===s.speed})})))),u=(0,j.K)("calcite-flow-item",{heading:a.quality,key:"Quality (".concat(s.quality,")"),selected:"quality"===s.active,onCalciteFlowItemBack:()=>{s.active=null}},(0,j.K)("calcite-list",{label:a.quality,selectionMode:"single-persist"},["Auto"].map((e=>(0,j.K)("calcite-list-item",{key:e,label:e,onclick:()=>{s.quality=e},selected:e===s.quality}))))),v=(0,j.K)("calcite-flow-item",{heading:a.graphics,key:"Graphics (".concat(s.color,")"),selected:"color"===s.active,onCalciteFlowItemBack:()=>{s.active=null,s.color=ie?new c.default(ie):null,s.color&&o.changeGraphicsColor(s.color)}},(0,j.K)("calcite-block",{heading:a.color,open:!0},(0,j.K)("calcite-color-picker",{channelsDisabled:!0,format:"hex",savedDisabled:!0,scale:"s",value:null!==(t=null===(i=s.color)||void 0===i?void 0:i.toHex())&&void 0!==t?t:te.toHex(),onCalciteColorPickerChange:e=>{var t;ie=null===(t=e.currentTarget.value)||void 0===t?void 0:t.toString()}})));return(0,j.K)("div",{class:U.settings},(0,j.K)("calcite-popover",{autoClose:!0,label:a.settings,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"settings-action",scale:"s"},(0,j.K)("calcite-flow",{class:U.settingsFlow,key:"root-flow"},(0,j.K)("calcite-flow-item",{closable:!1,heading:"Settings",key:"root-flow-item",selected:!s.active},(0,j.K)("calcite-list",{label:a.settings},(0,j.K)("calcite-list-item",{key:"Speed (".concat(s.speed,")"),label:a.speed,onclick:()=>{s.active="speed"}},(0,j.K)("div",{slot:"content-end"},(0,j.K)("calcite-chip",{label:s.speed,scale:"s"},s.speed)),(0,j.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),(0,j.K)("calcite-list-item",{key:"Quality (".concat(s.quality,")"),label:a.quality,onclick:()=>{s.active="quality"}},(0,j.K)("div",{slot:"content-end"},(0,j.K)("calcite-chip",{label:s.quality,scale:"s"},s.quality)),(0,j.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),(0,j.K)("calcite-list-item",{key:"Graphics (".concat(s.color,")"),label:a.graphics,onclick:()=>{s.active="color"}},(0,j.K)("calcite-color-picker-swatch",{color:null!==(n=null===(l=s.color)||void 0===l?void 0:l.toString())&&void 0!==n?n:te.toString(),scale:"s",slot:"content-end"}),(0,j.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})))),"speed"===s.active?h:null,"quality"===s.active?u:null,"color"===s.active?v:null)),(0,j.K)("calcite-action",{alignment:"center",bind:o,disabled:d,icon:"sliders",id:"settings-action",key:"settings",scale:"s",slot:"trigger",text:a.settings}))}function le(e){return"none"===e.followingMode?"circle-disallowed":"follow-sensor"===e.followingMode?"zoom-to-object":"follow-frame"===e.followingMode?"follow":"video"}function oe(e){var t,i,n,l,o,s;let{viewModel:a,messages:r,settings:c,toggleMetadata:d}=e;const{state:h}=a,u="not-ready"===h||"waiting"===h,v=(0,j.K)("div",null,(0,j.K)("calcite-popover",{autoClose:!0,label:r.layers,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"layers-action",scale:"s"},(0,j.K)("calcite-panel",{heading:r.layers},(0,j.K)("calcite-list",{label:r.layers,selectionMode:"multiple"},(0,j.K)("calcite-list-item",{label:r.sensor,onclick:()=>{a.toggleSensorDisplay()},selected:!(null===(t=a.layer)||void 0===t||null===(t=t.telemetryDisplay)||void 0===t||!t.sensorLocation)}),(0,j.K)("calcite-list-item",{label:r.sightLine,onclick:()=>{a.toggleSensorSightLineDisplay()},selected:!(null===(i=a.layer)||void 0===i||null===(i=i.telemetryDisplay)||void 0===i||!i.lineOfSight)}),(0,j.K)("calcite-list-item",{label:r.sensorTrail,onclick:()=>{a.toggleSensorTrailDisplay()},selected:!(null===(n=a.layer)||void 0===n||null===(n=n.telemetryDisplay)||void 0===n||!n.sensorTrail)}),(0,j.K)("calcite-list-item",{label:r.frameCenter,onclick:()=>{a.toggleFrameCenterDisplay()},selected:!(null===(l=a.layer)||void 0===l||null===(l=l.telemetryDisplay)||void 0===l||!l.frameCenter)}),(0,j.K)("calcite-list-item",{label:r.frameOutline,onclick:()=>{a.toggleFrameOutlineDisplay()},selected:!(null===(o=a.layer)||void 0===o||null===(o=o.telemetryDisplay)||void 0===o||!o.frameOutline)}),(0,j.K)("calcite-list-item",{label:r.frame,onclick:()=>{a.toggleFrameDisplay()},selected:!(null===(s=a.layer)||void 0===s||null===(s=s.telemetryDisplay)||void 0===s||!s.frame)})))),(0,j.K)("calcite-action",{alignment:"center",bind:a,disabled:u,icon:"layers",id:"layers-action",key:"layers",scale:"s",slot:"trigger",text:r.layers})),p=(0,j.K)("div",null,(0,j.K)("calcite-popover",{autoClose:!0,label:r.follow,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"follow-action",scale:"s"},(0,j.K)("calcite-panel",{heading:r.follow},(0,j.K)("calcite-list",{label:r.follow,selectionMode:"single-persist"},(0,j.K)("calcite-list-item",{label:r.none,onclick:()=>{a.followingMode="none"}},(0,j.K)("calcite-icon",{icon:"circle-disallowed",scale:"s",slot:"content-start"})),(0,j.K)("calcite-list-item",{label:r.sensor,onclick:()=>{a.followingMode="follow-sensor"}},(0,j.K)("calcite-icon",{icon:"zoom-to-object",scale:"s",slot:"content-start"})),(0,j.K)("calcite-list-item",{label:r.frame,onclick:()=>{a.followingMode="follow-frame"}},(0,j.K)("calcite-icon",{icon:"follow",scale:"s",slot:"content-start"})),(0,j.K)("calcite-list-item",{label:r.video,onclick:()=>{a.followingMode="follow-both"},selected:!0},(0,j.K)("calcite-icon",{icon:"video",scale:"s",slot:"content-start"}))))),(0,j.K)("calcite-action",{alignment:"center",bind:a,disabled:u,icon:le(a),id:"follow-action",key:"follow",scale:"s",slot:"trigger",text:r.follow})),g=(0,j.K)(ne,{messages:r,settings:c,viewModel:a}),m=(0,j.K)("calcite-action",{alignment:"center",bind:a,disabled:u,icon:"feature-details",key:"metadata",onclick:d,scale:"s",text:r.metadata});return(0,j.K)("calcite-action-bar",{class:U.playerControls,expandDisabled:!0,layout:"horizontal",scale:"s"},[v,p,g,m])}let se=class extends G.default{constructor(e,t){super(e,t),this._settings=(0,l.clone)(ee),this._metadataVisible=!1,this._slider=new B.default({visibleElements:{labels:!1,rangeLabels:!1},min:0,max:100,values:[0],thumbsConstrained:!1}),this.videoView=new F({container:document.createElement("div"),constraints:{rotationEnabled:!1},ui:{components:["zoom"]}}),this.viewModel=new $.default}initialize(){this.addHandles([(0,o.watch)((()=>this.viewModel.layer),(()=>{this.videoView.layer=this.viewModel.layer}),o.initial),this._slider.on(["thumb-change","thumb-drag"],(e=>{let{value:t}=e;const i=t*this.viewModel.duration/100;this.viewModel.seekTo(i)}))])}loadDependencies(){return Promise.all([(0,H.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),"action-bar":()=>Promise.resolve().then(i.bind(i,143))}),Promise.all([(0,H.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),"action-bar":()=>Promise.resolve().then(i.bind(i,143)),panel:()=>Promise.resolve().then(i.bind(i,32647)),popover:()=>Promise.resolve().then(i.bind(i,51866)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),icon:()=>Promise.resolve().then(i.bind(i,16702))}),(0,H.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),flow:()=>i.e(87473).then(i.bind(i,87473)),"flow-item":()=>i.e(68445).then(i.bind(i,68445)),icon:()=>Promise.resolve().then(i.bind(i,16702)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),popover:()=>Promise.resolve().then(i.bind(i,51866)),block:()=>i.e(75502).then(i.bind(i,75502)),"color-picker":()=>Promise.all([i.e(46870),i.e(73596),i.e(41763),i.e(79709),i.e(46752)]).then(i.bind(i,46752)),chip:()=>Promise.resolve().then(i.bind(i,10239)),"color-picker-swatch":()=>i.e(73596).then(i.bind(i,73596))})]),(0,H.W)({accordion:()=>i.e(41439).then(i.bind(i,41439)),"accordion-item":()=>i.e(17095).then(i.bind(i,17095)),block:()=>i.e(75502).then(i.bind(i,75502)),tile:()=>i.e(9729).then(i.bind(i,9729))}),(0,H.W)({progress:()=>i.e(98144).then(i.bind(i,98144)),panel:()=>Promise.resolve().then(i.bind(i,32647)),scrim:()=>Promise.resolve().then(i.bind(i,32263))})])}get effect(){return this.videoView.effect}set effect(e){this.videoView.effect=e}get icon(){return"video-web"}set icon(e){this._overrideIfSome("icon",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get rotationEnabled(){return this.videoView.constraints.rotationEnabled}set rotationEnabled(e){this.videoView.constraints.rotationEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"compass"]:this.videoView.ui.components.filter((e=>"compass"!==e))}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get zoomEnabled(){return this.videoView.navigation.mouseWheelZoomEnabled}set zoomEnabled(e){this.videoView.navigation.mouseWheelZoomEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"zoom"]:this.videoView.ui.components.filter((e=>"zoom"!==e))}render(){var e;return(0,j.K)("div",{class:this.classes(U.base,L.D.widget)},(0,j.K)("calcite-panel",{heading:(null===(e=this.layer)||void 0===e?void 0:e.title)||"Video Player"},this._renderLoadingScrim(),this._renderBuffering(),this._renderVideoSection(),this._renderActionBar(),this._renderMetadataSection()))}_renderLoadingScrim(){const{state:e}=this.viewModel;return this.videoView.ready?null:(0,j.K)("calcite-scrim",{loading:"error"!==e},"error"===e?this.messages.errorLoadingLayer:null)}_renderBuffering(){const{currentTime:e,buffered:t,duration:i}=this.viewModel,n=t/(i||1),l=e/(i||1);return this.viewModel.ended||n>l?null:(0,j.K)("calcite-progress",{type:"indeterminate"})}_renderVideoSection(){const{buffered:e,currentTime:t,duration:i}=this.viewModel,n=this.videoView.container;if(!n)return null;n.className=U.videoView;const l=e/(i||1),o=t/(i||1);return this._slider.values=[100*o],(0,j.K)("section",{afterCreate:re,bind:n},(0,j.K)("div",{class:U.sliderProgressContainer},(0,j.K)("progress",{class:U.progress,max:"1",value:"".concat(l)}),(0,j.K)("div",{class:U.slider},this._slider.render())))}_renderActionBar(){return(0,j.K)("div",{class:U.playerToolbar},(0,j.K)(X,{messages:this.messages,viewModel:this.viewModel}),(0,j.K)("div",{class:U.playerTimecode},ae(this.viewModel.currentTime)," / ",ae(this.viewModel.duration)),(0,j.K)(oe,{messages:this.messages,settings:this._settings,toggleMetadata:()=>this._metadataVisible=!this._metadataVisible,viewModel:this.viewModel}))}_renderMetadataSection(){return this._metadataVisible?(0,j.K)(J,{messages:this.messages,viewModel:this.viewModel}):null}};function ae(e){return(0,r.Yq)(1e3*Math.round(e),{minute:"2-digit",second:"2-digit"})}function re(e){e.prepend(this)}(0,n._)([(0,s.MZ)()],se.prototype,"_settings",void 0),(0,n._)([(0,s.MZ)()],se.prototype,"effect",null),(0,n._)([(0,s.MZ)()],se.prototype,"icon",null),(0,n._)([(0,s.MZ)()],se.prototype,"layer",null),(0,n._)([(0,s.MZ)(),(0,W.G)("esri/widgets/VideoPlayer/t9n/VideoPlayer")],se.prototype,"messages",void 0),(0,n._)([(0,s.MZ)()],se.prototype,"rotationEnabled",null),(0,n._)([(0,s.MZ)()],se.prototype,"videoView",void 0),(0,n._)([(0,s.MZ)({type:$.default})],se.prototype,"viewModel",void 0),(0,n._)([(0,s.MZ)()],se.prototype,"view",null),(0,n._)([(0,s.MZ)()],se.prototype,"zoomEnabled",null),se=(0,n._)([(0,a.$)("esri.widgets.VideoPlayer")],se);const ce=se},54154:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n,l=i(35143),o=i(3825),s=i(50076),a=i(79053),r=i(76460),c=i(15941),d=i(68134),h=i(90534),u=i(46053),v=(i(81806),i(47249),i(85842)),p=i(17707),g=i(83622),m=i(62705),y=i(6446),f=i(79453);let b=class extends g.A{constructor(e){super(e),this.autoplay=!0,this.content=null,this.controller=null,this.type="video",this[n]=!0}load(){const e=this.video;return"string"==typeof e?this.addResolvingPromise(Promise.all([this._preProcessVideoUrl(e),i.e(80782).then(i.bind(i,80782))]).then((async e=>{let[t,{default:i}]=e;this.controller=new i,this.controller.playerUrl=t,await(0,d.whenOnce)((()=>{var e;return null===(e=this.controller)||void 0===e?void 0:e.element})),this.controller.loop=!0,this.controller.muted=!0,this.controller.playsInline=!0,this.controller.crossOrigin="anonymous",await(0,d.whenOnce)((()=>{var e;return"can-play"===(null===(e=this.controller)||void 0===e?void 0:e.state)})),await this.controller.play(),this.autoplay||this.controller.pause(),this._set("content",this.controller.element)}))):e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then((()=>{this._set("content",e)}))):this.addResolvingPromise(Promise.reject(new s.default("video-element:invalid-video-type","Invalid video type",{video:e}))),Promise.resolve(this)}get contentWidth(){var e,t;return null!==(e=null===(t=this.content)||void 0===t?void 0:t.videoWidth)&&void 0!==e?e:0}get contentHeight(){var e,t;return null!==(e=null===(t=this.content)||void 0===t?void 0:t.videoHeight)&&void 0!==e?e:0}get currentTime(){var e;return null===(e=this.controller)||void 0===e?void 0:e.currentTime}set currentTime(e){var t;if(!this.controller)return;const i=(0,c.qE)(e,0,this.controller.duration);null===(t=this.controller)||void 0===t||t.setCurrentTime(i)}get duration(){var e;return null===(e=this.controller)||void 0===e?void 0:e.duration}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):r.A.getLogger(this).error("#video","video cannot be changed after the element is loaded.")}writeVideo(e,t,i,n){if(!e)return void((null===n||void 0===n?void 0:n.messages)&&n.messages.push(new s.default("video-element:unsupported-video","video source is missing")));const l=function(e){return"string"==typeof e&&!(0,h.isDataProtocol)(e)&&!(0,h.isBlobProtocol)(e)}(e)?e:null;if(!l)return void((null===n||void 0===n?void 0:n.messages)&&n.messages.push(new s.default("video-element:unsupported-video","video source must be an absolute url")));!(0,h.isAbsolute)(l)&&(null===n||void 0===n?void 0:n.blockedRelativeUrls)&&n.blockedRelativeUrls.push(l);const o=(0,h.makeAbsolute)(l);(0,f.i)(o)?(null===n||void 0===n?void 0:n.messages)&&n.messages.push(new s.default("video-element:unsupported-video","video source cannot be an item resource")):t[i]=o}async _preProcessVideoUrl(e){if((0,h.getProxyRule)(e))return(0,h.addProxy)(e);try{return await(0,o.default)(e,{method:"head"}),e}catch(t){return(0,h.addProxy)(e,!0)}}_loadVideo(e){return new Promise(((t,i)=>{const n=(0,a.Oo)(e,"canplay",(()=>{this.removeHandles("canplay"),this.autoplay?e.play().then(t,i):t()}));this.addHandles(n,"canplay"),"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",(0,h.isBlobProtocol)(e.src)||(e.src=e.src))}))}};n=y.UR,(0,l._)([(0,u.MZ)()],b.prototype,"autoplay",void 0),(0,l._)([(0,u.MZ)({readOnly:!0})],b.prototype,"content",void 0),(0,l._)([(0,u.MZ)({readOnly:!0})],b.prototype,"contentWidth",null),(0,l._)([(0,u.MZ)({readOnly:!0})],b.prototype,"contentHeight",null),(0,l._)([(0,u.MZ)()],b.prototype,"controller",void 0),(0,l._)([(0,u.MZ)({type:Number})],b.prototype,"currentTime",null),(0,l._)([(0,u.MZ)({type:Number})],b.prototype,"duration",null),(0,l._)([(0,u.MZ)(m.x3)],b.prototype,"video",null),(0,l._)([(0,p.K)("video")],b.prototype,"writeVideo",null),(0,l._)([(0,u.MZ)(m.m$)],b.prototype,"type",void 0),b=(0,l._)([(0,v.$)("esri.layers.support.VideoElement")],b);const _=b}}]);
//# sourceMappingURL=77420.74a97ae5.chunk.js.map