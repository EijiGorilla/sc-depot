"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[3380,60831],{3380:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var n=i(35143),r=i(63241),a=i(76460),l=i(68134),s=i(76931),o=i(46053),c=(i(81806),i(47249),i(85842)),d=i(50265),u=i(16159),h=i(25329);const p="esri-scale-bar",v={base:p,labelContainer:"".concat(p,"__label-container"),rulerLabelContainer:"".concat(p,"__label-container--ruler"),lineLabelContainer:"".concat(p,"__label-container--line"),topLabelContainer:"".concat(p,"__label-container--top"),bottomLabelContainer:"".concat(p,"__label-container--bottom"),label:"".concat(p,"__label"),line:"".concat(p,"__line"),topLine:"".concat(p,"__line--top"),bottomLine:"".concat(p,"__line--bottom"),ruler:"".concat(p,"__ruler"),rulerBlock:"".concat(p,"__ruler-block"),barContainer:"".concat(p,"__bar-container"),rulerBarContainer:"".concat(p,"__bar-container--ruler"),lineBarContainer:"".concat(p,"__bar-container--line")};var _=i(60831),m=i(98108),b=(i(76099),i(63582)),w=i(54761);function f(e,t){return(0,d.ZV)(e,{style:"unit",unit:t,unitDisplay:"short"})}let g=class extends h.default{constructor(e,t){super(e,t),this.messages=null,this.style="line",this.viewModel=new _.default,(0,r.ED)(a.A.getLogger(this),"Scale Bar","arcgis-scale-bar",{version:"4.32"})}initialize(){this.addHandles((0,l.watch)((()=>{const{view:e}=this;return[null===e||void 0===e?void 0:e.stationary,null===e||void 0===e?void 0:e.center,null===e||void 0===e?void 0:e.scale,null===e||void 0===e?void 0:e.zoom]}),(e=>{let[t]=e;t&&this.scheduleRender()})))}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get unit(){return this._defaultUnit}set unit(e){this._overrideIfSome("unit",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="disabled"===this.viewModel.state,t={[m.D.disabled]:e};let i,n;if(!e){const{unit:e,style:t}=this,r="metric"===e||"dual"===e,a=100,l="dual"===e?"line":t;if("imperial"===e||"dual"===e){const e=this.viewModel.getScaleBarProperties(a,"imperial");e&&(n="ruler"===l?this._renderRuler(e):this._renderLine(e,"bottom"))}if(r){const e=this.viewModel.getScaleBarProperties(a,"metric");e&&(i="ruler"===l?this._renderRuler(e):this._renderLine(e,"top"))}}return(0,w.K)("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(v.base,m.D.widget,t)},i,n)}_renderRuler(e){const{length:t,unit:i,value:n}=e,r=Math.round(t),a=f(n,i);return(0,w.K)("div",{class:this.classes(v.barContainer,v.rulerBarContainer),key:v.rulerBarContainer},(0,w.K)("div",{class:v.ruler,styles:{width:"".concat(r,"px")}},(0,w.K)("div",{class:v.rulerBlock}),(0,w.K)("div",{class:v.rulerBlock}),(0,w.K)("div",{class:v.rulerBlock}),(0,w.K)("div",{class:v.rulerBlock})),(0,w.K)("div",{class:this.classes(v.labelContainer,v.rulerLabelContainer)},(0,w.K)("div",{class:v.label},"0"),(0,w.K)("div",{class:v.label},a)))}_renderLine(e,t){const{length:i,unit:n,value:r}=e,a=Math.round(i),l=f(r,n),s={[v.topLabelContainer]:"top"===t,[v.bottomLabelContainer]:"bottom"===t},o=(0,w.K)("div",{class:this.classes(v.labelContainer,v.lineLabelContainer,s),key:v.labelContainer},(0,w.K)("div",{class:v.label},l)),c={[v.topLine]:"top"===t,[v.bottomLine]:"bottom"===t},d=(0,w.K)("div",{class:this.classes(v.line,c),key:v.line,styles:{width:"".concat(a,"px")}});return(0,w.K)("div",{class:this.classes(v.barContainer,v.lineBarContainer),key:v.lineBarContainer},[d,o])}_handleRootCreateOrUpdate(e){if(!this.viewModel)return;const{scaleComputedFrom:t}=this.viewModel,i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset,a=(0,s.tc)(n,r);(a.x!==t.x||a.y!==t.y)&&(this.viewModel.scaleComputedFrom=a)}};(0,n._)([(0,o.MZ)(u.q)],g.prototype,"_defaultUnit",void 0),(0,n._)([(0,o.MZ)()],g.prototype,"icon",null),(0,n._)([(0,o.MZ)()],g.prototype,"label",null),(0,n._)([(0,o.MZ)(),(0,b.G)("esri/widgets/ScaleBar/t9n/ScaleBar")],g.prototype,"messages",void 0),(0,n._)([(0,o.MZ)({type:["ruler","line"]})],g.prototype,"style",void 0),(0,n._)([(0,o.MZ)({type:["metric","imperial","dual"]})],g.prototype,"unit",null),(0,n._)([(0,o.MZ)()],g.prototype,"view",null),(0,n._)([(0,o.MZ)()],g.prototype,"viewModel",void 0),g=(0,n._)([(0,c.$)("esri.widgets.ScaleBar")],g);const y=g},60831:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var n=i(35143),r=i(91967),a=i(76931),l=i(31633),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),c=i(19247),d=i(23701),u=i(13312),h=i(7137),p=i(73953),v=i(80963),_=i(45417),m=i(47818);function b(e){let{state:{paddedViewState:t},spatialReference:i,width:n}=e;return i.isWrappable&&t.worldScreenWidth<n}function w(e,t){const{x:i,y:n}=e?(0,_.webMercatorToGeographic)(t,!0):t;return[i,n]}let f=class extends r.default{constructor(e){super(e),this.scaleComputedFrom=(0,a.tc)(),this.view=null}get state(){var e;return null!==(e=this.view)&&void 0!==e&&e.ready&&"2d"===this.view.type?(0,m.O)(this.view)&&!this.view.inGeographicLayout?"disabled":"ready":"disabled"}getScaleBarProperties(e,t){if("disabled"===this.state||isNaN(e)||!t||!this.view)return null;const i=this._getDistanceInMeters();return null==i?null:this._getScaleBarProps(e,i,t)}_getDistanceInMeters(){const{state:e,spatialReference:t}=this.view;if(!(0,v.fn)(t))return null;const{isGeographic:i}=t,n=function(e){var t,i;const{isWebMercator:n,wkt:r,wkt2:a}=e;return n||null!==(t=null===(i=a||r)||void 0===i?void 0:i.includes("WGS_1984_Web_Mercator"))&&void 0!==t&&t}(t);var r;if(!i&&!n)return e.extent.width*(null!==(r=(0,l.Ao)(t))&&void 0!==r?r:1);const[a,s]=this._getScaleMeasuringPoints(),o=n||i&&!(0,h.isSupported)(t)?u.default.WGS84:t,c=new d.default({paths:[[w(n,a),w(n,s)]],spatialReference:o}),_=(0,p.straightLineDensify)(c,10);let m;try{[m]=(0,h.geodesicLengths)([_],"meters")}catch(b){return null}return m}_getScaleMeasuringPoints(){const e=this.view,{width:t,height:i,position:n,spatialReference:r}=e;if(b(e)){const e=(0,v.Vp)(r),{valid:t}=e;return[new c.default(t[0],0,r),new c.default(t[1],0,r)]}let l=this.scaleComputedFrom.y-n[1];l>i?l=i:l<0&&(l=0);const s=(0,a.tc)(0,l),o=(0,a.tc)(t,l);return[e.toMap(s),e.toMap(o)]}_getScaleBarProps(e,t,i){const n=this.view,r=e*t/(b(n)?n.state.paddedViewState.worldScreenWidth:n.width);if(r<.001)return null;const a=function(e,t){switch(t){case"metric":return e>1e3?{distance:(0,l.oU)(e,"meters","kilometers"),unit:"kilometer"}:e>1?{distance:e,unit:"meter"}:e>.01?{distance:(0,l.oU)(e,"meters","centimeters"),unit:"centimeter"}:{distance:(0,l.oU)(e,"meters","millimeters"),unit:"millimeter"};case"imperial":return e>1609.344?{distance:(0,l.oU)(e,"meters","miles"),unit:"mile"}:e>.3048?{distance:(0,l.oU)(e,"meters","feet"),unit:"foot"}:{distance:(0,l.oU)(e,"meters","inches"),unit:"inch"}}}(r,i),{distance:s,unit:o}=a;let c=s,d=0;for(;c>=1;)c/=10,d++;const{min:u,max:h}=function(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}(c),p=h/c>=c/u?u:h;return{length:e*(p/c),value:10**d*p,unit:o}}};(0,n._)([(0,s.MZ)()],f.prototype,"scaleComputedFrom",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],f.prototype,"state",null),(0,n._)([(0,s.MZ)()],f.prototype,"view",void 0),f=(0,n._)([(0,o.$)("esri.widgets.ScaleBar.ScaleBarViewModel")],f);const g=f}}]);
//# sourceMappingURL=3380.af53efdd.chunk.js.map