"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[54258,89646,95327],{12189:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var r=i(35143),s=i(46053),n=(i(81806),i(76460),i(47249),i(85842)),o=i(19247),a=i(64465),l=i(67234),h=i(78702),d=i(32344),c=i(42151),p=i(57308),u=i(82307),v=i(974),g=i(59833),_=i(11500);let m=class extends l.default{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this._drawTool=null,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){this._removeDrawTool(),this.emit("destroy")}complete(){this._completeDrawing()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){"click"===this.mode?this.addHandles(this._getClickModeViewHandles()):this.addHandles(this._getDragModeViewHandles())}_getDragModeViewHandles(){return[this.view.on("immediate-click",(e=>{e.stopPropagation(),e.mapPoint&&!this._panEnabled&&null!=this.getCoordsFromScreenPoint((0,_.ZV)(e))&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}),p.o.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,_.ZV)(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor()))}),p.o.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),null==this._activePointerId&&"touch"!==e.pointerType&&(this._cursorScreenPoint=(0,_.ZV)(e),this._updateCursor())}),p.o.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=(0,_.ZV)(e),this._updateCursor())}),p.o.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)}),p.o.TOOL),this.view.on("key-down",(e=>{e.key===u.NE.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===u.NE.pan&&(this._panEnabled=!0)}),p.o.TOOL),this.view.on("key-up",(e=>{e.key===u.NE.pan&&(this._panEnabled=!1)}),p.o.TOOL),this.view.on("drag",(e=>{null!=this._activePointerId&&e.stopPropagation()}),p.o.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),p.o.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,_.ZV)(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor()}),p.o.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,_.ZV)(e),null==this._activePointerId&&"touch"!==e.pointerType&&this._updateCursor()}),p.o.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)}),p.o.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)}),p.o.TOOL),this.view.on("key-down",(e=>{e.key===u.NE.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===u.NE.complete&&this._cursorScreenPoint&&2===this.vertices.length&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}),p.o.TOOL)]}_addDrawTool(){const e=new h.B({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode});this._drawTool=e,this.view.addAndActivateTool(e),this.addHandles([e.on("vertex-add",(t=>{1===t.vertices.length&&this.emit("vertex-add",new d.Sf(this.view,t.vertices[0].vertexIndex,e.getVertexCoords()))})),e.on("cursor-update",(t=>{1===t.vertices.length&&this.emit("cursor-update",new d.sQ(this.view,t.vertices[0].vertexIndex,e.getVertexCoords()))})),e.on("complete",(t=>{this.emit("draw-complete",new d.cH(e.getVertexCoords())),this._removeDrawTool()})),this.view.on("key-down",(t=>{t.key!==u.NE.vertexAdd||t.repeat||"click"!==this.mode?t.key!==u.NE.complete||t.repeat||e.completeCreateOperation():e.drawOperation.numCommittedVertices>0?e.completeCreateOperation():e.drawOperation.commitStagedVertex()}),p.o.TOOL)])}_removeDrawTool(){this._drawTool&&(this.view.tools.remove(this._drawTool),this._drawTool=null)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(t))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=(0,c.ZP)(this.view,this._committedVertices[0]));const i=this._committedVertices.length-1,r=new d.Sf(this.view,i,this.vertices);this.emit("vertex-add",r)}_updateCursor(){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const e=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);null!=e&&this._pushCursorVertex(e.vertex,(()=>this.emit("cursor-update",new d.sQ(this.view,this._activeComponent.vertices.length,this.vertices,null!=this._stagedVertex?new o.default(this._stagedVertex):null))))}_completeDrawing(){if(this._drawTool)return this._drawTool.completeCreateOperation(),void this.removeAllHandles();if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),null!=this._snappingManager&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const e=new d.cH(this.vertices);this.emit("draw-complete",e),e.defaultPrevented||this.removeAllHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new g.p(new v.ZE("polygon",this._coordinateHelper),a.RT.Local),this._activeComponent=new v.uA(this._coordinateHelper.spatialReference,a.RT.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};(0,r._)([(0,s.MZ)({type:["freehand","click"]})],m.prototype,"mode",void 0),m=(0,r._)([(0,n.$)("esri.views.draw.SegmentDrawAction")],m);const w=m},42151:(e,t,i)=>{i.d(t,{E5:()=>u,ZP:()=>m,vz:()=>g});var r=i(18690),s=i(94967),n=i(99809),o=i(60008),a=i(4336),l=i(20664),h=i(9392),d=i(19247),c=i(5568);function p(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=i?[e,t,i]:[e,t]}function u(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=i?{x:e,y:t,z:i}:{x:e,y:t}}class v{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(r.Ru)}get doUnnormalization(){return!1}}class g extends v{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(t),this._defaultZ=i,this.transform=(0,n.vt)(),this.transformInv=(0,n.vt)(),this.transform=(0,n.o8)(e),(0,s.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return p(e,t,this._defaultZ)}mapToLocal(e){return u(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return p(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class _ extends v{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,h.vt)(),this.tangentFrameUpWS=(0,h.vt)(),this.tangentFrameRightWS=(0,h.vt)(),this.tangentFrameForwardWS=(0,h.vt)(),this.localFrameRightWS=(0,h.vt)(),this.localFrameUpWS=(0,h.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const i=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,c._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,c._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,c._.Z,this.tangentFrameForwardWS);const r=(0,h.vt)();(0,l.h)(r,this.tangentFrameForwardWS,(0,l.f)(i,this.tangentFrameForwardWS)),(0,l.d)(this.localFrameRightWS,i,r),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.e)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,o.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,o.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return p(e,t,this.defaultZ)}mapToLocal(e){const t=(0,h.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.worldToLocalTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=i?u(i.x/this.scale,i.y/this.scale):null}localToMap(e){const t=(0,h.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.localToWorldTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=i?p(i.x,i.y,this.defaultZ):null}}function m(e,t){if("2d"===e.type)return new g(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const i=t.length>2?new d.default({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new d.default({x:t[0],y:t[1],spatialReference:e.spatialReference});return new _(e,i)}return null}},56061:(e,t,i)=>{i.d(t,{t:()=>s,x:()=>r});const r=["freehand","hybrid","click"],s="click"},60767:(e,t,i)=>{i.d(t,{A:()=>n});var r=i(99486),s=i(99702);class n{constructor(e){this._observable=new s.I,this._set=new Set(e)}get size(){return(0,r.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,r.gc)(this._observable),this._set.entries()}forEach(e,t){(0,r.gc)(this._observable),this._set.forEach(((i,r)=>e.call(t,i,r,this)),t)}has(e){return(0,r.gc)(this._observable),this._set.has(e)}keys(){return(0,r.gc)(this._observable),this._set.keys()}values(){return(0,r.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,r.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},78702:(e,t,i)=>{i.d(t,{B:()=>p});var r=i(35143),s=i(54099),n=i(30726),o=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),l=i(12482),h=i(35384),d=i(66812),c=i(56829);let p=class extends(s.A.EventedMixin(c.g)){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=this.view,t=(0,l.bK)(this.hasZ,this.elevationInfo);this.drawOperation=new h.O0({view:e,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:"3d"===e.type?new d.IX(e,t):null,elevationDrawSurface:"3d"===e.type?new d.rT(t,this.defaultZ,e):null,hasM:!1,elevationInfo:t}),this.addHandles([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,n.pR)(this.drawOperation),this._set("view",null)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){var e,t;return null!==(e=null===(t=this.drawOperation)||void 0===t?void 0:t.updating)&&void 0!==e&&e}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.geometryIncludingUncommittedVertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}canRedo(){return this.drawOperation.canRedo}canUndo(){return this.drawOperation.canUndo}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};(0,r._)([(0,o.MZ)({constructOnly:!0,nonNullable:!0})],p.prototype,"defaultZ",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"drawOperation",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],p.prototype,"elevationInfo",void 0),(0,r._)([(0,o.MZ)({value:!0})],p.prototype,"enabled",null),(0,r._)([(0,o.MZ)({constructOnly:!0})],p.prototype,"geometryType",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],p.prototype,"hasZ",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],p.prototype,"mode",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"snapToScene",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],p.prototype,"type",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],p.prototype,"updating",null),(0,r._)([(0,o.MZ)({constructOnly:!0,nonNullable:!0})],p.prototype,"view",void 0),p=(0,r._)([(0,a.$)("esri.views.draw.DrawTool")],p)},89646:(e,t,i)=>{i.d(t,{$h:()=>g,Ef:()=>b,IP:()=>m,P1:()=>S,hF:()=>T,jQ:()=>y,rT:()=>O,rZ:()=>r,uR:()=>w});var r,s,n=i(73582),o=i(24648),a=i(31633),l=i(19555),h=i(72745),d=i(20664),c=i(9392),p=i(14487),u=i(7137),v=i(80963);function g(e,t){if(null==e||null==t)return;const i=_(e,t);return null!=i?(0,o.Wq)(i,"radians","geographic"):void 0}(s=r||(r={})).Absolute="absolute",s.Relative="relative",s.RelativeBilateral="relative-bilateral";const _=(()=>{const e=(0,c.vt)(),t=(0,c.vt)();return(i,r)=>{var s,n;return(0,d.i)(e,i.x,i.y,null!==(s=i.z)&&void 0!==s?s:0),(0,d.i)(t,r.x,r.y,null!==(n=r.z)&&void 0!==n?n:0),m(e,t,i.spatialReference,r.spatialReference)}})(),m=(()=>{const e=(0,h.vt)(),t=(0,c.vt)(),i=(0,c.vt)();return(r,s,n,o)=>{if((0,d.p)(r,s))return;const c=(0,u.geodesicCompatibleSpatialReference)(n),g=(0,u.geodesicCompatibleSpatialReference)(o);if(c&&g&&(0,v.aI)(c,g)&&(0,p.F)(r,n,t,c)&&(0,p.F)(s,o,i,g)){const{azimuth:e}=(0,u.inverseGeodeticSolver)(C,t,i,c);return null!=e?(0,a.oU)(e,"degrees","radians"):void 0}e[0]=s[0]-r[0],e[1]=s[1]-r[1];let _=(0,l.g7)(h.JP,e);return e[0]<0&&(_=R-_),_}})();function w(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.Absolute;if(t&&i)switch(s){case r.Absolute:return g(t,i);case r.Relative:return y(f(e,t,i),r.Relative);case r.RelativeBilateral:return y(f(e,t,i),r.RelativeBilateral)}}function f(e,t,i){if(!e||!t||!i)return;const r=_(e,t),s=_(t,i);return null!=r&&null!=s?(0,o.Wq)(s-r,"radians","geographic"):void 0}function y(e,t){if(null!=e)switch(t){case r.Absolute:return S(e);case r.Relative:{const t=T(e);let i=Z.normalize(t,0,!0);return-180===i&&(i=180),(0,o.Wq)(i,"degrees","geographic")}case r.RelativeBilateral:{const t=T(e),i=Math.abs(Z.normalize(t,0,!0));return(0,o.Wq)(i,"degrees","geographic")}}}function S(e){const t=T(e),i=P.normalize(t,0,!0);return(0,o.Wq)(i,"degrees","geographic")}const O=(()=>{const e=(0,c.vt)();return function(t,i,r,s,n){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"geodesic";(0,d.c)(e,i);const h=T(n);if("geodesic"===l){const n=(0,u.geodesicCompatibleSpatialReference)(r);if(n&&(0,p.F)(e,r,e,n))return(0,u.directGeodeticSolver)(t,e,h,s,n),t[2]=i[2],!!(0,p.F)(t,n,t,r)}const c=(0,o.g2)(h,"geographic","arithmetic"),v=(0,a.oU)(c,"degrees","radians"),g=i[0]+s*Math.cos(v),_=i[1]+s*Math.sin(v),m=i[2];return(0,d.i)(t,g,_,m),!0}})();function T(e){if(null!=e)return(0,o.g2)(x(e),e.rotationType,"geographic")}function b(e){if(null!=e)return(0,o.g2)(x(e),e.rotationType,"arithmetic")}function x(e){return(0,a.oU)(e.value,e.unit,"degrees")}const C=new u.InverseGeodeticSolverResult,R=2*Math.PI,P=n.ie,Z=new n.hr(-180,180)},95327:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var r=i(35143),s=i(91967),n=i(46053),o=(i(81806),i(76460),i(47249),i(85842));let a=class extends s.default{constructor(e){super(e),this.enabled=!1}};(0,r._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"enabled",void 0),a=(0,r._)([(0,o.$)("esri.views.interactive.sketch.SketchLabelOptions")],a);const l=a}}]);
//# sourceMappingURL=54258.52e7dccd.chunk.js.map