"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[58872,85367],{2052:(e,t,n)=>{n.d(t,{i:()=>a});class a{constructor(e,t,n,a){this._hasNoDataValues=null,this._minValue=null,this._maxValue=null,"pixelData"in e?(this.values=e.pixelData,this.width=e.width,this.height=e.height,this.noDataValue=e.noDataValue):(this.values=e,this.width=t,this.height=n,this.noDataValue=a)}get hasNoDataValues(){if(null==this._hasNoDataValues){const e=this.noDataValue;this._hasNoDataValues=this.values.includes(e)}return this._hasNoDataValues}get minValue(){return this._ensureBounds(),this._minValue}get maxValue(){return this._ensureBounds(),this._maxValue}get cachedMemory(){return this.values.byteLength+256}_ensureBounds(){if(null!=this._minValue)return;const{noDataValue:e,values:t}=this;let n=1/0,a=-1/0,i=!0;for(const o of t)o===e?this._hasNoDataValues=!0:(n=o<n?o:n,a=o>a?o:a,i=!1);i?(this._minValue=0,this._maxValue=0):(this._minValue=n,this._maxValue=a>-3e38?a:0)}}},23875:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(89379),i=n(35143),o=n(3825),r=n(50076),l=n(30726),s=n(77717),c=n(50346),u=n(90534),d=n(46053),h=(n(81806),n(76460),n(47249),n(28379)),f=n(85842),v=n(91605),p=n(25515),m=n(76328),y=n(19502),g=n(11270),w=n(94729),M=n(95363),A=n(2052),b=n(60883);let x=class extends((0,m.f)((0,y.b)((0,g.q)((0,w.A)((0,s.P)(p.default)))))){constructor(){super(...arguments),this.capabilities={operations:{supportsTileMap:!1}},this.copyright=null,this.heightModelInfo=null,this.path=null,this.minScale=void 0,this.maxScale=void 0,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=(0,b.b)()}normalizeCtorArgs(e,t){return"string"==typeof e?(0,a.A)({url:e},t):e}destroy(){this._lercDecoder=(0,l.Gz)(this._lercDecoder)}readCapabilities(e,t){const n=t.capabilities&&t.capabilities.split(",").map((e=>e.toLowerCase().trim()));return n?{operations:{supportsTileMap:n.includes("tilemap")}}:{operations:{supportsTileMap:!1}}}readVersion(e,t){let n=t.currentVersion;return n||(n=9.3),n}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{if(e.typeKeywords)for(let t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new r.default("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).catch(c.throwIfAbortError).then((()=>this._fetchImageService(t)))),Promise.resolve(this)}fetchTile(e,t,n,a){const i=null===a||void 0===a?void 0:a.signal,r={responseType:"array-buffer",signal:i},l={noDataValue:null===a||void 0===a?void 0:a.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,n,a))).then((()=>(0,o.default)(this.getTileUrl(e,t,n),r))).then((e=>this._lercDecoder.decode(e.data,l,i))).then((e=>new A.i(e)))}getTileUrl(e,t,n){const i=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,o=(0,u.objectToQuery)((0,a.A)((0,a.A)({},this.parsedUrl.query),{},{blankTile:!i&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(n).concat(o?"?"+o:"")}async queryElevation(e,t){const{ElevationQuery:a}=await n.e(18722).then(n.bind(n,18722));return(0,c.throwIfAborted)(t),(new a).query(this,e,t)}async createElevationSampler(e,t){const{ElevationQuery:a}=await n.e(18722).then(n.bind(n,18722));return(0,c.throwIfAborted)(t),(new a).createSampler(this,e,t)}_fetchTileAvailability(e,t,n,a){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,n,a):Promise.resolve("unknown")}async _fetchImageService(e){var t;if(this.sourceJSON)return this.sourceJSON;const n={query:(0,a.A)({f:"json"},this.parsedUrl.query),responseType:"json",signal:e},i=await(0,o.default)(this.parsedUrl.path,n);i.ssl&&(this.url=null===(t=this.url)||void 0===t?void 0:t.replace(/^http:/i,"https:")),this.sourceJSON=i.data,this.read(i.data,{origin:"service",url:this.parsedUrl})}get hasOverriddenFetchTile(){return!this.fetchTile[T]}};(0,i._)([(0,d.MZ)({readOnly:!0})],x.prototype,"capabilities",void 0),(0,i._)([(0,h.w)("service","capabilities",["capabilities"])],x.prototype,"readCapabilities",null),(0,i._)([(0,d.MZ)({json:{read:{source:"copyrightText"}}})],x.prototype,"copyright",void 0),(0,i._)([(0,d.MZ)({readOnly:!0,type:v.default})],x.prototype,"heightModelInfo",void 0),(0,i._)([(0,d.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],x.prototype,"path",void 0),(0,i._)([(0,d.MZ)({type:["show","hide"]})],x.prototype,"listMode",void 0),(0,i._)([(0,d.MZ)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],x.prototype,"minScale",void 0),(0,i._)([(0,d.MZ)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],x.prototype,"maxScale",void 0),(0,i._)([(0,d.MZ)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],x.prototype,"opacity",void 0),(0,i._)([(0,d.MZ)({type:["ArcGISTiledElevationServiceLayer"]})],x.prototype,"operationalLayerType",void 0),(0,i._)([(0,d.MZ)()],x.prototype,"sourceJSON",void 0),(0,i._)([(0,d.MZ)({json:{read:!1},value:"elevation",readOnly:!0})],x.prototype,"type",void 0),(0,i._)([(0,d.MZ)(M.OZ)],x.prototype,"url",void 0),(0,i._)([(0,d.MZ)()],x.prototype,"version",void 0),(0,i._)([(0,h.w)("version",["currentVersion"])],x.prototype,"readVersion",null),x=(0,i._)([(0,f.$)("esri.layers.ElevationLayer")],x);const T=Symbol("default-fetch-tile");x.prototype.fetchTile[T]=!0;const _=x},34780:(e,t,n)=>{n.d(t,{q:()=>i});var a=n(38205);class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.tile=e,null!=t&&null!=e){const n=e.extent;this._samplerData=new a.Q(t,n)}}get zmin(){return null!=this._samplerData?this._samplerData.data.minValue:0}get zmax(){return null!=this._samplerData?this._samplerData.data.maxValue:0}get hasNoDataValues(){var e;return!(null===(e=this._samplerData)||void 0===e||!e.data.hasNoDataValues)}sample(e,t){if(null==this._samplerData)return;const{safeWidth:n,data:a,dx:i,dy:r,y1:l,x0:s}=this._samplerData,{width:c,values:u,noDataValue:d}=a,h=o(r*(l-t),0,n),f=o(i*(e-s),0,n),v=Math.floor(h),p=Math.floor(f),m=v*c+p,y=m+c,g=u[m],w=u[y],M=u[m+1],A=u[y+1];if(g!==d&&w!==d&&M!==d&&A!==d){const e=f-p,t=g+(M-g)*e;return t+(w+(A-w)*e-t)*(h-v)}}}function o(e,t,n){return e<t?t:e>n?n:e}},36116:(e,t,n)=>{n.d(t,{Ys:()=>A,gm:()=>x,h:()=>b,kV:()=>_});var a,i,o=n(89379),r=n(50076),l=n(76460),s=n(50346),c=n(9624),u=n(2413),d=n(23875),h=n(85598),f=(n(33562),n(96138)),v=n(34780),p=n(2052),m=n(44038),y=n(88235),g=n(11164),w=(n(90391),n(81950),n(67061)),M=n(38338);async function A(e,t,n){if(!t.extent||!t.url)throw(0,M.EW)("esri.layer.orientedImagery.transformations",new r.default("update-elevation:missing-property","both extent and url are required to create a sampler",t));const a=await x(t);if(!a)throw(0,M.EW)("esri.layers.orientedImagery.transformations",new r.default("update-elevation:elevation-source","could not create a sampler using provided elevation source",t));return b(e,a,n)}async function b(e,t,n){await(0,s.waitTick)(n);const a=function(e,t){return async n=>{var a;let i=n.clone();const o=n.spatialReference.equals(e.spatialReference)?i:await(0,c.projectWithZConversion)(n,e.spatialReference,t),r=e.queryElevation(o);return r&&(i=n.spatialReference.equals(e.spatialReference)?r.clone():await(0,c.projectWithZConversion)(r,n.spatialReference,t)),i.z=null!==(a=i.z)&&void 0!==a?a:1,i}}(t,n),i=Array.isArray(e)?e:[e];return await Promise.all(i.map(a))}(i=a||(a={}))[i.DYNAMIC=0]="DYNAMIC",i[i.ELEVATION=1]="ELEVATION",i[i.IMAGE=2]="IMAGE";const x=async(e,t)=>{let n;const{extent:i,rasterFunction:r,url:c,lod:w}=e;try{n=await T(c)}catch(M){if((0,s.isAbortError)(M))return;l.A.getLogger("esri.layers.orientedImagery.transformations").error("updateElevationUsingElevationSource",M)}switch(n){case a.DYNAMIC:return await async function(e,t,n,a){const i=n?new m.default({functionName:n}):void 0,o=new h.default({url:e,rasterFunction:i,format:"lerc"});await o.load(a);let r,l=512,s=512;const c=t.width/t.height;c>1?(s/=c,r=t.height/s):(l*=c,r=t.width/l);const d=await o.fetchImage(t,l,s,a),w=y.default.create({scales:[r],size:512,spatialReference:t.spatialReference}),M=new g.U(null,0,0,0,(0,u.VY)(t)),A=new p.i(d.pixelData.pixelBlock.pixels[0],l,s,0),b=new v.q(M,A);return new f.TileElevationSampler(b,w,void 0)}(c,i,r,t);case a.ELEVATION:return await async function(e,t,n,a){const i=new d.default(e);let r;try{var c,u;const{tileInfo:e}=await i.load(),l=null!==(c=n&&(null===(u=e.lodAt(Math.min(e.lods.length-1,n)))||void 0===u?void 0:u.resolution))&&void 0!==c?c:"finest-contiguous";r=await i.createElevationSampler(t,(0,o.A)((0,o.A)({},a),{},{demResolution:l}))}catch(M){if((0,s.isAbortError)(M))return;l.A.getLogger(i).error(M)}finally{i.destroy()}return r}(c,i,w,t);default:return}};async function T(e,t){var n;await(0,s.waitTick)(t);const i=await(0,w.V)(e),{tileInfo:o,cacheType:l}=i;if(!i.hasOwnProperty("bandCount")||!i.hasOwnProperty("pixelSizeX"))throw new r.default("elevation-source:invalid-service-url","ElevationSource URL expects an elevation 3D image service but given ".concat(e));return o?"LERC"!==(null===o||void 0===o||null===(n=o.format)||void 0===n?void 0:n.toUpperCase())||l&&"elevation"!==l.toLowerCase()?a.IMAGE:a.ELEVATION:a.DYNAMIC}async function _(e,t,n){return await(0,s.waitTick)(n),e.map((e=>(e.z=t,e)))}},38338:(e,t,n)=>{n.d(t,{Cg:()=>h,DU:()=>s,EW:()=>g,FL:()=>v,Fe:()=>m,Gd:()=>l,NL:()=>p,RP:()=>c,_U:()=>u,br:()=>y,gt:()=>w,mz:()=>f,wB:()=>d});var a=n(89379),i=n(3825),o=n(76460),r=n(44538);function l(e){return"3d"===(null===e||void 0===e?void 0:e.type)}function s(e){return"esri.Graphic"===(null===e||void 0===e?void 0:e.declaredClass)}function c(e){return/(tiff|tif|mrf)$/i.test(null!==e&&void 0!==e?e:"")}function u(e){if(!e)return!1;if(!URL.canParse(e))return!1;const{pathname:t}=new URL(e);return/.*\.(tiff|tif|mrf)$/i.test(null!==t&&void 0!==t?t:"")}function d(e){return Math.abs(e)>=135?"WEST":e<-45&&e>-135?"SOUTH":e<=45?"EAST":"NORTH"}function h(e,t){const n=e/t*r.rV[2];return n<=r.rV[0]?"NEAR":n<=r.rV[1]?"":"FAR"}function f(e){return"string"==typeof e&&e.length?e:function(e){return e&&e.url&&e.datasetFormat?e:null}(e)}const v=e=>t=>t.layer===e;function p(e){return"NoAttachmentError"===(null===e||void 0===e?void 0:e.name)}const m=e=>"".concat(e,":missing-property"),y=(e,t)=>"Property ".concat(t," is missing in ").concat(e),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"esri.widgets.OrientedImageryViewer",t=arguments.length>1?arguments[1]:void 0;throw o.A.getLogger(e).error(t),t},w=async(e,t)=>{var n;const o=await(0,i.default)(e,(0,a.A)((0,a.A)({},t),{},{method:"head"})),r=null===o||void 0===o||null===(n=o.getHeader)||void 0===n?void 0:n.call(o,"Content-Type");if(r)return r.split("/")[1]}},44067:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(50076),i=n(50346);class o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.lods[e.lods.length-1].level;this.tileInfo=e,this.minLOD=t,this.maxLOD=n,e.lodAt(t)||(this.minLOD=e.lods[0].level),e.lodAt(n)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){var e;return null!==(e=this.minLOD)&&void 0!==e?e:this.tileInfo.lods[0].level}get effectiveMaxLOD(){var e;return null!==(e=this.maxLOD)&&void 0!==e?e:this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,t,n){var a;const i=null===(a=this.tileInfo)||void 0===a?void 0:a.lodAt(e);return!i||e<this.minLOD||e>this.maxLOD?"unavailable":i.cols&&i.rows?n>=i.cols[0]&&n<=i.cols[1]&&t>=i.rows[0]&&t<=i.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,t,n,o){await(0,i.waitTick)(o);const r=this.getAvailability(e,t,n);if("unavailable"===r)throw new a.default("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n});return r}async fetchAvailabilityUpsample(e,t,n,a,o){await(0,i.waitTick)(o),a.level=e,a.row=t,a.col=n;const r=this.tileInfo;return r.updateTileInfo(a),this.fetchAvailability(e,t,n,o).catch((e=>{if((0,i.isAbortError)(e))throw e;if(r.upsampleTile(a))return this.fetchAvailabilityUpsample(a.level,a.row,a.col,a,o);throw e}))}}},44538:(e,t,n)=>{n.d(t,{BH:()=>u,PD:()=>r,RK:()=>d,Vx:()=>c,Z5:()=>a,dx:()=>o,j5:()=>f,p4:()=>h,rV:()=>i,uS:()=>v});const a=120,i=[21,36,51,60],o=3.5,r=["FAR_WEST","FAR_NORTH","FAR_EAST","FAR_SOUTH","WEST","NORTH","EAST","SOUTH","NEAR_WEST","NEAR_NORTH","NEAR_EAST","NEAR_SOUTH"],l=23.937554159486076,s=96.06244584051393,c={EAST:[l,l,s,l,60,l],NORTH:[l,s,l,l,l,60],SOUTH:[s,l,s,s,s,60],WEST:[s,s,l,s,60,s]},u=-999,d=100,h=()=>["after-data-capture-complete","deselect-data-capture-features","select-data-capture-features"],f="ImageGeometry",v="OIObjectId"},57134:(e,t,n)=>{n.d(t,{EA:()=>s,EF:()=>l,ZH:()=>o,li:()=>c,vK:()=>r});var a=n(19247),i=n(13312);const o=new a.default({x:0,y:0,z:0,spatialReference:i.default.WebMercator}),r=1e3,l=114,s=120,c=50},58872:(e,t,n)=>{n.d(t,{E1:()=>u,Mr:()=>c,TH:()=>s,jV:()=>d});var a=n(35143),i=n(69098),o=n(42553),r=n(46053),l=(n(81806),n(76460),n(47249),n(85842));let s=class extends(i.A.ClonableMixin(o.A)){constructor(){super(...arguments),this.url=null}};(0,a._)([(0,r.MZ)({type:Number,json:{write:!0}})],s.prototype,"lod",void 0),(0,a._)([(0,r.MZ)({type:String,json:{write:!0}})],s.prototype,"rasterFunction",void 0),(0,a._)([(0,r.MZ)({type:String,json:{write:!0}})],s.prototype,"url",void 0),s=(0,a._)([(0,l.$)("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],s);let c=class extends(i.A.ClonableMixin(o.A)){constructor(){super(...arguments),this.constantElevation=null}};(0,a._)([(0,r.MZ)({type:Number,json:{write:!0}})],c.prototype,"constantElevation",void 0),c=(0,a._)([(0,l.$)("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],c);const u=e=>null!=e&&"number"==typeof e.constantElevation,d=e=>{var t;return null!=e&&(null===(t=e.url)||void 0===t?void 0:t.length)>0}},60883:(e,t,n)=>{n.d(t,{b:()=>r});var a=n(12016);class i extends a.B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super("LercWorker","_decode",{_decode:e=>[e.buffer]},e,{strategy:"dedicated"}),this.schedule=e,this.ref=0}decode(e,t,n){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},n):Promise.resolve(null)}release(){--this.ref<=0&&(o.forEach(((e,t)=>{e===this&&o.delete(t)})),this.destroy())}}const o=new Map;function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o.get(e);return t||(null!=e?(t=new i((t=>e.immediate.schedule(t))),o.set(e,t)):(t=new i,o.set(null,t))),++t.ref,t}},67061:(e,t,n)=>{n.d(t,{V:()=>o});var a=n(89379),i=n(3825);async function o(e,t){const{data:n}=await(0,i.default)(e,{responseType:"json",query:(0,a.A)((0,a.A)({f:"json"},null===t||void 0===t?void 0:t.customParameters),{},{token:null===t||void 0===t?void 0:t.apiKey})});return n}},76328:(e,t,n)=>{n.d(t,{f:()=>d});var a=n(35143),i=n(46053),o=(n(81806),n(76460),n(47249),n(28379)),r=n(85842),l=n(13312),s=n(88235),c=n(44067),u=n(82356);const d=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var e,t;null===(e=this.tilemapCache)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t,n){var a;const i=null===(a=t.capabilities)||void 0===a?void 0:a.includes("Tilemap");let{minLOD:o,maxLOD:r,minScale:l,maxScale:d}=t;if(null==o&&null==r&&(0!==l||0!==d)){const e=e=>Math.round(1e4*e)/1e4;l=e(l||t.tileInfo.lods[0].scale),d=e(d||t.tileInfo.lods[t.tileInfo.lods.length-1].scale);for(const n of t.tileInfo.lods){const t=e(n.scale);o=t>=l?n.level:o,r=t>=d?n.level:r}}if(i)return new u.d({layer:this,minLOD:o,maxLOD:r});if(t.tileInfo){const e=new s.default;return e.read(t.tileInfo,n),new c.A(e,o,r)}return null}};return(0,a._)([(0,i.MZ)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,a._)([(0,i.MZ)()],t.prototype,"minScale",void 0),(0,a._)([(0,o.w)("service","minScale")],t.prototype,"readMinScale",null),(0,a._)([(0,i.MZ)()],t.prototype,"maxScale",void 0),(0,a._)([(0,o.w)("service","maxScale")],t.prototype,"readMaxScale",null),(0,a._)([(0,i.MZ)({type:l.default})],t.prototype,"spatialReference",void 0),(0,a._)([(0,i.MZ)({readOnly:!0})],t.prototype,"supportsBlankTile",null),(0,a._)([(0,i.MZ)({type:s.default})],t.prototype,"tileInfo",void 0),(0,a._)([(0,i.MZ)()],t.prototype,"tilemapCache",void 0),(0,a._)([(0,o.w)("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),(0,a._)([(0,i.MZ)()],t.prototype,"version",void 0),t=(0,a._)([(0,r.$)("esri.layers.mixins.ArcGISCachedService")],t),t}},85367:(e,t,n)=>{n.r(t),n.d(t,{worldToImage:()=>c,worldToImagePanoramic:()=>d,worldToImageWithLTPFlag:()=>u});var a=n(89379),i=n(15941),o=n(9392),r=n(20664),l=n(45417),s=n(97572);function c(e,t){const{cameraLocation:n,pointsToTransform:l,scalingFactor:c}=function(e,t,n){const a=Array.isArray(e)||"items"in e?e:[e];(0,s.N5)(a,t),h(a,t),(0,s._)(n);const i=(0,s.i2)(t.y,t.spatialReference);return{pointsToTransform:a.map((e=>e.toArray())),scalingFactor:i,cameraLocation:t.toArray()}}(e,t.cameraLocation,t.rotationMatrix),u=new Array;return function(e,t,n){const{affineTransformations:a,cameraLocation:i,focalLengthX:l,focalLengthY:s,principalOffsetPoint:c,radialDistortionCoefficients:u,rotationMatrix:d,scalingFactor:h,tangentialDistortionCoefficients:f}=n;for(const w of e){var v,p,m,y,g;const e=(0,o.vt)();(0,r.a)(e,w,i),e[0]=e[0]/h,e[1]=e[1]/h;const n=-l*((d[0]*e[0]+d[3]*e[1]+d[6]*e[2])/(d[2]*e[0]+d[5]*e[1]+d[8]*e[2])),M=-s*((d[1]*e[0]+d[4]*e[1]+d[7]*e[2])/(d[2]*e[0]+d[5]*e[1]+d[8]*e[2])),A=n*n+M*M;let b=0,x=0,T=0,_=0,O=0,E=0,S=0;u&&(b=null!==(v=u[0])&&void 0!==v?v:0,x=null!==(p=u[1])&&void 0!==p?p:0,T=null!==(m=u[2])&&void 0!==m?m:0),f&&(_=f[0],O=f[1]),c&&(E=null!==(y=c[0])&&void 0!==y?y:0,S=null!==(g=c[1])&&void 0!==g?g:0);const L=1+b*A+x*A*A+T*A*A*A;let D=n*L+_*(A+2*n**2)+2*O*n*M,I=M*L+O*(A+2*M**2)+2*_*n*M;D+=E,I+=S;const V=Number(a[0])+Number(a[1])*D+Number(a[2])*I,N=Number(a[3])+Number(a[4])*D+Number(a[5])*I;t.push({x:V,y:N})}}(l,u,(0,a.A)((0,a.A)({},t),{},{cameraLocation:n,scalingFactor:c},function(e){if(function(e){return null!=(null===e||void 0===e?void 0:e.focalLength)}(e))return{focalLengthX:e.focalLength,focalLengthY:e.focalLength};const{imageWidth:t,imageHeight:n,horizontalFieldOfView:a,verticalFieldOfView:o}=e;return{focalLengthX:t/(2*Math.tan((0,i.kU)(a)/2)),focalLengthY:n/(2*Math.tan((0,i.kU)(o)/2))}}(t))),Array.isArray(e)?u:u[0]}function u(e,t,n){return c(e?t.map((e=>(0,l.webMercatorToGeographic)(e))):t,n).map((e=>(0,a.A)((0,a.A)({},e),{},{z:1})))}function d(e,t){const{cameraHeading:n,imageHeight:a,imageWidth:o}=t,{cameraLocation:l,pointsToTransform:c}=function(e,t){const n=Array.isArray(e)||"items"in e?e:[e];return(0,s.N5)(n,t),h(n,t),{pointsToTransform:n.map((e=>e.toArray())),cameraLocation:t.toArray()}}(e,t.cameraLocation),u=new Array;for(const d of c){const e=(0,r.j)(l,d),t=(0,s.MO)((0,i.KJ)(Math.atan2(d[0]-l[0],d[1]-l[1]))-n),c=(0,i.KJ)(Math.acos((l[2]-d[2])/e));u.push((0,s._H)(t,c,o,a))}return Array.isArray(e)?u:u[0]}function h(e,t){if(e.some((e=>!e.spatialReference.equals(t.spatialReference))))throw new Error("Input points and camera location must have the same spatial reference")}},97572:(e,t,n)=>{n.d(t,{D5:()=>Z,Dy:()=>de,Hk:()=>re,L2:()=>oe,MO:()=>ue,MY:()=>O,Mm:()=>Q,N5:()=>W,Ns:()=>ie,Qu:()=>E,SP:()=>ne,Yc:()=>Y,ZA:()=>K,Zq:()=>C,_:()=>q,_H:()=>k,_i:()=>V,cC:()=>P,cL:()=>x,cV:()=>G,cb:()=>te,dM:()=>R,eM:()=>le,ei:()=>S,i2:()=>J,id:()=>F,m0:()=>ee,n3:()=>H,or:()=>j,ox:()=>z,pq:()=>U,sp:()=>B,tB:()=>ae,x1:()=>N});var a=n(89379),i=n(50076),o=n(42553),r=n(15941),l=n(44680),s=n(13191),c=n(55855),u=n(9392),d=n(63919),h=n(34761),f=n(20664),v=n(19247),p=n(9624),m=n(14556),y=n(80963),g=n(45136),w=n(58872),M=n(36116),A=n(85632),b=n(57134);function x(e,t,n){const[a,i,o,r]=t,[l,c,u,d]=n;T(a,i,o,r);const f=T(l,c,u,d),v=_(a,i,o,r),p=_(l,c,u,d),m=(0,h.Qw)((0,s.vt)(),v),y=(0,h.lK)((0,s.vt)(),m,p),[g,w,M,A]=function(e,t){const[n,a,i]=e,o=[0,0,0,0];return o[0]=n*t[0]+a*t[1]+i*t[2]+t[3],o[1]=n*t[4]+a*t[5]+i*t[6]+t[7],o[2]=n*t[8]+a*t[9]+i*t[10]+t[11],o[3]=function(e){return 0===e?1:e}(n*t[12]+a*t[13]+i*t[14]+t[15]),o}(e,y);return[g/A,w/A,f?0:M/A]}function T(e,t,n,a){return 0===e[2]&&0===t[2]&&0===n[2]&&0===a[2]&&(e[2]=t[2]=n[2]=a[2]=1,!0)}function _(e,t,n,a){const i=function(e,t){const[n,a,i,o]=e,r=new Array(4);return r[0]=n*t[0]+a*t[1]+i*t[2]+o*t[3],r[1]=n*t[4]+a*t[5]+i*t[6]+o*t[7],r[2]=n*t[8]+a*t[9]+i*t[10]+o*t[11],r[3]=n*t[12]+a*t[13]+i*t[14]+o*t[15],r}((0,c.ci)([...a,1]),(0,h.Qw)(new Array(16),(0,s.fA)(e[0],t[0],n[0],0,e[1],t[1],n[1],0,e[2],t[2],n[2],0,1,1,1,1))),o=i[0],r=i[1],l=i[2],u=(0,s.vt)();return u[0]=o*e[0],u[1]=r*t[0],u[2]=l*n[0],u[3]=0,u[4]=o*e[1],u[5]=r*t[1],u[6]=l*n[1],u[7]=0,u[8]=o*e[2],u[9]=r*t[2],u[10]=l*n[2],u[11]=0,u[12]=o,u[13]=r,u[14]=l,u[15]=1,u}function O(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,u.Ul)();return i[0]=e[0]+t[0]*n,i[1]=e[1]+t[1]*n,i[2]=e[2]+t[2]*(n/a),i}function E(e,t,n){const a=(0,u.Ul)();return a[0]=e[0]*t,a[1]=e[1]*t,a[2]=e[2]*(t/n),a}function S(e,t){const[n,a,i]=e,o=(0,u.Ul)();return o[0]=n*t[0]+a*t[3]+i*t[6],o[1]=n*t[1]+a*t[4]+i*t[7],o[2]=n*t[2]+a*t[5]+i*t[8],o}function L(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!Number.isFinite(e))throw new i.default("InvalidRotationAngle","Please specify a valid angle for rotation");const o=n*(a?(0,r.kU)(e):e),s=Math.cos(o),c=Math.sin(o),u=(0,l.vt)();switch(t){case 0:u[4]=s,u[5]=-c,u[7]=c,u[8]=s;break;case 1:u[0]=s,u[2]=c,u[6]=-c,u[8]=s;break;case 2:u[0]=s,u[1]=-c,u[3]=c,u[4]=s;break;default:throw new i.default("InvalidRotationAxis","Please specify either 0, 1 or 2 for X, Y or Z axis respectively")}return u}const D={HPR:[[2,-1],[0,1],[2,-1]],OPK:[[0,1],[1,1],[2,1]]};function I(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(3!==(null===e||void 0===e?void 0:e.length)||3!==(null===t||void 0===t?void 0:t.length))throw new i.default("InvalidRotationAngles","Please specify three angles with config for rotation");const a=(0,l.vt)();for(let i=0;i<3;i++){const[o,r]=t[i],l=L(e[i],o,r,n);(0,d.lw)(a,l,a)}return a}function V(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return I(e,D.HPR,t)}function N(e,t,n){const a=Math.sin((0,r.kU)(n)),i=Math.cos((0,r.kU)(n)),o=[[e,0],[e,t],[0,t]];o.forEach(((e,t)=>{o[t]=[i*e[0]-a*e[1],a*e[0]+i*e[1]]}));const l=Math.min(0,o[0][0],o[1][0],o[2][0]),s=Math.max(0,o[0][0],o[1][0],o[2][0]),c=Math.min(0,o[0][1],o[1][1],o[2][1]),u=Math.max(0,o[0][1],o[1][1],o[2][1]);return{hfov:Math.abs(s-l),vfov:Math.abs(u-c)}}function C(e,t){const n=Number(e[0]),a=Number(e[1]),i=Number(e[2]),[o,l,s,c]=t,u=(0,r.kU)(o),d=(0,r.kU)(l),h=s/Math.sqrt(1-c*Math.sin(u)**2),f=n/h,v=a/h,p=i/h,m=Math.cos(u)-Math.sin(u)*v+Math.cos(u)*p,y=Math.sin(u)+Math.cos(u)*v+Math.sin(u)*p,g=Math.sqrt(m**2+f**2),w=c*h*Math.sin(u),M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(0===t)return e;const n=M(e,t-1);return Math.atan(y/g-(w-c*(s/Math.sqrt(1-c*Math.sin(n)**2))*Math.sin(n))/(h*g))},A=M(u),b=Math.atan(n/(h*m))+d,x=(0,r.KJ)(A);return[(0,r.KJ)(b),x,n/(Math.cos(A)*Math.sin(b-d))-s/Math.sqrt(1-c*Math.sin(A)**2)]}function R(e,t,n){const a=360/t,i=180/n;return{heading:(e.x-t/2)*a,pitch:90-(e.y-n/2)*i}}function U(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b.vK/2;const{heading:i,pitch:o}=function(e,t){const n=(0,r.KJ)(Math.acos(-e.z/t));return{heading:(0,r.KJ)(Math.atan2(e.x,e.y)),pitch:n}}(e,a);return k(i,o,t,n)}function k(e,t,n,a){return{x:n/2+e/(360/n),y:a-t/(180/a),heading:e,pitch:t}}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.vK/2;return[n*(Math.sin((0,r.kU)(e))*Math.sin((0,r.kU)(t))),n*(Math.cos((0,r.kU)(e))*Math.sin((0,r.kU)(t))),n*Math.cos((0,r.kU)(180-t))]}function Z(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b.vK/2;const{heading:i,pitch:o}=R(e,t,n);return F(i,o,a)}async function z(e,t,n){const a=await(0,p.projectWithZConversion)(t,e.spatialReference,n);let i=(0,r.KJ)(Math.atan2(a.y-e.y,a.x-e.x));return i=i>=0&&i<=90?90-i:i>90&&i<=180?360-i+90:90+Math.abs(i),i}function P(e,t,n){const a=Math.cos(n),i=Math.sin(n),o=[1,0,0,1,0,0],r=o[0]*a+o[2]*i,l=o[1]*a+o[3]*i,s=-o[0]*i+o[2]*a,c=-o[1]*i+o[3]*a;return o[0]=r,o[1]=l,o[2]=s,o[3]=c,[e*o[0]+t*o[2]+o[4],e*o[1]+t*o[3]+o[5]]}const H=e=>e.toArray(),j=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((e=>e))};function K(e,t){if(j(0===e.length,e.some((e=>{let{x:t,y:n}=e;return j(null==t,null==n)})),!t.hasZ))throw new Error("Input pixels must have x, y and camera location must have z value")}function W(e,t){if(e.some((e=>null==e.z))||null==t.z)throw new Error("Input points and camera location must have z value")}function q(e){if(9!==(null===e||void 0===e?void 0:e.length))throw new Error("Rotation matrix is not provided or is not a valid 3x3 matrix")}function J(e,t){return(0,y.K8)(t)?1/Math.cos(Math.PI/2-2*Math.atan(Math.exp(-1*e/m.$O.radius))):1}const Y=e=>t=>new v.default(t,e),B=e=>null!=e&&"queryExtent"in e;function G(e,t,n,a){return[[-t,-t],[+t,-t],[+t,+t],[-t,+t]].map((t=>{let[i,o]=t;return x((0,g.a)((0,u.Ul)(),n,[i,o,0]),a,e)}))}function $(e,t){if(null==e)return null;const n=parseFloat("".concat(e));return isNaN(n)?null:n}function Q(e,t,n){var i;const{cameraHeight:o,cameraPitch:r,cameraRoll:l,elevation:s,farDistance:c,horizontalFieldOfView:u,location:d,verticalFieldOfView:h}=e,f=null!==s&&void 0!==s?s:(null!==(i=d.z)&&void 0!==i?i:0)-o;return(0,a.A)((0,a.A)({},te(e,t,n)),{},{averageElevation:f,cameraPitch:r,cameraRoll:null!==l&&void 0!==l?l:0,farDistance:c,horizontalFieldOfView:u,verticalFieldOfView:h})}function X(e,t,n,a){return se(a)?function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return I(e,D.OPK,t)}([a.omega,a.phi,a.kappa]):ce(a)?V([a.heading,a.pitch,a.roll]):V([e,t,null!==n&&void 0!==n?n:0])}function ee(e,t,n){var a;const{cameraHeading:i,cameraHeight:o,elevation:r,farDistance:l,horizontalFieldOfView:s,location:c,verticalFieldOfView:u}=e;return{averageElevation:null!==r&&void 0!==r?r:(null!==(a=c.z)&&void 0!==a?a:0)-o,cameraLocation:c,cameraHeading:i,farDistance:l,horizontalFieldOfView:s,imageHeight:n,imageWidth:t,verticalFieldOfView:u}}function te(e,t,n){var a,i,o,r,l;const{a0:s,a1:c,a2:u,b0:d,b1:h,b2:f,cameraHeading:v,cameraOrientation:p,cameraPitch:m,cameraRoll:y,focalLength:g,horizontalFieldOfView:w,location:M,matrix:A,principalX:b,principalY:x,radial:T,tangential:_,verticalFieldOfView:O}=e,{affines:E,focalLength:S}=function(e,t,n,a){let{a0:i,a1:o,a2:r,b0:l,b1:s,b2:c}=e;const u=[null!==i&&void 0!==i?i:t/2-.5,o,null!==r&&void 0!==r?r:0,null!==l&&void 0!==l?l:n/2-.5,null!==s&&void 0!==s?s:0,c].map($);return null!=a&&function(e){return null!=e[1]&&null!=e[5]}(u)?{affines:u,focalLength:a}:{affines:[t/2-.5,1,0,n/2-.5,0,-1]}}({a0:s,a1:c,a2:u,b0:d,b1:h,b2:f},t,n,g),L=null!==A&&void 0!==A?A:X(v,m,y,p),D=null!=b&&null!=x?[b,x]:void 0;return{affineTransformations:null!==(a=null===p||void 0===p?void 0:p.affineTransformations)&&void 0!==a?a:E,cameraLocation:M.clone(),focalLength:null!==(i=null===p||void 0===p?void 0:p.focalLength)&&void 0!==i?i:S,horizontalFieldOfView:w,imageHeight:n,imageWidth:t,principalOffsetPoint:null!==(o=null===p||void 0===p?void 0:p.principalOffsetPoint)&&void 0!==o?o:D,radialDistortionCoefficients:null!==(r=null===p||void 0===p?void 0:p.radialDistortionCoefficients)&&void 0!==r?r:T,rotationMatrix:L,tangentialDistortionCoefficients:null!==(l=null===p||void 0===p?void 0:p.tangentialDistortionCoefficients)&&void 0!==l?l:_,verticalFieldOfView:O}}const ne=e=>null!=e&&"elevationSample"in e&&null!=e.elevationSample,ae=e=>(0,w.jV)(null===e||void 0===e?void 0:e.elevationSource)&&null!=(null===e||void 0===e?void 0:e.extent),ie=async(e,t)=>null!=t&&(ne(t)||(e=>(0,w.E1)(null===e||void 0===e?void 0:e.elevationSource))(t))?t:ae(t)?{elevationSample:await(0,M.gm)((0,a.A)((0,a.A)({},o.A.isSerializable(t.elevationSource)?t.elevationSource.toJSON():t.elevationSource),{},{extent:t.extent})),elevationSource:new w.Mr({constantElevation:e})}:{elevationSource:new w.Mr({constantElevation:e})},oe=e=>(0,A.Et)(null===e||void 0===e?void 0:e.heading)&&(0,A.Et)(null===e||void 0===e?void 0:e.pitch),re=(e,t)=>[[-e,-t],[e,-t],[e,t],[-e,t]];function le(e){const{cameraLocation:t,farDistance:n,horizontalFieldOfView:a,rotationMatrix:i,scalingFactor:o,verticalFieldOfView:s}=e,c=(0,l.vt)();(0,d.mg)(c,i);const h=2*Math.tan((0,r.kU)(s)/2)*n*o,v=2*Math.tan((0,r.kU)(a)/2)*n*o,p=S([0,0,-1],c),m=O([t.x,t.y,t.z],p,e.farDistance*o,o),y=S([0,1,0],c),g=S([1,0,0],c),w=E(y,h/2,o),M=E(g,v/2,o),A=(0,f.a)((0,u.Ul)(),w,M),b=(0,f.g)((0,u.Ul)(),w,M);return[(0,f.g)((0,u.Ul)(),m,A),(0,f.g)((0,u.Ul)(),m,b),(0,f.a)((0,u.Ul)(),m,A),(0,f.a)((0,u.Ul)(),m,b)]}const se=e=>2===(null===e||void 0===e?void 0:e.type),ce=e=>1===(null===e||void 0===e?void 0:e.type);function ue(e){const t=e%360;return t<-180?t+360:t}function de(e,t,n){if("panoramic"===e){const[e,a]=n;return U({x:t.x,y:t.y,z:t.z},e,a)}return{x:t.x+.5,y:.5-t.y}}var he;!function(e){e[e.CLOCKWISE=-1]="CLOCKWISE",e[e.COUNTERCLOCKWISE=1]="COUNTERCLOCKWISE"}(he||(he={}))}}]);
//# sourceMappingURL=85367.16a295a5.chunk.js.map