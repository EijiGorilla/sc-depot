"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[74911],{14387:(e,t,i)=>{i.d(t,{Gx:()=>y,kk:()=>v});var o=i(89379),n=i(53986),s=i(87540),l=i(76099),r=i(54761);const a=["disabled","filterText","id","messages","onFilterChange"],d=["headingLevel","items"],c=["disabled","group","headingLevel","selectionMode","renderCustomGroupContent"],u="esri-item-list",p="".concat(u,"__list-item"),h={base:u,filterContainerSticky:"".concat(u,"__filter-container--sticky"),group:"".concat(u,"__group"),groupHeader:"".concat(u,"__group__header"),item:p,itemDisabled:"".concat(p,"--disabled"),itemIcon:"".concat(p,"-icon"),itemContentEnd:"".concat(p,"-content-end"),noMatchesMessage:"".concat(u,"__no-matches-message"),scroller:"".concat(u,"__scroller"),scrollerEnabled:"".concat(u,"__scroller--enabled")},m=4;function v(e){var t,i;const{disabled:s,filterText:l="",id:d,messages:c,onFilterChange:u}=e,p=(0,n.A)(e,a);return(0,r.K)("div",{key:d},null===(t=e.filterEnabled)||void 0===t||t?_({disabled:s,filterText:l,id:d,messages:c,onFilterChange:u}):null,g((0,o.A)((0,o.A)({},p),{},{disabled:s,enableListScroll:null===(i=e.enableListScroll)||void 0===i||i,filterText:l,messages:c})))}function g(e){const{headingLevel:t,items:i}=e,s=(0,n.A)(e,d);return 0===i.length?(0,r.K)("div",{class:h.noMatchesMessage,key:"no-matches"},e.messages.noMatches):(0,r.K)("div",{class:(0,l.Ly)({[h.scroller]:!0,[h.scrollerEnabled]:!!e.enableListScroll}),key:"item-container"},i.map((e=>function(e){return!!e.items}(e)?w((0,o.A)((0,o.A)({},s),{},{group:e,headingLevel:t})):y((0,o.A)((0,o.A)({},s),{},{grouped:!0,item:e})))))}function _(e){const{disabled:t,messages:i,filterText:o,enableListScroll:n}=e;return(0,r.K)("div",{class:n?void 0:h.filterContainerSticky,key:"filter"},(0,r.K)("calcite-input",{disabled:t,placeholder:i.filterPlaceholder,type:"search",value:o,onCalciteInputInput:t=>{const i=t.currentTarget;e.onFilterChange&&e.onFilterChange(i.value)}}))}function y(e){var t,i,o,n;const{disabled:s,grouped:a,identify:d,item:c,onItemMouseEnter:u,onItemMouseLeave:p,onItemSelect:m,renderIcon:v,renderCustomItem:g,renderItemContent:_,renderItemContentEnd:y,renderItemLabel:w,renderItemDescription:M,renderItemActionEnd:k,renderItemTitle:F,selectedItem:C}=e,A=b(c,d),T=A===b(C,d),I=null===g||void 0===g?void 0:g(e);if(I)return I;const K=null===_||void 0===_?void 0:_(c),L=null===y||void 0===y?void 0:y(c),Z=null===k||void 0===k?void 0:k(c),S=!(!c.disabled&&!s),E=null===v||void 0===v?void 0:v(c);return(0,r.K)("calcite-list-item",{afterUpdate:e=>{e.selected=T},"aria-level":a?"2":"",class:(0,l.Ly)({[h.item]:!0,[h.itemDisabled]:S}),"data-item":c,description:K?void 0:null!==(t=null===M||void 0===M?void 0:M(c))&&void 0!==t?t:void 0,disabled:S,key:A,label:K?void 0:null!==(i=null!==(o=null===w||void 0===w?void 0:w(c))&&void 0!==o?o:c.label)&&void 0!==i?i:void 0,onblur:e=>null===p||void 0===p?void 0:p(f(e)),onfocus:e=>null===u||void 0===u?void 0:u(f(e)),onmouseenter:e=>null===u||void 0===u?void 0:u(f(e)),onmouseleave:e=>null===p||void 0===p?void 0:p(f(e)),selected:T,title:null!==(n=null===F||void 0===F?void 0:F(c))&&void 0!==n?n:void 0,onCalciteListItemSelect:e=>{e.preventDefault(),null===m||void 0===m||m(f(e))}},E?(0,r.K)("div",{class:h.itemIcon,key:"content-start",slot:"content-start"},E):void 0,K?(0,r.K)("div",{key:"content",slot:"content"},K):null,L?(0,r.K)("div",{class:h.itemContentEnd,key:"content-end",slot:"content-end"},L):null,null!==Z&&void 0!==Z?Z:null)}function b(e,t){return e?"".concat((null===t||void 0===t?void 0:t(e))||e.id,"__").concat(e.label):""}function f(e){return e.currentTarget["data-item"]}function w(e){var t,i;const{disabled:l,group:a,headingLevel:d=m,selectionMode:u="none",renderCustomGroupContent:p}=e,v=(0,n.A)(e,c),g=null===p||void 0===p?void 0:p(e);return(0,r.K)("div",{class:h.group,key:null!==(t=a.label)&&void 0!==t?t:void 0},(0,r.K)(s.D,{class:h.groupHeader,level:d},a.label),g||(0,r.K)("calcite-list",{disabled:l,label:null!==(i=a.label)&&void 0!==i?i:"",selectionAppearance:"border",selectionMode:u},a.items.map((e=>y((0,o.A)((0,o.A)({},v),{},{disabled:l,item:e,grouped:!0}))))))}},42062:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var o=i(35143),n=i(68134),s=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),r=i(31933),a=i(25329),d=i(91656),c=i(87539),u=i(91967);let p=class extends u.default{constructor(e){super(e),this.filter=!0}};(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"filter",void 0),p=(0,o._)([(0,l.$)("esri.widgets.FeatureTemplates.VisibleElements")],p);const h=p;var m=i(94126),v=i(98108),g=i(14387),_=i(89025),y=(i(76099),i(63582)),b=i(12254),f=i(54761);const w="esri-feature-templates";function M(e){return e.id}let k=class extends a.default{constructor(e,t){super(e,t),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.selectionMode="none",this.viewModel=new c.default,this.visibleElements=new h,this.renderCustomItem=e=>null,this.renderCustomGroupContent=e=>null,this.renderItemLabel=()=>null,this.renderItemDescription=()=>null,this.renderItemContent=e=>null,this.renderItemContentEnd=e=>null,this._iconIntersectionObserver=new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){const i=e.target;if(function(e){return!(null===e||void 0===e||!e["data-has-icon"])}(i))return void t.unobserve(i);const o=function(e){return null===e||void 0===e?void 0:e["data-item"]}(i),{layer:n,template:s}=o;F(i,!0);const l=await(0,_.z)(s,n).catch((()=>(F(i,!1),null)));if(null==l)return;i.appendChild(l)}}))})),this._renderItemIcon=e=>(0,r.bI)(e.layer)?(0,f.K)("span",{"data-has-icon":!0,"data-item":e,key:"icon"},(0,f.K)("calcite-icon",{icon:"table"})):(0,f.K)("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":e,key:"icon"}),this._afterItemCreateOrUpdate=e=>{var t;null===(t=this._iconIntersectionObserver)||void 0===t||t.observe(e)},this._afterItemRemoved=e=>{var t;null===(t=this._iconIntersectionObserver)||void 0===t||t.unobserve(e)}}initialize(){const e=e=>{let{label:t}=e;return!this.filterText||!(null===t||void 0===t||!t.toLowerCase().includes(this.filterText.toLowerCase()))};this.addHandles((0,n.watch)((()=>this.viewModel),((t,i)=>{t&&!t.filterFunction&&(this.filterFunction=e),i&&i!==t&&i.filterFunction===e&&(i.filterFunction=null)}),n.initial))}destroy(){var e;null!==(e=this._iconIntersectionObserver)&&void 0!==e&&e.disconnect(),this._iconIntersectionObserver=null}loadDependencies(){return(0,m.W)({icon:()=>Promise.resolve().then(i.bind(i,16702)),loader:()=>Promise.resolve().then(i.bind(i,35688)),input:()=>Promise.all([i.e(46870),i.e(38841)]).then(i.bind(i,38841)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),notice:()=>i.e(12261).then(i.bind(i,12261))})}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get icon(){return"list-rectangle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}select(e,t){return this.viewModel.select(e,t)}render(){var e;const{disabled:t,enableListScroll:i,filterText:o,headingLevel:n,messages:s,viewModel:{items:l,numberOfFeatureTemplates:r,selectedItem:a,state:c}}=this,u=this.visibleElements.filter&&r>1;if(function(e){return e.length>0&&(0,d.X6)(e[0])}(l)){const e=l.find((e=>e.label===d._t.label));e&&(e.label=s.other)}return(0,f.K)("div",{"aria-label":s.widgetLabel,class:this.classes(w,v.D.widget)},"loading"===c?(0,f.K)("calcite-loader",{key:"loader",label:this.messagesCommon.loading,type:"indeterminate"}):"ready"===c?(0,f.K)(g.kk,{disabled:t,enableListScroll:i,filterEnabled:u,filterText:o,headingLevel:n,id:this.id,identify:M,items:l,messages:{filterPlaceholder:s.filterPlaceholder,noItems:s.noItems,noMatches:s.noMatches},renderCustomGroupContent:this.renderCustomGroupContent,renderCustomItem:this.renderCustomItem,renderIcon:this._renderItemIcon,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:null!==a&&void 0!==a?a:void 0,selectionMode:null!==(e=this.selectionMode)&&void 0!==e?e:void 0,onFilterChange:e=>{this.filterText=e},onItemSelect:e=>!(0,d.X6)(e)&&this.viewModel.select(e)}):null)}};function F(e,t){e&&(e["data-has-icon"]=t)}(0,o._)([(0,s.MZ)()],k.prototype,"disabled",null),(0,o._)([(0,s.MZ)()],k.prototype,"enableListScroll",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"filterFunction",null),(0,o._)([(0,s.MZ)()],k.prototype,"filterText",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"groupBy",null),(0,o._)([(0,s.MZ)()],k.prototype,"headingLevel",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"icon",null),(0,o._)([(0,s.MZ)()],k.prototype,"label",null),(0,o._)([(0,s.MZ)()],k.prototype,"layers",null),(0,o._)([(0,s.MZ)(),(0,y.G)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],k.prototype,"messages",void 0),(0,o._)([(0,s.MZ)(),(0,y.G)("esri/t9n/common")],k.prototype,"messagesCommon",void 0),(0,o._)([(0,s.MZ)({readOnly:!0})],k.prototype,"selectedItem",null),(0,o._)([(0,s.MZ)()],k.prototype,"selectionMode",void 0),(0,o._)([(0,s.MZ)(),(0,b.U)("select")],k.prototype,"viewModel",void 0),(0,o._)([(0,s.MZ)({type:h,nonNullable:!0})],k.prototype,"visibleElements",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"renderCustomItem",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"renderCustomGroupContent",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"renderItemLabel",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"renderItemDescription",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"renderItemContent",void 0),(0,o._)([(0,s.MZ)()],k.prototype,"renderItemContentEnd",void 0),k=(0,o._)([(0,l.$)("esri.widgets.FeatureTemplates")],k);const C=k},45652:(e,t,i)=>{i.d(t,{$1:()=>d,H2:()=>h,MT:()=>m,VP:()=>v,WF:()=>c,Wt:()=>l,XQ:()=>g,hK:()=>p,nS:()=>u,uh:()=>r,xY:()=>a});var o=i(50076);const n="upload-assets",s=()=>new Error;class l extends o.default{constructor(){super("".concat(n,":unsupported"),"Layer does not support asset uploads.",s())}}class r extends o.default{constructor(){super("".concat(n,":no-glb-support"),"Layer does not support glb.",s())}}class a extends o.default{constructor(){super("".concat(n,":no-supported-source"),"No supported external source found",s())}}class d extends o.default{constructor(){super("".concat(n,":not-base-64"),"Expected gltf data in base64 format after conversion.",s())}}class c extends o.default{constructor(){super("".concat(n,":unable-to-prepare-options"),"Unable to prepare uploadAsset request options.",s())}}class u extends o.default{constructor(e,t){super("".concat(n,":bad-response"),"Bad response. Uploaded ".concat(e," items and received ").concat(t," results."),s())}}class p extends o.default{constructor(e,t){var i,o;super("".concat(n,"-layer:upload-failed"),"Failed to upload mesh file ".concat(e,". Error code: ").concat(null!==(i=null===t||void 0===t?void 0:t.code)&&void 0!==i?i:"-1",". Error message: ").concat(null!==(o=null===t||void 0===t?void 0:t.messages)&&void 0!==o?o:"unknown"),s())}}class h extends o.default{constructor(e){super("".concat(n,"-layer:unsupported-format"),"The service allowed us to upload an asset of FormatID ".concat(e,", but it does not list it in its supported formats."),s())}}class m extends o.default{constructor(){super("".concat(n,":convert3D-failed"),"convert3D failed.")}}class v extends o.default{constructor(){super("invalid-input:no-model","No supported model found")}}class g extends o.default{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},45755:(e,t,i)=>{i.d(t,{N:()=>o});const o={absolute:"absolute-direction",relative:"relative-direction"}},49947:(e,t,i)=>{i.d(t,{A:()=>b});var o=i(35143),n=i(18690),s=i(46053),l=(i(81806),i(76460),i(85842)),r=i(97513),a=i(45755),d=i(25329),c=i(94126),u=i(98108),p=i(71981),h=(i(76099),i(63582)),m=i(54761),v=i(97875);const g="esri-sketch-tooltip-controls",_={base:g,block:"".concat(g,"__block"),blockContent:"".concat(g,"__block-content"),hintIcon:"".concat(g,"__hint-icon"),radioButtonLabelWrapper:"".concat(g,"__radio-button-label-wrapper")};let y=class extends d.default{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new v.A,this.sketchOptions=new r.A,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.sketchOptions.tooltips.enabled=e},this._onLabelsEnabledChange=e=>{this.sketchOptions.labels.enabled=e},this._onDirectionModeChange=e=>{this.sketchOptions.values.directionMode=e.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([(0,c.W)({block:()=>i.e(75502).then(i.bind(i,75502)),label:()=>Promise.resolve().then(i.bind(i,11839)),icon:()=>Promise.resolve().then(i.bind(i,16702)),"radio-button":()=>i.e(2599).then(i.bind(i,2599)),"radio-button-group":()=>i.e(43953).then(i.bind(i,43953))}),(0,p.m)()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return(0,m.K)("div",{"aria-label":e,class:this.classes(_.base,u.D.widget)},i?(0,m.K)("calcite-block",{class:_.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},(0,m.K)("div",{class:_.blockContent,key:"content"},i)):void 0)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(n.Ru);return 0===i.length?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return(0,m.K)(p.o,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:"".concat(this.id,"__tooltips"),label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return(0,m.K)(p.o,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:"".concat(this.id,"__labels"),label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return(0,m.K)("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,(0,m.K)("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return(0,m.K)("calcite-label",{key:e,layout:"inline",scale:"s"},(0,m.K)("calcite-radio-button",{checked:e===t,scale:"s",value:e}),(0,m.K)("div",{class:_.radioButtonLabelWrapper,key:"label-wrapper"},(0,m.K)("calcite-icon",{icon:a.N[e],scale:"s"}),i))}};(0,o._)([(0,s.MZ)()],y.prototype,"label",null),(0,o._)([(0,s.MZ)({type:v.A,nonNullable:!0})],y.prototype,"visibleElements",void 0),(0,o._)([(0,s.MZ)(),(0,h.G)("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],y.prototype,"messages",void 0),(0,o._)([(0,s.MZ)({nonNullable:!0,type:r.A})],y.prototype,"sketchOptions",void 0),(0,o._)([(0,s.MZ)({type:String})],y.prototype,"viewType",void 0),y=(0,o._)([(0,l.$)("esri.widgets.support.SketchTooltipControls")],y);const b=y},55191:(e,t,i)=>{i.d(t,{A:()=>g});var o=i(35143),n=i(50346),s=i(68134),l=i(46053),r=(i(81806),i(76460),i(47249),i(85842)),a=i(25329),d=i(44371),c=(i(76099),i(54761));const u="esri-spinner",p=u,h="".concat(u,"--start"),m="".concat(u,"--finish");let v=class extends a.default{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new d.A}initialize(){this.addHandles((0,s.watch)((()=>this.visible),(e=>this._visibleChange(e))))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:i}=null!==e&&void 0!==e?e:{};t&&(this.viewModel.location=t),this.visible=!0;i&&i.catch((()=>{})).then((()=>this.hide()))}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,o=e&&i,n=!e&&i,s={[h]:o,[m]:n},l=this._getPositionStyles();return(0,c.K)("div",{class:this.classes(p,s),styles:l})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=(0,n.after)(this._animationDelay);this._animationPromise=t,t.catch((()=>{})).then((()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(null==t||null==e)return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};(0,o._)([(0,l.MZ)()],v.prototype,"location",null),(0,o._)([(0,l.MZ)()],v.prototype,"view",null),(0,o._)([(0,l.MZ)({type:d.A})],v.prototype,"viewModel",void 0),(0,o._)([(0,l.MZ)()],v.prototype,"visible",null),v=(0,o._)([(0,r.$)("esri.widgets.Spinner")],v);const g=v},67052:(e,t,i)=>{i.d(t,{AP:()=>c,bO:()=>a});var o=i(35143),n=i(91967),s=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),r=i(61750);let a=class extends n.default{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"point",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"polyline",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"polygon",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"rectangle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"circle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"multipoint",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"mesh",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"freehandPolyline",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"freehandPolygon",void 0),a=(0,o._)([(0,l.$)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],a);let d=class extends n.default{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,o._)([(0,s.MZ)({nonNullable:!0})],d.prototype,"rectangle-selection",void 0),(0,o._)([(0,s.MZ)({nonNullable:!0})],d.prototype,"lasso-selection",void 0),(0,o._)([(0,s.MZ)({nonNullable:!0})],d.prototype,"custom-selection",void 0),d=(0,o._)([(0,l.$)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],d);let c=class extends n.default{constructor(e){super(e),this.createTools=new a,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new d,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new r.A,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,o._)([(0,s.MZ)({type:a,nonNullable:!0})],c.prototype,"createTools",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"directionModePicker",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"duplicateButton",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"deleteButton",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"selectionCountLabel",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"labelsToggle",void 0),(0,o._)([(0,s.MZ)({type:d,nonNullable:!0})],c.prototype,"selectionTools",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"settingsMenu",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"snappingControls",void 0),(0,o._)([(0,s.MZ)({type:r.A,nonNullable:!0})],c.prototype,"snappingControlsElements",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"tooltipsToggle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],c.prototype,"undoRedoMenu",void 0),c=(0,o._)([(0,l.$)("esri.widgets.Sketch.VisibleElements")],c)},74911:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ut});var o=i(89379),n=i(35143),s=(i(11265),i(30726)),l=i(50346),r=i(68134),a=i(46053),d=(i(81806),i(76460),i(47249),i(85842)),c=i(73265),u=i(75988),p=i(390),h=i(42062),m=i(55191),v=i(25329);const g="esri-editor",_={base:g,helpMessage:"".concat(g,"__help-message"),updateActions:"".concat(g,"__update-actions"),updateActionsList:"".concat(g,"__update-actions-list"),featureTemplatesContainer:"".concat(g,"__feature-templates-container"),templateItemContentEnd:"".concat(g,"__template-item-content-end"),sketchContainer:"".concat(g,"__sketch-container"),pendingFeatureListIcon:"".concat(g,"__pending-feature-list-icon")};var y=i(70179),b=i(21661),f=i(91967),w=i(61750);let M=class extends f.default{constructor(e){super(e),this.createFeaturesSection=!0,this.directionModePicker=!1,this.editFeaturesSection=!0,this.flow=!0,this.labelsToggle=!0,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new w.A,this.tooltipsToggle=!0,this.undoRedoButtons=!0,this.sketch=!0,this.zoomToButton=!0}};(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"createFeaturesSection",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"directionModePicker",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"editFeaturesSection",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"flow",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"labelsToggle",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"settingsMenu",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"snappingControls",void 0),(0,n._)([(0,a.MZ)({type:w.A,nonNullable:!0})],M.prototype,"snappingControlsElements",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"tooltipsToggle",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"undoRedoButtons",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"sketch",void 0),(0,n._)([(0,a.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"zoomToButton",void 0),M=(0,n._)([(0,d.$)("esri.widgets.Editor.VisibleElements")],M);const k=M;var F=i(94126),C=i(76099),A=i(54761);const T="esri-editor__panel-content",I={base:T,message:"".concat(T,"__message"),section:"".concat(T,"__section"),sectionGroup:"".concat(T,"__section__group"),scrimContainer:"".concat(T,"__scrim-container")},K=()=>(0,F.W)({scrim:()=>Promise.resolve().then(i.bind(i,32263))});function L(e){for(var t,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return(0,A.K)("div",{class:(0,C.Ly)(I.base,null!==e&&void 0!==e&&e.showScrimOverlay?I.scrimContainer:void 0),key:null!==(t=null===e||void 0===e?void 0:e.key)&&void 0!==t?t:"panel-content"},...o,null!==e&&void 0!==e&&e.showScrimOverlay?(0,A.K)("calcite-scrim",null):void 0)}function Z(e){for(var t,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return(0,A.K)("div",{class:I.message,"data-testid":"panel-content-message",key:null!==(t=null===e||void 0===e?void 0:e.key)&&void 0!==t?t:"panel-content-message"},...o)}function S(e){for(var t,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return(0,A.K)("div",{class:I.section,key:null!==(t=null===e||void 0===e?void 0:e.key)&&void 0!==t?t:"panel-content-section"},...o)}function E(e){for(var t,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return(0,A.K)("div",{class:I.sectionGroup,key:null!==(t=null===e||void 0===e?void 0:e.key)&&void 0!==t?t:"panel-content-section-group"},...o)}function P(e){let{helpMessage:t,renderSketchToolbar:i}=e;return(0,A.K)(A.w,null,i(),(0,A.K)(L,{key:"creating-features-panel-content"},(0,A.K)(Z,{key:"content-message"},t)))}var N=i(18690),O=i(53430),x=i(14387);function W(e){let{editorItems:t,filterText:i,id:o,messagesTemplates:n,onFilterTextChange:s,onSelectFeature:l,onZoomTo:r,workflow:a,editorMessages:d}=e;const c=new Map,u=a.data.candidates;let p=0;u.map((e=>({label:D(e),id:e.attributes[e.layer.objectIdField],data:e}))).filter((e=>{let{label:o,data:n}=e;const s=i.toLowerCase(),{title:l}=n.layer,r=t.find((e=>e.layer===n.sourceLayer));return r?r.supportsUpdateWorkflow&&(!s||(null===o||void 0===o?void 0:o.toLowerCase().includes(s))||(null===l||void 0===l?void 0:l.toLowerCase().includes(s))):null})).filter(N.Ru).forEach((e=>{var t,i;p++;const o=e.data.layer;c.has(o)?null===(t=c.get(o))||void 0===t||t.items.push(e):c.set(o,{id:"".concat(o.id),label:null!==(i=o.title)&&void 0!==i?i:"",items:[e]})}));const h=t.toArray().map((e=>{let{layer:t}=e;return c.get(t)})).filter(N.Ru),m=p>10||i.length>0;return(0,A.K)(L,{key:"feature-list"},(0,A.K)(S,null,(0,x.kk)({enableListScroll:!1,filterEnabled:m,filterText:i,id:o,items:h,messages:{filterPlaceholder:n.filterPlaceholder,noItems:n.noItems,noMatches:n.noMatches},onFilterChange:e=>s(e),onItemMouseEnter:e=>l(e.data),onItemMouseLeave:()=>l(null),onItemSelect:e=>l(e.data,!0),renderItemActionEnd:e=>function(e,t,i){return(0,A.K)("calcite-action",{appearance:"transparent",icon:"zoom-to-object",onclick:()=>t(e),scale:"s",slot:"actions-end",text:i,title:i})}(e.data,r,d.zoomTo)})))}function D(e){const t=e.layer;if(!t)return null;const i=t.fieldsIndex.get(t.objectIdField),o=i.alias||i.name,{attributes:n}=e,s=(0,O.getDisplayFieldName)(t);return s&&n[s]&&"".concat(n[s])||"".concat(o,": ").concat(n[i.name])}var B=i(53986);const V=["disabled","onClick","label","key"],U=["disabled","onClick","key","dropdownItems"],z=["disabled","onClick","label","key"],G="esri-editor__actions",j=()=>(0,F.W)({button:()=>Promise.resolve().then(i.bind(i,43285)),"split-button":()=>i.e(34964).then(i.bind(i,34964)),"dropdown-group":()=>Promise.resolve().then(i.bind(i,5368)),"dropdown-item":()=>Promise.resolve().then(i.bind(i,84660))});function R(e){let{buttons:t,key:i}=e;return(0,A.K)("div",{class:G,key:null!==i&&void 0!==i?i:"footer-actions",slot:"footer"},t.filter(N.Ru).map(((e,t)=>"split-button"===e.type?$(e,t):H(e,t))))}const H=(e,t)=>{let{disabled:i,onClick:n,label:s,key:l}=e,r=(0,B.A)(e,V);return(0,A.K)("calcite-button",(0,o.A)({disabled:null!==i&&void 0!==i&&i,key:null!==l&&void 0!==l?l:"action-".concat(t),onclick:n,width:"full"},r),s)},$=(e,t)=>{let{disabled:i,onClick:n,key:s,dropdownItems:l}=e,r=(0,B.A)(e,U);return(0,A.K)("calcite-split-button",(0,o.A)({disabled:null!==i&&void 0!==i&&i,key:null!==s&&void 0!==s?s:"split-action-".concat(t),width:"full",onCalciteSplitButtonPrimaryClick:n},r),(0,A.K)("calcite-dropdown-group",{selectionMode:"none"},l.filter(N.Ru).map(q)))},q=(e,t)=>{let{disabled:i,onClick:n,label:s,key:l}=e,r=(0,B.A)(e,z);return(0,A.K)("calcite-dropdown-item",(0,o.A)({disabled:null!==i&&void 0!==i&&i,key:null!==l&&void 0!==l?l:"dropdown-item-".concat(t),onCalciteDropdownItemSelect:n},r),s)};var X=i(94788);const Q="esri-editor__notice",Y=()=>(0,F.W)({notice:()=>i.e(12261).then(i.bind(i,12261))});function J(e){var t;let{workflow:i,messages:o}=e;const n=[],s="content-start";if(null!==i&&void 0!==i&&i.reliesOnOwnerAdminPrivileges){const e=o.ownerAdminNotice;n.push((0,A.K)(ee,{key:"owner-admin-notice",message:e,slot:s}))}if(null!==i&&void 0!==i&&i.hasInvalidFormTemplate){const e=o.formFieldUpdateError;n.push((0,A.K)(ee,{key:"form-field-error",kind:"warning",message:e,slot:s}))}if("create-features"===(null===i||void 0===i?void 0:i.type)&&"georeferenced-reprojected"===(null===(t=i.data.upload)||void 0===t||null===(t=t.result)||void 0===t?void 0:t.type)){const e=o.helpMessages3d.meshReprojected;n.push((0,A.K)(ee,{key:"mesh-reprojected",kind:"warning",message:e,slot:s}))}return(0,A.K)(A.w,null,n)}function ee(e){var t;const i=null!==(t=e.kind)&&void 0!==t?t:"brand";return(0,A.K)("calcite-notice",{class:Q,icon:X.d[i],key:e.key,kind:i,open:!0,scale:"s"},e.title?(0,A.K)("div",{slot:"title"},e.title):null,(0,A.K)("div",{slot:"message"},e.message))}var te=i(49947),ie=i(58066),oe=i(97875);const ne="esri-editor__settings";function se(e){var t;let{editorViewModel:i,messagesCommon:o,visibleElements:n}=e;const{snappingOptions:s,sketchOptions:l,view:r,snappingManager:a}=i,d=[],c={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle};return Object.values(c).includes(!0)&&d.push((0,A.K)(te.A,{sketchOptions:l,viewType:null===r||void 0===r?void 0:r.type,visibleElements:new oe.A(c)})),n.snappingControls&&d.push((0,A.K)(ie.default,{afterCreate:e=>e.layerListOpen=!1,snappingManager:a,snappingOptions:s,view:r,visibleElements:null!==(t=n.snappingControlsElements)&&void 0!==t?t:new w.A})),0===d.length?null:(0,A.K)("calcite-accordion",{appearance:"transparent",class:ne,key:"settings"},(0,A.K)("calcite-accordion-item",{"data-testid":"settings",heading:o.settings,iconStart:"gear"},d))}const le="esri-editor__panel-toolbar",re=()=>(0,F.W)({accordion:()=>i.e(41439).then(i.bind(i,41439)),"accordion-item":()=>i.e(17095).then(i.bind(i,17095))});function ae(e){let{editorViewModel:t,messagesCommon:i,visibleElements:o}=e;return(0,A.K)("div",{class:le,key:"panel-toolbar"},(0,A.K)(se,{editorViewModel:t,messagesCommon:i,visibleElements:o}))}var de=i(98873),ce=i(39348),ue=i(87540),pe=i(89025),he=i(63582);let me=class extends v.default{constructor(){super(...arguments),this.workflow=null,this.headingLevel=4,this._iconIntersectionObserver=new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){var i,o;const n=e.target;if(function(e){return!(null===e||void 0===e||!e["data-has-icon"])}(n))return void t.unobserve(n);const s=function(e){return null===e||void 0===e?void 0:e["data-item"]}(n),{graphic:l}=s,r=null!==(i=l.sourceLayer)&&void 0!==i?i:null===(o=this.workflow)||void 0===o||null===(o=o.data.creationInfo)||void 0===o?void 0:o.layer;if(!r||!l)return;ve(n,!0);const a=await(0,pe.z)(l,r).catch((()=>(ve(n,!1),null)));if(null==a)return;n.appendChild(a)}}))})),this.messages=null,this._renderActionEnd=e=>{let{graphic:t}=e;const{workflow:i,messages:o}=this;if(!i)return;const n=t.geometry?(0,A.K)("calcite-action",{appearance:"transparent",icon:"zoom-to-object",onblur:()=>{i.data.temporaryHighlightFeature=null},onclick:()=>i.data.viewModel.zoomTo(t),onfocus:()=>{i.data.temporaryHighlightFeature=t},scale:"s",slot:"actions-end",text:this.messages.zoomTo,title:this.messages.zoomTo}):void 0,s=i.data.isSharedTemplateWorkflow?void 0:(0,A.K)("calcite-action",{appearance:"transparent",icon:"trash",onblur:()=>{i.data.temporaryHighlightFeature=null},onclick:()=>i.cancelFeature(t),onfocus:()=>{i.data.temporaryHighlightFeature=t},scale:"s",slot:"actions-end",text:o.createFeaturesSelectionList.discard,title:o.createFeaturesSelectionList.discard});return(0,A.K)(A.w,null,n,s)},this._renderItemContentEnd=e=>{let{graphic:t}=e;const{workflow:i}=this;return[(null===i||void 0===i?void 0:i.data.isSubmittable(t))?void 0:(0,A.K)("calcite-icon",{class:_.pendingFeatureListIcon,icon:"exclamation-mark-triangle",scale:"s",slot:"content-end"})]},this._renderItemIcon=e=>{var t;if(null!=(null===e||void 0===e||null===(t=e.graphic)||void 0===t?void 0:t.geometry))return(0,A.K)("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":e,key:"icon"})},this._afterItemCreateOrUpdate=e=>{var t;null===(t=this._iconIntersectionObserver)||void 0===t||t.observe(e)},this._afterItemRemoved=e=>{var t;null===(t=this._iconIntersectionObserver)||void 0===t||t.unobserve(e)}}loadDependencies(){return(0,F.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),icon:()=>Promise.resolve().then(i.bind(i,16702)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802))})}destroy(){var e;null!==(e=this._iconIntersectionObserver)&&void 0!==e&&e.disconnect(),this._iconIntersectionObserver=null}render(){const e=this.workflow;if(!e)return(0,A.K)(A.w,null,void 0);const t=this.messages,i=e.pendingFeatures.filter((t=>e.data.isDisplayable(t))).map(((i,o)=>{var n;const s=e.data.isSubmittable(i),l=s?t.createFeaturesSelectionList.featureReadyToSubmit:t.createFeaturesSelectionList.featureNotReadyToSubmit;return{disabled:!1,id:"".concat(null!==(n=e.data.getFeatureTitle(i))&&void 0!==n?n:o),graphic:i,label:l,submittable:s}})).toArray();return(0,A.K)("div",null,(0,A.K)(ue.D,{level:(0,ue.S)(this.headingLevel)},t.createFeaturesSelectionList.heading),(0,A.K)("calcite-list",{label:t.createFeaturesSelectionList.heading},(0,x.kk)({enableListScroll:!1,filterEnabled:!1,filterText:"",id:"update-features-pick-list",items:i,messages:{filterPlaceholder:"",noItems:"",noMatches:""},renderIcon:this._renderItemIcon,renderItemTitle:e=>e.label,renderItemLabel:e=>e.id,onItemMouseEnter:t=>e.data.temporaryHighlightFeature=t.graphic,onItemMouseLeave:()=>e.data.temporaryHighlightFeature=null,onItemSelect:t=>e.updatePendingFeature(t.graphic),renderItemContentEnd:this._renderItemContentEnd,renderItemActionEnd:this._renderActionEnd})))}};function ve(e,t){e&&(e["data-has-icon"]=t)}(0,n._)([(0,a.MZ)()],me.prototype,"workflow",void 0),(0,n._)([(0,a.MZ)()],me.prototype,"headingLevel",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/Editor/t9n/Editor")],me.prototype,"messages",void 0),me=(0,n._)([(0,d.$)("esri.widgets.Editor.components.PendingFeatureList")],me);const ge=me;function _e(e){let{editorViewModel:t,headingLevel:i,messages:n,messagesCommon:s,onDelete:l,onDeleteAssociation:r,onSave:a,renderAttachments:d,renderFeatureForm:c,renderSketchToolbar:u}=e;const{activeLeafWorkflow:p,activeWorkflow:h,featureFormViewModel:m,syncing:v}=t;if(!p||!h||!m)return null;const g=p.type.includes("update"),_=g&&!p.hasPendingEdits||v||m.updating,y=g?s.update:s.create,b="create-features"===(null===p||void 0===p?void 0:p.type)?p.numPendingFeaturesExcludingHidden:0,f="create-features"!==(null===p||void 0===p?void 0:p.type)||!!p.data.selectedPendingFeature,w=b>1?(0,ce.V)(n.createFeaturesTemplate,{numFeatures:b}):y,M="shouldShowAttachments"in p&&p.shouldShowAttachments&&!m.activeRelationshipInput&&!m.activeAssociationInput,k=m.inputs.every((e=>!e.visible))&&!M,F=k?(0,A.K)(S,null,"create-features"===p.type?(0,A.K)(ge,{headingLevel:i,key:"pending-feature-list",workflow:p}):void 0):(0,A.K)(S,{key:"panel-content-section"},(0,A.K)(J,{messages:n,workflow:h}),(0,A.K)(E,null,f||"create-features"!==p.type?c():(0,A.K)(ge,{headingLevel:i,key:"pending-feature-list",workflow:p}),M?(0,A.K)("div",{key:"attachments"},(0,A.K)(ue.D,{level:(0,ue.S)(i)},n.attachments),d()):null)),C={appearance:"solid",onClick:a,disabled:_,label:w,type:"button"},T={appearance:"outline",onClick:l,disabled:v,kind:"danger",label:s.delete,type:"button"},I=(0,o.A)((0,o.A)({},T),{},{onClick:r,label:n.deleteAssociationTitle,type:"button"}),K=(0,o.A)((0,o.A)({},T),{},{primaryLabel:s.delete,primaryText:s.delete,dropdownItems:[{onClick:r,label:n.deleteAssociationTitle}],type:"split-button"}),Z={appearance:"outline",onClick:()=>{const{featureFormViewModel:e}=t;null!=(null===e||void 0===e?void 0:e.associationId)&&(e.associationId=null)},disabled:v,label:s.cancel,type:"button"},P="viewing-associated-features"===t.page||"viewing-associated-layers"===t.page?[Z]:[C,t.shouldShowDeleteButton&&!t.featureFormHasAssociation?T:void 0,t.shouldShowDeleteButton&&t.featureFormHasAssociation?K:void 0,!t.shouldShowDeleteButton&&t.featureFormHasAssociation?I:void 0];return(0,A.K)(A.w,null,k?u():void 0,(0,A.K)(L,{key:"attribute-panel-content"},F),(0,A.K)(R,{buttons:P}))}var ye=i(50076),be=i(45652);const fe="esri-editor__upload-details",we={base:fe,status:"".concat(fe,"__status"),titleWrapper:"".concat(fe,"__title-wrapper"),title:"".concat(fe,"__title"),description:"".concat(fe,"__description"),loader:"".concat(fe,"__loader"),iconSuccess:"".concat(fe,"__icon ").concat(fe,"__icon--success"),iconError:"".concat(fe,"__icon ").concat(fe,"__icon--error"),fileList:"".concat(fe,"__file-list"),file:"".concat(fe,"__file"),fileIcon:"".concat(fe,"__file-icon"),fileName:"".concat(fe,"__file-name")};function Me(e){const{messages:t,key:i,upload:o}=e;return(0,A.K)(A.w,null,(0,A.K)(L,{key:null!==i&&void 0!==i?i:"upload-details"},(0,A.K)(S,null,function(e){const t=function(e){let{helpMessage:t,messages:i,upload:o}=e;switch(o.state){case"pending":{const{title:e,description:t}=i.modelUploads.pending;return{title:e,description:t,iconContent:(0,A.K)("calcite-loader",{"aria-hidden":"true",class:we.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*o.progress),1===o.progress?100:99)})}}case"success":{const{title:e}=i.modelUploads.success;return{title:e,description:t||i.helpMessages3d.mesh,iconContent:(0,A.K)("calcite-icon",{class:(0,C.Ly)(we.iconSuccess),icon:"check",scale:"l"})}}case"error":{const{title:e}=i.modelUploads.error;return{title:e,description:ke(o.error,i),iconContent:(0,A.K)("calcite-icon",{class:(0,C.Ly)(we.iconError),icon:"exclamation-mark-circle",scale:"l"})}}default:return null}}(e);return t?(0,A.K)("div",{class:we.base,"data-testid":"upload-details",key:"upload-details-content"},(0,A.K)("div",{class:we.status,key:"status"},t.iconContent,(0,A.K)("div",{class:we.titleWrapper,key:"text"},(0,A.K)("div",{class:we.title,key:"title"},t.title),(0,A.K)("div",{class:we.description,key:"description"},t.description))),function(e){return(0,A.K)("div",{class:we.fileList,key:"file-list"},e.files.map((e=>(0,A.K)("div",{class:we.file,key:"file-".concat(e.name)},(0,A.K)("calcite-icon",{class:we.fileIcon,icon:Fe(e),scale:"s"}),(0,A.K)("span",{class:we.fileName},function(e){var t,i;return null!==(t=null===(i=e.split("/").pop())||void 0===i?void 0:i.split("\\").pop())&&void 0!==t?t:""}(e.name))))))}(e.upload)):null}(e))),"error"===o.state?(0,A.K)(R,{buttons:[{onClick:()=>o.retry(),label:t.modelUploads.error.uploadNew,iconStart:"upload-to",type:"button"}],key:"upload-details-footer-actions"}):null)}function ke(e,t){if(!e)return null;const i=t.modelUploads.error.messages;switch(e.constructor){case be.VP:return i.noModel;case be.XQ:return i.multipleModels;case be.MT:return i.conversionFailed;case ye.default:switch(e.name){case"glt-loader-error":case"gltf-loader-invalid-glb":return i.loadFailed;case"gltf-loader-unsupported-feature":return i.unsupportedFeature;case"glt-loader-request-error":return i.resourceRequestFailed;default:return i.default}default:return i.default}}function Fe(e){var t,i;const o=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return null!==(i=o?Ie[o]:null)&&void 0!==i?i:Ce}const Ce="file",Ae="file-shape",Te="file-image",Ie={glb:Ae,gltf:Ae,jpeg:Te,jpg:Te,png:Te,svg:Te,zip:"file-zip"};var Ke=i(88685),Le=i(82141),Ze=i(21403),Se=i(19276);const Ee={date:[],dateOnly:[],id:["is","isNot","startsWith","endsWith","contains","doesNotContain"],number:["is","isNot","startsWith","endsWith","contains","doesNotContain","isBlank","isNotBlank"],timeOnly:[],timestampOffset:[],string:["is","isNot","startsWith","endsWith","contains","doesNotContain","isBlank","isNotBlank","isEmpty","isNotEmpty"]};let Pe=class extends f.default{constructor(e){super(e),this.fieldName=null,this.layer=null,this.operator="is",this.operators=Ee,this.value=null}initialize(){this.addHandles((0,r.watch)((()=>this.layer),(async e=>{e&&!e.loaded&&await e.load()}),r.initial))}get domain(){const{fieldName:e,layer:t}=this;if(e&&t)return t.getFieldDomain(e)}get field(){const{fieldName:e,layer:t}=this;if(e&&t)return t.fieldsIndex.get(e)}get fields(){var e,t;return(null!==(e=null===(t=this.layer)||void 0===t?void 0:t.fields)&&void 0!==e?e:[]).filter((e=>!!((0,O.isStringField)(e)||(0,O.isNumericField)(e)||(0,O.isObjectIDField)(e)||(0,O.isGlobalIDField)(e))))}get fieldLabel(){const{field:e}=this;return e&&(e.alias||e.name)||""}get isObjectIDField(){const{field:e}=this;return!!e&&(0,O.isObjectIDField)(e)}get isGlobalIDField(){const{field:e}=this;return!!e&&(0,O.isGlobalIDField)(e)}get isIntegerField(){return(0,O.isIntegerField)(this.field)}get isNumericField(){return(0,O.isNumericField)(this.field)}get isStringField(){return(0,O.isStringField)(this.field)}get isTimeOnlyField(){return(0,O.isTimeOnlyField)(this.field)}get normalizedFieldName(){var e;return(0,O.normalizeFieldName)(null===(e=this.field)||void 0===e?void 0:e.name)}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get valueAsString(){const{value:e}=this;return null==e||""===e?"":"".concat(e)}get normalizedValue(){const{value:e,isNumericField:t,isObjectIDField:i}=this;return null==e||""===e?"":t||i?"".concat(e):"'".concat(e,"'")}get whereClause(){const{normalizedFieldName:e,operator:t,normalizedValue:i}=this;return e&&t?"isBlank"===t?"".concat(e," IS NULL"):"isNotBlank"===t?"".concat(e," IS NOT NULL"):"isEmpty"===t?"".concat(e," = ''"):"isNotEmpty"===t?"".concat(e," <> ''"):""===i?null:"is"===t?"".concat(e," = ").concat(i):"isNot"===t?"".concat(e," <> ").concat(i):"startsWith"===t?"".concat(e," LIKE ").concat(i,"%"):"endsWith"===t?"".concat(e," LIKE %").concat(i):"contains"===t?"".concat(e," LIKE %").concat(i,"%"):"doesNotContain"===t?"".concat(e," NOT LIKE %").concat(i,"%"):null:null}};(0,n._)([(0,a.MZ)()],Pe.prototype,"domain",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"field",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"fields",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"fieldLabel",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"fieldName",void 0),(0,n._)([(0,a.MZ)()],Pe.prototype,"isObjectIDField",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"isIntegerField",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"isNumericField",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"isStringField",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"isTimeOnlyField",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"layer",void 0),(0,n._)([(0,a.MZ)()],Pe.prototype,"normalizedFieldName",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"operator",void 0),(0,n._)([(0,a.MZ)()],Pe.prototype,"operators",void 0),(0,n._)([(0,a.MZ)()],Pe.prototype,"state",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"value",void 0),(0,n._)([(0,a.MZ)()],Pe.prototype,"valueAsString",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"normalizedValue",null),(0,n._)([(0,a.MZ)()],Pe.prototype,"whereClause",null),Pe=(0,n._)([(0,d.$)("esri.widgets.support.FilterCondition.FilterConditionViewModel")],Pe);const Ne=Pe,Oe={},xe="esri-filter-condition",We={base:xe,container:"".concat(xe,"__container"),valueInputContainer:"".concat(xe,"__value-input-container")};let De=class extends v.default{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new Ne,this.visibleElements=(0,o.A)({},Oe)}loadDependencies(){return(0,F.W)({input:()=>Promise.all([i.e(46870),i.e(38841)]).then(i.bind(i,38841)),option:()=>i.e(46422).then(i.bind(i,46422)),select:()=>i.e(2253).then(i.bind(i,2253))})}get _defaultFieldName(){const{fields:e,fieldName:t}=this;return t||(null!==e&&void 0!==e&&e.length?e[0].name:void 0)}get _valueInputType(){const{viewModel:e}=this;return e.isNumericField||e.isObjectIDField?"number":"text"}get _visibleOperators(){const{field:e,operators:t,viewModel:i}=this;return e?i.isStringField||i.isGlobalIDField?t.string:i.isNumericField?t.number:i.isObjectIDField?t.id:[]:[]}get _isValueInputHidden(){const{operator:e}=this;return!!e&&["isBlank","isNotBlank","isEmpty","isNotEmpty"].includes(e)}get domain(){return this.viewModel.domain}get field(){return this.viewModel.field}get fields(){return this.viewModel.fields}get fieldLabel(){return this.viewModel.fieldLabel}get fieldName(){return this.viewModel.fieldName}set fieldName(e){this.viewModel.fieldName=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get normalizedFieldName(){return this.viewModel.normalizedFieldName}get operator(){return this.viewModel.operator}set operator(e){this.viewModel.operator=e}get operators(){return this.viewModel.operators}set operators(e){this.viewModel.operators=e}get state(){return this.viewModel.state}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}get valueAsString(){return this.viewModel.valueAsString}castVisibleElements(e){return(0,o.A)((0,o.A)({},Oe),e)}get whereClause(){return this.viewModel.whereClause}render(){return(0,A.K)("div",{class:We.base},this._renderFieldSelection(),this._renderOperatorSelection(),this._renderValueInput())}_renderFieldSelection(){const e=this.normalizedFieldName;return(0,A.K)("div",null,(0,A.K)("calcite-select",{afterCreate:()=>{this.fieldName||(this.fieldName=this._defaultFieldName)},bind:this,label:this.messages.chooseField,width:"full",onCalciteSelectChange:e=>{let{currentTarget:t}=e;this.value=null,this.fieldName=t.value}},this.fields.map((t=>this._renderOption(t.name,t.alias,e)))))}_renderOperatorSelection(){const{_visibleOperators:e,messages:t,operator:i}=this;if(e.length)return(0,A.K)("div",null,(0,A.K)("calcite-select",{afterUpdate:e=>{const t=e.value;this._visibleOperators.includes(t)||(this.operator=this._visibleOperators[0])},bind:this,label:t.operator,required:!0,width:"full",onCalciteSelectChange:e=>{this.operator=e.currentTarget.value}},e.map((e=>this._renderOption(e,t.operators[e],i)))))}_renderOption(e,t,i){return(0,A.K)("calcite-option",{key:e,label:null!==t&&void 0!==t?t:e,selected:e===i,value:e})}_renderValueInput(){const{valueAsString:e,domain:t,messages:i,operator:o}=this;if(!this._isValueInputHidden){if("coded-value"===(null===t||void 0===t?void 0:t.type)&&t.codedValues.length&&("is"===o||"isNot"===o)){const o=t.codedValues[0].code;return(0,A.K)("div",{key:"value-select"},(0,A.K)("calcite-select",{afterCreate:()=>this._afterSelectCreateOrUpdate(o),afterUpdate:()=>this._afterSelectCreateOrUpdate(o),bind:this,label:i.value,required:!0,width:"full",onCalciteSelectChange:e=>{let{currentTarget:t}=e;this._onValueChange(t.value)}},t.codedValues.map((t=>{let{code:i,name:o}=t;return this._renderOption("".concat(i),o,e)}))))}return(0,A.K)("div",{class:We.valueInputContainer,key:"value-input"},(0,A.K)("calcite-input",{label:i.value,type:this._valueInputType,value:e,onCalciteInputInput:e=>{let{currentTarget:t}=e;this._onValueChange(t.value)}}))}}_afterSelectCreateOrUpdate(e){null==this.value&&(this.value=e)}_onValueChange(e){const{viewModel:t}=this;e&&""!==e?t.isStringField||t.isGlobalIDField?this.value=e.toString():(t.isNumericField||t.isObjectIDField)&&(this.value=parseFloat(e)):this.value=null}};(0,n._)([(0,a.MZ)()],De.prototype,"_defaultFieldName",null),(0,n._)([(0,a.MZ)()],De.prototype,"_valueInputType",null),(0,n._)([(0,a.MZ)()],De.prototype,"_visibleOperators",null),(0,n._)([(0,a.MZ)()],De.prototype,"_isValueInputHidden",null),(0,n._)([(0,a.MZ)()],De.prototype,"domain",null),(0,n._)([(0,a.MZ)()],De.prototype,"field",null),(0,n._)([(0,a.MZ)()],De.prototype,"fields",null),(0,n._)([(0,a.MZ)()],De.prototype,"fieldLabel",null),(0,n._)([(0,a.MZ)()],De.prototype,"fieldName",null),(0,n._)([(0,a.MZ)()],De.prototype,"layer",null),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/support/FilterCondition/t9n/FilterCondition")],De.prototype,"messages",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/t9n/common")],De.prototype,"messagesCommon",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"normalizedFieldName",null),(0,n._)([(0,a.MZ)()],De.prototype,"operator",null),(0,n._)([(0,a.MZ)()],De.prototype,"operators",null),(0,n._)([(0,a.MZ)()],De.prototype,"state",null),(0,n._)([(0,a.MZ)()],De.prototype,"value",null),(0,n._)([(0,a.MZ)()],De.prototype,"valueAsString",null),(0,n._)([(0,a.MZ)()],De.prototype,"viewModel",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"visibleElements",void 0),(0,n._)([(0,Ze.w)("visibleElements")],De.prototype,"castVisibleElements",null),(0,n._)([(0,a.MZ)()],De.prototype,"whereClause",null),De=(0,n._)([(0,d.$)("esri.widgets.support.FilterCondition")],De);const Be=De;let Ve=class extends f.default{constructor(e){super(e),this.conditionOperator="AND",this.conditionWidgets=new Se.default,this.layer=null,this.operators=Ee}initialize(){this.addHandles([(0,r.watch)((()=>this.layer),(async e=>{e&&!e.loaded&&await e.load()}),r.initial)])}get count(){return this.conditionWidgets.length}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get whereClause(){const{conditionOperator:e,whereClauses:t}=this;let i="";return t.forEach(((t,o)=>{i+=o>0?" ".concat(e," (").concat(t,")"):"(".concat(t,")")})),i}get whereClauses(){return this.conditionWidgets.toArray().map((e=>e.whereClause)).filter(N.Ru)}addCondition(e,t){const{layer:i,operators:n}=this;i&&this.conditionWidgets.add(new Be((0,o.A)((0,o.A)({},e),{},{layer:i,operators:n})),t)}duplicateCondition(e){const t=this.conditionWidgets.at(e);if(!t)return;const{fieldName:i,operator:o,value:n}=t;this.addCondition({fieldName:i,operator:o,value:n})}reset(){this.conditionWidgets.removeAll()}removeCondition(e){null==e?this.conditionWidgets.pop():this.conditionWidgets.splice(e,1)}};(0,n._)([(0,a.MZ)()],Ve.prototype,"conditionOperator",void 0),(0,n._)([(0,a.MZ)()],Ve.prototype,"conditionWidgets",void 0),(0,n._)([(0,a.MZ)()],Ve.prototype,"count",null),(0,n._)([(0,a.MZ)()],Ve.prototype,"layer",void 0),(0,n._)([(0,a.MZ)()],Ve.prototype,"operators",void 0),(0,n._)([(0,a.MZ)()],Ve.prototype,"state",null),(0,n._)([(0,a.MZ)()],Ve.prototype,"whereClause",null),(0,n._)([(0,a.MZ)()],Ve.prototype,"whereClauses",null),Ve=(0,n._)([(0,d.$)("esri.widgets.support.FilterBuilder.FilterBuilderViewModel")],Ve);const Ue=Ve,ze={fab:!0,menu:!0},Ge="esri-filter-builder",je={base:Ge,container:"".concat(Ge,"__container"),conditionContainer:"".concat(Ge,"__condition-container"),operatorSelect:"".concat(Ge,"__operator-select")};let Re=class extends v.default{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new Ue,this.visibleElements=(0,o.A)({},ze)}loadDependencies(){return(0,F.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),"action-menu":()=>Promise.resolve().then(i.bind(i,3671)),block:()=>i.e(75502).then(i.bind(i,75502)),fab:()=>i.e(58862).then(i.bind(i,58862)),option:()=>i.e(46422).then(i.bind(i,46422)),select:()=>i.e(2253).then(i.bind(i,2253))})}get conditionOperator(){return this.viewModel.conditionOperator}set conditionOperator(e){this.viewModel.conditionOperator=e}get count(){return this.viewModel.count}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get operators(){return this.viewModel.operators}set operators(e){this.viewModel.operators=e}get state(){return this.viewModel.state}castVisibleElements(e){return(0,o.A)((0,o.A)({},ze),e)}get whereClause(){return this.viewModel.whereClause}get whereClauses(){return this.viewModel.whereClauses}render(){return(0,A.K)("div",{class:je.base},this._renderOperatorSelect(),this._renderConditions(),this._renderFAB())}reset(){this.viewModel.reset()}_renderOperatorSelect(){if(this.count<2)return;const{conditionOperator:e,messages:t}=this,i="AND"===e;return(0,A.K)("div",{class:je.operatorSelect},(0,A.K)("calcite-select",{label:t.condition,width:"full",onCalciteSelectChange:e=>{let{currentTarget:t}=e;this.conditionOperator=t.value}},(0,A.K)("calcite-option",{label:t.allAreTrue,selected:i,value:"AND"}),(0,A.K)("calcite-option",{label:t.anyAreTrue,selected:!i,value:"OR"})))}_renderConditions(){return this.viewModel.conditionWidgets.toArray().map(((e,t)=>this._renderConditionContainer(e,t)))}_renderConditionContainer(e,t){return(0,A.K)("calcite-block",{class:je.conditionContainer,heading:this.messages.condition,open:!0},e.render(),this._renderConditionrMenu(t))}_renderFAB(){if(!this.visibleElements.fab)return;const e="loading"===this.state;return(0,A.K)("calcite-fab",{appearance:"outline-fill",disabled:e,icon:"plus",kind:"neutral",loading:e,onclick:()=>this.viewModel.addCondition(),text:this.messages.addNew,textEnabled:!0})}_renderConditionrMenu(e){if(!this.visibleElements.menu)return;const{messages:t}=this;return(0,A.K)("calcite-action-menu",{label:t.moreOptions,overlayPositioning:"fixed",placement:"bottom-end",slot:"control"},(0,A.K)("calcite-action",{onclick:()=>this.viewModel.removeCondition(e),text:t.delete,textEnabled:!0}),(0,A.K)("calcite-action",{onclick:()=>this.viewModel.duplicateCondition(e),text:t.duplicate,textEnabled:!0}))}};(0,n._)([(0,a.MZ)()],Re.prototype,"conditionOperator",null),(0,n._)([(0,a.MZ)()],Re.prototype,"count",null),(0,n._)([(0,a.MZ)()],Re.prototype,"layer",null),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/support/FilterBuilder/t9n/FilterBuilder")],Re.prototype,"messages",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/t9n/common")],Re.prototype,"messagesCommon",void 0),(0,n._)([(0,a.MZ)()],Re.prototype,"operators",null),(0,n._)([(0,a.MZ)()],Re.prototype,"state",null),(0,n._)([(0,a.MZ)()],Re.prototype,"viewModel",void 0),(0,n._)([(0,a.MZ)()],Re.prototype,"visibleElements",void 0),(0,n._)([(0,Ze.w)("visibleElements")],Re.prototype,"castVisibleElements",null),(0,n._)([(0,a.MZ)()],Re.prototype,"whereClause",null),(0,n._)([(0,a.MZ)()],Re.prototype,"whereClauses",null),Re=(0,n._)([(0,d.$)("esri.widgets.support.FilterBuilder")],Re);const He=Re;var $e=i(98108);const qe="esri-feature-form-utility-network-association-layers",Xe={base:qe,header:"".concat(qe,"__header"),headingContent:"".concat(qe,"__heading-content"),featureObserver:"".concat(qe,"__feature-observer"),filterContainer:"".concat(qe,"__filter-container"),filterOptionsContainer:"".concat(qe,"__filter-options-container"),filterOptionsHeader:"".concat(qe,"__filter-options-header"),listContainer:"".concat(qe,"__list-container"),stickySpinnerContainer:"".concat(qe,"__sticky-loading-container"),loadingContainer:"".concat(qe,"__loading-container")};let Qe=class extends v.default{constructor(e,t){super(e,t),this.headingLevel=5,this.messagesCommon=null,this.messagesFeature=null,this.messagesFeatureForm=null,this.messagesFilterBuilder=null,this.viewModel=new Le.A,this._filterBuilder=new He,this._featureFilterText="",this._layerFilterText="",this._observer=new IntersectionObserver((e=>{let[t]=e;(null===t||void 0===t?void 0:t.isIntersecting)&&this._increaseFeaturePage()}),{root:window.document}),this._observerNode=null}initialize(){this.addHandles([(0,r.watch)((()=>this.viewModel),(()=>this.reset())),(0,r.watch)((()=>[this.viewModel.state,this._observerNode]),(()=>this._onObserverChange())),(0,r.watch)((()=>this.selectedLayer),(e=>{this._filterBuilder.layer=e,e||(this.filterOptionsVisible=!1,this._featureFilterText="")}))])}loadDependencies(){return(0,F.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),button:()=>Promise.resolve().then(i.bind(i,43285)),icon:()=>Promise.resolve().then(i.bind(i,16702)),input:()=>Promise.all([i.e(46870),i.e(38841)]).then(i.bind(i,38841)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),loader:()=>Promise.resolve().then(i.bind(i,35688))})}get filterOptionsVisible(){return this.viewModel.filterOptionsVisible}set filterOptionsVisible(e){this.viewModel.filterOptionsVisible=e}get selectedLayer(){return this.viewModel.selectedLayer}set selectedLayer(e){this.viewModel.selectedLayer=e}get selectedFeature(){return this.viewModel.selectedFeature}set selectedFeature(e){this.viewModel.selectedFeature=e}get filterWhereClause(){return this.viewModel.filterWhereClause}set filterWhereClause(e){this.viewModel.filterWhereClause=e,e||this._filterBuilder.reset()}get _filteredFeatureItems(){const{_featureFilterText:e}=this;return this.viewModel.featureItems.map((e=>({label:e.label,graphic:e.feature,layer:e.feature.sourceLayer}))).filter((t=>{var i,o;return null!==(i=null===(o=t.label)||void 0===o?void 0:o.toLowerCase().includes(e))&&void 0!==i&&i}))}render(){const{state:e,filterOptionsVisible:t}=this.viewModel;return(0,A.K)("div",{class:this.classes(Xe.base,$e.D.widget)},"loading"===e?this._renderLoading():t?this._renderFilterOptions():this.selectedLayer?this._renderFeatures():this._renderLayers())}applyFilterOptions(){const{selectedLayer:e}=this;this.filterOptionsVisible=!1,e&&(this.filterWhereClause=this._filterBuilder.whereClause)}reset(){this.filterWhereClause=null,this._featureFilterText="",this._layerFilterText="",this.filterOptionsVisible=!1,this._filterBuilder.reset()}async _onObserverChange(){this._observerNode&&this._observer.unobserve(this._observerNode);const{state:e}=this.viewModel;this._observerNode&&"ready"===e&&this._observer.observe(this._observerNode)}_increaseFeaturePage(){const{featureCount:e,featurePage:t,state:i}=this.viewModel;e||1===t?"ready"===i&&this.viewModel.featurePage++:this.viewModel.featurePage=1}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,A.K)("div",{class:Xe.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoading(){return(0,A.K)("div",{class:Xe.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderLoadingIcon(){return(0,A.K)("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderFilterOptions(){return(0,A.K)("div",{class:Xe.filterOptionsContainer},(0,A.K)("div",{class:Xe.filterOptionsHeader},(0,A.K)("span",null,this.messagesFilterBuilder.widgetLabel),(0,A.K)("calcite-button",{appearance:"transparent",onclick:()=>this._filterBuilder.reset()},this.messagesCommon.clear)),this._filterBuilder.render())}_renderLayers(){const e=this.messagesFeatureForm.associations,t=e.availableLayers,i=e.filterLayers;return(0,A.K)("div",null,this._renderHeader({heading:t,placeholder:i,renderFilterOptions:!1,renderTotal:!1}),(0,A.K)("div",{class:Xe.listContainer},(0,A.K)("calcite-list",{label:e.associatedFeatures},this._renderLayerItems(),this._renderStickyLoading())))}_renderLayerItems(){const{_layerFilterText:e,viewModel:t,messagesCommon:i}=this,{layerItems:o}=t;return o.map((e=>{var t;return{label:null!==(t=e.title)&&void 0!==t?t:i.untitled,layer:e}})).filter((t=>{var i,o;return null!==(i=null===(o=t.label)||void 0===o?void 0:o.toLowerCase().includes(e))&&void 0!==i&&i})).toArray().map((e=>this._renderLayerItem(e)))}_renderLayerItem(e){const{label:t,layer:i}=e;return(0,A.K)("calcite-list-item",{key:"layer-item-".concat(i.id),label:(0,Ke._e)(t),onCalciteListItemSelect:()=>{this.selectedLayer=i,this._filterBuilder.reset()}},(0,A.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderFeatures(){var e;const{selectedLayer:t}=this;if(!t)return;const i=this.messagesFeatureForm.associations,o=null!==(e=t.title)&&void 0!==e?e:this.messagesCommon.untitled,n=i.filterFeatures;return(0,A.K)("div",null,this._renderHeader({heading:o,placeholder:n,renderFilterOptions:!0,renderTotal:!0}),(0,A.K)("div",{class:Xe.listContainer},(0,A.K)("calcite-list",{label:i.associatedFeatures},this._renderFeatureItems(),this._renderStickyLoading(),this._renderFeatureObserver())))}_renderFeatureItems(){return this._filteredFeatureItems.toArray().map((e=>this._renderFeatureItem(e)))}_renderFeatureItem(e){const{label:t,graphic:i}=e;return(0,A.K)("calcite-list-item",{key:"feature-item-".concat(i.uid),label:(0,Ke._e)(t),onCalciteListItemSelect:()=>{this.selectedFeature={feature:i,label:t}}},(0,A.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_onObserverCreate(e){this._observerNode=e}_renderFeatureObserver(){return(0,A.K)("div",{afterCreate:this._onObserverCreate,bind:this,class:Xe.featureObserver,key:"feature-observer"})}_renderHeader(e){return(0,A.K)("div",{class:Xe.header,key:"filter"},this._renderHeading(e.heading),this._renderFilter(e.placeholder,e.renderFilterOptions),e.renderTotal?this._renderTotal():null)}_renderHeading(e){return e?(0,A.K)(ue.D,{key:"title",level:this.headingLevel},(0,A.K)("div",{class:Xe.headingContent},(0,A.K)("calcite-icon",{icon:"layer"}),e)):null}_renderFilter(e,t){const i=!this.selectedLayer,o=i?this._layerFilterText:this._featureFilterText;return(0,A.K)("div",{class:Xe.filterContainer,key:"filter"},(0,A.K)("calcite-input",{icon:"search",placeholder:e,type:"search",value:o,onCalciteInputInput:e=>{i?this._layerFilterText=e.currentTarget.value.trim().toLowerCase():this._featureFilterText=e.currentTarget.value.trim().toLowerCase()}},t?this._renderFilterOptionsAction():null))}_renderFilterOptionsAction(){const e=this.messagesFeatureForm.associations.filterOptions;return(0,A.K)("calcite-action",{appearance:"transparent",icon:"sliders",indicator:!!this._filterBuilder.whereClause,onclick:()=>{this.viewModel.filterOptionsVisible=!this.viewModel.filterOptionsVisible},scale:"s",slot:"action",text:e,title:e})}_renderTotal(){const{messagesFeature:e,viewModel:t}=this,i=(0,ce.V)(e.numberRecords,{number:t.featureCount});return(0,A.K)("div",{key:"total"},i)}};(0,n._)([(0,a.MZ)()],Qe.prototype,"filterOptionsVisible",null),(0,n._)([(0,a.MZ)()],Qe.prototype,"headingLevel",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/t9n/common")],Qe.prototype,"messagesCommon",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/Feature/t9n/Feature")],Qe.prototype,"messagesFeature",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/FeatureForm/t9n/FeatureForm")],Qe.prototype,"messagesFeatureForm",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/support/FilterBuilder/t9n/FilterBuilder")],Qe.prototype,"messagesFilterBuilder",void 0),(0,n._)([(0,a.MZ)()],Qe.prototype,"selectedLayer",null),(0,n._)([(0,a.MZ)({type:Le.A})],Qe.prototype,"viewModel",void 0),(0,n._)([(0,a.MZ)()],Qe.prototype,"selectedFeature",null),(0,n._)([(0,a.MZ)()],Qe.prototype,"filterWhereClause",null),(0,n._)([(0,a.MZ)()],Qe.prototype,"_filterBuilder",void 0),(0,n._)([(0,a.MZ)()],Qe.prototype,"_featureFilterText",void 0),(0,n._)([(0,a.MZ)()],Qe.prototype,"_layerFilterText",void 0),(0,n._)([(0,a.MZ)()],Qe.prototype,"_observer",void 0),(0,n._)([(0,a.MZ)()],Qe.prototype,"_filteredFeatureItems",null),(0,n._)([(0,a.MZ)()],Qe.prototype,"_observerNode",void 0),Qe=(0,n._)([(0,d.$)("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationItemList")],Qe);const Ye=Qe;var Je=i(10336);function et(e,t){return!!(e.layer&&"globalIdField"in e.layer&&e.layer.globalIdField&&t.fromNetworkElement)&&e.attributes[e.layer.globalIdField]===t.fromNetworkElement.globalId}const tt="esri-feature-form-utility-network-association-settings",it={base:tt,infoContainer:"".concat(tt,"__info-container")};let ot=class extends v.default{constructor(e,t){super(e,t),this.percentAlong=50,this.headingLevel=5,this.messagesFeature=null,this.messagesCommon=null,this.messagesFeatureForm=null,this.readOnly=!1,this.sourceFeature=null,this.targetFeature=null,this.utilityNetwork=null}loadDependencies(){return(0,F.W)({block:()=>i.e(75502).then(i.bind(i,75502)),combobox:()=>Promise.all([i.e(65641),i.e(64880)]).then(i.bind(i,64880)),"combobox-item":()=>i.e(73438).then(i.bind(i,73438)),"input-number":()=>Promise.all([i.e(46870),i.e(41763)]).then(i.bind(i,41763)),label:()=>Promise.resolve().then(i.bind(i,11839)),switch:()=>Promise.resolve().then(i.bind(i,8989))})}get association(){return this._get("association")}set association(e){this.percentAlong=e.percentAlong?100*e.percentAlong:50,this._set("association",e)}get associationType(){return this.association.associationType}set associationType(e){this.association.associationType=e,"junction-edge-to-connectivity"!==e&&"junction-edge-from-connectivity"!==e||(this.association.percentAlong=void 0)}render(){return(0,A.K)("div",{class:this.classes(it.base,$e.D.widget)},this._renderFromAssociationEndpoint(),this._renderToAssociationEndpoint(),this._renderAdditionalContent())}_renderFromAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:i,targetFeature:o,messagesFeatureForm:n}=this,s=et(i.feature,t)?i:o,l=s.label,r=(0,Je.o)(t,"from",n.associations);switch(e){case"connectivity":case"junction-junction-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-from-connectivity":case"junction-edge-to-connectivity":return this._renderAssociationEndpoint(l,r,this._renderConnectivityContent(s.feature,t.fromNetworkElement))}return this._renderAssociationEndpoint(l,r)}_renderToAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:i,targetFeature:o,messagesFeatureForm:n}=this,s=et(i.feature,t)?o:i,l=s.label,r=(0,Je.o)(t,"to",n.associations);let a;switch(e){case"connectivity":case"junction-junction-connectivity":a=this._renderConnectivityContent(s.feature,t.toNetworkElement);break;case"containment":a=this._isNonspatial(s.feature)?null:this._renderContainmentContent()}return this._renderAssociationEndpoint(l,r,a)}_renderAssociationEndpoint(e,t,i){return(0,A.K)("calcite-block",{description:t,heading:e,open:!0},i)}_renderContainmentContent(){var e;const{messagesFeatureForm:t,association:i}=this,o=null!==(e=i.isContentVisible)&&void 0!==e&&e;return(0,A.K)("calcite-label",{layout:"inline"},t.associations.visible,(0,A.K)("calcite-switch",{checked:o,onCalciteSwitchChange:e=>{let{currentTarget:t}=e;i.isContentVisible=t.checked}}))}_renderConnectivityContent(e,t){const{messagesFeatureForm:i,utilityNetwork:o}=this,n=o.getTerminalConfiguration(e),s=(null===n||void 0===n?void 0:n.terminals.map((e=>this._renderComboboxListItemNumber(e.id,t.terminalId,e.name))))||[];return(0,A.K)("calcite-label",null,i.associations.terminal,(0,A.K)("calcite-combobox",{allowCustomValues:!1,clearDisabled:!0,label:i.associations.terminalComboboxLabel,overlayPositioning:"fixed",selectionMode:"single",onCalciteComboboxChange:e=>{let{currentTarget:i}=e;t.terminalId=parseInt(i.value,10)}},...s))}_renderAdditionalContent(){const{associationType:e}=this;switch(e){case"connectivity":case"junction-junction-connectivity":case"attachment":case"containment":return}const t="junction-edge-midspan-connectivity"===e?e:"junction-edge-from-connectivity",{messagesFeatureForm:i}=this,o=[this._renderComboboxListItemString("junction-edge-midspan-connectivity",t,i.associations.midspanEdge),this._renderComboboxListItemString("junction-edge-from-connectivity",t,i.associations.endpointEdge)];return(0,A.K)("div",{class:it.infoContainer},(0,A.K)("calcite-label",{key:"additional-content"},i.associations.connectTo,(0,A.K)("calcite-combobox",{allowCustomValues:!1,clearDisabled:!0,label:i.associations.edgeConnectionComboboxLabel,overlayPositioning:"fixed",selectionMode:"single",onCalciteComboboxChange:e=>{let{currentTarget:t}=e;this.associationType=t.value}},...o)),"junction-edge-midspan-connectivity"===t?this._renderMidspanEdgeContent():this._renderEndpointEdgeContent())}_renderMidspanEdgeContent(){const{messagesFeatureForm:e,percentAlong:t,association:i}=this;return i.percentAlong=t/100,(0,A.K)("calcite-label",{key:"midspan-edge"},e.associations.midspanLocation,(0,A.K)("calcite-input-number",{max:100,min:0,numberButtonType:"vertical",suffixText:"%",value:"".concat(t),onCalciteInputNumberInput:e=>{let{currentTarget:t}=e;this.percentAlong=parseFloat(t.value)}}))}_renderEndpointEdgeContent(){const{associationType:e,messagesFeatureForm:t}=this,i="junction-edge-to-connectivity"===e;return(0,A.K)("calcite-label",{key:"endpoint-edge"},t.associations.edgeSide,(0,A.K)("calcite-label",{layout:"inline"},t.associations.fromSide,(0,A.K)("calcite-switch",{checked:i,onCalciteSwitchChange:e=>{let{currentTarget:t}=e;const i=t.checked?"junction-edge-to-connectivity":"junction-edge-from-connectivity";this.associationType=i}}),t.associations.toSide))}_renderComboboxListItemNumber(e,t,i){return(0,A.K)("calcite-combobox-item",{heading:i,key:"#".concat(e),selected:t===e,value:"".concat(e)})}_renderComboboxListItemString(e,t,i){return(0,A.K)("calcite-combobox-item",{heading:i,key:"#".concat(e),selected:t===e,value:"".concat(e)})}_isNonspatial(e){const{sourceLayer:t}=e;return null!=t&&"geometryType"in t&&null==t.geometryType}};(0,n._)([(0,a.MZ)()],ot.prototype,"association",null),(0,n._)([(0,a.MZ)()],ot.prototype,"percentAlong",void 0),(0,n._)([(0,a.MZ)()],ot.prototype,"associationType",null),(0,n._)([(0,a.MZ)()],ot.prototype,"headingLevel",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/Feature/t9n/Feature")],ot.prototype,"messagesFeature",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/t9n/common")],ot.prototype,"messagesCommon",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/FeatureForm/t9n/FeatureForm")],ot.prototype,"messagesFeatureForm",void 0),(0,n._)([(0,a.MZ)()],ot.prototype,"readOnly",void 0),(0,n._)([(0,a.MZ)()],ot.prototype,"sourceFeature",void 0),(0,n._)([(0,a.MZ)()],ot.prototype,"targetFeature",void 0),(0,n._)([(0,a.MZ)()],ot.prototype,"utilityNetwork",void 0),ot=(0,n._)([(0,d.$)("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationSettings")],ot);const nt=ot;var st=i(67052),lt=i(54901);function rt(e){let t,i,{getLoading:o,setEffectiveLoading:n}=e;function s(){clearTimeout(i),i=void 0}function l(e){t=e?Date.now():void 0,n(e)}function a(e,t){if(e<=0)return l(t);i=setTimeout((()=>{s(),l(t)}),e)}return l(o()),(0,lt.vE)([(0,r.watch)(o,(e=>{s(),e?a(500,!0):a(null!=t?1e3-(Date.now()-t):0,!1)}),r.sync),(0,lt.hA)(s)])}var at=i(12254);const dt=Symbol("sketch-setup-handles");let ct=class extends v.default{constructor(e,t){var i;super(e,t),i=this,this._featureForm=new p.default,this._sketchToolbar=null,this._attachments=new u.default({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),this._associationItemList=new Ye,this._associationSettings=new nt,this._featureTemplates=new h.default({enableListScroll:!1,renderItemContentEnd:e=>e.supportsUpload?(0,A.K)("calcite-icon",{class:_.templateItemContentEnd,icon:"upload-to",key:"upload-icon"}):null,renderItemLabel:e=>e.label,renderCustomGroupContent:e=>this._renderCustomTemplateGroupContent(e)}),this._filterText="",this._prompt=null,this._spinner=new m.A,this._loading=!1,this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.messagesTemplates=null,this.messagesFeature=null,this.supportingWidgetDefaults=null,this.viewModel=new y.default,this.visibleElements=new k,this._renderAttachments=()=>this._attachments.render(),this._renderFeatureForm=()=>this._featureForm.render(),this._renderAssociationItemList=()=>this._associationItemList.render(),this._renderAssociationSettings=()=>this._associationSettings.render(),this._renderFeatureTemplates=()=>this._featureTemplates.render(),this._renderSketch=()=>{var e;return this._sketchToolbar?(0,A.K)("div",{class:_.sketchContainer,key:"editor-sketch-container"},null===(e=this._sketchToolbar)||void 0===e?void 0:e.render()):void 0},this._renderSelectIcon=()=>(0,A.K)("calcite-icon",{icon:"cursor",slot:"content-start"}),this.EditorPanel=function(e){let{heading:t,key:o,selected:n}=e;const{visibleElements:s}=i;for(var l=arguments.length,r=new Array(l>1?l-1:0),a=1;a<l;a++)r[a-1]=arguments[a];return(0,A.K)("calcite-flow-item",{closable:!1,heading:t,headingLevel:i.headingLevel,key:o,loading:i._loading,selected:n,onCalciteFlowItemBack:i._onBack},s.zoomToButton&&i.viewModel.canZoomTo?(0,A.K)("calcite-action",{alignment:"center",appearance:"transparent",icon:"zoom-to-object",key:"zoom-to-button",onclick:()=>i.viewModel.zoomTo(),slot:"header-actions-end",text:i.messages.zoomTo,title:i.messages.zoomTo}):null,s.settingsMenu?(0,A.K)(ae,{editorViewModel:i.viewModel,messagesCommon:i.messagesCommon,visibleElements:s}):null,...r)},this._showDiscardEditsPrompt=()=>{var e,t;const{messages:i,activeWorkflow:n}=this,s={title:i.cancelEditTitle,message:i.cancelEditWarningMessage,yesLabel:i.discardEdits,noLabel:i.continueEditing};return"create-features"===(null===n||void 0===n?void 0:n.type)&&(0,b.v)(n.data.creationInfo)?this._showPromptAndWait("success"===(null===(e=n.data.upload)||void 0===e?void 0:e.state)?i.modelUploads.cancelPlacementPrompt:i.modelUploads.cancelUploadPrompt):"update"===(null===n||void 0===n?void 0:n.type)&&null!==(t=n.activeFeatureFormViewModel)&&void 0!==t&&t.activeAssociation?this._showPromptAndWait((0,o.A)((0,o.A)({},s),{},{message:i.cancelAssociationEditWarning})):this._showPromptAndWait(s)},this._showGenericCancelPrompt=()=>{const{messages:e,messagesCommon:t}=this;return this._showPromptAndWait({title:e.cancelRequestTitle,message:e.cancelRequestWarningMessage,yesLabel:t.form.yes,noLabel:t.form.no})},this._showPrompt=e=>{var t,i;null!==(t=this._prompt)&&void 0!==t&&null!==(i=t.cancel)&&void 0!==i&&i.call(t),this._prompt=e},this._clearPrompt=()=>{this._prompt=null},this._onSave=()=>{this.viewModel.saveWorkflow()},this._onDelete=()=>{const{messages:e,messagesCommon:t}=this;this._showPrompt({title:e.deleteWarningTitle,message:e.deleteWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:()=>{this.deleteFeatureFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepFeature,action:this._clearPrompt}}})},this._onDeleteAssociation=()=>{const{messages:e,messagesCommon:t}=this;this._showPrompt({title:e.deleteAssociationTitle,message:e.deleteAssociationMessage,context:"danger",actions:{primary:{label:t.delete,action:()=>{this.deleteAssociationFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepAssociation,action:this._clearPrompt}}})},this._onToggleUpdateWorkflow=()=>this.viewModel.toggleUpdateWorkflow(),this._onBack=e=>(null!==e&&void 0!==e&&e.stopPropagation(),this.viewModel.back()),this._onAttachmentAdd=()=>{var e;const{activeWorkflow:t}=this.viewModel;t&&("create-features"===t.type||"update"===t.type&&"create-features"===(null===(e=t.activeWorkflow)||void 0===e?void 0:e.type)?(this._attachments.addFile(),t.back()):this._attachments.addAttachment().then((()=>t.back())))},this._onAttachmentUpdate=()=>{const{activeWorkflow:e}=this.viewModel;e&&("create-features"===e.type?(this._attachments.updateFile(),e.back()):this._attachments.updateAttachment().then((()=>e.back())))},this._onAttachmentDelete=()=>{const{messages:e,messagesCommon:t}=this;this._showPrompt({title:e.deleteAttachmentWarningTitle,message:e.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:this._onAttachmentDeleteConfirm},secondary:{label:e.keepAttachment,action:this._clearPrompt}}})},this._onAttachmentDeleteConfirm=async()=>{const e=this._attachments,{activeWorkflow:t}=this.viewModel;t&&("create-features"===t.type?e.deleteFile():(await e.deleteAttachment(e.viewModel.activeAttachmentInfo),this._clearPrompt()),await t.back(),this._clearPrompt())},this._onAttachmentsError=e=>{this._showPrompt({title:this.messages.errorWarningTitle,message:e.message,context:"warning",actions:{primary:{label:this.messagesCommon.form.ok,action:this._clearPrompt}}})}}initialize(){this._featureForm.showPrompt=this._showPrompt,this._featureForm.clearPrompt=this._clearPrompt,this.addHandles([(0,r.watch)((()=>(0,ue.S)(this.headingLevel)),(e=>{this._featureForm.headingLevel=e,this._featureTemplates.headingLevel=e}),r.initial),(0,r.on)((()=>this.viewModel.activeWorkflow),"cancel-request",(e=>{let{controller:t}=e;(this.viewModel.hasPendingEdits?this._showDiscardEditsPrompt():this._showGenericCancelPrompt()).then((e=>e?t.allow():t.deny()))})),(0,r.when)((()=>this.viewModel.featureFormViewModel),(e=>{this._featureForm.viewModel=e}),r.initial),(0,r.when)((()=>this.viewModel.utilityNetworkAssociationAddAssociationViewModel),(e=>{this._associationItemList.viewModel=e}),r.initial),(0,r.when)((()=>{var e;return null===(e=this.viewModel.utilityNetworkAssociationAddAssociationViewModel)||void 0===e?void 0:e.association}),(()=>{this._setUpAssociationSettings()})),(0,r.watch)((()=>this.viewModel),(e=>{var t,i,o;this._attachments.viewModel=null!==(t=null===e||void 0===e?void 0:e.attachmentsViewModel)&&void 0!==t?t:null,this._featureTemplates.viewModel=null!==(i=null===e||void 0===e?void 0:e.featureTemplatesViewModel)&&void 0!==i?i:null,this._spinner.viewModel=null!==(o=null===e||void 0===e?void 0:e.spinnerViewModel)&&void 0!==o?o:null,e.showDiscardEditsPrompt=this._showDiscardEditsPrompt}),r.initial),(0,r.watch)((()=>this.view),((e,t)=>{const i="editor-".concat(this.id,"-spinner");null!==t&&void 0!==t&&t.ui.remove(this._spinner,i),null===e||void 0===e||e.ui.add(this._spinner,{key:i,position:"manual"})}),r.initial),(0,r.watch)((()=>[this.supportingWidgetDefaults,this.viewModel.sketchViewModel]),(e=>{var t;let[i]=e;i&&(this._featureForm.set(i.featureForm),this._attachments.set(i.attachments),this._featureTemplates.set(i.featureTemplates),null===(t=this.viewModel.sketchViewModel)||void 0===t||t.set(i.sketch))}),r.initial),(0,r.when)((()=>{var e;return null===(e=this._attachments)||void 0===e?void 0:e.error}),(e=>this._onAttachmentsError(e))),(0,r.when)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.failures}),(e=>{const{messages:t}=this,[{error:i,retry:o,cancel:n}]=e;this._showPrompt({title:t.errorWarningTitle,message:(0,ce.V)(t.errorWarningMessageTemplate,{errorMessage:i.message}),context:"warning",actions:{primary:{label:t.retry,action:()=>{o(),this._clearPrompt()}},secondary:{label:t.ignore,action:()=>{n(),this._clearPrompt()}}}})})),(0,r.watch)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.state}),(e=>{switch(e){case"awaiting-feature-to-update":case"ready":case"disabled":this._filterText="",this._featureTemplates.filterText=""}})),(0,r.watch)((()=>this.viewModel.featureFormDisabled),(e=>this._featureForm.disabled=e)),(0,r.watch)((()=>this.visibleElements.sketch),(()=>this._setupSketch()),r.initial),rt({getLoading:()=>{const{viewModel:e}=this;return e.syncing||e.updating||this._attachments.submitting},setEffectiveLoading:e=>{this._loading=e}})])}destroy(){this._associationItemList.destroy(),this._associationSettings.destroy(),this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy(),this._sketchToolbar=(0,s.pR)(this._sketchToolbar)}loadDependencies(){return Promise.all([(0,F.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),flow:()=>i.e(87473).then(i.bind(i,87473)),"flow-item":()=>i.e(68445).then(i.bind(i,68445)),icon:()=>Promise.resolve().then(i.bind(i,16702)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802))}),K(),Promise.all([K(),(0,F.W)({action:()=>Promise.resolve().then(i.bind(i,85375))})]),j(),Y(),K(),re(),(0,de.D6)(),Promise.all([j(),Y(),K()]),Promise.all([(0,F.W)({icon:()=>Promise.resolve().then(i.bind(i,16702)),loader:()=>Promise.resolve().then(i.bind(i,35688))}),j(),K()])])}get _deleteButtonCommonInfo(){return{appearance:"outline",kind:"danger"}}get activeWorkflow(){return this.viewModel.activeWorkflow}get hideTemplatesForInactiveLayers(){return this.viewModel.hideTemplatesForInactiveLayers}set hideTemplatesForInactiveLayers(e){this.viewModel.hideTemplatesForInactiveLayers=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureCreation(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e)}startCreateFeaturesWorkflowAtFeatureEdit(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureEdit(e)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)}startUpdateWorkflowAtFeatureEdit(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}deleteAssociationFromWorkflow(){return this.viewModel.deleteAssociationFromWorkflow()}cancelWorkflow(e){return this.viewModel.cancelWorkflow(e)}render(){const{visibleElements:e,viewModel:t}=this,i=this.classes(_.base,$e.D.widget,$e.D.panel);if(!t)return(0,A.K)("div",{class:i,key:"empty"});const{pageStack:n}=t,s=n.length-1,l=n.map(((e,t)=>this._renderPage(e,t===s)));return(0,A.K)("div",{class:i,key:"base"},e.flow?(0,A.K)("calcite-flow",{key:"flow"},l):l,this._prompt?(0,A.K)(de.XG,(0,o.A)((0,o.A)({},this._prompt),{},{headingLevel:this.headingLevel})):void 0)}_renderPage(e,t){const i={selected:t};switch(e){case"disabled":break;case"ready":return this._renderReady(i);case"awaiting-feature-creation-info":return this._renderAwaitingFeatureCreationInfo(i);case"creating-features-upload-details":return this._renderUploadDetails(i);case"creating-features":return this._renderCreatingFeatures(i);case"editing-existing-feature":case"editing-attributes":return this._renderUpdateFeature(i);case"awaiting-update-feature-candidate":return this._renderFeatureList(i);case"adding-attachment":return this._renderAttachmentAdding(i);case"editing-attachment":return this._renderAttachmentEditing(i);case"viewing-associated-layers":case"viewing-associated-features":return this._renderViewAssociatedLayers(i);case"add-association-select-layer":case"add-association-select-feature":return this._renderSelectFeature(i);case"add-association-create-association":return this._renderAddAssociation(i)}return(0,A.K)("div",{key:"empty-page"})}_renderAwaitingFeatureCreationInfo(e){const{EditorPanel:t,messages:i}=this;return(0,A.K)(t,(0,o.A)({heading:i.selectTemplate,key:"templates-panel"},e),(0,A.K)(L,{key:"feature-templates"},(0,A.K)(S,null,this._renderFeatureTemplates())))}_renderUploadDetails(e){const{EditorPanel:t,activeWorkflow:i,messages:n}=this;if("create-features"!==(null===i||void 0===i?void 0:i.type))return null;const s=i.data.upload;return s?(0,A.K)(t,(0,o.A)({heading:n.createFeatures,key:"upload-details-panel"},e),(0,A.K)(Me,{helpMessage:this._helpMessage,messages:n,upload:s})):null}_renderCreatingFeatures(e){var t,i;const{EditorPanel:n,activeWorkflow:s,messages:l,messagesCommon:r,headingLevel:a,viewModel:d}=this;if(!s)return null;const c="create-features"===s.type&&s.numPendingFeatures>0||"update"===s.type&&"create-features"===(null===s||void 0===s||null===(t=s.activeWorkflow)||void 0===t?void 0:t.type)&&(null===(i=s.activeWorkflow)||void 0===i?void 0:i.numPendingFeatures)>0;return(0,A.K)(n,(0,o.A)({heading:l.createFeatures,key:"create-features-panel"},e),c?(0,A.K)(_e,{editorViewModel:d,headingLevel:a,messages:l,messagesCommon:r,renderAttachments:this._renderAttachments,renderFeatureForm:this._renderFeatureForm,renderSketchToolbar:this._renderSketch,onDelete:this._onDelete,onDeleteAssociation:this._onDeleteAssociation,onSave:this._onSave}):(0,A.K)(P,{helpMessage:this._helpMessage,renderSketchToolbar:this._renderSketch}))}_renderUpdateFeature(e){const{EditorPanel:t,messages:i,messagesCommon:n,headingLevel:s,viewModel:l}=this;return(0,A.K)(t,(0,o.A)({heading:i.editFeature,key:"update-feature-panel"},e),(0,A.K)(_e,{editorViewModel:l,headingLevel:s,messages:i,messagesCommon:n,renderAttachments:this._renderAttachments,renderFeatureForm:this._renderFeatureForm,renderSketchToolbar:this._renderSketch,onDelete:this._onDelete,onDeleteAssociation:this._onDeleteAssociation,onSave:this._onSave}))}_getAssociationTypeTitle(e){const{messages:t}=this;if(!e)return t.editFeature;if(e.title)return e.title;const{messagesFeature:i}=this;switch(e.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_getAddAssociationTypeTitle(e){const{messages:t}=this;if(!e)return t.editFeature;const i=t.associations;switch(e.type){case"attachment":return i.addAttachment;case"connectivity":return i.addConnectivity;case"structure":return i.addStructure;case"content":return i.addContent;case"container":return i.addContainer}}_renderViewAssociatedLayers(e){var t;const{EditorPanel:i,messages:n,messagesCommon:s,headingLevel:l,viewModel:r}=this,a=null===(t=r.featureFormViewModel)||void 0===t||null===(t=t.activeAssociationInput)||void 0===t?void 0:t.activeAssociationType,d=this._getAssociationTypeTitle(a);return(0,A.K)(i,(0,o.A)({heading:d,key:"viewing-associated-layers-panel"},e),(0,A.K)(_e,{editorViewModel:r,headingLevel:l,messages:n,messagesCommon:s,renderAttachments:this._renderAttachments,renderFeatureForm:this._renderFeatureForm,renderSketchToolbar:this._renderSketch,onDelete:this._onDelete,onDeleteAssociation:this._onDeleteAssociation,onSave:this._onSave}))}_renderSelectFeature(e){const{_associationItemList:t,EditorPanel:i,viewModel:n,messagesCommon:s}=this,l=n.utilityNetworkAssociationAddAssociationViewModel,r=this._getAddAssociationTypeTitle(null===l||void 0===l?void 0:l.associationType),a="ready"!==(null===l||void 0===l?void 0:l.state);return(0,A.K)(i,(0,o.A)({heading:r,key:"add-association-select-feature"},e),(0,A.K)(L,{key:"select-feature"},(0,A.K)(S,null,this._renderAssociationItemList())),(0,A.K)(R,{buttons:[t.filterOptionsVisible?{appearance:"solid",label:s.apply,disabled:a,onClick:()=>t.applyFilterOptions(),type:"button"}:void 0,{appearance:"outline",label:s.cancel,disabled:a,onClick:()=>{var e;"update"===(null===(e=n.activeWorkflow)||void 0===e?void 0:e.type)&&n.activeWorkflow.cancelActiveWorkflow()},type:"button"}]}))}_setUpAssociationSettings(){var e;const{viewModel:t,_associationSettings:i}=this,o=t.utilityNetworkAssociationAddAssociationViewModel,n="update"===(null===(e=t.activeWorkflow)||void 0===e?void 0:e.type)?t.activeWorkflow:null,s=n?n.activeWorkflow:null,l="add-association"===(null===s||void 0===s?void 0:s.type)?s.sourceFeatureItem:null,r=null===o||void 0===o?void 0:o.selectedFeature,a=null===o||void 0===o?void 0:o.association,d=null===o||void 0===o?void 0:o.utilityNetwork;l&&r&&a&&d&&(i.sourceFeature=l,i.targetFeature=r,i.association=a,i.utilityNetwork=d)}_renderAddAssociation(e){const{EditorPanel:t,viewModel:i,messagesCommon:n}=this,s=i.utilityNetworkAssociationAddAssociationViewModel,l=this._getAddAssociationTypeTitle(null===s||void 0===s?void 0:s.associationType),r="ready"!==(null===s||void 0===s?void 0:s.state);return(0,A.K)(t,(0,o.A)({heading:l,key:"add-association"},e),(0,A.K)(L,{key:"add-association-content"},(0,A.K)(S,null,this._renderAssociationSettings())),(0,A.K)(R,{buttons:[{label:n.add,disabled:r||!s.canAddAssociation,onClick:()=>this._onSave(),type:"button"},{appearance:"outline",label:n.cancel,disabled:r,onClick:()=>{var e;"update"===(null===(e=i.activeWorkflow)||void 0===e?void 0:e.type)&&i.activeWorkflow.cancelActiveWorkflow()},type:"button"}]}))}_renderCustomTemplateGroupContent(e){const{messages:t,viewModel:i}=this,o=(0,s.Pb)(e.group.items,(e=>i.itemHasInvalidFormTemplate(e)?t.formFieldCreateError:void 0));return o?(0,A.K)(ee,{kind:"warning",message:o}):null}_renderAttachmentAdding(e){const{EditorPanel:t,_attachments:i,messages:n,messagesCommon:s}=this;return(0,A.K)(t,(0,o.A)({heading:n.addAttachment,key:"attachment-adding-panel"},e),(0,A.K)(L,{key:"attachments"},this._renderAttachments()),(0,A.K)(R,{buttons:[{label:i.submitting?s.cancel:s.add,disabled:i.submitting||!i.selectedFile,onClick:this._onAttachmentAdd,type:"button"}]}))}_renderAttachmentEditing(e){const{EditorPanel:t,_attachments:i,activeWorkflow:n,messages:s,messagesCommon:l}=this;return n?(0,A.K)(t,(0,o.A)({heading:s.editAttachment,key:"attachment-editing-panel"},e),(0,A.K)(L,{key:"attachments"},this._renderAttachments()),n.shouldAllowAttachmentEditing?(0,A.K)(R,{buttons:[{label:l.update,disabled:i.submitting||!i.selectedFile,onClick:this._onAttachmentUpdate,type:"button"},(0,o.A)((0,o.A)({},this._deleteButtonCommonInfo),{},{onClick:this._onAttachmentDelete,disabled:i.submitting,label:l.delete,type:"button"})]}):void 0):null}_renderReady(e){const{EditorPanel:t,messages:i,viewModel:n,visibleElements:s}=this,l=this._helpMessage;return(0,A.K)(t,(0,o.A)({heading:i.widgetLabel,key:"landing-panel"},e),(0,A.K)(L,{key:"landing-content"},n.editorItems.length?[s.editFeaturesSection?(0,A.K)(S,{key:"edit-actions"},this._renderUpdateActions()):null,s.createFeaturesSection&&n.canCreateVisible?(0,A.K)(S,{key:"create-actions"},this._renderCreateActions()):null]:(0,A.K)(Z,{key:"no-content"},i.noEditableLayers)),l?(0,A.K)("div",{class:_.helpMessage,key:"footer-actions",slot:"footer"},l):void 0)}get _helpMessage(){var e;const{activeWorkflow:t,messages:i,view:o}=this,n=null===t||void 0===t?void 0:t.helpMessage;return n?null===(e=i["3d"===(null===o||void 0===o?void 0:o.type)?"helpMessages3d":"helpMessages2d"])||void 0===e?void 0:e[n]:void 0}_renderUpdateActions(){var e;const{messages:t,messagesCommon:i,viewModel:o}=this,n={id:"select",label:i.select};return(0,A.K)("div",{class:_.updateActions,key:"update-actions"},(0,A.K)(ue.D,{level:(0,ue.S)(this.headingLevel)},t.editFeatures),(0,A.K)("calcite-list",{class:_.updateActionsList,label:t.editFeaturesList,selectionAppearance:"border",selectionMode:"single"},(0,x.Gx)({disabled:!o.canUpdateVisible,grouped:!1,item:n,selectedItem:"awaiting-feature-to-update"===(null===(e=o.activeWorkflow)||void 0===e?void 0:e.stepId)?n:void 0,renderIcon:this._renderSelectIcon,onItemSelect:this._onToggleUpdateWorkflow})))}_renderCreateActions(){return(0,A.K)("div",{key:"create-actions"},(0,A.K)(ue.D,{level:(0,ue.S)(this.headingLevel)},this.messages.createFeatures),(0,A.K)("div",{class:_.featureTemplatesContainer,key:"templates"},this._renderFeatureTemplates()))}_renderFeatureList(e){const{EditorPanel:t,viewModel:i}=this,{activeWorkflow:n}=i;if("update"!==(null===n||void 0===n?void 0:n.type))return null;const s=n.data.candidates,l=(0,ce.V)(this.messages.multipleFeaturesTemplate,{total:s.length});return(0,A.K)(t,(0,o.A)({heading:l,key:"feature-list"},e),(0,A.K)(W,{editorItems:i.editorItems,editorMessages:this.messages,filterText:this._filterText,id:this.id,messagesTemplates:this.messagesTemplates,workflow:n,onFilterTextChange:e=>this._filterText=e,onSelectFeature:(e,t)=>i.selectFeature(e,t),onZoomTo:e=>i.zoomTo(e)}))}_showPromptAndWait(e){let{title:t,message:i,yesLabel:o,noLabel:n}=e;const s=(0,l.createResolver)(),{view:r}=this,a=null===r||void 0===r?void 0:r.focused;return this._showPrompt({title:t,message:i,context:"danger",actions:{primary:{label:o,action:()=>s.resolve(!0)},secondary:{label:n,action:()=>s.resolve(!1)}}}),s.promise.finally((()=>{this._clearPrompt(),a&&(null===r||void 0===r||r.focus())}))}async _setupSketch(){if(!this.visibleElements.sketch)return this._sketchImportAbortController=(0,s.DC)(this._sketchImportAbortController),this._sketchToolbar=(0,s.pR)(this._sketchToolbar),void this.removeHandles(dt);if(this._sketchImportAbortController)return;const e=new AbortController;this._sketchImportAbortController=e;const t=await Promise.all([i.e(93613),i.e(13490),i.e(12051)]).then(i.bind(i,34432));if(!e.signal.aborted)try{this._sketchToolbar=new t.default({toolbarKind:"docked",contextualToolLocation:"inline-end",scale:"s",visibleElements:new st.AP({deleteButton:!1,settingsMenu:!1,directionModePicker:!1,selectionCountLabel:!1,duplicateButton:!1,createTools:new st.bO({freehandPolygon:!0,freehandPolyline:!0})})}),this.addHandles([(0,r.watch)((()=>{var e;return null===(e=this.viewModel.activeLeafWorkflow)||void 0===e?void 0:e.availableCreateTools}),(e=>{this._sketchToolbar&&(this._sketchToolbar.availableCreateTools=e)}),r.initial),(0,r.watch)((()=>this.visibleElements.undoRedoButtons),(e=>{this._sketchToolbar&&(this._sketchToolbar.visibleElements.undoRedoMenu=e)}),r.initial),(0,r.when)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.sketchViewModel}),(e=>{this._sketchToolbar&&(this._sketchToolbar.viewModel=e)}),r.initial)],dt)}finally{this._sketchImportAbortController=null}}get test(){return{sketch:this._sketchToolbar,showPrompt:this._showPromptAndWait.bind(this)}}};(0,n._)([(0,a.MZ)()],ct.prototype,"_featureForm",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_sketchToolbar",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_attachments",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_associationItemList",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_associationSettings",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_featureTemplates",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_filterText",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_prompt",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_spinner",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_deleteButtonCommonInfo",null),(0,n._)([(0,a.MZ)()],ct.prototype,"_loading",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],ct.prototype,"activeWorkflow",null),(0,n._)([(0,a.MZ)()],ct.prototype,"headingLevel",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"hideTemplatesForInactiveLayers",null),(0,n._)([(0,a.MZ)()],ct.prototype,"icon",null),(0,n._)([(0,a.MZ)()],ct.prototype,"label",null),(0,n._)([(0,a.MZ)()],ct.prototype,"labelOptions",null),(0,n._)([(0,a.MZ)()],ct.prototype,"layerInfos",null),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/Editor/t9n/Editor")],ct.prototype,"messages",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/t9n/common")],ct.prototype,"messagesCommon",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],ct.prototype,"messagesTemplates",void 0),(0,n._)([(0,a.MZ)(),(0,he.G)("esri/widgets/Feature/t9n/Feature")],ct.prototype,"messagesFeature",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"snappingOptions",null),(0,n._)([(0,a.MZ)()],ct.prototype,"tooltipOptions",null),(0,n._)([(0,a.MZ)()],ct.prototype,"supportingWidgetDefaults",void 0),(0,n._)([(0,a.MZ)({type:c.default,nonNullable:!0})],ct.prototype,"valueOptions",null),(0,n._)([(0,a.MZ)()],ct.prototype,"view",null),(0,n._)([(0,a.MZ)(),(0,at.U)(["sketch-create","sketch-delete","sketch-update","workflow-cancel","workflow-commit"])],ct.prototype,"viewModel",void 0),(0,n._)([(0,a.MZ)({type:k,nonNullable:!0})],ct.prototype,"visibleElements",void 0),(0,n._)([(0,a.MZ)()],ct.prototype,"_helpMessage",null),ct=(0,n._)([(0,d.$)("esri.widgets.Editor")],ct);const ut=ct},89025:(e,t,i)=>{i.d(t,{z:()=>a});var o=i(39356),n=i(76931),s=i(5600),l=i(85632),r=i(8503);async function a(e,t,i){var o,a,c,u;if(!(0,l.DU)(e)&&(0,s.Rj)(e)&&e.thumbnail){const i="data:image/png;base64,".concat(e.thumbnail.imageData),o=document.createElement("div");return o.classList.add("esri-thumbnail-preview"),"geometryType"in t&&t.geometryType&&o.classList.add("esri-thumbnail-preview--".concat(t.geometryType)),o.style.backgroundImage="url(".concat(i,")"),o}const p=await d(t,e);if(null==p)return null;const h={maxSize:(0,n.PN)(null!==(o=null===i||void 0===i?void 0:i.maxSize)&&void 0!==o?o:32)};if(((0,l.DU)(e)||(0,s.gZ)(e))&&"renderer"in t&&"dictionary"===(null===(a=t.renderer)||void 0===a?void 0:a.type)&&(h.fieldMap=null!==(c=t.renderer.fieldMap)&&void 0!==c?c:void 0,h.feature=(0,l.DU)(e)?e:{attributes:null!==(u=e.prototype.attributes)&&void 0!==u?u:{}}),(0,l.DU)(e)&&e.geometry&&!1!==(null===i||void 0===i?void 0:i.useGeometry)&&!e.geometry.type.includes("point")){var m;h.geometry=e.geometry,h.useMarkerSymbolSize=!1;const t=(0,n.PN)(null!==(m=null===i||void 0===i?void 0:i.maxSize)&&void 0!==m?m:22);h.size={width:t,height:t}}return await(0,r.renderPreviewHTML)(p,h)}async function d(e,t){if(!(0,l.DU)(t)&&(0,s.Rj)(t))return c(e);if("renderer"in e&&e.renderer){const{renderer:i}=e,n=(0,l.DU)(t)?t:new o.default({attributes:t.prototype.attributes});if("getSymbolAsync"in i){const e=await i.getSymbolAsync(n);if(e)return e}}return c(e)}async function c(e){if(!("geometryType"in e))return null;const{geometryType:t}=e,o="point"===t||"multipoint"===t?await Promise.resolve().then(i.bind(i,76940)):"polyline"===t?await Promise.resolve().then(i.bind(i,38996)):"polygon"===t||"mesh"===t||"multipatch"===t?await Promise.resolve().then(i.bind(i,86875)):null;return o?new o.default:null}},97875:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(35143),n=i(91967),s=i(46053),l=(i(81806),i(76460),i(47249),i(85842));let r=class extends n.default{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"directionModePicker",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"header",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"labelsToggle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"tooltipsToggle",void 0),r=(0,o._)([(0,l.$)("esri.widgets.support.SketchTooltipControls.VisibleElements")],r);const a=r}}]);
//# sourceMappingURL=74911.1f377da7.chunk.js.map