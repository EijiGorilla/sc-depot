"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[27878],{28320:(t,e,n)=>{n.r(e),n.d(e,{default:()=>w});var i,o=n(89379),a=n(35143),r=n(3825),s=n(50076),l=n(16770),c=n(90534),p=n(49723),u=n(46053),m=(n(81806),n(76460),n(47249),n(28379)),g=n(85842),h=n(17707),d=n(83622),f=n(62705),v=n(73093),y=n(6446),b=n(79453);let I=class extends d.A{constructor(t){super(t),this.animationOptions=null,this.content=null,this.image=null,this.type="image",this[i]=!0,this.image=null}load(){const t=this.image;if("string"==typeof t){const e=(0,l.M5)(t).then((t=>{this._set("content",t)}));this.addResolvingPromise(e)}else if(t instanceof HTMLImageElement){const e=t.decode().then((()=>{this._set("content",t)}));this.addResolvingPromise(e)}else t?this._set("content",t):this.addResolvingPromise(Promise.reject(new s.default("image-element:invalid-image-type","Invalid image type",{image:t})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(t,e,n){return(0,b.f)(e.url,n)}writeImage(t,e,n,i){if(null==t)return;const a=null===i||void 0===i?void 0:i.portalItem,s=null===i||void 0===i?void 0:i.resources;if(!a||!s)return void("string"==typeof t&&(e[n]=(0,b.t)(t,i)));const l=function(t){return"string"==typeof t&&!(0,c.isDataProtocol)(t)&&!(0,c.isBlobProtocol)(t)}(t)?t:null;if(l){if(null==(0,b.i)(l))return void(e[n]=l);const t=(0,b.t)(l,(0,o.A)((0,o.A)({},i),{},{verifyItemRelativeUrls:null!==i&&void 0!==i&&i.verifyItemRelativeUrls?{writtenUrls:i.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0}),b.M.NO);if(a&&t&&!(0,c.isAbsolute)(t))return s.toKeep.push({resource:a.resourceFromPath(t),compress:!1}),void(e[n]=t)}e[n]="<pending>",s.pendingOperations.push(async function(t){if("string"==typeof t)return(0,c.isDataProtocol)(t)?(0,c.dataToBlob)(t):(await(0,r.default)(t,{responseType:"blob"})).data;return new Promise((e=>function(t){if(t instanceof HTMLCanvasElement)return t;const e=t instanceof HTMLImageElement?t.naturalWidth:t.width,n=t instanceof HTMLImageElement?t.naturalHeight:t.height,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e,i.height=n,t instanceof HTMLImageElement?o.drawImage(t,0,0,t.width,t.height):t instanceof ImageData&&o.putImageData(t,0,0),i}(t).toBlob(e)))}(t).then((t=>{const i=function(t,e){const n=(0,p.lk)(),i="".concat((0,c.join)("media",n),".").concat((0,v.n)({type:"blob",blob:t}));return e.resourceFromPath(i)}(t,a);e[n]=i.itemRelativeUrl,s.toAdd.push({resource:i,content:{type:"blob",blob:t},compress:!1,finish:t=>{this.image=t.url}})})))}};i=y.Of,(0,a._)([(0,u.MZ)()],I.prototype,"animationOptions",void 0),(0,a._)([(0,u.MZ)({readOnly:!0})],I.prototype,"content",void 0),(0,a._)([(0,u.MZ)({readOnly:!0})],I.prototype,"contentWidth",null),(0,a._)([(0,u.MZ)({readOnly:!0})],I.prototype,"contentHeight",null),(0,a._)([(0,u.MZ)(f.x3)],I.prototype,"image",void 0),(0,a._)([(0,m.w)("image",["url"])],I.prototype,"readImage",null),(0,a._)([(0,h.K)("image")],I.prototype,"writeImage",null),(0,a._)([(0,u.MZ)(f.m$)],I.prototype,"type",void 0),I=(0,a._)([(0,g.$)("esri.layers.support.ImageElement")],I);const w=I},33723:(t,e,n)=>{n.d(e,{O:()=>m,W:()=>u});var i=n(63919),o=n(44680),a=n(19555),r=n(20664);const s=(0,n(9392).vt)(),l=(0,o.vt)(),c=(0,o.vt)(),p=(0,o.vt)();function u(t,e,n){return(0,r.i)(s,e[0],e[1],1),(0,r.q)(s,s,(0,i.mg)(l,n)),0===s[2]?(0,a.hZ)(t,s[0],s[1]):(0,a.hZ)(t,s[0]/s[2],s[1]/s[2])}function m(t,e,n){return g(c,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),g(p,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,i.lw)(t,(0,i.KC)(c,c),p),0!==t[8]&&(t[0]/=t[8],t[1]/=t[8],t[2]/=t[8],t[3]/=t[8],t[4]/=t[8],t[5]/=t[8],t[6]/=t[8],t[7]/=t[8],t[8]/=t[8]),t}function g(t,e,n,o,a,c,p,u,m){(0,i.hZ)(t,e,o,c,n,a,p,1,1,1),(0,r.i)(s,u,m,1),(0,i.KC)(l,t);const[g,h,d]=(0,r.q)(s,s,(0,i.mg)(l,l));return(0,i.hZ)(l,g,0,0,0,h,0,0,0,d),(0,i.lw)(t,l,t)}},73093:(t,e,n)=>{n.d(e,{n:()=>o});var i=n(90534);function o(t){return a[function(t){return"json"===t.type?"application/json":"blob"===t.type?t.blob.type:function(t){const e=(0,i.getPathExtension)(t);return l[e]||r}(t.url)}(t)]||s}const a={},r="text/plain",s=a[r],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in l)a[l[c]]=c}}]);
//# sourceMappingURL=27878.c7180de1.chunk.js.map