"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[44467,67921],{41935:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var l=i(35143),s=(i(76460),i(81806),i(47249),i(50076),i(85842)),n=i(71973);let a=class extends n.default{constructor(e){super(e)}getStopInfo(){const{min:e,max:t,stops:i}=this;return null!==i&&void 0!==i&&i.length?i.map((i=>({color:i.color,offset:(t-i.value)/(t-e)}))):[]}};a=(0,l._)([(0,s.$)("esri.widgets.smartMapping.ColorSizeSlider.ColorSizeSliderViewModel")],a);const o=a},44467:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var l,s=i(35143),n=i(69539),a=i(42553),o=i(76931),r=i(46053),d=i(40565),u=(i(81806),i(47249),i(85842)),h=i(17707);let p=l=class extends a.A{constructor(e){super(e),this.color=null,this.label=null,this.size=null,this.value=null}writeValue(e,t,i){t[i]=null!==e&&void 0!==e?e:0}clone(){return new l({color:this.color,label:this.label,size:this.size,value:this.value})}};(0,s._)([(0,r.MZ)({type:n.default,json:{type:[d.jz],write:!0}})],p.prototype,"color",void 0),(0,s._)([(0,r.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,s._)([(0,r.MZ)({type:Number,cast:o.cr,json:{write:!0}})],p.prototype,"size",void 0),(0,s._)([(0,r.MZ)({type:Number,json:{write:{allowNull:!0}}})],p.prototype,"value",void 0),(0,s._)([(0,h.K)("value")],p.prototype,"writeValue",null),p=l=(0,s._)([(0,u.$)("esri.renderers.visualVariables.support.ColorSizeStop")],p);const m=p},51576:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var l=i(35143),s=i(46053),n=(i(81806),i(76460),i(47249),i(85842)),a=i(77200);let o=class extends a.default{constructor(e){super(e),this.handlesSyncedToPrimary=!0}set primaryHandleEnabled(e){this._set("primaryHandleEnabled",e)}get primaryHandleEnabled(){const{stops:e}=this;if(null===e||void 0===e||!e.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")}get values(){const{primaryHandleEnabled:e,stops:t}=this;if(null===t||void 0===t||!t.length||t.length<2)return[];const i=this.getValuesFromStops();return e?3===i.length?[i[0],i[1],i[2]]:[i[0],i[2],i[4]]:[i[0],i[i.length-1]]}setValue(e,t){const{max:i,min:l,values:s}=this,n=s[e];if(isNaN(t)||n===t||t>i||t<l)return;t=this.toPrecision(t);const a=this.primaryHandleEnabled&&this.handlesSyncedToPrimary;if(a){const i=s.slice().sort(((e,t)=>e>t?1:-1))[1];(0===e&&t>i||2===e&&t<i)&&(t=i)}const o=this.getStopChanges(e,t);this.updateStops(o),a?this.notifyChange("values"):(s[e]=t,this._set("values",[...s])),this.notifyChange("labels")}getStopIndexFromValueIndex(e){const{handlesSyncedToPrimary:t,primaryHandleEnabled:i}=this;if(i){const{values:i}=this,l=i[e];if(t)return e;const s=i.slice().sort(((e,t)=>e>t?1:-1)),n=s.indexOf(l);return i.some(((e,t)=>e===l&&t!==n))?s.lastIndexOf(l):n}return super.getStopIndexFromValueIndex(e)}getStopChanges(e,t){return this.primaryHandleEnabled?this._getStopChanges(e,t):super.getStopChanges(e,t)}_getStopChanges(e,t){const{max:i,min:l,stops:s,values:n}=this,a=this.handlesSyncedToPrimary&&1===e,o=n[e],r=n.slice();a||(r[e]=t);const d=r.sort(((e,t)=>e>t?1:-1)),u=a?t:d[1],h=t-o,p=a?this.toPrecision(Math.max(Math.min(d[0]+h,i),l)):d[0],m=a?this.toPrecision(Math.max(Math.min(d[2]+h,i),l)):d[2];return 5===s.length?[{index:0,value:p},{index:1,value:this.toPrecision((u+p)/2)},{index:2,value:u},{index:3,value:this.toPrecision((u+m)/2)},{index:4,value:m}]:[{index:0,value:p},{index:1,value:u},{index:2,value:m}]}};(0,l._)([(0,s.MZ)()],o.prototype,"handlesSyncedToPrimary",void 0),(0,l._)([(0,s.MZ)()],o.prototype,"primaryHandleEnabled",null),(0,l._)([(0,s.MZ)({dependsOn:["handlesSyncedToPrimary"],readOnly:!0})],o.prototype,"values",null),o=(0,l._)([(0,n.$)("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],o);const r=o},67921:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var l,s=i(35143),n=i(50076),a=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),r=i(69205),d=i(44467),u=i(77718),h=i(63040),p=i(51313),m=i(41935),v=i(7095),c=i(98108),g=i(76099),b=i(63582),f=i(54761);const x="esri-color-size-slider",y={base:x,rampElement:"".concat(x,"__ramp"),sliderContainer:"".concat(x,"__slider-container"),histogramContainer:"".concat(x,"__histogram-container"),primaryHandle:"".concat(x,"--primary-handle"),track:"".concat(x,"--interactive-track")};let _=l=class extends p.default{constructor(e,t){super(e,t),this._backgroundFillColor="#e0e0e0",this._minRampFillWidth=.2,this._rampNode=null,this._maxRampFillWidth=1,this.messages=null,this.viewModel=new m.default,this._bgFillId="".concat(this.id,"-bg-fill"),this._rampFillId="".concat(this.id,"-linear-gradient")}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get persistSizeRangeEnabled(){return this.viewModel.persistSizeRangeEnabled}set persistSizeRangeEnabled(e){this.viewModel.persistSizeRangeEnabled=e}get primaryHandleEnabled(){return this.viewModel.primaryHandleEnabled}set primaryHandleEnabled(e){this.viewModel.primaryHandleEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}static fromRendererResult(e,t){var i,s;const a=e.size.visualVariables,o=null===(i=e.renderer.authoringInfo)||void 0===i?void 0:i.univariateTheme,u=null===(s=e.color)||void 0===s?void 0:s.visualVariable.stops,{statistics:h}=e,{avg:p,stddev:m}=h;if(!u)throw new n.default("ColorSizeSlider-fromRendererResult:invalid-renderer-result","'result' must include 'color' variable.");const v="above-and-below"===o,[c,g]=(0,r.N)(e.renderer.authoringInfo),b=a.find((e=>"outline"!==(null===e||void 0===e?void 0:e.target)&&!(null!==e&&void 0!==e&&e.axis&&(null===e||void 0===e||!e.field)&&(null===e||void 0===e||!e.valueExpression))&&((null===e||void 0===e?void 0:e.field)||(null===e||void 0===e?void 0:e.valueExpression)))),f=b.stops,x=u.map(((e,t)=>{const{color:i,label:l,value:s}=e;let n;return n=f&&f.length>0?f[t].size:0===t?b.minSize:t===u.length-1?b.maxSize:null,new d.default({color:i,label:l,value:s,size:n})}));return new l({max:g,min:c,stops:x,primaryHandleEnabled:v,handlesSyncedToPrimary:v,persistSizeRangeEnabled:v,histogramConfig:{average:null!==p&&void 0!==p?p:void 0,standardDeviation:null!==m&&void 0!==m?m:void 0,bins:t?t.bins:[]}})}updateFromRendererResult(e,t){var i,l;const s=e.size.visualVariables,a=null===(i=e.renderer.authoringInfo)||void 0===i?void 0:i.univariateTheme,o=null===(l=e.color)||void 0===l?void 0:l.visualVariable.stops,{statistics:u}=e,{avg:h,stddev:p}=u;if(!o)throw new n.default("ColorSizeSlider-fromRendererResult:invalid-renderer-result","'result' must include 'color' variable.");const m="above-and-below"===a,[v,c]=(0,r.N)(e.renderer.authoringInfo),g=s.find((e=>"outline"!==(null===e||void 0===e?void 0:e.target)&&!(null!==e&&void 0!==e&&e.axis&&(null===e||void 0===e||!e.field)&&(null===e||void 0===e||!e.valueExpression))&&((null===e||void 0===e?void 0:e.field)||(null===e||void 0===e?void 0:e.valueExpression)))),b=g.stops,f=o.map(((e,t)=>{const{color:i,label:l,value:s}=e;let n;return n=b&&b.length>0?b[t].size:0===t?g.minSize:t===o.length-1?g.maxSize:null,new d.default({color:i,label:l,value:s,size:n})}));this.set({max:c,min:v,stops:f,primaryHandleEnabled:m,handlesSyncedToPrimary:m,persistSizeRangeEnabled:m,histogramConfig:{average:h,standardDeviation:p,bins:t?t.bins:[]}})}updateRenderer(e){var t,i;const{stops:l}=this,s=l[0],n=l[l.length-1],a=l[Math.floor(l.length/2)],o=e.clone(),r=null!==(t=null===(i=o.visualVariables)||void 0===i?void 0:i.map((e=>{if("size"===e.type){if("outline"===(null===e||void 0===e?void 0:e.target)||null!==e&&void 0!==e&&e.axis&&(null===e||void 0===e||!e.field)&&(null===e||void 0===e||!e.valueExpression))return e;null!=e.minSize&&null!=e.maxSize?e.set({maxDataValue:n.value,minDataValue:s.value,maxSize:n.size,minSize:s.size}):e.stops&&e.set({stops:l.map((e=>{const{label:t,size:i,value:l}=e;return new h.default({label:t,size:i,value:l})}))})}else"color"===e.type&&e.set({stops:this.stops.map((e=>{const{color:t,label:i,value:l}=e;return new u.default({color:t,label:i,value:l})}))});return e})))&&void 0!==t?t:null;if(o.visualVariables=r,o.classBreakInfos.length>1){const e=a.value;o.classBreakInfos[0].maxValue=e,o.classBreakInfos[1].minValue=e}return o}updateVisualVariables(e){return e.map((e=>{const t=e.clone();if("size"===e.type){if("outline"===(null===e||void 0===e?void 0:e.target)||null!==e&&void 0!==e&&e.axis&&(null===e||void 0===e||!e.field)&&(null===e||void 0===e||!e.valueExpression))return t;if(null!=e.minSize&&null!=e.maxSize){const{stops:e}=this,i=e[0],l=e[e.length-1];t.set({maxDataValue:l.value,minDataValue:i.value,maxSize:l.size,minSize:i.size})}else e.stops&&t.set({stops:this.stops.map((e=>{const{label:t,size:i,value:l}=e;return new h.default({label:t,size:i,value:l})}))})}else"color"===e.type&&t.set({stops:this.stops.map((e=>{const{color:t,label:i,value:l}=e;return new u.default({color:t,label:i,value:l})}))});return t}))}render(){const{label:e,primaryHandleEnabled:t,state:i,visibleElements:l}=this,s="disabled"===i,n=this.classes(y.base,c.D.widget,c.D.panel,{[c.D.disabled]:s,[y.primaryHandle]:t,[y.track]:!!l.interactiveTrack});return(0,f.K)("div",{"aria-label":e,class:n},s?null:this.renderContent(this._renderRamp(),y.sliderContainer,y.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:t,viewModel:i,zoomOptions:l}=this,s=i.getStopInfo();return(0,f.K)("div",{afterCreate:g.cA,bind:this,class:y.rampElement,"data-node-ref":"_rampNode"},(0,f.K)("svg",{xmlns:"http://www.w3.org/2000/svg"},(0,f.K)("defs",null,this.renderRampFillDefinition(t,s),this.renderBackgroundFillDefinition(e)),(0,f.K)("rect",{fill:this._backgroundFillColor,height:"100%",width:"100%",x:"0",y:"0"}),this._renderPaths()),l?this.renderZoomCaps():null)}_renderPaths(){if(!this._rampNode)return;const{offsetHeight:e=0,offsetWidth:t=0}=this._rampNode;if(null==e||null==t)return;const{primaryHandleEnabled:i,stops:l,values:s,viewModel:{max:n,min:a},_bgFillId:o,_maxRampFillWidth:r,_minRampFillWidth:d,_rampFillId:u}=this,h=[r,d];l[0].size<l[l.length-1].size&&h.reverse();const p=s.slice().sort(((e,t)=>e>t?1:-1)),[m,c]=h,[g,b]=p,x=i?(0,v.getDynamicPathForSizeStops)({max:n,min:a,pathHeight:e,pathWidth:t,stops:l,padding:d}):(0,v.getPathForSizeStops)({bottomValue:g,bottomWidth:m,max:n,min:a,pathHeight:e,pathWidth:t,topValue:b,topWidth:c});return[(0,f.K)("path",{d:x,fill:"url(#".concat(o,")"),key:"background"}),(0,f.K)("path",{d:x,fill:"url(#".concat(u,")"),key:"fill"})]}};(0,s._)([(0,a.MZ)()],_.prototype,"label",null),(0,s._)([(0,a.MZ)(),(0,b.G)("esri/widgets/smartMapping/ColorSizeSlider/t9n/ColorSizeSlider")],_.prototype,"messages",void 0),(0,s._)([(0,a.MZ)()],_.prototype,"persistSizeRangeEnabled",null),(0,s._)([(0,a.MZ)()],_.prototype,"primaryHandleEnabled",null),(0,s._)([(0,a.MZ)()],_.prototype,"stops",null),(0,s._)([(0,a.MZ)({type:m.default})],_.prototype,"viewModel",void 0),_=l=(0,s._)([(0,o.$)("esri.widgets.smartMapping.ColorSizeSlider")],_);const S=_},69205:(e,t,i)=>{function l(e){return s(null===e||void 0===e?void 0:e.visualVariables[0])}function s(e){var t,i;return[null!==(t=null===e||void 0===e?void 0:e.minSliderValue)&&void 0!==t?t:0,null!==(i=null===e||void 0===e?void 0:e.maxSliderValue)&&void 0!==i?i:0]}i.d(t,{N:()=>l,n:()=>s})},71973:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var l=i(35143),s=i(46053),n=(i(81806),i(76460),i(47249),i(85842)),a=i(51576);let o=class extends a.default{constructor(e){super(e),this.persistSizeRangeEnabled=!1}updateStops(e){const{primaryHandleEnabled:t,persistSizeRangeEnabled:i,stops:l}=this,s=this.getValuesFromStops();if(null!==s&&void 0!==s&&s.length&&(e.sort(((e,t)=>e.value>t.value?1:-1)).forEach((e=>{s[e.index]=e.value})),l.forEach(((e,t)=>e.value=s[t])),t&&i)){const{stops:e}=this,t=this.getValuesFromStops(),i=e.map((e=>e.size)),l=Math.max(...i),s=Math.min(...i),n=Math.max(...t),a=Math.min(...t),o=e[5===e.length?2:1].value,r=Math.abs(n-o),d=Math.abs(a-o),u=r>d?r:d,h=l-s;if(0===u)return;e.forEach((e=>{e.size=Math.abs(e.value-o)/u*h+s}))}}};(0,l._)([(0,s.MZ)()],o.prototype,"persistSizeRangeEnabled",void 0),o=(0,l._)([(0,n.$)("esri.widgets.smartMapping.SizeSlider.SizeSliderViewModel")],o);const r=o},77200:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var l=i(89379),s=i(35143),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),o=i(6515),r=i(7095);let d=class extends o.default{constructor(e){super(e),this._initialStopValues=[],this._max=null,this._min=null,this.hasTimeData=!1,this.inputFormatFunction=(e,t)=>"max"===t?this.getUnzoomedMax().toString():"min"===t?this.getUnzoomedMin().toString():e.toString(),this.inputParseFunction=null,this.labelFormatFunction=e=>{if(this.hasTimeData)return(0,r.formatDateLabel)(e);const{max:t,min:i,precision:l}=this,s=t-i>10?2:l;return(0,r.formatNumberLabel)(parseFloat(e.toFixed(s)))},this.thumbsConstrained=!1,this.zoomingEnabled=!0}set breaks(e){this._set("breaks",e),this.notifyChange("max"),this.notifyChange("min")}set stops(e){if(null!==e&&void 0!==e&&e.length){const{max:t,min:i}=this,s=this.getValuesFromStops(e),n={};null!=i&&s.some((e=>e<i))&&(n.min=Math.min(...s)),null!=t&&s.some((e=>e>t))&&(n.max=Math.max(...s)),this.set((0,l.A)({},n)),this._initialStopValues=s}else this._initialStopValues=null;this._set("stops",e||null),this.notifyChange("values")}get labels(){const{values:e}=this,t=e&&e.length?e.map(((e,t)=>this.getLabelForValue(e,"value",t))):[],i=this.getUnzoomedMax(),l=this.getUnzoomedMin();return{max:this.getLabelForValue(i,"max"),min:this.getLabelForValue(l,"min"),values:t}}get max(){const{breaks:e}=this;return null!==e&&void 0!==e&&e.length?e[e.length-1].max:this.max}set max(e){const{zoomOptions:t}=this;if(null!=(null===t||void 0===t?void 0:t.max)){const i=this.values;let l=t.max;if(e<l&&(l=e,t.max=e),i&&i.length)for(let t=0;t<i.length;t++)e<i[t]&&this.setValue(t,e);this._storeZoomMax(l,e)}else this.updateBreakMax(e),this.setMax(e);this.notifyChange("labels")}get min(){const{breaks:e}=this;return null!==e&&void 0!==e&&e.length?e[0].min:this.min}set min(e){const{zoomOptions:t}=this;if(null!=(null===t||void 0===t?void 0:t.min)){const i=this.values;let l=t.min;if(e>l&&(l=e,t.min=e),i&&i.length)for(let t=0;t<i.length;t++)e>i[t]&&this.setValue(t,e);this._storeZoomMin(l,e)}else this.updateBreakMin(e),this.setMin(e);this.notifyChange("labels")}get state(){const{max:e,min:t,values:i}=this;return null!=e&&null!=t&&i.length>0?"ready":"disabled"}get values(){const{breaks:e,stops:t}=this;if(!e&&!t)return[];if(null!==e&&void 0!==e&&e.length){const t=e.map((e=>e.max));return t.pop(),t}if((null===t||void 0===t?void 0:t.length)<2)return[];const i=this.getValuesFromStops();return[i[0],i[i.length-1]]}set zoomOptions(e){const{zoomingEnabled:t,zoomOptions:i}=this;if(t){if(i){const t=null!=this._max?this._max:this.max,i=null!=this._min?this._min:this.min;if(e){const{max:l,min:s}=e,n=null!=l,a=null!=s,o=a?e.min:i,r=a?i:null,d=n?e.max:t,u=n?t:null;this._storeZoomMin(o,r),this._storeZoomMax(d,u)}else this.setMax(t),this.setMin(i),this._min=null,this._max=null}else if(e){const{max:t,min:i}=e;null!=i&&this._storeZoomMin(e.min,this.min),null!=t&&this._storeZoomMax(e.max,this.max)}this._set("zoomOptions",e),this.notifyChange("max"),this.notifyChange("min")}}getStopIndexFromValueIndex(e){const{stops:t}=this,i=this.values[e];return 0===e?i<=this.values[1]?0:t.length-1:1===e?this.values[0]>=i?0:t.length-1:null}getStopChanges(e,t){const i=this.stops,l=this.getStopIndexFromValueIndex(e),s=this.getValuesFromStops();s[l]=t;const[n,a]=[s[0],s[s.length-1]].sort(((e,t)=>e>t?1:-1)),o=a-n,r=i.length-1;return s.map(((e,t)=>({index:t,value:this.toPrecision(n+t*o/r)})))}setValue(e,t){var i;const{max:l,min:s,values:n}=this,a=n[e];if(isNaN(t)||a===t||t>l||t<s)return;n[e]=this.toPrecision(t),this._set("values",[...n]);const o=n.slice().sort(((e,t)=>e>t?1:-1)),d=o[0],u=o[o.length-1],h=(0,r.getStopChanges)(d,u,null!==(i=this._initialStopValues)&&void 0!==i?i:[]);this.updateStops(h),this.updateBreaks(),this.notifyChange("labels")}getValuesFromStops(e){const t=e||this.stops;return null===t||void 0===t?void 0:t.map((e=>e.hasOwnProperty("ratio")?e.ratio:e.value))}updateBreaks(){const{breaks:e,values:t}=this;(null===e||void 0===e?void 0:e.length)&&t.slice().sort(((e,t)=>e>t?1:-1)).forEach(((t,i)=>{e[i].max=t,null!=e[i+1]&&(e[i+1].min=t)}))}updateBreakMax(e){const{breaks:t,max:i,min:l}=this;!isNaN(e)&&i!==e&&null!=l&&e>l&&(null===t||void 0===t?void 0:t.length)&&(t[t.length-1].max=e)}updateBreakMin(e){const{breaks:t,max:i,min:l}=this;!isNaN(e)&&l!==e&&null!=i&&e<i&&(null===t||void 0===t?void 0:t.length)&&(t[0].min=e)}updateStops(e){const{stops:t}=this,i=this.getValuesFromStops();if(null!==i&&void 0!==i&&i.length){for(const t of e)i[t.index]=t.value;t.forEach(((e,t)=>{e.hasOwnProperty("ratio")?e.ratio=i[t]:e.value=i[t]}))}}getUnzoomedMax(){return this.zoomOptions&&null!=this._max?this._max:this.max}getUnzoomedMin(){return this.zoomOptions&&null!=this._min?this._min:this.min}_storeZoomMax(e,t){this._max=t,this.setMax(e)}_storeZoomMin(e,t){this._min=t,this.setMin(e)}};(0,s._)([(0,n.MZ)()],d.prototype,"breaks",null),(0,s._)([(0,n.MZ)()],d.prototype,"stops",null),(0,s._)([(0,n.MZ)()],d.prototype,"hasTimeData",void 0),(0,s._)([(0,n.MZ)()],d.prototype,"inputFormatFunction",void 0),(0,s._)([(0,n.MZ)()],d.prototype,"inputParseFunction",void 0),(0,s._)([(0,n.MZ)()],d.prototype,"labelFormatFunction",void 0),(0,s._)([(0,n.MZ)({readOnly:!0})],d.prototype,"labels",null),(0,s._)([(0,n.MZ)()],d.prototype,"max",null),(0,s._)([(0,n.MZ)()],d.prototype,"min",null),(0,s._)([(0,n.MZ)({readOnly:!0})],d.prototype,"state",null),(0,s._)([(0,n.MZ)()],d.prototype,"thumbsConstrained",void 0),(0,s._)([(0,n.MZ)({readOnly:!0})],d.prototype,"values",null),(0,s._)([(0,n.MZ)()],d.prototype,"zoomingEnabled",void 0),(0,s._)([(0,n.MZ)()],d.prototype,"zoomOptions",null),d=(0,s._)([(0,a.$)("esri.widgets.smartMapping.SmartMappingSliderViewModel")],d);const u=d}}]);
//# sourceMappingURL=67921.bc81c4f4.chunk.js.map