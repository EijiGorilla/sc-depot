"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[39935],{39935:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var i=t(35143),s=t(91967),n=t(68134),p=t(46053),l=t(21403),r=(t(81806),t(47249),t(85842)),o=t(9624),c=t(80963),d=t(97579),h=t(86300);let m=class extends s.default{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=(0,d.es)("hybrid",this._basemapCache),this.view=null}initialize(){(0,n.watch)((()=>this.nextBasemap),(e=>{e&&!e.loaded&&e.load().catch((()=>{}))}),n.initial)}destroy(){this.view=null,(0,d.jj)(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return(0,h.n8)(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){var e,a;return(0,d.es)(null!==(e=null===(a=this.view)||void 0===a||null===(a=a.map)||void 0===a?void 0:a.basemap)&&void 0!==e?e:"topo-vector",this._basemapCache)}castNextBasemap(e){return(0,d.es)(e,this._basemapCache)}get state(){const{view:e}=this;if(null===e||void 0===e||!e.ready)return"disabled";if(this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:a}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&null!=a&&!e.spatialReference.equals(a)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:a,state:t,view:i}=this;if(!i||"disabled"===t||"incompatible-next-basemap"===t)return;const s=this._viewSpatialReferenceLocked;if(!s){if(await(0,n.whenOnce)((()=>!this._nextBasemapSpatialReferenceTask.updating)),a!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:t}=this._nextBasemapSpatialReferenceTask;if(null==t||(0,c.aI)(i.spatialReference,t)||(0,o.isLoaded)()||(0,o.canProjectWithoutEngine)(i.spatialReference,t)||(this._loadingProjectionEngine=!0,await(0,o.load)(),this._loadingProjectionEngine=!1),a!==this.nextBasemap||e!==this.activeBasemap)return}i.map.basemap=a,s||null==this._nextBasemapSpatialReferenceTask.spatialReference||(0,c.aI)(i.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(i.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return(0,h.hA)(e)}};(0,i._)([(0,p.MZ)()],m.prototype,"_loadingProjectionEngine",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"_nextBasemapSpatialReferenceTask",null),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"_viewSpatialReferenceLocked",null),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"activeBasemap",null),(0,i._)([(0,p.MZ)()],m.prototype,"nextBasemap",void 0),(0,i._)([(0,l.w)("nextBasemap")],m.prototype,"castNextBasemap",null),(0,i._)([(0,p.MZ)({readOnly:!0})],m.prototype,"state",null),(0,i._)([(0,p.MZ)()],m.prototype,"view",void 0),(0,i._)([(0,p.MZ)()],m.prototype,"toggle",null),m=(0,i._)([(0,r.$)("esri.widgets.BasemapToggle.BasemapToggleViewModel")],m);const u=m}}]);
//# sourceMappingURL=39935.e53be71e.chunk.js.map