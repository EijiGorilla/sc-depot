"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[35044,81257],{3689:(e,t,o)=>{o.d(t,{Y:()=>n});o(81806);var i=o(12482),a=o(61492);function n(e){var t,o;if(e.graphic&&"graphics"!==(null===(t=e.graphic.layer)||void 0===t?void 0:t.type))return a.d.GRAPHICS_LAYER_MISSING;const n=null===(o=e.operations)||void 0===o?void 0:o.data.type;if(!n)return a.d.GEOMETRY_TYPE_UNSUPPORTED;switch(n){case"polygon":case"point":case"polyline":case"mesh":break;default:return a.d.GEOMETRY_TYPE_UNSUPPORTED}const r=e.elevationInfo;return(0,i.wz)(r)?a.d.ELEVATION_MODE_UNSUPPORTED:a.d.SUPPORTED}},21270:(e,t,o)=>{function i(e,t){return"freehandPolygon"===t||"freehandPolyline"===t?"freehand":null!==e&&void 0!==e?e:"rectangle"===t||"circle"===t?"hybrid":"click"}function a(e){switch(e){case"freehandPolygon":return"polygon";case"freehandPolyline":return"polyline";default:return e}}function n(e){return!!e&&("draw-2d"===e.type||"draw-3d"===e.type)}var r;o.d(t,{Jl:()=>r,qv:()=>i,tk:()=>a,xJ:()=>n}),function(e){e[e.ForceCollapse=-1]="ForceCollapse",e[e.Low=0]="Low",e[e.Medium=10]="Medium",e[e.High=100]="High",e[e.Max=1e3]="Max"}(r||(r={}))},35044:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var i=o(35143),a=o(91967),n=o(46053),r=(o(81806),o(76460),o(47249),o(85842));let s=class extends a.default{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};(0,i._)([(0,n.MZ)({type:String,nonNullable:!0})],s.prototype,"mode",void 0),s=(0,i._)([(0,r.$)("esri.views.interactive.sketch.SketchTooltipElevationOptions")],s);var l=o(42785);let p=class extends a.default{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new s,this.placement="auto",this.offset=null,this.visibleElements=new l.A,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"enabled",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"forceEnabled",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"effectiveEnabled",null),(0,i._)([(0,n.MZ)()],p.prototype,"helpMessage",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"helpMessageIcon",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"inputEnabled",void 0),(0,i._)([(0,n.MZ)({type:s,nonNullable:!0})],p.prototype,"elevation",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"placement",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"offset",void 0),(0,i._)([(0,n.MZ)({type:l.A,nonNullable:!0})],p.prototype,"visibleElements",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"visualVariables",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"xyMode",void 0),p=(0,i._)([(0,r.$)("esri.views.interactive.sketch.SketchTooltipOptions")],p);const d=p},42785:(e,t,o)=>{o.d(t,{A:()=>l});var i=o(35143),a=o(91967),n=o(46053),r=(o(81806),o(76460),o(47249),o(85842));let s=class extends a.default{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"area",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"coordinates",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"direction",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"distance",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"elevation",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"header",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"helpMessage",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"orientation",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"radius",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"rotation",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"scale",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"size",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"totalLength",void 0),s=(0,i._)([(0,r.$)("esri.views.interactive.sketch.SketchTooltipVisibleElements")],s);const l=s},61492:(e,t,o)=>{o.d(t,{c:()=>a,d:()=>i});var i;o(81806);function a(e){switch(e){case i.SUPPORTED:break;case i.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case i.GEOMETRY_MISSING:return"no geometry";case i.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case i.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case i.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}!function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(i||(i={}))},69120:(e,t,o)=>{function i(e,t,o){if(!t||null===e||void 0===e||!e.map)return;const{map:i}=e,a=i.layers.find((e=>e===t));a||i.add(t,o),a&&null!=o&&i.layers.reorder(a,o)}function a(e,t){const o="subtype-sublayer"===(null===t||void 0===t?void 0:t.type)?t.parent:t;return e.allLayerViews.find((e=>{const t=e.layer;return t===o||"sublayers"in t&&null!=t.sublayers&&t.sublayers.includes(o)}))}o.d(t,{Y:()=>i,i:()=>a})},73265:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var i=o(35143),a=o(91967),n=o(46053),r=(o(81806),o(76460),o(47249),o(85842));let s=class extends a.default{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};(0,i._)([(0,n.MZ)()],s.prototype,"length",void 0),(0,i._)([(0,n.MZ)()],s.prototype,"verticalLength",void 0),(0,i._)([(0,n.MZ)()],s.prototype,"area",void 0),s=(0,i._)([(0,r.$)("esri.views.interactive.sketch.Units")],s);const l=s;var p=o(89646);let d=class extends a.default{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?p.rZ.RelativeBilateral:p.rZ.Relative;case"absolute":return p.rZ.Absolute}}get displayUnits(){var e;return null!==(e=this._get("displayUnits"))&&void 0!==e?e:new l}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){var e;return null!==(e=this._get("inputUnits"))&&void 0!==e?e:new l}set inputUnits(e){this._set("inputUnits",e)}};(0,i._)([(0,n.MZ)({type:String,nonNullable:!0})],d.prototype,"directionMode",void 0),(0,i._)([(0,n.MZ)({type:Boolean,nonNullable:!0})],d.prototype,"relativeDirectionIsBilateral",void 0),(0,i._)([(0,n.MZ)()],d.prototype,"effectiveDirectionMode",null),(0,i._)([(0,n.MZ)({type:l,nonNullable:!0})],d.prototype,"displayUnits",null),(0,i._)([(0,n.MZ)({type:l,nonNullable:!0})],d.prototype,"inputUnits",null),d=(0,i._)([(0,r.$)("esri.views.interactive.sketch.SketchValueOptions")],d);const h=d},81257:(e,t,o)=>{o.r(t),o.d(t,{default:()=>le});var i=o(89379),a=o(35143),n=o(19276),r=o(50076),s=o(54099),l=o(54901),p=(o(81806),o(76460)),d=o(30726),h=o(50346),c=o(68134),u=o(46053),v=(o(47249),o(85842)),y=o(19451),g=o(34111),m=o(9624),_=o(5262),f=o(80963),b=o(63733),E=o(31933),w=o(84847),M=o(94918),O=o(86875),G=o(38996),T=o(76940),A=o(671),S=o(61492),P=o(3689),R=o(12482);function C(e){return function(e){var t;if(e.graphic&&"graphics"!==(null===(t=e.graphic.layer)||void 0===t?void 0:t.type))return{result:S.d.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:S.d.GEOMETRY_MISSING};if((0,R.wz)(e.elevationInfo))return{result:S.d.ELEVATION_MODE_UNSUPPORTED};const o=e.operations.data.type,i=e.operations.data.geometry;return"point"===o||"mesh"===o||"polyline"===o||"polygon"===o?{result:S.d.SUPPORTED,geometry:i}:{result:S.d.GEOMETRY_TYPE_UNSUPPORTED}}(e).result}var k=o(69120),I=o(57308),D=o(82307),H=o(95327),U=o(97513),Z=o(35044),N=o(73265),x=o(64344),L=o(83973),V=o(70330),Y=o(53787),F=o(11500),j=o(4212);let B=class extends s.A.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,j.Xb)(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;null===(e=this.activeComponent)||void 0===e||e.reset()}refreshComponent(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};(0,a._)([(0,u.MZ)()],B.prototype,"activeComponent",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"cancelled",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"history",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"tool",null),(0,a._)([(0,u.MZ)()],B.prototype,"type",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"canUndo",null),(0,a._)([(0,u.MZ)()],B.prototype,"canRedo",null),(0,a._)([(0,u.MZ)()],B.prototype,"onEnd",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"undo",null),(0,a._)([(0,u.MZ)()],B.prototype,"redo",null),(0,a._)([(0,u.MZ)()],B.prototype,"toggleTool",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"addToSelection",void 0),(0,a._)([(0,u.MZ)()],B.prototype,"removeFromSelection",void 0),B=(0,a._)([(0,v.$)("esri.widgets.Sketch.support.OperationHandle")],B);let K=class extends B{};(0,a._)([(0,u.MZ)()],K.prototype,"activeComponent",void 0),K=(0,a._)([(0,v.$)("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],K);let W=class extends B{};(0,a._)([(0,u.MZ)()],W.prototype,"activeComponent",void 0),W=(0,a._)([(0,v.$)("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],W);var q=o(21270);const z={defaultZ:0},$={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let J=class extends s.A.EventedAccessor{constructor(e){var t,o,i;super(e),this._defaultSnappingManager=null,this._updatingHandles=new y.U,this._internalGraphicsLayer=new b.default({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new T.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new O.default({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new G.default({color:[130,130,130,1],width:2}),this.meshSymbol=new M.default({symbolLayers:new n.default([new w.default])}),this.updateGraphics=new n.default,this.updateOnGraphicClick=!0,this.creationMode="single",this.vertexSymbol=new T.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new U.A,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._sketchContinuationFlag=!1,this._originalPopupEnabled=null,this.defaultCreateOptions=z,this.defaultUpdateOptions=$,this.snappingOptions=null!==(t=null!==(o=null===e||void 0===e||null===(i=e.snappingManager)||void 0===i?void 0:i.options)&&void 0!==o?o:null===e||void 0===e?void 0:e.snappingOptions)&&void 0!==t?t:new L.default}initialize(){this.addHandles([(0,c.on)((()=>{var e;return null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.layers}),"change",(e=>{e.removed.includes(this.layer)&&this.cancel()})),(0,c.on)((()=>{var e;return null===(e=this.layer)||void 0===e?void 0:e.graphics}),"change",(e=>{if(null!=this._operationHandle)for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())})),(0,c.watch)((()=>{var e,t;return null!==(e=null===(t=this.layer)||void 0===t?void 0:t.elevationInfo)&&void 0!==e?e:null}),(e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)}),c.syncAndInitial),(0,c.watch)((()=>this.view),(e=>{this._defaultSnappingManager=(0,d.pR)(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new x.g({view:e,options:this.snappingOptions})),"2d"===e.type?Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(25704),o.e(60176)]).then(o.bind(o,60176)):"3d"===e.type&&(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(43601),o.e(96999),o.e(24743),o.e(30416)]).then(o.bind(o,24743)),Promise.all([o.e(31918),o.e(92587),o.e(42208)]).then(o.bind(o,42208))))}),c.syncAndInitial),(0,c.watch)((()=>{var e;return null===(e=this.view)||void 0===e?void 0:e.spatialReference}),((e,t)=>{e&&t&&!e.equals(t)&&this.cancel()}))]),(0,V.BY)(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=(0,d.pR)(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this._updatingHandles.destroy(),this.emit("destroy")}get updating(){return this._updatingHandles.updating||null!=this.snappingManager&&this.snappingManager.updating}get activeTool(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.tool)&&void 0!==e?e:null}get activeCreateToolDrawMode(){var e;return"create"===(null===(e=this._operationHandle)||void 0===e?void 0:e.type)&&this._operationHandle.activeComponent&&"mode"in this._operationHandle.activeComponent?this._operationHandle.activeComponent.mode:null}get activeTooltip(){const{activeComponent:e,destroyed:t}=this,o=!t&&e&&"tooltip"in e?e.tooltip:null;return null!==o&&void 0!==o&&o.visible?o:null}get activeComponent(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.activeComponent)&&void 0!==e?e:null}get createGraphic(){return null==this.activeComponent||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",(0,i.A)((0,i.A)({},z),e))}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",(0,i.A)((0,i.A)((0,i.A)({},$),e),{},{reshapeOptions:(0,i.A)((0,i.A)({},$.reshapeOptions),null===e||void 0===e?void 0:e.reshapeOptions),highlightOptions:(0,i.A)((0,i.A)({},$.highlightOptions),null===e||void 0===e?void 0:e.highlightOptions)}))}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e,t;return null!==(e=null===(t=this.snappingManager)||void 0===t?void 0:t.options)&&void 0!==e?e:this._get("snappingOptions")}set snappingOptions(e){null!=this._defaultSnappingManager&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=(0,d.pR)(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:e}=this;!this._defaultSnappingManager&&e&&(this._defaultSnappingManager=new x.g({options:this.snappingOptions,view:e})),this._clearOverride("snappingManager")}}get state(){var e;const t=!(null===(e=this.view)||void 0===e||!e.ready||!this.layer),o=this._operationHandle;return t&&o?"active":t?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:e,map:o}=t;e&&(t.cursor=null),null!==o&&void 0!==o&&o.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const o="view-ready";this.removeHandles(o),e&&this.addHandles((0,c.when)((()=>e.ready),(t=>{this.removeHandles(this._viewHandlesKey),t&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)}),c.syncAndInitial),o),this._set("view",e)}cancel(){this._moduleLoaderAbortController=(0,d.DC)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,d.DC)(this._viewReadyAbortController),this._sketchContinuationFlag=!0,this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if("active"===e&&t.length){const{activeTool:e,layer:o}=this,i=t.toArray();o.removeMany(i),this.cancel(),this._emitDeleteEvent({graphics:i,tool:e})}}duplicate(){if("active"===this.state&&this.updateGraphics.length){const e=this.updateGraphics.map((e=>e.clone())).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,t){this.cancel(),await this._waitViewReady();const{view:o,layer:i}=this;if(!o||"disabled"===this.state)throw i||this._logMissingLayer(),(0,h.createAbortError)();if(null!=o.activeTool&&(o.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");(0,k.Y)(o,this._internalGraphicsLayer);const a=await this._updatingHandles.addPromise(this._setupCreateOperation(e,t));if(null==a||this.destroyed)return void o.map.remove(this._internalGraphicsLayer);a.on("complete",(()=>{if(a===this._operationHandle){var o;const n=this.createGraphic,r=this._operationHandle.cancelled;if(this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),null!==(o=this.view)&&void 0!==o&&o.map&&this.view.map.remove(this._internalGraphicsLayer),a.cancelled||null==n||i.add(n),this._sketchContinuationFlag=!1,this.emit("create",{graphic:n,state:r?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"}),r||this._sketchContinuationFlag)return;const{creationMode:s}=this;if("continuous"===s){if(null!==t&&void 0!==t&&t.geometryToPlace)return;this._updatingHandles.addPromise((0,h.ignoreAbortErrors)(this.create(e,t)))}else"update"===s&&n&&this._updatingHandles.addPromise((0,h.ignoreAbortErrors)(this.update([n])))}})),this._operationHandle=a,o.ready&&o.focus()}async place(e,t){return this.create("mesh",(0,i.A)({mode:"click",hasZ:e.hasZ,geometryToPlace:e},t))}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:o,view:i,state:a}=this;if(!i||"disabled"===a)throw o||this._logMissingLayer(),(0,h.createAbortError)();null!=i.activeTool&&(i.activeTool=null);const n=Array.isArray(e)?e:[e];if(null==e||null===n||void 0===n||!n.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(n.some((e=>e.layer!==o?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):null==e.geometry&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0))))return;const r=await this._updatingHandles.addPromise(this._setupUpdateOperation(n,t));this.destroyed||null==r||se(r)||((0,k.Y)(i,this._internalGraphicsLayer),this._setUpdateOperationHandle(r,t),this.emit("update",{graphics:n,state:"start",aborted:!1,tool:r.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const t=this.view;if(t){e=Array.isArray(e)?e:[e];for(const o of e)null==o.geometry||"mesh"===o.geometry.type||(0,f.aI)(o.geometry.spatialReference,t.spatialReference)||((0,m.canProjectWithoutEngine)(o.geometry.spatialReference,t.spatialReference)||(0,m.isLoaded)()||await(0,m.load)(),o.geometry=(0,m.project)(o.geometry,t.spatialReference))}else this._logMissingView()}undo(){var e;this.canUndo()&&(null===(e=this._operationHandle)||void 0===e||e.undo())}redo(){var e;this.canRedo()&&(null===(e=this._operationHandle)||void 0===e||e.redo())}canUndo(){var e;return!(null===(e=this._operationHandle)||void 0===e||!e.canUndo())}canRedo(){var e;return!(null===(e=this._operationHandle)||void 0===e||!e.canRedo())}toggleUpdateTool(){var e;null===(e=this._operationHandle)||void 0===e||e.toggleTool()}async _getFirstHit(e){const t=this.view;if(!t)return this._logMissingView(),null;if("2d"===t.type){const o=[];t.map.allLayers.forEach((e=>{"vector-tile"!==e.type&&"imagery"!==e.type||o.push(e)}));const i=await t.hitTest(e,{exclude:o});return(0,Y.zF)(i.results)}const o=[t.map.ground];t.map.allLayers.forEach((e=>{(0,E.Eq)(e.type)&&o.push(e)}));const i=await t.hitTest(e,{exclude:o});if(i.results.length>0){var a;const e=i.results[0];if(null!=e&&"graphic"===e.type&&e.graphic&&(!i.ground.mapPoint||t.map.ground.opacity<1||i.ground.distance-(null!==(a=e.distance)&&void 0!==a?a:0)>-Math.min(3*i.ground.distance,"global"===t.viewingMode?(0,g.tO)(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return e}return null}_generateViewHandles(e){return[e.on("immediate-click",(async e=>{var t;const o="active"===this.state&&"create"===(null===(t=this._operationHandle)||void 0===t?void 0:t.type);"disabled"!==this.state&&!o&&this.updateOnGraphicClick&&await this._updatingHandles.addPromise(this._handleImmediateClick(e))}),I.o.WIDGET)]}async _handleImmediateClick(e){const t=await e.async((()=>this._getFirstHit((0,F.ZV)(e))));let o=null;if(null!=t){var a;const i=t.graphic;this.updateGraphics.includes(i)||i.layer===this.layer?(e.stopPropagation(),o=i):"2d"!==(null===(a=this.view)||void 0===a?void 0:a.type)||this._isComponentGraphic(i)||"active"!==this.state||this.cancel()}else"active"===this.state&&this.cancel();null==o||this.updateGraphics.includes(o)||await this.update([o],(0,i.A)((0,i.A)({},this.defaultUpdateOptions),{},{reshapeOptions:(0,i.A)({},this.defaultUpdateOptions.reshapeOptions)}))}async _setupCreateOperation(e,t){const o=this.view;if(!o)return this._logMissingView(),null;const a=(0,i.A)((0,i.A)({hasZ:"3d"===o.type},this.defaultCreateOptions),t),n=await this._setupDrawGraphicTool(e,o,a);return null==n?null:(o.tools.add(n),o.activeTool=n,this._setupCreateOperationHandle(n))}async _setupDrawGraphicTool(e,t,o){var a,n,r;if("multipoint"===e&&"3d"===t.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;const{cursor:s,defaultZ:l,hasZ:p,geometryToPlace:d,graphicProperties:h,mode:c,preserveAspectRatio:u}=o,v=(0,q.qv)(c,e),y=(0,q.tk)(e),g=null!==o&&void 0!==o&&null!==(a=o.optionsPerTool)&&void 0!==a&&a.has(e)?o.optionsPerTool.get(e):{},m=null!==(n=null!==(r=null===g||void 0===g?void 0:g.preserveAspectRatio)&&void 0!==r?r:u)&&void 0!==n?n:"rectangle"!==e,_=(0,i.A)({centered:"rectangle"!==e&&!("circle"===e&&!m),cursor:s,defaultZ:l,forceUniformSize:m,graphicProperties:(0,i.A)((0,i.A)({},h),{},{attributes:(0,i.A)({},null===h||void 0===h?void 0:h.attributes)}),geometryToPlace:d,geometryType:y,mode:v,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:p,snappingManager:this.snappingManager,snapToScene:!1,view:t},g);return"2d"===t.type?this._makeDrawGraphicTool2D(_):this._makeDrawGraphicTool3D(_)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(25704),o.e(60176)]).then(o.bind(o,60176)));return se(t)||this.destroyed?null:new t.module.DrawGraphicTool2D((0,i.A)((0,i.A)({},e),{},{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:ee(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions}))}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(43601),o.e(96999),o.e(24743),o.e(30416)]).then(o.bind(o,24743)));if(se(t)||this.destroyed)return null;const{elevationInfo:a}=this.layer;return new t.module.DrawGraphicTool3D((0,i.A)((0,i.A)({},e),{},{elevationInfo:a,snapToScene:!0,sketchOptions:this.sketchOptions}))}_setupCreateOperationHandle(e){const t=this.view;if(!t)return this._logMissingView(),null;let o=null;const i=e.forceUniformSize,a=e.centered,n=[t.on("key-down",(t=>{if(t.key===D.NE.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===D.NE.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==D.NE.vertexAdd||t.repeat)t.key===D.NE.undo?(t.stopPropagation(),r.undo()):t.key===D.NE.redo?(t.stopPropagation(),r.redo()):t.key!==D.NE.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===D.NE.center&&(t.repeat||(e.centered=!a,t.stopPropagation())):(e.forceUniformSize=!i,t.stopPropagation());else{const o=e.drawOperation.geometryType;"polyline"!==o&&"polygon"!==o&&"multipoint"!==o||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),I.o.WIDGET),t.on("key-up",(t=>{t.key===D.NE.pan?e.enabled=!0:t.key!==D.NE.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===D.NE.center&&(e.centered=a,t.stopPropagation()):(e.forceUniformSize=i,t.stopPropagation())}),I.o.WIDGET),e.on("vertex-add",(t=>{switch(o=null==o?"start":"active",t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:o,tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("cursor-update",(t=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:t.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(t=>{switch(t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("complete",(e=>{this._set("createGraphic",e.graphic),o="complete",e.aborted?r&&r.cancel():r&&r.complete()})),(0,c.watch)((()=>this._getGraphicSymbolFromTool(e.geometryType)),(t=>{e.graphicSymbol=t}))],r=new K({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var o;(0,l.ei)(n),null===(o=t.tools)||void 0===o||o.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return r}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":case"freehandPolyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":case"freehandPolygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,t){var o;const{layer:a,view:n}=this;if(!n)return this._logMissingView(),null;const r=(0,i.A)((0,i.A)((0,i.A)({},this.defaultUpdateOptions),t),{},{reshapeOptions:(0,i.A)((0,i.A)({},this.defaultUpdateOptions.reshapeOptions),null===t||void 0===t?void 0:t.reshapeOptions),highlightOptions:(0,i.A)((0,i.A)({},this.defaultUpdateOptions.highlightOptions),null===t||void 0===t?void 0:t.highlightOptions)});let s=null!==(o=r.tool)&&void 0!==o?o:$.tool;for(const i of e)a.remove(i),a.add(i);if("3d"===n.type){if(0===e.length)return null;switch(s){case"move":return this._setupMove3DOperation(e,r,n,s);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],r,n);case"transform":return this._setupGraphicTransform3DOperation(e,r,n)}}switch(s){case"move":return this._setupMove2DOperation(e,r,n);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,s,r,n);case"transform":if(1===e.length){var l;const t=null===(l=e[0].geometry)||void 0===l?void 0:l.type;"point"!==t&&"multipoint"!==t||(s="reshape")}return this._setupTransformOrReshape2DOperation(e,s,r,n)}}async _setupMove3DOperation(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=await this._requireModule(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(43601),o.e(96999),o.e(24743),o.e(30416)]).then(o.bind(o,24743)));if(se(r))return r;const{ManipulatedObject3DGraphic:s,MoveTool3D:p}=r.module,d=new Map,h=()=>{d.forEach((e=>e.destroy())),d.clear()};for(const o of e){const e=new s({view:i,graphic:o}),t=(0,P.Y)(e);if(t!==S.d.SUPPORTED)return h(),this._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat((0,S.c)(t),").")),null;d.set(o,e)}const c=new p({view:i,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(c),c.objects.addMany(Array.from(d.values())),n||this.updateGraphics.addMany(e);const u=[],v=new W({activeComponent:c,tool:a,type:"update",onEnd:()=>{(0,l.ei)(u),re(i,c),h()},undo:()=>{ae(this.view,c),te(v,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:a})},redo:()=>{oe(v,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:a})},addToSelection:e=>{this.updateGraphics.push(e);const t=new s({view:i,graphic:e});d.set(e,t),c.objects.push(t),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);if(v.history.undo.forEach((e=>e.updates.splice(t,1))),v.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0===this.updateGraphics.length)return void v.complete();const o=d.get(e);o&&(c.objects.remove(o),o.destroy(),d.delete(e))},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;if("transform"!==a)return;const e=this.updateGraphics.at(0),o=await this._setupReshape3DOperation(e,t,i,!0);o&&!se(o)&&(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(o,t))}});return u.push(...this._getHandlesForComponent(v,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(v,e,t)),I.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(v,e)}),I.o.WIDGET)),v}_setupGraphicTransform3DOperation(e,t,o){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&function(e){var t;if("graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type))return S.d.GRAPHICS_LAYER_MISSING;if(null==e.geometry)return S.d.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return S.d.SUPPORTED;default:return S.d.GEOMETRY_TYPE_UNSUPPORTED}const o=null!=e.symbol&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return o&&o.some((e=>"object"===e.type))?"on-the-ground"!==(0,R.ky)(e)&&(0,R.NN)(e)?S.d.ELEVATION_MODE_UNSUPPORTED:S.d.SUPPORTED:S.d.SYMBOL_TYPE_UNSUPPORTED}(e[0])===S.d.SUPPORTED){const a=e[0],n=a.geometry;if(null!=n&&("point"===n.type||"mesh"===n.type))return this._setupPointTransform3DOperation(a,t,o);if(null!=n&&("polygon"===n.type||"polyline"===n.type))return this._setupPolyTransform3DOperation(a,t,o,i)}return this._setupMove3DOperation(e,t,o,"transform",i)}async _setupPointTransform3DOperation(e,t,i){const a="transform",{enableRotation:n,enableScaling:r,enableZ:s}=t,p=await this._requireModule(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(43601),o.e(96999),o.e(24743),o.e(30416)]).then(o.bind(o,24743)));if(se(p))return p;const{TransformTool3D:d,ManipulatedObject3DGraphic:h}=p.module,c=new h({graphic:e,view:i}),u=new d({object:c,view:i,enableRotation:n,enableScaling:r,enableZ:s,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(u),this.updateGraphics.add(e);const v=[],y=new W({activeComponent:u,tool:a,type:"update",onEnd:()=>{(0,l.ei)(v),re(i,u),c.destroy()},undo:()=>{ae(this.view,u),te(y,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:a})},redo:()=>{oe(y,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:a})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),y.onEnd(),y.destroy();const o=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);se(o)||this._setUpdateOperationHandle(o,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),y.complete()},toggleTool:()=>{}});return v.push(...this._getHandlesForComponent(y,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(y,e,t)),I.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(y,e)}),I.o.WIDGET)),y}async _setupPolyTransform3DOperation(e,t,i){var a;let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r="transform",{enableRotation:s,enableScaling:p,enableZ:d,preserveAspectRatio:h}=t,c=await this._requireModule(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(43601),o.e(96999),o.e(24743),o.e(30416)]).then(o.bind(o,24743)));if(se(c))return c;const{ManipulatedObject3DGraphic:u,ExtentTransformTool:v}=c.module,y=null===(a=this.view)||void 0===a||null===(a=a.inputManager)||void 0===a?void 0:a.isModifierKeyDown(D.NE.constraint),g=new u({view:i,graphic:e}),m=new v({object:g,view:i,enableRotation:s,enableScaling:p,enableZ:d,preserveAspectRatio:!!h!=!!y,sketchOptions:this.sketchOptions});i.tools.add(m),n||this.updateGraphics.add(e);const _=[],f=new W({activeComponent:m,tool:r,type:"update",onEnd:()=>{(0,l.ei)(_),re(i,m),g.destroy()},canUndo:()=>!m.destroyed&&m.canUndo,undo:()=>{m.destroyed||(m.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!m.destroyed&&m.canRedo,redo:()=>{m.destroyed||(m.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();const o=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);se(o)||this._setUpdateOperationHandle(o,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),f.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;const o=await this._setupReshape3DOperation(e,t,i,!0);o&&!se(o)&&(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(o,t))}});return _.push(...this._getHandlesForComponent(f,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(f,e,t)),I.o.WIDGET),i.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(f,e)),I.o.WIDGET),i.on("key-down",(e=>{e.key!==D.NE.constraint||e.repeat||(m.preserveAspectRatio=!m.preserveAspectRatio,e.stopPropagation())}),I.o.WIDGET),i.on("key-up",(e=>{e.key===D.NE.constraint&&(m.preserveAspectRatio=!m.preserveAspectRatio,e.stopPropagation())}),I.o.WIDGET)),f}async _setupMove2DOperation(e,t,o){const i="move";this.updateGraphics.addMany(e),await this._updatingHandles.addPromise(this._updateSpatialReference(e));const a=await this._getGraphicMover(e,t,o);if(se(a))return a;const n=new W({activeComponent:a,tool:i,type:"update",onEnd:()=>{var e;this._displayDefaultCursor(),(0,l.ei)(p),(0,l.ei)(s),a.destroy(),null===(e=this._internalGraphicsLayer)||void 0===e||e.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const e=this.updateGraphics.toArray();te(n,e),n.refreshComponent(),this._emitUndoEvent({graphics:e,tool:i})},redo:()=>{const e=this.updateGraphics.toArray();oe(n,e),n.refreshComponent(),this._emitRedoEvent({graphics:e,tool:i})},addToSelection:async e=>{await this._updatingHandles.addPromise(this._updateSpatialReference(e)),this.updateGraphics.push(e),a.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);n.history.undo.forEach((e=>e.updates.splice(t,1))),n.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const o=this.updateGraphics.toArray();this.emit("update",{graphics:o,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?a.graphics=o:n.complete()}});let r=!1;const s=[o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(n,e,t)),I.o.WIDGET),o.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(n,e),e.key!==D.NE.constraint||e.repeat||(r=!0,a.enableMoveAllGraphics=!a.enableMoveAllGraphics)}),I.o.WIDGET),o.on("key-up",(e=>{e.key===D.NE.constraint&&r&&(r=!1,a.enableMoveAllGraphics=!a.enableMoveAllGraphics)}),I.o.WIDGET)],p=this._getHandlesForComponent(n,t);return n}async _setupReshape3DOperation(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n="reshape",r=await this._requireModule(Promise.all([o.e(93613),o.e(51742),o.e(85324),o.e(37891),o.e(10061),o.e(43601),o.e(96999),o.e(24743),o.e(30416)]).then(o.bind(o,24743)));if(se(r))return r;const{ManipulatedObject3DGraphic:s,ReshapeTool3D:p}=r.module,d=new s({view:i,graphic:e}),h=C(d);if(h!==S.d.SUPPORTED)return d.destroy(),this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat((0,S.c)(h),").")),null;const c=t.reshapeOptions,u=new p({view:i,object:d,enableZVertex:t.enableZ&&"move"===(null===c||void 0===c?void 0:c.vertexOperation),enableZShape:t.enableZ&&"move"===(null===c||void 0===c?void 0:c.shapeOperation),enableMoveObject:"move"===(null===c||void 0===c?void 0:c.shapeOperation)||"move-xy"===(null===c||void 0===c?void 0:c.shapeOperation),enableMidpoints:"split"===(null===c||void 0===c?void 0:c.edgeOperation),enableEdgeOffset:"offset"===(null===c||void 0===c?void 0:c.edgeOperation),snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(u),a||this.updateGraphics.add(d.graphic);const v=[],y=new W({activeComponent:u,tool:n,type:"update",onEnd:()=>{(0,l.ei)(v),re(i,u),d.destroy()},canUndo:()=>!u.destroyed&&u.canUndo,undo:()=>{u.destroyed||(u.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},canRedo:()=>!u.destroyed&&u.canRedo,redo:()=>{u.destroyed||(u.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),y.onEnd(),y.destroy();const o=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);se(o)||this._setUpdateOperationHandle(o,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),y.complete()},toggleTool:async()=>{if(!1===t.toggleToolOnClick)return;y.onEnd(),y.destroy();const e=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);se(e)||this._setUpdateOperationHandle(e,t)}});return v.push(...this._getHandlesForComponent(y,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(y,e,t)),I.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(y,e)}),I.o.WIDGET)),y}async _setupTransformOrReshape2DOperation(e,t,o,i){this.updateGraphics.addMany(e),await this._updatingHandles.addPromise(this._updateSpatialReference(e));const a="transform"===t?await this._getBox(e,o,i):await this._getReshape(e,o,i);if(se(a))return a;const n=new W({activeComponent:a,type:"update",onEnd:()=>{(0,l.ei)(s),(0,l.ei)(r),n.activeComponent&&!n.activeComponent.destroyed&&n.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{te(n,this.updateGraphics.toArray()),n.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n.tool})},redo:()=>{oe(n,this.updateGraphics.toArray()),n.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n.tool})},addToSelection:async e=>{let t=n.activeComponent;if("reshape"===(null===t||void 0===t?void 0:t.type)){const t=[...this.updateGraphics,e];this.updateGraphics.removeAll(),n.onEnd(),n.destroy();const a=await this._setupTransformOrReshape2DOperation(t,"transform",o,i);if(se(a))return;this._setUpdateOperationHandle(a,o)}else this.updateGraphics.add(e),t.graphics=this.updateGraphics.toArray(),t.refresh(),n.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async e=>{const t=this.updateGraphics.indexOf(e);n.history.undo.forEach((e=>e.updates.splice(t,1))),n.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const o=this.updateGraphics.toArray();if(0===o.length)n.complete();else{const e=o[0].geometry;1!==o.length||null==e||"point"!==e.type&&"multipoint"!==e.type?n.activeComponent.graphics=o:n.toggleTool()}this.emit("update",{graphics:o,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"})},toggleTool:async()=>{var e;if(this.updateGraphics.length>1)return;const t=this.updateGraphics.at(0),a=t.geometry;if(null!=a&&("reshape"===n.tool&&("point"===a.type||"multipoint"===a.type)||"transform"===n.tool&&"extent"===a.type))return;let r=null;"transform"===n.tool?r=await this._getReshape([t],o,i):"reshape"===n.tool&&(r=await this._getBox([t],o,i)),se(r)||(null!==(e=n.activeComponent)&&void 0!==e&&e.destroy(),n.activeComponent=r,n.activeComponent&&((0,l.ei)(s),s=this._getHandlesForComponent(n,o)))}}),r=[i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(n,e,o)),I.o.WIDGET),i.on("key-down",(e=>{if(this._getCommonUpdateOperationKeyDownHandlers(n,e),e.key===D.NE.constraint&&!e.repeat&&n){const e=n.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),I.o.WIDGET),i.on("key-up",(e=>{if(e.key===D.NE.constraint&&n){const e=n.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),I.o.WIDGET)];let s=this._getHandlesForComponent(n,o);return n}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:a,highlightOptions:n}=t,r=await this._requireModule(Promise.all([o.e(61472),o.e(91720)]).then(o.bind(o,61472)));return se(r)?r:new r.module.default({enableMoveAllGraphics:a,highlightsEnabled:!(null===n||void 0===n||!n.enabled),indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:e=>{let{dx:t,dy:o,graphic:i}=e;this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:i,type:"move-start"},type:"update"})},onGraphicMove:e=>{let{dx:t,dy:o,graphic:i}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:i,type:"move"},type:"update"})},onGraphicMoveStop:e=>{let{dx:t,dy:o,graphic:i}=e;this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:i,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,a){var n;const{enableRotation:r,enableScaling:s,highlightOptions:l,preserveAspectRatio:p}=t,d=await this._requireModule(Promise.all([o.e(51742),o.e(85324),o.e(61472),o.e(20819)]).then(o.bind(o,20819)));if(se(d))return d;const h=null===(n=this.view)||void 0===n||null===(n=n.inputManager)||void 0===n?void 0:n.isModifierKeyDown(D.NE.constraint);return new d.module.default({graphics:e,enableRotation:r,enableScaling:s,highlightsEnabled:!(null===l||void 0===l||!l.enabled),preserveAspectRatio:!!p!=!!h,layer:this._internalGraphicsLayer,view:a,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onMove:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onMoveStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onScaleStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onScale:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onScaleStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onRotateStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onRotate:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onRotateStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"})}})}async _getReshape(e,t,a){var n,r,s;const l="split"===(null===(n=t.reshapeOptions)||void 0===n?void 0:n.edgeOperation),p="move"===(null===(r=t.reshapeOptions)||void 0===r?void 0:r.shapeOperation),d=!(null===(s=t.highlightOptions)||void 0===s||!s.enabled),h=await this._requireModule(Promise.all([o.e(51742),o.e(85324),o.e(37891),o.e(61472),o.e(90648)]).then(o.bind(o,90648)));return se(h)?h:new h.module.default({enableMidpoints:l,enableMovement:p,graphic:e[0],highlightsEnabled:d,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:a,callbacks:{onReshapeStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onReshape:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)({},e),type:"update"}),onReshapeStop:e=>{let{mover:t,type:o}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t,type:o},type:"update"})},onMoveStart:e=>{let{dx:t,dy:o,mover:i,type:a}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:i,type:a},type:"update"})},onMove:e=>{let{dx:t,dy:o,mover:i,type:a}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:i,type:a},type:"update"})},onMoveStop:e=>{let{dx:t,dy:o,mover:i,type:a}=e;return this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:t,dy:o,mover:i,type:a},type:"update"})},onVertexAdd:e=>{let{added:t,type:o,vertices:i}=e;const a=t.map((e=>(0,_.$K)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:a,vertices:i,type:o},type:"update"})},onVertexRemove:e=>{let{removed:t,type:o,vertices:i}=e;const a=t.map((e=>(0,_.$K)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:a,vertices:i,type:o},type:"update"})}}})}_getHandlesForComponent(e,t){const o=e.activeComponent;if(!o)return[];switch(o.type){case"graphic-mover":return[o.on("graphic-click",(t=>{var o;let{graphic:i,viewEvent:a}=t;(null===(o=a.native)||void 0===o?void 0:o.shiftKey)&&(a.stopPropagation(),e.removeFromSelection(i))})),o.on("graphic-move-start",(t=>e.addToHistory(ne(t.allGraphics))))];case"box":return[o.on("graphic-click",(o=>this._onTransformOrReshape2DGraphicClick(e,t,o))),o.on("move-start",(t=>e.addToHistory(ne(t.graphics)))),o.on("rotate-start",(t=>e.addToHistory(ne(t.graphics)))),o.on("scale-start",(t=>e.addToHistory(ne(t.graphics))))];case"reshape":return[o.on("graphic-click",(o=>this._onTransformOrReshape2DGraphicClick(e,t,o))),o.on("move-start",(t=>e.addToHistory(ne([t.mover])))),o.on("reshape-start",(t=>e.addToHistory(ne([t.graphic])))),o.on("vertex-add",(t=>e.addToHistory(ne([t.oldGraphic])))),o.on("vertex-remove",(t=>e.addToHistory(ne([t.oldGraphic]))))];case"move-3d":return[o.events.on("record-undo",(t=>{let{updates:o}=t;e.addToHistory({updates:o})})),o.events.on("move-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-start"},type:"update"})})),o.events.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move"},type:"update"})})),o.events.on("move-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-stop"},type:"update"})})),o.events.on("immediate-click",(o=>{o.shiftKey?this._toggleSelection([o.object.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[o.events.on("record-undo",(t=>{let{updates:o}=t;e.addToHistory({updates:o})})),o.events.on("translate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),o.events.on("translate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),o.events.on("rotate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),o.events.on("rotate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),o.events.on("scale-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),o.events.on("scale-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),o.events.on("translate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),o.events.on("rotate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate"},type:"update"})})),o.events.on("scale",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),o.events.on("immediate-click",(o=>{o.shiftKey?this._toggleSelection([o.object.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[o.events.on("reshape",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)((0,i.A)({},e),{},{mover:e.object.graphic}),type:"update"})})),o.events.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:(0,i.A)((0,i.A)({},e),{},{mover:e.object.graphic}),type:"update"})})),o.events.on("vertex-add",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),o.events.on("vertex-remove",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),o.events.on("immediate-click",(o=>{o.shiftKey?this._toggleSelection([o.object.graphic],e,t):e.toggleTool()}))]}}_onTransformOrReshape2DGraphicClick(e,t,o){var i;const{graphic:a,viewEvent:n}=o;return null!==(i=n.native)&&void 0!==i&&i.shiftKey&&a.layer===this.layer?(n.stopPropagation(),e.removeFromSelection(a)):t.toggleToolOnClick?(n.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){var o;this._operationHandle=e;const i=null===(o=this.view)||void 0===o?void 0:o.map;this._disablePopup(t);e.on("complete",(()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),a=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}async _getCommonUpdateOperationClickHandlers(e,t,o){const i=(0,F.ZV)(t),a=await t.async((()=>this._getFirstHit(i)));null!=a&&(t.native.shiftKey&&this._toggleSelection([a.graphic],e,o)||this.updateGraphics.includes(a.graphic))?t.stopPropagation():e.complete()}_toggleSelection(e,t,o){const i=!!o.multipleSelectionEnabled;return e.some((e=>null!=e&&!(!i||e.layer!==this.layer)&&(this.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),!0)))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const o=t.key;o===D.NE.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):o===D.NE.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):o===D.NE.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&D.NE.delete.includes(o)&&this._onDeleteKey(t)}_onDeleteKey(e){var t;if(!this._operationHandle||"update"!==this._operationHandle.type)return;const o=this.activeComponent,i=this.updateGraphics.toArray();null!=o&&("reshape"!==o.type||1===i.length&&"point"===(null===(t=i[0].geometry)||void 0===t?void 0:t.type))&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e;this._internalGraphicsLayer&&(null!==(e=this.view)&&void 0!==e&&null!==(e=e.map)&&void 0!==e&&e.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,d.pR)(this._internalGraphicsLayer))}_isComponentGraphic(e){var t;const{activeComponent:o}=this;return!(!e||null==o)&&((null===(t=e.attributes)||void 0===t?void 0:t.esriSketchTool)||"draw-2d"===o.type&&o.graphic===e||("box"===o.type||"reshape"===o.type)&&o.isUIGraphic(e))}_displayPointerCursor(){var e;(null===(e=this.view)||void 0===e?void 0:e.container)&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(null===(e=this.view)||void 0===e?void 0:e.container)&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(null===(e=this.view)||void 0===e?void 0:e.container)&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,o){p.A.getLogger(this).error(new r.default(e,t,o))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const o=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:o}}_emitUndoEvent(e){this.emit("undo",(0,i.A)((0,i.A)({},e),{},{type:"undo"}))}_emitRedoEvent(e){this.emit("redo",(0,i.A)((0,i.A)({},e),{},{type:"redo"}))}_emitDeleteEvent(e){this.emit("delete",(0,i.A)((0,i.A)({},e),{},{type:"delete"}))}get test(){}wait(){return(0,c.whenOnce)((()=>!this.updating))}_disablePopupEnabled(e){var t,o;return"3d"!==(null===(t=this.view)||void 0===t?void 0:t.type)||this.updateOnGraphicClick||null!==(o=null===e||void 0===e?void 0:e.toggleToolOnClick)&&void 0!==o&&o}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&null==this._originalPopupEnabled&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&null!=this._originalPopupEnabled&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?((0,d.DC)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await(0,h.whenOrAbort)((0,c.whenOnce)((()=>null===e||void 0===e?void 0:e.ready)),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",Q("view"))}_logMissingLayer(){this._logError(X,Q("layer"))}};(0,a._)([(0,u.MZ)()],J.prototype,"_defaultSnappingManager",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"updating",null),(0,a._)([(0,u.MZ)({readOnly:!0})],J.prototype,"_updatingHandles",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"_operationHandle",void 0),(0,a._)([(0,u.MZ)({readOnly:!0})],J.prototype,"activeTool",null),(0,a._)([(0,u.MZ)({readOnly:!0})],J.prototype,"activeCreateToolDrawMode",null),(0,a._)([(0,u.MZ)()],J.prototype,"activeTooltip",null),(0,a._)([(0,u.MZ)({types:A.Es})],J.prototype,"activeFillSymbol",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"activeLineSymbol",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"activeVertexSymbol",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"allowDeleteKey",void 0),(0,a._)([(0,u.MZ)({readOnly:!0})],J.prototype,"createGraphic",null),(0,a._)([(0,u.MZ)()],J.prototype,"defaultCreateOptions",null),(0,a._)([(0,u.MZ)()],J.prototype,"defaultUpdateOptions",null),(0,a._)([(0,u.MZ)({type:H.default,nonNullable:!0})],J.prototype,"labelOptions",null),(0,a._)([(0,u.MZ)()],J.prototype,"layer",void 0),(0,a._)([(0,u.MZ)({types:A.Es})],J.prototype,"pointSymbol",void 0),(0,a._)([(0,u.MZ)({types:A.Es})],J.prototype,"polygonSymbol",void 0),(0,a._)([(0,u.MZ)({types:A.Es})],J.prototype,"polylineSymbol",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"meshSymbol",void 0),(0,a._)([(0,u.MZ)({type:L.default,nonNullable:!0})],J.prototype,"snappingOptions",null),(0,a._)([(0,u.MZ)()],J.prototype,"snappingManager",null),(0,a._)([(0,u.MZ)({readOnly:!0})],J.prototype,"state",null),(0,a._)([(0,u.MZ)({type:Z.default,nonNullable:!0})],J.prototype,"tooltipOptions",null),(0,a._)([(0,u.MZ)({readOnly:!0})],J.prototype,"updateGraphics",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"updateOnGraphicClick",void 0),(0,a._)([(0,u.MZ)()],J.prototype,"creationMode",void 0),(0,a._)([(0,u.MZ)({type:N.default,nonNullable:!0})],J.prototype,"valueOptions",null),(0,a._)([(0,u.MZ)({types:A.Es})],J.prototype,"vertexSymbol",void 0),(0,a._)([(0,u.MZ)({value:null})],J.prototype,"view",null),(0,a._)([(0,u.MZ)({constructOnly:!0,type:U.A})],J.prototype,"sketchOptions",void 0),J=(0,a._)([(0,v.$)("esri.widgets.Sketch.SketchViewModel")],J);const X="sketch:missing-property",Q=e=>"Property '".concat(e,"' is missing on SketchViewModel.");function ee(e){return"polygon"===e||"rectangle"===e||"circle"===e}function te(e,t){ie("undo",e.history.undo,e.history.redo,t)}function oe(e,t){ie("redo",e.history.redo,e.history.undo,t)}function ie(e,t,o,i){const a=t.pop();if(!a)return;const n=a.updates,r=[];i.forEach(((t,o)=>{const i=n[o];null!=i&&("geometry"in i&&null!=i.geometry&&(r.push({geometry:t.geometry}),t.geometry=i.geometry),"symbol"in i&&null!=i.symbol&&(r.push({symbol:t.symbol}),t.symbol=i.symbol),"undo"in i&&(r.push(i),i[e](t)))})),o.push({updates:r})}function ae(e,t){null!=e&&t.hasGrabbedManipulators&&(e.activeTool=null)}function ne(e){return{updates:e.map((e=>{let{geometry:t}=e;return"mesh"===(null===t||void 0===t?void 0:t.type)?{geometry:t.cloneShallow()}:{geometry:t}}))}}function re(e,t){var o;null!==(o=e.tools)&&void 0!==o&&o.remove(t),t.destroyed||t.destroy()}function se(e){return"requireError"in e&&"aborted"===e.requireError}const le=J},97513:(e,t,o)=>{o.d(t,{A:()=>h});var i=o(35143),a=o(91967),n=o(46053),r=(o(81806),o(76460),o(47249),o(85842)),s=o(95327),l=o(35044),p=o(73265);let d=class extends a.default{constructor(e){super(e),this.labels=new s.default,this.tooltips=new l.default,this.values=new p.default}};(0,i._)([(0,n.MZ)({nonNullable:!0,type:s.default})],d.prototype,"labels",void 0),(0,i._)([(0,n.MZ)({nonNullable:!0,type:l.default})],d.prototype,"tooltips",void 0),(0,i._)([(0,n.MZ)({nonNullable:!0,type:p.default})],d.prototype,"values",void 0),d=(0,i._)([(0,r.$)("esri.views.interactive.sketch.SketchOptions")],d);const h=d}}]);
//# sourceMappingURL=81257.d21b2694.chunk.js.map