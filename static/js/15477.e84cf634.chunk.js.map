{"version":3,"file":"static/js/15477.e84cf634.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicsProcessor.js","../node_modules/@arcgis/core/views/3d/layers/GraphicsView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import e from\"../../../../core/Accessor.js\";import{makeHandle as r}from\"../../../../core/handleUtils.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import{isAbortError as n}from\"../../../../core/promiseUtils.js\";import{watch as o,sync as a,syncAndInitial as l}from\"../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as h}from\"../../../../core/accessorSupport/diffUtils.js\";import{UpdatingHandles as u}from\"../../../../core/support/UpdatingHandles.js\";import d from\"../../../../layers/Layer.js\";import{hydrateGraphic as y}from\"../../../../layers/graphics/hydratedFeatures.js\";import{getRenderingInfo as g,getRenderingInfoAsync as m}from\"../../../../renderers/support/renderingInfoUtils.js\";import f from\"../../../../rest/support/Query.js\";import{DrapeSourceType as b}from\"../interfaces.js\";import{suspendResumeExtentOptimism as C}from\"./constants.js\";import{Graphics3DCore as w}from\"./Graphics3DCore.js\";import{Graphics3DElevationAlignment as j}from\"./Graphics3DElevationAlignment.js\";import{Graphics3DFrustumVisibility as V}from\"./Graphics3DFrustumVisibility.js\";import{Graphics3DObjectStates as v}from\"./Graphics3DObjectStates.js\";import{Graphics3DScaleVisibility as G}from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as E}from\"./graphicUtils.js\";import{normalizeHighlightTargetExceptQuery as S}from\"../support/highlightUtils.js\";import{UpdatePolicy as _}from\"../../webgl-engine/lib/UpdatePolicy.js\";let x=class extends e{constructor(i){super(i),this.type=\"graphics-3d\",this.graphicsCore=null,this.drapeSourceType=b.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null,this._updatingHandles=new u}initialize(){const{layer:i}=this,t=\"effectiveScaleRange\"in i?i:null,e=this.scaleVisibilityEnabled&&null!=t,r=new w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:_.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(i,t)=>new j({graphicsCoreOwner:this,graphicsCore:i,queryGraphicUIDsInExtent:t,elevationProvider:this.view.elevationProvider}),scaleVisibility:e?(i,e)=>new G({graphicsCoreOwner:this,layer:t,queryGraphicUIDsInExtent:e,graphicsCore:i,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:i=>new v(i)}});if(this._set(\"graphicsCore\",r),this.frustumVisibilityEnabled&&this._set(\"frustumVisibility\",new V({graphicsCoreOwner:this})),\"fullOpacity\"in this.owner){const i=this.owner;this._updatingHandles.add((()=>i.fullOpacity),(()=>this.graphicsCore.opacityChange()))}if(\"elevationInfo\"in i){const t=i;this._updatingHandles.add((()=>t.elevationInfo),((i,t)=>{h(i,t)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())}))}this._set(\"initializePromise\",this._initializeAsync()),this._updatingHandles.addPromise(this.initializePromise)}async _initializeAsync(){try{await this.graphicsCore.initializePromise}catch(i){if(n(i))return;throw i}this.destroyed||(this.addHandles(o((()=>this.view.clippingArea),(()=>this._updateClippingExtent()),a)),this._updateClippingExtent(),this._setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this._updatingHandles.destroy(),this._set(\"frustumVisibility\",s(this.frustumVisibility)),this._set(\"graphicsCore\",s(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get scaleVisibilitySuspended(){return!(null==this.scaleVisibility||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return null!=this.frustumVisibility&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||null!=this.scaleVisibility&&this.scaleVisibility.updating||null!=this.frustumVisibility&&this.frustumVisibility.updating||this._updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(i){this.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphicsCore.notifyGraphicVisibilityChanged(i)}getRenderingInfo(i,t,e){const r=g(i,{renderer:t,arcade:e});if(r?.color){const i=r.color;i[0]=i[0]/255,i[1]=i[1]/255,i[2]=i[2]/255}return r}getRenderingInfoAsync(i,t,e,r){return m(i,{renderer:t,arcade:e,...r})}getHit(i){if(this.owner.loadedGraphics){const t=this.owner.loadedGraphics.find((t=>t.uid===i));if(t){const i=this.layer instanceof d?this.layer:null,e=y(t,i);return{type:\"graphic\",graphic:e,layer:e.layer}}}return null}whenGraphicBounds(i,t){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(i,t):Promise.reject()}computeAttachmentOrigin(i,t){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(i,t):null}getSymbolLayerSize(i,t){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(i,t):null}maskOccludee(i){const t=this.graphicsCore?.objectStates;if(!t)return r();const{set:e,handle:s}=t.acquireOccludeeSet(null);return t.setUid(e,i.uid),s}highlight(i,e){const r=this.graphicsCore?.objectStates;if(!r)return O;if(i instanceof f)return O;const s=S(i);if(0===s.length)return O;if(s[0]instanceof t){const i=s.map((i=>i.uid)),{set:t,handle:n}=r.acquireHighlightSet(e,null);return r.setUids(t,i),n}if(\"number\"==typeof s[0]){const i=s,{set:t,handle:n}=r.acquireHighlightSet(e,null);return r.setObjectIds(t,i),n}return O}_setupSuspendResumeExtent(){const{scaleVisibility:i,frustumVisibility:t}=this;if(null==i&&null==t)return;const e=({computedExtent:e,extentPadding:r})=>{this._suspendResumeExtent=E(e,this._suspendResumeExtent,C,r),null!=i&&i.setExtent(this._suspendResumeExtent),null!=t&&t.setExtent(this._suspendResumeExtent)};this.addHandles(o((()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding})),(i=>e(i)),l))}_updateClippingExtent(){const i=this.view.clippingArea;this.graphicsCore.setClippingExtent(i,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};i([p()],x.prototype,\"type\",void 0),i([p({constructOnly:!0})],x.prototype,\"owner\",void 0),i([p()],x.prototype,\"layer\",null),i([p()],x.prototype,\"view\",null),i([p({constructOnly:!0})],x.prototype,\"graphicsCore\",void 0),i([p()],x.prototype,\"scaleVisibility\",null),i([p({constructOnly:!0})],x.prototype,\"frustumVisibility\",void 0),i([p()],x.prototype,\"elevationAlignment\",null),i([p()],x.prototype,\"scaleVisibilitySuspended\",null),i([p({readOnly:!0})],x.prototype,\"frustumVisibilitySuspended\",null),i([p()],x.prototype,\"suspended\",null),i([p({readOnly:!0})],x.prototype,\"updating\",null),i([p()],x.prototype,\"loadedGraphics\",null),i([p()],x.prototype,\"fullOpacity\",null),i([p()],x.prototype,\"slicePlaneEnabled\",null),i([p()],x.prototype,\"drapeSourceType\",void 0),i([p()],x.prototype,\"updatePolicy\",null),i([p({constructOnly:!0})],x.prototype,\"scaleVisibilityEnabled\",void 0),i([p({constructOnly:!0})],x.prototype,\"frustumVisibilityEnabled\",void 0),i([p()],x.prototype,\"initializePromise\",void 0),x=i([c(\"esri.views.3d.layers.graphics.GraphicsProcessor\")],x);const O=r();export{x as GraphicsProcessor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Accessor.js\";import e from\"../../../core/Identifiable.js\";import{destroyMaybe as o}from\"../../../core/maybe.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsProcessor as p}from\"./graphics/GraphicsProcessor.js\";import{defaultHighlightName as c}from\"../../support/HighlightDefaults.js\";let a=class extends(e.IdentifiableMixin(s)){constructor(r){super(r),this.processor=null,this.slicePlaneEnabled=!1,this.layer=new h,this.suspended=!1}initialize(){this._set(\"processor\",new p({owner:this}))}destroy(){this._set(\"processor\",o(this.processor))}get graphics(){return this.view?.graphics}get loadedGraphics(){return this.graphics}get updating(){return!!this.processor?.updating}get symbolUpdateType(){return this.processor.graphicsCore.symbolUpdateType}getHit(r){return this.processor.getHit(r)}whenGraphicBounds(r,s){return this.processor.whenGraphicBounds(r,s)}graphicChanged(r){this.processor.graphicsCore.graphicUpdateHandler(r)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}async queryGraphics(){return this.loadedGraphics}highlight(r,s){return this.processor.highlight(r,s?.name??c)}maskOccludee(r){return this.processor.maskOccludee(r)}get test(){return{graphics3DProcessor:this.processor}}};r([t({readOnly:!0})],a.prototype,\"graphics\",null),r([t()],a.prototype,\"loadedGraphics\",null),r([t({readOnly:!0})],a.prototype,\"updating\",null),r([t({constructOnly:!0})],a.prototype,\"view\",void 0),r([t()],a.prototype,\"processor\",void 0),r([t({type:Boolean})],a.prototype,\"slicePlaneEnabled\",void 0),r([t()],a.prototype,\"layer\",void 0),r([t()],a.prototype,\"suspended\",void 0),a=r([i(\"esri.views.3d.layers.GraphicsView3D\")],a);class h extends e{constructor(){super(),this.type=\"graphics-view-3d-dummy\",this.id=this.uid}}const n=a;export{n as default};\n"],"names":["x","e","constructor","i","super","this","type","graphicsCore","drapeSourceType","b","Features","scaleVisibilityEnabled","frustumVisibilityEnabled","_suspendResumeExtent","_updatingHandles","u","initialize","layer","t","r","w","owner","preferredUpdatePolicy","_","SYNC","graphicSymbolSupported","componentFactories","elevationAlignment","j","graphicsCoreOwner","queryGraphicUIDsInExtent","elevationProvider","view","scaleVisibility","G","basemapTerrain","objectStates","v","_set","V","add","fullOpacity","opacityChange","elevationInfo","h","addPromise","elevationInfoChange","_initializeAsync","initializePromise","n","destroyed","addHandles","o","clippingArea","_updateClippingExtent","a","_setupSuspendResumeExtent","startCreateGraphics","destroy","s","frustumVisibility","_this$graphicsCore","_this$graphicsCore2","scaleVisibilitySuspended","suspended","frustumVisibilitySuspended","_this$owner$suspended","updating","_this$graphicsCore3","graphics3DGraphics","_this$graphicsCore4","graphics3DGraphicsByObjectID","_this$graphicsCore5","loadedGraphics","_this$owner$fullOpaci","slicePlaneEnabled","updatePolicy","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","getRenderingInfo","g","renderer","arcade","color","getRenderingInfoAsync","m","_objectSpread","getHit","find","uid","d","y","graphic","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","maskOccludee","_this$graphicsCore6","set","handle","acquireOccludeeSet","setUid","highlight","_this$graphicsCore7","O","f","S","length","map","acquireHighlightSet","setUids","setObjectIds","_ref","computedExtent","extentPadding","E","C","setExtent","_this$graphicsCore8","_this$graphicsCore9","l","setClippingExtent","spatialReference","recreateAllGraphics","p","prototype","constructOnly","readOnly","c","IdentifiableMixin","processor","graphics","_this$view","_this$processor","symbolUpdateType","graphicChanged","graphicUpdateHandler","effectiveUpdatePolicy","queryGraphics","_s$name","name","test","graphics3DProcessor","Boolean","id"],"sourceRoot":""}