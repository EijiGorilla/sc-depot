"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[13490,70961],{13490:(e,t,r)=>{r.d(t,{A:()=>B});var o=r(89379),s=r(35143),n=r(98773),i=r(19276),a=r(54099),l=r(54901),c=r(50346),d=r(76931),u=r(46053),h=(r(81806),r(76460),r(47249),r(85842)),p=r(19247),y=r(65215),f=r(5262),v=r(30726),g=r(99809),m=r(35384),w=r(66812),M=r(14185),_=r(42151),x=r(56829),b=r(91967),R=r(2413),T=(r(76099),r(54761));let k=class extends b.default{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _fillStyle(){const e=this.fillColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:R.qv};const t=(0,R.eV)((0,R.Jf)((0,R.vt)(R.qv),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const r of this.coordinates)e.push([Math.floor(r[0]-t[0])+.5,Math.floor(r[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,r=(0,R.VL)(t),o=(0,R.uJ)(t);return(0,T.K)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:r+"px",height:o+"px",visibility:this.visible?"visible":"hidden"}},(0,T.K)("svg",{height:o,styles:{display:"block"},width:r},(0,T.K)("polygon",{fill:this._fillStyle,points:e.map((e=>{let[t,r]=e;return"".concat(t,",").concat(r)})).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,T.K)("polygon",{fill:"transparent",points:e.map((e=>{let[t,r]=e;return"".concat(t,",").concat(r)})).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,s._)([(0,u.MZ)()],k.prototype,"coordinates",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"strokeDash",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"strokeWidth",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"strokeColor",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"strokeDashColor",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"fillColor",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"visible",void 0),(0,s._)([(0,u.MZ)()],k.prototype,"isDecoration",void 0),(0,s._)([(0,u.MZ)({readOnly:!0})],k.prototype,"_strokeStyle",null),(0,s._)([(0,u.MZ)({readOnly:!0})],k.prototype,"_strokeBackgroundStyle",null),(0,s._)([(0,u.MZ)({readOnly:!0})],k.prototype,"_fillStyle",null),(0,s._)([(0,u.MZ)({readOnly:!0})],k.prototype,"_renderCoordinates",null),k=(0,s._)([(0,h.$)("esri.views.overlay.OutlineOverlayItem")],k);const S=k;let Z=class extends(a.A.EventedMixin(x.g)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,v.pR)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e,t;return null!==(e=null===(t=this.drawOperation)||void 0===t?void 0:t.updating)&&void 0!==e&&e}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new m.O0({view:e,manipulators:this.manipulators,geometryType:O(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new w.Sl,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(null===e||void 0===e||!e.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,r=e.committableVertex,o=e.committedVertices.slice();null!=r&&o.push(t.pointToArray(r));const s=o.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new _.vz(g.zK,w.Sl.spatialReference),r="circle"===this.geometryType?M.zV:M.GF,d="circle"===this.geometryType?M.zd:M._T;if(1===s&&e.isCompleted){var n,i;const e=o[0];return null!==(n=null===(i=r([e,t.makeMapPoint(e[0]+F,e[1])],t,!0))||void 0===i?void 0:i.geometry.rings[0])&&void 0!==n?n:[]}if(2===s){var a,l,c;const e="rectangle"!==this.geometryType,s=this.centeredToggled!==e,n="rectangle"!==this.geometryType;return null!==(a=this.uniformSizeToggled!==n?null===(l=r(o,t,s))||void 0===l?void 0:l.geometry.rings[0]:null===(c=d(o,t,s))||void 0===c?void 0:c.geometry.rings[0])&&void 0!==a?a:[]}return[]}}return o}_updateVisuals(){if(!this._overlayItem){var e;const t=new S({strokeDash:[5],strokeDashColor:[255,255,255,255]});null!==(e=this.view.overlay)&&void 0!==e&&e.addItem(t),this.addHandles((0,l.hA)((()=>{var e;null!==(e=this.view.overlay)&&void 0!==e&&e.removeItem(t),null!==t&&void 0!==t&&t.destroy(),this._overlayItem=void 0}))),this._overlayItem=t}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function O(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,s._)([(0,u.MZ)({value:!1})],Z.prototype,"centeredToggled",null),(0,s._)([(0,u.MZ)()],Z.prototype,"drawOperation",void 0),(0,s._)([(0,u.MZ)({value:!0})],Z.prototype,"enabled",null),(0,s._)([(0,u.MZ)({value:!1})],Z.prototype,"uniformSizeToggled",null),(0,s._)([(0,u.MZ)({constructOnly:!0})],Z.prototype,"geometryType",void 0),(0,s._)([(0,u.MZ)({constructOnly:!0})],Z.prototype,"mode",void 0),(0,s._)([(0,u.MZ)({readOnly:!0})],Z.prototype,"type",void 0),(0,s._)([(0,u.MZ)({readOnly:!0})],Z.prototype,"updating",null),(0,s._)([(0,u.MZ)({constructOnly:!0,nonNullable:!0})],Z.prototype,"view",void 0),(0,s._)([(0,u.MZ)()],Z.prototype,"cursor",null),Z=(0,s._)([(0,h.$)("esri.views.draw.DrawScreenTool")],Z);const F=48;var E=r(82307),C=r(53430),I=r(31933),A=r(4955),W=r(55754),z=r(90992);async function P(){return async function(){return r.e(1669).then(r.bind(r,1669))}().then((e=>{let{contains:t,intersects:r,overlaps:o,simplify:s}=e;return{contains:t,intersects:r,overlaps:o,simplify:s}}))}async function U(e){const{currentSelection:t,selector:r,signal:o,sources:s,view:n}=e;if(null===s||void 0===s||!s.length)return{added:[],removed:[]};const{layers:i,layerViews:a,graphicsLayers:l}=function(e){const t=[],r=[],o=[];return e.forEach((e=>{var s,n;(0,I.yZ)(e)?t.push(e):((0,I.cM)(e)||(0,I.Qz)(e))&&null!==(s=e.layers)&&void 0!==s&&s.length?t.push(...e.layers.toArray()):(0,I.Rv)(e)&&null!==(n=e.sublayers)&&void 0!==n&&n.length?o.push(...e.sublayers.toArray()):(0,I.V0)(e)?o.push(e):(0,z.lO)(e)&&r.push(e)})),{layers:t,layerViews:r,graphicsLayers:o}}(s),d=(await(0,c.whenOrAbort)(Promise.all([D(r,i,n,o),H(r,a,n,o),V(r,l,n)]),o)).flat();if(!t)return{added:d,removed:[]};const u=t.toArray(),h=d.filter((e=>!G(u,e))),p=u.filter((e=>!G(d,e)));return t.removeMany(p),t.addMany(h),{added:h,removed:p}}const V=async(e,t,r)=>{var o;return async function(e){const{selector:t,candidates:r,view:o}=e;if(null===r||void 0===r||!r.length||!t)return[];const{spatialReference:s}=o,n=t,i=await P();return r.filter((e=>e.geometry&&"mesh"!==e.geometry.type&&i.intersects(s,n,e.geometry)))}({candidates:null!==(o=t.flatMap((e=>e.graphics.toArray())))&&void 0!==o?o:[],selector:e,view:r})},D=async(e,t,r,o)=>{const s=await(0,c.ignoreAbortErrors)(async function(e){const{layers:t,selector:r,signal:o,view:s}=e;return(0,c.whenOrAbort)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,r,o){const{outFields:s,geometry:n}=j(t,r,o);return e.outFields=s,e.geometry=n,e.returnGeometry=!0,e.outSpatialReference=o.spatialReference,e}(e.createQuery(),r,e,s),{signal:o}).then((e=>{let{features:t}=e;return t}))))),o)}({selector:e,signal:o,layers:t,view:r}));return s?L(s):[]},H=async(e,t,r,o)=>{const s=await(0,c.ignoreAbortErrors)(async function(e){const{layerViews:t,selector:r,signal:o,view:s}=e;return(0,c.whenOrAbort)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:n}=j(r,e.layer,s);return t.outFields=["*"],t.geometry=n,t.returnGeometry=!0,t.outSpatialReference=s.spatialReference,e.queryFeatures(t,{signal:o}).then((e=>{let{features:t}=e;return t}))}))),o)}({selector:e,signal:o,layerViews:t,view:r}));return s?L(s):[]};function L(e){const t=[];for(let r=0;r<e.length;r++){const o=e[r];"fulfilled"===o.status&&t.push(...o.value)}return t}function G(e,t){if(e.includes(t))return!0;const r=t.getObjectId(),o=null!=r,{layer:s,uid:n}=t;return o?e.some((e=>{if(s===e.layer)return r===e.getObjectId()})):e.some((e=>{if(s===e.layer)return n===e.uid}))}function j(e,t,r){var o;const s="renderer"in t?(0,A.o)({renderer:t.renderer}):0,n="point"===e.type?(0,W.V)(e,s,r):e,i="displayField"in t?t.displayField:null,a=(0,C.getDisplayFieldName)({displayField:i,fields:t.fields}),l=[t.objectIdField];if(null!=a&&t.fieldsIndex.has(a)&&l.push(a),"globalIdField"in t&&null!=t.globalIdField&&t.fieldsIndex.has(t.globalIdField)&&l.push(t.fieldsIndex.get(t.globalIdField).name),(0,I.F2)(t)&&null!=t.subtypeField&&t.fieldsIndex.has(t.subtypeField)&&l.push(t.fieldsIndex.get(t.subtypeField).name),"utilityNetworks"in r.map&&null!==(o=r.map.utilityNetworks)&&void 0!==o&&o.length&&((0,I.F2)(t)||"feature"===t.type)){const e=t.fieldsIndex.get("assetgroup"),r=t.fieldsIndex.get("assettype");null!==e&&void 0!==e&&e.name&&l.push(e.name),(null===r||void 0===r?void 0:r.name)&&l.push(r.name)}return{geometry:n,outFields:l}}let N=class extends a.A.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new i.default,this.sources=null,this._process=(0,c.debounce)((async(e,t)=>{const{callback:r,selector:s,completed:i}=e,a=(0,n.UT)((async e=>{const{options:t,sources:n,selection:a,view:l}=this;if((null!==n&&void 0!==n&&n.length||null!==l&&void 0!==l&&l.selectionManager.sources.length)&&l){if(s&&null!=n){var c;const r=await U({currentSelection:a,selector:s,signal:e,sources:n,view:l});i&&!1!==(null===t||void 0===t?void 0:t.persistSelection)&&(null===(c=l.selectionManager)||void 0===c||c.updateSelection((0,o.A)({current:a.toArray()},r)))}r&&r()}else a.removeAll()}));return(0,c.onAbort)(t,(()=>a.abort())),this._processTask=a,a.promise}),100)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),null===(e=this._processTask)||void 0===e||e.abort()}async _setup(){var e,t;const{view:r}=this;if(await r.whenReady(),this.destroyed)return;const o=this.options,s=null!==(e=null===o||void 0===o?void 0:o.createTool)&&void 0!==e?e:"rectangle",n=null!==(t=null===o||void 0===o?void 0:o.mode)&&void 0!==t?t:"polygon"===s?"click":"hybrid",i=Symbol();this._tool=new Z({view:r,mode:n,geometryType:s}),null!==o&&void 0!==o&&o.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,c.ignoreAbortErrors)(this._process({selector:this._selectionArea})))),i),this.addHandles([r.on("key-down",(e=>{if(!e.repeat)switch(e.key){case E.NE.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case E.NE.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),r.on("key-up",(e=>{switch(e.key){case E.NE.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case E.NE.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(i);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],i),this.addHandles((0,l.hA)((()=>r.tools.remove(this._tool)))),r.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,d.tc)(),t=this._tool.coordinates,r=this.view.spatialReference,o=t=>{e.x=t[0],e.y=t[1];const{x:r,y:o}=this.view.toMap(e);return[r,o]};if(0===t.length)return;if(1===t.length||t.every((e=>{let[r,o]=e;return r===t[0][0]&&o===t[0][1]}))){const[e,s]=o(t[0]);return new p.default({x:e,y:s,spatialReference:r})}const s=t.map(o);return 0!==s.length?((0,f.$3)(s)||s.reverse(),new y.default({spatialReference:r,rings:[s]})):void 0}};(0,s._)([(0,u.MZ)()],N.prototype,"options",void 0),(0,s._)([(0,u.MZ)({readOnly:!0})],N.prototype,"selection",void 0),(0,s._)([(0,u.MZ)()],N.prototype,"sources",void 0),(0,s._)([(0,u.MZ)({constructOnly:!0})],N.prototype,"view",void 0),N=(0,s._)([(0,h.$)("esri.widgets.support.Selector2D.SelectionOperation")],N);const B=N},14185:(e,t,r)=>{r.d(t,{GF:()=>_,LZ:()=>w,N6:()=>M,_T:()=>x,eq:()=>m,zV:()=>Z,zd:()=>O});var o=r(18690),s=r(53084),n=r(31633),i=r(20664),a=r(9392),l=r(70961),c=r(63391),d=r(66388),u=r(19247),h=r(65215),p=r(23701),y=r(5262),f=r(80963),v=r(42151);function g(e,t){const r=new u.default({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(r.z=e[2]),r}function m(e,t){return new d.default({points:e,spatialReference:t})}function w(e,t,r){const o=new p.default({paths:e,spatialReference:t});return r&&(0,y._7)(o),o}function M(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=(0,s.clone)(e);i.forEach((e=>{const t=e[0],r=e[e.length-1];(0,o.aI)(t,r)&&1!==e.length||e.push(e[0])}));let a=new h.default({rings:i,spatialReference:t});return a.rings.forEach((e=>{(0,y.$3)(e)||e.reverse()})),r&&(0,y._7)(a),n&&a.isSelfIntersecting&&(0,f.fn)(t)&&(a=(0,c.simplify)(a)),a}function _(e,t,r){const s=t.mapToLocalMultiple(e),n=[],i={x:s[0].x,y:s[0].y},a=s[1].x,l=s[1].y,c=Math.round(a-i.x),d=Math.round(l-i.y),u=Math.max(Math.abs(c),Math.abs(d));if(r){const e={x:i.x+u,y:i.y+u},t={x:i.x-u,y:i.y-u};n.push((0,v.E5)(e.x,t.y),(0,v.E5)(t.x,t.y),(0,v.E5)(t.x,e.y),(0,v.E5)(e.x,e.y))}else{const e={x:c>0?i.x+u:i.x-u,y:d>0?i.y+u:i.y-u};n.push((0,v.E5)(i.x,i.y),(0,v.E5)(e.x,i.y),(0,v.E5)(e.x,e.y),(0,v.E5)(i.x,e.y))}return b(M([n.map((e=>t.localToMap(e))).filter(o.Ru)],t.spatialReference,t.doUnnormalization,!0),n,t)}function x(e,t,r){let s=t.mapToLocalMultiple(e);if(1===s.length){const e=48,t=s[0];s=[(0,v.E5)(t.x-e,t.y+e),(0,v.E5)(t.x+e,t.y-e),(0,v.E5)(t.x+e,t.y-e),(0,v.E5)(t.x-e,t.y+e)]}const n=[],i={x:s[0].x,y:s[0].y},a={x:s[1].x,y:s[1].y};if(r){const e=Math.round(a.x-i.x),t=Math.round(a.y-i.y);n.push((0,v.E5)(i.x-e,i.y-t),(0,v.E5)(a.x,i.y-t),(0,v.E5)(a.x,a.y),(0,v.E5)(i.x-e,a.y))}else n.push((0,v.E5)(i.x,i.y),(0,v.E5)(a.x,i.y),(0,v.E5)(a.x,a.y),(0,v.E5)(i.x,a.y));return b(M([n.map((e=>t.localToMap(e))).filter(o.Ru)],t.spatialReference,t.doUnnormalization,!0),n,t)}function b(e,t,r){const o=R(t[3],t[2],r),s=R(t[1],t[2],r),n=R(t[0],t[1],r),i=R(t[0],t[3],r);return{geometry:e,midpoints:null!=o&&null!=s&&null!=n&&null!=i?{top:o,right:s,bottom:n,left:i}:null}}function R(e,t,r){k[0]=e.x,k[1]=e.y,k[2]=0,S[0]=t.x,S[1]=t.y,S[2]=0,(0,i.m)(k,k,S,.5),T.x=k[0],T.y=S[1],T.z=S[2];const o=r.localToMap(T);return null!=o?g(o,r.spatialReference):null}const T=(0,v.E5)(0,0,0),k=(0,a.vt)(),S=(0,a.vt)();function Z(e,t,r,o){const s=t.mapToLocalMultiple(e);let i=null,a=null;if(r)i=s[0],a=s[1];else{const e=s[0],t=s[1],r=Math.round(t.x-e.x),o=Math.round(t.y-e.y),n=Math.max(Math.abs(r),Math.abs(o));i=(0,v.E5)(r>0?e.x+n/2:e.x-n/2,o>0?e.y+n/2:e.y-n/2),a=(0,v.E5)(Math.abs(r)>Math.abs(o)?i.x-n/2:i.x,Math.abs(r)>Math.abs(o)?i.y:i.y-n/2)}const d=t.localToMap(i),u=t.localToMap(a);if(null==d||null==u)return null;t.doUnnormalization&&(0,y.JM)([[d,u]],t.spatialReference);const h=g(d,t.spatialReference),p=g(u,t.spatialReference),m=(0,n.GA)(t.spatialReference);let w=0;if((0,f.fn)(t.spatialReference))w=m*(0,c.distance)(h,p,null);else{const e=i.x-a.x,t=i.y-a.y;w=m*Math.sqrt(e*e+t*t)*(o||1)}const _=new l.default({center:h,radius:w,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:M(_.rings,_.spatialReference,!1),center:h,edge:p}}function O(e,t,r){const s=t.mapToLocalMultiple(e),n=s[0],i=s[1],a=Math.round(i.x-n.x),l=Math.round(i.y-n.y),c=(0,v.E5)(r?n.x:n.x+a/2,r?n.y:n.y+l/2),d=r?a:a/2,u=r?l:l/2,h=[],p=2*Math.PI/60;function y(e){const t=Math.cos(e),r=Math.sin(e);return(0,v.E5)(d*t+c.x,u*r+c.y)}for(let o=0;o<60;o++)h.push(y(o*p));h.push(h[0]);const{spatialReference:f,doUnnormalization:m}=t,w=M([h.map((e=>t.localToMap(e))).filter(o.Ru)],f,m,!1),_=t.localToMap(y(Math.PI/2)),x=t.localToMap(y(0)),b=t.localToMap(y(-Math.PI/2)),R=t.localToMap(y(Math.PI));return{geometry:w,midpoints:null!=_&&null!=x&&null!=b&&null!=R?{top:g(_,f),right:g(x,f),bottom:g(b,f),left:g(R,f)}:null}}},42151:(e,t,r)=>{r.d(t,{E5:()=>p,ZP:()=>g,vz:()=>f});var o=r(18690),s=r(94967),n=r(99809),i=r(60008),a=r(4336),l=r(20664),c=r(9392),d=r(19247),u=r(5568);function h(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=r?[e,t,r]:[e,t]}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=r?{x:e,y:t,z:r}:{x:e,y:t}}class y{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(o.Ru)}get doUnnormalization(){return!1}}class f extends y{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(t),this._defaultZ=r,this.transform=(0,n.vt)(),this.transformInv=(0,n.vt)(),this.transform=(0,n.o8)(e),(0,s.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return h(e,t,this._defaultZ)}mapToLocal(e){return p(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return h(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class v extends y{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,c.vt)(),this.tangentFrameUpWS=(0,c.vt)(),this.tangentFrameRightWS=(0,c.vt)(),this.tangentFrameForwardWS=(0,c.vt)(),this.localFrameRightWS=(0,c.vt)(),this.localFrameUpWS=(0,c.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const r=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u._.Z,this.tangentFrameForwardWS);const o=(0,c.vt)();(0,l.h)(o,this.tangentFrameForwardWS,(0,l.f)(r,this.tangentFrameForwardWS)),(0,l.d)(this.localFrameRightWS,r,o),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.e)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,i.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,i.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return h(e,t,this.defaultZ)}mapToLocal(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.worldToLocalTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=r?p(r.x/this.scale,r.y/this.scale):null}localToMap(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.localToWorldTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=r?h(r.x,r.y,this.defaultZ):null}}function g(e,t){if("2d"===e.type)return new f(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const r=t.length>2?new d.default({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new d.default({x:t[0],y:t[1],spatialReference:e.spatialReference});return new v(e,r)}return null}},70961:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var o,s=r(35143),n=r(31633),i=r(46053),a=(r(81806),r(76460),r(47249),r(85842)),l=r(34111),c=r(19247),d=r(65215),u=r(13312),h=r(7137),p=r(45417),y=r(85996);let f=o=class extends d.default{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){var e;const t=this.center,r=this.numberOfPoints;if(this.hasZ=null!==(e=null===t||void 0===t?void 0:t.hasZ)&&void 0!==e&&e,0!==this.rings.length||!t)return;const o=(0,n.oU)(this.radius,this.radiusUnit,"meters"),s=t.spatialReference;let i,a="geographic";if(s.isWebMercator?a="webMercator":(null!=(s.wkid&&y.A[s.wkid])||(s.wkt2||s.wkt)&&(0,n.x1)(s.wkt2||s.wkt))&&(a="projected"),this.geodesic){let e;switch(a){case"webMercator":e=(0,p.webMercatorToGeographic)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":e=t}i=this._createGeodesicCircle(e,o,r),"webMercator"===a&&(i=(0,p.geographicToWebMercator)(i))}else{let e;"webMercator"===a||"projected"===a?e=o/(0,n.Ao)(t.spatialReference):"geographic"===a&&(e=(0,n.vl)(o,"meters",(0,l.tO)(t.spatialReference).radius)),i=this._createPlanarCircle(t,e,r)}this.spatialReference=i.spatialReference,this.addRing(i.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:r,radiusUnit:s,geodesic:n}=this;return new o({center:null===e||void 0===e?void 0:e.clone(),numberOfPoints:t,radius:r,radiusUnit:s,geodesic:n})}_createGeodesicCircle(e,t,r){const o=[],s=[e.x,e.y];for(let i=0;i<360;i+=360/r){var n;const r=this.hasZ?[0,0,null!==(n=e.z)&&void 0!==n?n:0]:[0,0];(0,h.directGeodeticSolver)(r,s,i,t,u.default.WGS84),o.push(r)}return o.push(o[0]),new d.default({rings:[o]})}_createPlanarCircle(e,t,r){const o=[],s=2*Math.PI/r;for(let i=0;i<r;++i){var n;const r=s*i,a=[e.x+Math.cos(-r)*t,e.y+Math.sin(-r)*t];this.hasZ&&a.push(null!==(n=e.z)&&void 0!==n?n:0),o.push(a)}return o.push(o[0]),new d.default({spatialReference:e.spatialReference,rings:[o]})}};(0,s._)([(0,i.MZ)({type:c.default})],f.prototype,"center",void 0),(0,s._)([(0,i.MZ)()],f.prototype,"geodesic",void 0),(0,s._)([(0,i.MZ)()],f.prototype,"numberOfPoints",void 0),(0,s._)([(0,i.MZ)()],f.prototype,"radius",void 0),(0,s._)([(0,i.MZ)()],f.prototype,"radiusUnit",void 0),f=o=(0,s._)([(0,a.$)("esri.geometry.Circle")],f);const v=f}}]);
//# sourceMappingURL=13490.0371f39f.chunk.js.map