"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[20744,50966,94131],{20744:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var i,n=a(35143),r=(a(11265),a(46053)),s=(a(81806),a(76460),a(47249),a(85842)),o=a(25329),l=a(94131),d=a(98108),u=a(76099),h=a(63582),c=a(54761),g=a(39348);const _="esri-histogram",p={base:_,horizontalLayout:"".concat(_,"--horizontal"),verticalLayout:"".concat(_,"--vertical"),content:"".concat(_,"__content"),svg:"".concat(_,"__svg"),bar:"".concat(_,"__bar"),bars:"".concat(_,"__bars"),label:"".concat(_,"__label"),dataLines:"".concat(_,"__data-lines"),dataLinesSubgroup:"".concat(_,"__data-lines-subgroup"),dataLine:"".concat(_,"__data-line"),averageLabel:"".concat(_,"__average-label"),averageDataLine:"".concat(_,"__average-data-line"),averageSymbol:"".concat(_,"__average-symbol")};let v=i=class extends o.default{constructor(e,t){super(e,t),this._bgFillId="".concat(this.id,"-bg-fill"),this._containerNode=null,this._containerDimensions={width:0,height:0},this._defaultBarColor="#d8d8d8",this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.dataLineUpdatedFunction=null,this.messages=null,this.viewModel=new l.default}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get icon(){return"graph-histogram"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get state(){return this.viewModel.state}static fromHistogramResult(e){const{bins:t,maxValue:a,minValue:n}=e;return new i({bins:t,max:a,min:n})}render(){const{label:e,layout:t,state:a}=this,i=this.classes(p.base,d.D.widget,"horizontal"===t?p.horizontalLayout:p.verticalLayout,"disabled"===a?d.D.disabled:null);return(0,c.K)("div",{afterCreate:this._afterContainerNodeCreate,"aria-label":e,bind:this,class:i},"ready"===a?this._renderContent():null)}_renderContent(){if(!this._containerNode)return;const e=this._bgFillId,t="clip-path: url(#".concat(e,")");return(0,c.K)("div",{class:p.content},(0,c.K)("svg",{class:p.svg,xmlns:"http://www.w3.org/2000/svg"},(0,c.K)("defs",null,this._renderFillDefinition(e)),(0,c.K)("g",{style:t},this._renderBarsGroup()),this._renderLinesGroup()))}_renderBarsGroup(){return(0,c.K)("g",{class:this.classes(p.bars)},this._renderBars())}_renderBars(){const{layout:e,viewModel:{binRange:t,range:a}}=this;if(!t||!a)return;const i=t/a,{width:n,height:r}=this._containerDimensions;if(0===r&&0===n)return;if(0===r&&0!==n)return void this.scheduleRender();const[s,o]="vertical"===e?[r*i,n]:[r,n*i];return this._getBarDimensions(s,o).map(((e,t)=>{let[a,i]=e;return this._renderBar(t,a,i)}))}_renderBar(e,t,a){const{bins:i,layout:n,max:r,messages:s,viewModel:{range:o}}=this;if(!i||null==r)return;const{width:l,height:d}=this._containerDimensions,u=i.slice()[e],{count:h,maxValue:_,minValue:v}=u,m=r-_,[b,y]="vertical"===n?[0,m*(d/o)]:[l-a-m*(l/o),d-t],M=(0,g.V)(s.barLabel,{count:h,maxValue:_,minValue:v});return(0,c.K)("rect",{afterCreate:this._afterBarCreate,"aria-label":M,bind:this,class:p.bar,"data-index":e,fill:this._defaultBarColor,height:t,role:"img","shape-rendering":"crispEdges","stroke-width":"0",width:a,x:b,y:y})}_renderLinesGroup(){return(0,c.K)("g",{class:this.classes(p.dataLines)},this._renderAverageLine(),this._renderCustomLines())}_renderAverageLine(){const{average:e}=this;if(null==e)return;const t=[(0,c.K)("tspan",{class:this.classes(p.averageSymbol)},"x\u0304 "),(0,c.K)("tspan",{class:this.classes(p.averageLabel)},this.labelFormatFunction?this.labelFormatFunction(e,"average"):e)];return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup)},(0,c.K)("title",{key:"title"},e),this._renderLine(e,this.classes(p.averageDataLine)),this._renderLabel({label:t,value:e}))}_renderCustomLines(){var e;if(null!==(e=this.dataLines)&&void 0!==e&&e.length)return this.dataLines.map(((e,t)=>this._renderLineSubgroup(e,t)))}_renderLineSubgroup(e,t){const{value:a}=e;return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup),"data-index":t},(0,c.K)("title",{key:"title"},a),this._renderLine(a),this._renderLabel(e))}_renderLine(e,t){const[a,i,n,r]=this._getLinePosition(e);return(0,c.K)("line",{class:this.classes(p.dataLine,t),"shape-rendering":"crispEdges",x1:a,x2:i,y1:n,y2:r})}_renderLabel(e,t){const{label:a,value:i}=e,[n,r]=this._getLabelPosition(i);return(0,c.K)("text",{class:this.classes(p.label,t),"text-anchor":"end",transform:"horizontal"===this.layout?"rotate(270)":null,x:n,y:r-2},null!==a&&void 0!==a?a:"")}_renderFillDefinition(e){const{width:t,height:a}=this._containerDimensions;return(0,c.K)("clipPath",{id:e},(0,c.K)("rect",{height:a,width:t,x:"0",y:"0"}))}_afterContainerNodeCreate(e){this._containerNode=e,this.addHandles((0,u.EV)(e,(e=>{const{width:t,height:a}=e.contentRect;this._containerDimensions={width:t,height:a}})))}_getIndexFromElement(e){var t;const a=null===(t=e.dataset)||void 0===t?void 0:t.index,i=e.getAttribute("data-index");return null!=a?parseInt(a,10):null!=i?parseInt(i,10):null}_afterBarCreate(e){if(this.barCreatedFunction){var t;const a=null!==(t=this._getIndexFromElement(e))&&void 0!==t?t:-1;this.barCreatedFunction(a,e)}}_afterLinesSubgroupCreate(e){if(this.dataLineCreatedFunction){const t=this._getIndexFromElement(e),a=e.childNodes[1],i=e.childNodes[2]?e.childNodes[2]:null;this.dataLineCreatedFunction(a,i,t)}}_afterLinesSubgroupUpdate(e){if(this.dataLineUpdatedFunction){const t=this._getIndexFromElement(e),a=e.childNodes[1],i=e.childNodes[2]?e.childNodes[2]:null;this.dataLineUpdatedFunction(a,i,t)}}_getBarDimensions(e,t){const{bins:a,layout:i}=this,n=a?a.map((e=>e.count)):[],r=Math.max.apply(Math,n);return n.map((a=>"vertical"===i?[e/n.length,0!==r?a/r*t:0]:[0!==r?a/r*e:0,t/n.length]))}_getLinePosition(e){const{layout:t,min:a,viewModel:{range:i}}=this;if(null==a)return[0,0,0,0];const n=Math.round((e-a)/i*100)/100,{width:r,height:s}=this._containerDimensions,[o,l]=[n*r||1,s-n*s||1];return"vertical"===t?[0,"100%",l,l]:[o,o,"100%",0]}_getLabelPosition(e){const{layout:t,min:a,viewModel:{range:i}}=this;if(null==a)return[0,0];const n=Math.round((e-a)/i*100)/100,{width:r,height:s}=this._containerDimensions;return"vertical"===t?[r,s-n*s]:[0,n*r]}};(0,n._)([(0,r.MZ)()],v.prototype,"_bgFillId",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"_containerNode",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"_containerDimensions",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"_defaultBarColor",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"average",null),(0,n._)([(0,r.MZ)()],v.prototype,"barCreatedFunction",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"dataLines",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"dataLineCreatedFunction",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"dataLineUpdatedFunction",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"icon",null),(0,n._)([(0,r.MZ)()],v.prototype,"label",null),(0,n._)([(0,r.MZ)()],v.prototype,"labelFormatFunction",null),(0,n._)([(0,r.MZ)({value:"horizontal"})],v.prototype,"layout",null),(0,n._)([(0,r.MZ)()],v.prototype,"max",null),(0,n._)([(0,r.MZ)(),(0,h.G)("esri/widgets/Histogram/t9n/Histogram")],v.prototype,"messages",void 0),(0,n._)([(0,r.MZ)()],v.prototype,"min",null),(0,n._)([(0,r.MZ)({readOnly:!0})],v.prototype,"state",null),(0,n._)([(0,r.MZ)({type:l.default})],v.prototype,"viewModel",void 0),v=i=(0,n._)([(0,s.$)("esri.widgets.Histogram")],v);const m=v},20873:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(35143),n=a(46053),r=(a(81806),a(76460),a(47249),a(85842)),s=a(6515),o=a(7095);let l=class extends s.default{constructor(e){super(e),this.average=null,this.bins=null,this.hasTimeData=!1,this.labelFormatFunction=e=>{if(this.hasTimeData)return(0,o.formatDateLabel)(e);const{max:t,min:a,precision:i}=this,n=t-a>10?2:i;return(0,o.formatNumberLabel)(parseFloat(e.toFixed(n)))},this.rangeType="equal",this.standardDeviation=null}generateWhereClause(e){const{rangeType:t,state:a,values:i}=this;if("ready"!==a||null===i||void 0===i||!i.length||null==e)return null;const n=i[0],r=i.length>1?i[i.length-1]:null;switch(t){case"equal":return"".concat(e," = ").concat(n);case"not-equal":return"".concat(e," <> ").concat(n);case"less-than":return"".concat(e," < ").concat(n);case"greater-than":return"".concat(e," > ").concat(n);case"at-least":return"".concat(e," >= ").concat(n);case"at-most":return"".concat(e," <= ").concat(n);case"between":return"".concat(e," BETWEEN ").concat(n," AND ").concat(r);case"not-between":return"".concat(e," NOT BETWEEN ").concat(n," AND ").concat(r);default:return null}}};(0,i._)([(0,n.MZ)()],l.prototype,"average",void 0),(0,i._)([(0,n.MZ)()],l.prototype,"bins",void 0),(0,i._)([(0,n.MZ)()],l.prototype,"hasTimeData",void 0),(0,i._)([(0,n.MZ)()],l.prototype,"labelFormatFunction",void 0),(0,i._)([(0,n.MZ)()],l.prototype,"rangeType",void 0),(0,i._)([(0,n.MZ)()],l.prototype,"standardDeviation",void 0),l=(0,i._)([(0,r.$)("esri.widgets.HistogramRangeSlider.HistogramRangeSliderViewModel")],l);const d=l},50966:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var i=a(35143),n=a(69539),r=a(68134),s=a(46053),o=a(40565),l=(a(81806),a(47249),a(85842)),d=a(20744),u=a(22785),h=a(25329),c=a(20873),g=a(7095),_=a(98108),p=(a(76099),a(63582)),v=a(54761);const m="esri-histogram-range-slider",b={base:m,sliderContainer:"".concat(m,"__slider-container"),histogramContainer:"".concat(m,"__histogram-container"),rangeTypePrefix:"".concat(m,"__range-type--")};let y=class extends h.default{constructor(e,t){super(e,t),this._barElements=[],this._histogram=null,this._slider=null,this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.excludedBarColor=new n.default("#d7e5f0"),this.includedBarColor=new n.default("#599dd4"),this.messages=null,this.standardDeviationCount=1,this.viewModel=new c.default}initialize(){const{average:e,bins:t,hasTimeData:a,max:i,min:n,viewModel:s}=this;this._updateBarFill=this._updateBarFill.bind(this),this._histogram=new d.default({average:e,bins:t,barCreatedFunction:(e,t)=>{0===e&&(this._barElements=[]),this._barElements.push(t),this._updateBarFill(e,t),this.barCreatedFunction&&this.barCreatedFunction(e,t)},dataLines:this._getDataLines(),dataLineCreatedFunction:(e,t)=>{this.dataLineCreatedFunction&&this.dataLineCreatedFunction(e,t)},labelFormatFunction:this.labelFormatFunction,layout:"horizontal",max:i,min:n}),this._slider=new u.default({labelFormatFunction:this.labelFormatFunction,layout:"horizontal",visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!a,viewModel:s}),this.addHandles([this._slider.on("max-change",(e=>this.emit("max-change",e))),this._slider.on("min-change",(e=>this.emit("min-change",e))),this._slider.on("segment-drag",(e=>{this._updateBarFills(),this.emit("segment-drag",e)})),this._slider.on("thumb-change",(e=>{this._updateBarFills(),this.emit("thumb-change",e)})),this._slider.on("thumb-drag",(e=>{this._updateBarFills(),this.emit("thumb-drag",e)})),(0,r.watch)((()=>this.bins),(e=>{if(e&&this._histogram.bins){const t=this._histogram.bins.length-e.length;this._barElements.splice(-t,t)}else this._barElements=[];this._histogram.set({bins:e}),this._updateBarFills(),this.scheduleRender()})),(0,r.watch)((()=>[this.max,this.min,this.rangeType,this.values]),(e=>{let[t,a]=e;this._histogram.set({max:t,min:a}),this._updateBarFills(),this.scheduleRender()})),(0,r.watch)((()=>[this.average,this.dataLines,this.standardDeviation,this.standardDeviationCount]),(e=>{let[t]=e;this._histogram.set({average:t,dataLines:this._getDataLines()})})),(0,r.watch)((()=>this.labelFormatFunction),(e=>{this._histogram.set({labelFormatFunction:e})})),(0,r.watch)((()=>this.hasTimeData),(e=>{this._slider.set({rangeLabelInputsEnabled:!e})}))])}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get hasTimeData(){return this.viewModel.hasTimeData}set hasTimeData(e){this.viewModel.hasTimeData=e}get icon(){return"arrow-double-horizontal"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get precision(){return this.viewModel.precision}set precision(e){this.viewModel.precision=e}get rangeType(){return this.viewModel.rangeType}set rangeType(e){this.viewModel.rangeType=e}get standardDeviation(){return this.viewModel.standardDeviation}set standardDeviation(e){this.viewModel.standardDeviation=e}get values(){return this.viewModel.values}set values(e){this.viewModel.values=e}generateWhereClause(e){return this.viewModel.generateWhereClause(e)}render(){const{rangeType:e,viewModel:t,label:a}=this,i=this.classes(b.base,_.D.widget,"".concat(b.rangeTypePrefix).concat(e),"disabled"===t.state?_.D.disabled:null);return(0,v.K)("div",{"aria-label":a,class:i},"disabled"===t.state?null:this._renderContent())}_renderContent(){return[this._renderHistogram(),this._renderSlider()]}_renderSlider(){return(0,v.K)("div",{class:b.sliderContainer,key:"".concat(this.id,"-slider-container")},this._slider.render())}_renderHistogram(){return(0,v.K)("div",{class:b.histogramContainer},this._histogram.render())}_getDataLines(){return[...this._getStandardDeviationDataLines(),...this.dataLines||[]]}_getStandardDeviationDataLines(){const{average:e,standardDeviation:t,standardDeviationCount:a}=this;return(0,g.getDeviationValues)(t,e,a).map((e=>({value:e})))}_updateBarFills(){this._barElements.forEach(((e,t)=>this._updateBarFill(t,e)))}_updateBarFill(e,t){var a,i;t.setAttribute("fill",null!==(a=null===(i=this._getFillForBar(e))||void 0===i?void 0:i.toHex())&&void 0!==a?a:"")}_getFillForBar(e){const{bins:t,rangeType:a,values:i}=this;if(-1===e||null===t||void 0===t||!t.length||!a||null===i||void 0===i||!i.length)return null;const n=t[e];if(!n)return null;const{maxValue:r,minValue:s}=n,o=r-s,l=i[0]>s&&i[0]<r;switch(a){case"equal":case"not-equal":return this.includedBarColor;case"less-than":case"at-most":return l?this._getBlendedColor((i[0]-s)/o):r<=i[0]?this.includedBarColor:this.excludedBarColor;case"greater-than":case"at-least":return l?this._getBlendedColor(1-(i[0]-s)/o):s>=i[0]?this.includedBarColor:this.excludedBarColor;case"between":if(2===i.length)return i[0]>s&&i[0]<r?this._getBlendedColor(1-(i[0]-s)/o):i[1]>s&&i[1]<r?this._getBlendedColor((i[1]-s)/o):s>=i[0]&&r<=i[1]?this.includedBarColor:this.excludedBarColor;break;case"not-between":if(2===i.length)return i[0]>s&&i[0]<r?this._getBlendedColor((i[0]-s)/o):i[1]>s&&i[1]<r?this._getBlendedColor(1-(i[1]-s)/o):s>i[0]&&r<i[1]?this.excludedBarColor:this.includedBarColor}return this.includedBarColor}_getBlendedColor(e){return n.default.blendColors(this.excludedBarColor,this.includedBarColor,e)}};(0,i._)([(0,s.MZ)()],y.prototype,"average",null),(0,i._)([(0,s.MZ)()],y.prototype,"barCreatedFunction",void 0),(0,i._)([(0,s.MZ)()],y.prototype,"bins",null),(0,i._)([(0,s.MZ)()],y.prototype,"dataLines",void 0),(0,i._)([(0,s.MZ)()],y.prototype,"dataLineCreatedFunction",void 0),(0,i._)([(0,s.MZ)({type:n.default,json:{type:[o.jz],write:!0}})],y.prototype,"excludedBarColor",void 0),(0,i._)([(0,s.MZ)()],y.prototype,"hasTimeData",null),(0,i._)([(0,s.MZ)({type:n.default,json:{type:[o.jz],write:!0}})],y.prototype,"includedBarColor",void 0),(0,i._)([(0,s.MZ)()],y.prototype,"icon",null),(0,i._)([(0,s.MZ)()],y.prototype,"label",null),(0,i._)([(0,s.MZ)()],y.prototype,"labelFormatFunction",null),(0,i._)([(0,s.MZ)()],y.prototype,"max",null),(0,i._)([(0,s.MZ)(),(0,p.G)("esri/widgets/HistogramRangeSlider/t9n/HistogramRangeSlider")],y.prototype,"messages",void 0),(0,i._)([(0,s.MZ)()],y.prototype,"min",null),(0,i._)([(0,s.MZ)()],y.prototype,"precision",null),(0,i._)([(0,s.MZ)()],y.prototype,"rangeType",null),(0,i._)([(0,s.MZ)()],y.prototype,"standardDeviation",null),(0,i._)([(0,s.MZ)()],y.prototype,"standardDeviationCount",void 0),(0,i._)([(0,s.MZ)()],y.prototype,"values",null),(0,i._)([(0,s.MZ)({type:c.default})],y.prototype,"viewModel",void 0),y=(0,i._)([(0,l.$)("esri.widgets.HistogramRangeSlider")],y);const M=y},94131:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var i=a(35143),n=a(91967),r=a(46053),s=(a(81806),a(76460),a(47249),a(85842));let o=class extends n.default{constructor(e){super(e),this.average=null,this.bins=null,this.max=null,this.min=null}get binRange(){const{bins:e}=this;return e&&e.length>1?e[e.length-1].maxValue-e[0].minValue:0}set labelFormatFunction(e){this._set("labelFormatFunction",e)}get range(){const{max:e,min:t}=this;return null!=e&&null!=t?e-t:0}get state(){const{bins:e,range:t}=this;return t>0&&null!==e&&void 0!==e&&e.length?"ready":"disabled"}};(0,i._)([(0,r.MZ)()],o.prototype,"average",void 0),(0,i._)([(0,r.MZ)()],o.prototype,"bins",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],o.prototype,"binRange",null),(0,i._)([(0,r.MZ)()],o.prototype,"labelFormatFunction",null),(0,i._)([(0,r.MZ)()],o.prototype,"max",void 0),(0,i._)([(0,r.MZ)()],o.prototype,"min",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],o.prototype,"range",null),(0,i._)([(0,r.MZ)({readOnly:!0})],o.prototype,"state",null),o=(0,i._)([(0,s.$)("esri.widgets.Histogram.HistogramViewModel")],o);const l=o}}]);
//# sourceMappingURL=50966.98c91130.chunk.js.map