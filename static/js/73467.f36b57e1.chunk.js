"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[30617,34890,73467],{770:(e,a,t)=>{t.d(a,{bG:()=>s,Ty:()=>o,YJ:()=>m,Fq:()=>u,vt:()=>i});var r=t(53084),n=t(42633);class l{constructor(e){const{name:a,label:t,description:r,schemes:l}=e;this.name=a,this.label=t,this.description=r,this.schemes=l;const s=e.basemapGroups||n.Np;let i=[];Object.keys(s).forEach((e=>{i=i.concat(s[e])})),this.supportedBasemaps=i,this.basemapGroups=s}isBasemapSupported(e){const a=(0,n.T1)(e,this.supportedBasemaps);return!(!a||!this.supportedBasemaps.includes(a))}getRawSchemes(e){const{basemapId:a,basemapTheme:t}=function(e,a,t){let r=null,l=null;if(a&&(r=(0,n.T1)(a,e,!1),r)){const e=(0,n.BV)(r);null!=e&&(l=e)}return!r&&t&&(r="dark"===t?"dark-gray":"gray",l=t),r||l||(r="gray",l="light"),{basemapId:r,basemapTheme:l}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let l=t;if(a){const e=(0,n.BV)(a,this.basemapGroups);null!=e&&(l=e)}let s=e.geometryType;"multipoint"===s?s="point":"mesh"===s&&(s="polygon");const i=this.schemes[s]||this.schemes.default;return{schemesInfo:(0,r.clone)(i[l]),basemapId:a,basemapTheme:t}}}function s(e){const a=e.themeDictionary,t=new Map;for(const r in a){const e=a[r];t.set(r,new l(e))}return t}function i(e,a){const t=[];return e.forEach((e=>{e.isBasemapSupported(a)&&t.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),t}function o(e,a){if(!e)return;if(!a)return;let t=null;const r=[a.primaryScheme,...a.secondarySchemes];for(const l of r){var n;if((null===(n=l.name)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()){t=l;break}}return t}function m(e,a,t){if(!e&&!a)return[];if(!t)return[];const r=!(null!==e&&void 0!==e&&e.length),n=!(null!==a&&void 0!==a&&a.length),l=[t.primaryScheme,...t.secondarySchemes],s=[];for(const i of l){const t=!!r||e.some((e=>i.tags.includes(e))),l=!n&&a.some((e=>i.tags.includes(e)));t&&!l&&s.push(i)}return s}function u(e){const a=e.theme;if(a)return a.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},30617:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var r=t(89379),n=t(53986),l=t(50076),s=t(53430),i=t(4414),o=t(28383),m=t(42633),u=t(11563);const d=["layer"],c=["layerAdapter"],p=s.numericTypes;async function h(e){const a=await async function(e){if(null===e||void 0===e||!e.layer||!e.view)throw new l.default("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const a=[u.mb.CSVLayer,u.mb.FeatureLayer,u.mb.GeoJSONLayer,u.mb.KnowledgeGraphSublayer,u.mb.OGCFeatureLayer,u.mb.OrientedImageryLayer,u.mb.ParquetLayer,u.mb.StreamLayer,u.mb.WFSLayer],{layer:t}=e,s=(0,n.A)(e,d),c=(0,u.Jg)(t,a);if(!c)throw new l.default("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+(0,u.Ho)(a).join(", "));const h=(0,r.A)({layerAdapter:c},s);h.radius=null==h.radius?null==h.blurRadius?18:(0,i.zp)(h.blurRadius):h.radius;const f=null!=h.signal?{signal:h.signal}:null;await c.load(f);const y=h.field,b=y?c.getField(y):null,w=await(0,m.EG)({field:y}),g=(0,o.MH)(c,w,"heatmap-statistics:invalid-parameters");if(g)throw g;if(b){const e=(0,o.a)(c,b,"heatmap-statistics:invalid-parameters",p);if(e)throw e}return h}(e),{layerAdapter:t}=a,s=(0,n.A)(a,c);return t.heatmapStatistics(s)}},34890:(e,a,t)=>{t.r(a),t.d(a,{cloneScheme:()=>p,getSchemeByName:()=>d,getSchemes:()=>u,getSchemesByTag:()=>c,getThemes:()=>m});var r=t(89379),n=t(69539),l=t(18690),s=t(89132),i=t(770);const o=(0,i.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features using heatmap.",schemes:{default:{light:{primary:"heatmap-v1",secondary:["heatmap-v2","heatmap-v3","heatmap-plasma","heatmap-cividis","neutral-yellow-orange","neutral-yellow-green","neutral-yellow-purple","neutral-yellow-magenta","neutral-white-blue","neutral-white-blue-metal","neutral-white-gold","neutral-yellow-bronze","heatmap-v4","heatmap-viridis","heatmap-magma","heatmap-inferno","dark-yellow-orange","dark-yellow-green","dark-yellow-purple","dark-yellow-magenta","dark-white-blue","dark-white-blue-metal","dark-white-gold","dark-yellow-bronze"]},dark:{primary:"heatmap-v4",secondary:["heatmap-inferno","heatmap-viridis","heatmap-magma","dark-white-blue","dark-yellow-orange","dark-yellow-green","dark-yellow-purple","dark-yellow-magenta","dark-white-blue-metal","dark-white-gold","dark-yellow-bronze","heatmap-v1","heatmap-v2","heatmap-v3","heatmap-plasma","heatmap-cividis","neutral-yellow-orange","neutral-yellow-green","neutral-yellow-purple","neutral-yellow-magenta","neutral-white-blue","neutral-white-blue-metal","neutral-white-gold","neutral-yellow-bronze"]}}}}}});function m(e){return(0,i.vt)(o,e)}function u(e){const a="default",t=(0,i.Fq)({basemap:e.basemap,basemapTheme:e.basemapTheme,theme:o.get(a)});if(!t)return;const{schemesInfo:r,basemapId:n,basemapTheme:s}=t,m="".concat(a,"/").concat(n,"/");return{primaryScheme:h(r.primary,m+r.primary),secondarySchemes:r.secondary.map((e=>h(e,m+e))).filter(l.Ru),basemapId:n,basemapTheme:s}}function d(e){return(0,i.Ty)(e.name,u(e))}function c(e){return(0,i.YJ)(e.includedTags,e.excludedTags,u(e))}function p(e){if(!e)return;const a=(0,r.A)({},e);return a.colors=a.colors.map((e=>new n.default(e))),a.tags=[...a.tags],a}function h(e,a){var t;const r=s.A[e];if(r)return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new n.default(e))),opacity:e.opacity}}({id:a,name:r.name,tags:r.tags,colors:null!==(t=r.stops)&&void 0!==t?t:[],opacity:.7})}},73467:(e,a,t)=>{t.r(a),t.d(a,{createRenderer:()=>g,updateRenderer:()=>v});var r=t(89379),n=t(69539),l=t(59784),s=t(50076),i=t(72690),o=t(9922),m=t(83804),u=t(4414),d=t(51006),c=t(30617),p=t(42633),h=t(11563),f=t(34890);const y=.01;async function b(e,a){var t,r,s;const{field:u,basemap:c,radius:p,fadeToTransparent:h,heatmapScheme:b,view:g}=a,{scheme:v,basemapId:T,basemapTheme:S}=await async function(e){let a=e.scheme,t=null,r=null;const n=await(0,d.Ib)(e.basemap,e.view);if(t=null!=n.basemapId?n.basemapId:null,r=null!=n.basemapTheme?n.basemapTheme:null,a)return{scheme:(0,f.cloneScheme)(a),basemapId:t,basemapTheme:r};const l=(0,f.getSchemes)({basemapTheme:r});return l&&(a=l.primaryScheme,t=l.basemapId,r=l.basemapTheme),{scheme:a,basemapId:t,basemapTheme:r}}({basemap:c,scheme:b,view:g}),k=v.colors,I=k.length,R=null==e.min,L=R?[0,.04]:[e.min,e.max];let G;const B=null!==(t=a.fadeRatio)&&void 0!==t?t:0,A=null!==(r=a.maxRatio)&&void 0!==r?r:0,F=null!==(s=a.minRatio)&&void 0!==s?s:0,C=(A-F)/(I-1),x=k[0],z=h?F:y,O=[new m.default({ratio:0,color:new n.default([x.r,x.g,x.b,0])}),new m.default({ratio:y,color:new n.default([x.r,x.g,x.b,0])}),new m.default({ratio:z,color:new n.default([x.r,x.g,x.b,z])})];return(0,l.Iy)(k,I).forEach(((e,a)=>{const t=F+C*a;O.push(new m.default({ratio:t,color:e}))})),h&&(w(O,B),G=new o.default({fadeRatio:B})),{renderer:new i.default({authoringInfo:G,radius:p,colorStops:O,field:u,minDensity:L[0],maxDensity:L[1]}),statistics:e,defaultValuesUsed:R,scheme:(0,f.cloneScheme)(v),basemapId:T,basemapTheme:S}}function w(e,a){const t=10*(1-a)+1,r=e.length-3,n=e[2].color.a;e.forEach(((e,l)=>{if(l<=2)return;const{color:s}=e,i=(l-3)/r;s.a=0===a?1:Math.min(Math.max(i*t+i+n,n),1)}))}async function g(e){var a;const t=await async function(e){var a,t,n,l,i;if(null===e||void 0===e||!e.layer||!e.view)throw new s.default("heatmap-renderer:missing-parameters","'layer' and 'view' parameters are required");const o=(0,r.A)((0,r.A)({},e),{},{layer:e.layer,view:e.view});null!==(a=o.radius)&&void 0!==a||(o.radius=null==o.blurRadius?18:(0,u.zp)(o.blurRadius)),null!==(t=o.minRatio)&&void 0!==t||(o.minRatio=.01),null!==(n=o.maxRatio)&&void 0!==n||(o.maxRatio=1),null!==(l=o.fadeRatio)&&void 0!==l||(o.fadeRatio=.2),null!==(i=o.fadeToTransparent)&&void 0!==i||(o.fadeToTransparent=!0);const m=[h.mb.CSVLayer,h.mb.FeatureLayer,h.mb.GeoJSONLayer,h.mb.KnowledgeGraphSublayer,h.mb.OGCFeatureLayer,h.mb.OrientedImageryLayer,h.mb.ParquetLayer,h.mb.StreamLayer,h.mb.WFSLayer],c=(0,h.Jg)(o.layer,m);if(!c)throw new s.default("heatmap-renderer:invalid-parameters","'layer' must be one of these types: "+(0,h.Ho)(m).join(", "));o.layer=c;const f=null!=o.signal?{signal:o.signal}:null;await c.load(f);const y=await(0,p.EG)({field:o.field}),b=(0,d.MH)(c,y,"heatmap-renderer:invalid-parameters");if(b)throw b;return o}(e);return b(null!==(a=t.statistics)&&void 0!==a?a:await(0,c.default)({layer:t.layer,field:t.field,radius:t.radius,view:t.view,filter:t.filter,signal:t.signal}),t)}function v(e){var a;const{fadeRatio:t,renderer:r}=e,n=r.clone(),l=null!==t&&void 0!==t?t:(null===n||void 0===n||null===(a=n.authoringInfo)||void 0===a?void 0:a.fadeRatio)||0;return w(n.colorStops,l),n.authoringInfo?n.authoringInfo.fadeRatio=l:n.authoringInfo=new o.default({fadeRatio:l}),n}}}]);
//# sourceMappingURL=73467.f36b57e1.chunk.js.map