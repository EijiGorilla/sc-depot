"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[71552],{71552:(e,i,t)=>{t.r(i),t.d(i,{default:()=>N});var s=t(35143),r=t(42553),n=t(76460),a=t(18288),o=t(46053),l=(t(81806),t(47249),t(85842)),u=t(20664),p=t(9392),d=t(19247),c=t(13312),g=t(80963);function h(e){const i=/^(days?|hours?|minutes?|seconds?|d|h|m|s) since (\d{1,4})-(\d{1,2})-(\d{1,2})[ |T](\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[\s|Z]?(([+|\-|\s?])(\d{1,2}):(\d{1,2}))?$/i.exec(e);if(null==i)return{didParse:!1};const[,t,s,r,n,a,o,l,u,p,d,c,g]=i;let h="seconds";const y=t.charAt(0).toLowerCase();"d"===y?h="days":"h"===y?h="hours":"m"===y&&(h="minutes");const v=parseInt(s,10);if(Number.isNaN(v))return{didParse:!1};const m=parseInt(r,10);if(Number.isNaN(m)||m<1||m>12)return{didParse:!1};const f=parseInt(n,10);if(Number.isNaN(f)||f<1||f>31)return{didParse:!1};if(2===m){const e=v%4==0&&(v%100!=0||v%400==0);if(e&&f>29||!e&&f>28)return{didParse:!1}}else if((4===m||6===m||9===m||11===m)&&f>30)return{didParse:!1};const S=parseInt(a,10);if(Number.isNaN(S)||S<0||S>23)return{didParse:!1};const x=parseInt(o,10);if(Number.isNaN(x)||x<0||x>59)return{didParse:!1};const z=parseInt(l,10);if(Number.isNaN(z)||z<0||z>59)return{didParse:!1};let N=1,b=0,R=0;if(d&&(N="-"===d?-1:1),c){if(b=parseInt(c,10),Number.isNaN(b)||b<0)return{didParse:!1};if(0!==b){const e=N*b;if(e<-12||e>14)return{didParse:!1}}}if(g&&(R=parseInt(g,10),Number.isNaN(R)||R<0||R>59))return{didParse:!1};const _="".concat(v).padStart(4,"0"),M="".concat(m).padStart(2,"0"),Z="".concat(f).padStart(2,"0"),j="".concat(S).padStart(2,"0"),w="".concat(x).padStart(2,"0"),I="".concat(z).padStart(2,"0");let P="Z";return 0===b&&0===R||(P=N>0?"+":"-",P+="".concat(b).padStart(2,"0"),P+=":",P+="".concat(R).padStart(2,"0")),{didParse:!0,unit:h,reference:new Date("".concat(_,"-").concat(M,"-").concat(Z,"T").concat(j,":").concat(w,":").concat(I,".000").concat(P))}}let y=class extends r.A{constructor(){super(...arguments),this.values=null}};(0,s._)([(0,o.MZ)({type:[Number],json:{write:!0}})],y.prototype,"values",void 0),y=(0,s._)([(0,l.$)("esri.layers.voxel.VoxelIrregularSpacing")],y);const v=y;let m=class extends r.A{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,s._)([(0,o.MZ)({type:Number,json:{write:!0}})],m.prototype,"scale",void 0),(0,s._)([(0,o.MZ)({type:Number,json:{write:!0}})],m.prototype,"offset",void 0),m=(0,s._)([(0,l.$)("esri.layers.voxel.VoxelRegularSpacing")],m);const f=m;let S=class extends r.A{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){var e;return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(null===(e=this.irregularSpacing)||void 0===e?void 0:e.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}};(0,s._)([(0,o.MZ)({type:v,json:{write:!0}})],S.prototype,"irregularSpacing",void 0),(0,s._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],S.prototype,"isPositiveUp",void 0),(0,s._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],S.prototype,"isWrappedDateLine",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],S.prototype,"label",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],S.prototype,"name",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],S.prototype,"quantity",void 0),(0,s._)([(0,o.MZ)({type:f,json:{write:!0}})],S.prototype,"regularSpacing",void 0),(0,s._)([(0,o.MZ)({type:Number,json:{write:!0}})],S.prototype,"size",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],S.prototype,"unit",void 0),(0,s._)([(0,o.MZ)({type:Boolean,json:{read:!1}})],S.prototype,"isRegular",null),S=(0,s._)([(0,l.$)("esri.layers.voxel.VoxelDimension")],S);const x=S;let z=class extends r.A{constructor(e){super(e),this.id=0,this.dimensions=null,this.spatialReference=c.default.WGS84}get zDimension(){if(!this.dimensions)return-1;if(!Array.isArray(this.dimensions))return-1;if(4!==this.dimensions.length)return-1;for(let e=2;e<4;++e)if(this.dimensions[e].size>0)return e;return-1}get isValid(){return!!this.dimensions&&!!Array.isArray(this.dimensions)&&4===this.dimensions.length&&!(this.dimensions[0].size<1||this.dimensions[1].size<1)&&!(-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),i=this.dimensions[1].getRange(),t=this.dimensions[2],s=t.isRegular?t.getRange():[0,t.size];return[e[0],i[0],s[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),i=this.dimensions[1].getRange(),t=this.dimensions[2],s=t.isRegular?t.getRange():[0,t.size],r=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let n=0;n<3;++n)r[n]<2?r[n]=1:r[n]-=1;return t.isRegular&&!t.isPositiveUp&&(r[2]*=-1),[(e[1]-e[0])/r[0],(i[1]-i[0])/r[1],(s[1]-s[0])/r[2]]}get volumeType(){if(this.isValid){const e=this.dimensions[2].size>0;let i=this.dimensions[3].size>0;if(i){const e=this.dimensions[3];i="time"===e.quantity,i&&null!==e.unit&&(i=h(e.unit).didParse)}if(!e&&i)return"xyt";if(e&&i)return"xyzt"}return"xyz"}get sizeInVoxels(){if(!this.isValid)return[0,0,0];const e=this.zDimension;return[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[e].size]}get timeStops(){var e;if("xyzt"!==this.volumeType)return[];const i=this.dimensions[3],t=[],s=h(i.unit);if(s.didParse)if(i.isRegular){var r,n,o;const e=null!==(r=null===(n=i.regularSpacing)||void 0===n?void 0:n.offset)&&void 0!==r?r:0,l=(null===(o=i.regularSpacing)||void 0===o?void 0:o.scale)||1;for(let r=0;r<i.size;++r){const i=e+l*r;t.push((0,a.mi)(s.reference,i,s.unit))}}else if(Array.isArray(null===(e=i.irregularSpacing)||void 0===e?void 0:e.values)&&i.irregularSpacing.values.length>0)for(let l=0;l<i.irregularSpacing.values.length;++l){const e=i.irregularSpacing.values[l];t.push((0,a.mi)(s.reference,e,s.unit))}return t}computeVoxelSpaceLocation(e){var i,t;if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return n.A.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,g.aI)(this.spatialReference,e.spatialReference))return n.A.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const s=(0,p.fA)(e.x,e.y,null!==(i=e.z)&&void 0!==i?i:0);(0,u.d)(s,s,this.originInLayerSpace3D),(0,u.E)(s,s,this.voxelSizeInLayerSpaceSigned);const r=this.dimensions[this.zDimension];if(!r.isRegular&&Array.isArray(null===(t=r.irregularSpacing)||void 0===t?void 0:t.values)&&r.irregularSpacing.values.length>1){var a;const i=null!==(a=e.z)&&void 0!==a?a:0,t=r.irregularSpacing.values,n=r.isPositiveUp?1:-1,o=t.reduce(((e,t)=>Math.abs(n*t-i)<Math.abs(n*e-i)?t:e));for(let e=0;e<t.length;++e)if(t[e]===o){s[2]=e;break}}return[s[0],s[1],s[2]]}computeLayerSpaceLocation(e){var i;if(!this.isValid)return new d.default({x:0,y:0,spatialReference:this.spatialReference});const t=(0,p.ci)(e);if((0,u.C)(t,t,this.voxelSizeInLayerSpaceSigned),(0,u.g)(t,t,this.originInLayerSpace3D),"xyt"===this.volumeType)return new d.default({x:t[0],y:t[1],spatialReference:this.spatialReference});const s=this.dimensions[this.zDimension];return s.isRegular||Array.isArray(null===(i=s.irregularSpacing)||void 0===i?void 0:i.values)&&(e[2]<0?t[2]=s.irregularSpacing.values[0]:e[2]<s.irregularSpacing.values.length?t[2]=s.irregularSpacing.values[e[2]]:t[2]=s.irregularSpacing.values[s.irregularSpacing.values.length-1],s.isPositiveUp||(t[2]*=-1)),new d.default({x:t[0],y:t[1],z:t[2],spatialReference:this.spatialReference})}};(0,s._)([(0,o.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],z.prototype,"id",void 0),(0,s._)([(0,o.MZ)({type:[x],json:{write:{enabled:!0,isRequired:!0}}})],z.prototype,"dimensions",void 0),(0,s._)([(0,o.MZ)({type:c.default,json:{read:{enabled:!1}}})],z.prototype,"spatialReference",void 0),(0,s._)([(0,o.MZ)({type:Number,json:{read:!1}})],z.prototype,"zDimension",null),(0,s._)([(0,o.MZ)({type:[Boolean],json:{read:!1}})],z.prototype,"isValid",null),(0,s._)([(0,o.MZ)({type:[Number],json:{read:!1}})],z.prototype,"originInLayerSpace3D",null),(0,s._)([(0,o.MZ)({type:[Number],json:{read:!1}})],z.prototype,"voxelSizeInLayerSpaceSigned",null),(0,s._)([(0,o.MZ)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],z.prototype,"volumeType",null),(0,s._)([(0,o.MZ)({type:[Number],json:{read:!1}})],z.prototype,"sizeInVoxels",null),(0,s._)([(0,o.MZ)({type:[Date],json:{read:!1,write:!1}})],z.prototype,"timeStops",null),z=(0,s._)([(0,l.$)("esri.layers.voxel.VoxelVolume")],z);const N=z}}]);
//# sourceMappingURL=71552.cd556fe7.chunk.js.map