"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[30416],{29201:(e,t,i)=>{i.d(t,{I:()=>E,a:()=>T,b:()=>O});var r,s,n=i(57528),o=i(34981),a=i(26917),c=i(59395),l=i(90080),u=i(94192),p=i(80883),d=i(3799),h=i(21390),v=i(86955),f=i(70367),I=i(66470),P=i(91911),_=i(31432),g=i(2687);class T extends _.Y{}function O(e){const t=new g.N5,{vertex:i,fragment:_}=t,{output:T,perspectiveInterpolation:O}=e;return(0,d.NB)(i,e),t.include(c.d,e),t.include(u.Z,e),t.fragment.include(a.HQ,e),t.include(l.g,e),t.include(P.z,e),t.attributes.add(I.r.POSITION,"vec3"),t.attributes.add(I.r.UV0,"vec2"),O&&t.attributes.add(I.r.PERSPECTIVEDIVIDE,"float"),i.main.add((0,v.H)(r||(r=(0,n.A)(["\n    vpos = position;\n    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n    vTexCoord = uv0;\n    gl_Position = transformPosition(proj, view, vpos);\n    ",""])),(0,v.If)(O,"gl_Position *= perspectiveDivide;"))),t.varyings.add("vpos","vec3"),t.varyings.add("vTexCoord","vec2"),_.include(p.a),_.uniforms.add(new h.m("opacity",(e=>e.opacity)),new f.N("tex",(e=>e.texture))).main.add((0,v.H)(s||(s=(0,n.A)(["\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n    ","\n    vec4 finalColor = texture(tex, vTexCoord) * opacity;\n    outputColorHighlightOID(finalColor, vpos);"])),(0,v.If)(T===o.V.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;"))),t}const E=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:T,build:O},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,i)=>{i.d(t,{r:()=>x});var r=i(89379),s=i(88105),n=i(34981),o=i(83490),a=i(75803),c=i(45463),l=i(60322),u=i(77730),p=i(86994),d=i(66470),h=i(82809),v=i(86401),f=i(63928),I=i(52757),P=i(16506),_=i(59246),g=i(72001),T=i(96643),O=i(29201),E=i(57162);class m extends _.w{constructor(e,t){super(e,t,new P.$(O.I,(()=>i.e(48391).then(i.bind(i,48391)))),A)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:s,enableOffset:o,cullFace:a}=e,c=i===g.Y.NONE,u=i===g.Y.FrontFace;return(0,E.Ey)({blending:(0,n.RN)(r)?c?E.Os:(0,l.ez)(i):null,culling:(0,E.Xt)(a),depthTest:{func:(0,l.K_)(i)},depthWrite:(0,l.z5)(e),drawBuffers:(0,l.m6)(i,r),colorWrite:E.kn,stencilWrite:s?T.v0:null,stencilTest:s?t?T.a9:T.qh:null,polygonOffset:c||u?null:(0,l.aB)(o)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const A=new Map([[d.r.POSITION,0],[d.r.UV0,2],[d.r.PERSPECTIVEDIVIDE,3]]);var D=i(35143),b=i(97808),N=i(42717),w=i(6485),y=i(94570);class C extends y.E{constructor(){super(...arguments),this.cullFace=o.s2.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=b.I.None,this.emissionSource=N.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,D._)([(0,w.W)({count:o.s2.COUNT})],C.prototype,"cullFace",void 0),(0,D._)([(0,w.W)()],C.prototype,"enableOffset",void 0),(0,D._)([(0,w.W)()],C.prototype,"writeDepth",void 0),(0,D._)([(0,w.W)()],C.prototype,"hasOccludees",void 0),(0,D._)([(0,w.W)()],C.prototype,"terrainDepthTest",void 0),(0,D._)([(0,w.W)()],C.prototype,"cullAboveTerrain",void 0),(0,D._)([(0,w.W)()],C.prototype,"perspectiveInterpolation",void 0);class x extends f.W{constructor(e){super(e,B),this._configuration=new C,this.vertexAttributeLocations=A,this.supportsEdges=!0,this.produces=new Map([[u.N.OPAQUE_MATERIAL,e=>(0,n.CL)(e)],[u.N.TRANSPARENT_MATERIAL,e=>(0,n._o)(e)&&this.parameters.writeDepth],[u.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,n._o)(e)&&!this.parameters.writeDepth],[u.N.DRAPED_MATERIAL,e=>(0,n._o)(e)||(0,n.CL)(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<l.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new S(e)}createBufferWriter(){const e=v.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(d.r.PERSPECTIVEDIVIDE),new R(e)}}class S extends a.m8{constructor(e){super((0,r.A)((0,r.A)({},e),e.material.parameters))}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(m,e)}}class R extends h.Z{write(e,t,i,r,n,o){for(const a of this.vertexBufferLayout.fields.keys()){const r=i.get(a);if(r)if(a===d.r.PERSPECTIVEDIVIDE){(0,p.vA)(1===r.size);const e=n.getField(a,s.Y$);e&&(0,I.uO)(r,e,o)}else(0,I.zC)(a,r,e,t,n,o)}}}class B extends c.qA{constructor(e){super(),this.textureId=e,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=o.s2.None,this.opacity=1,this.perspectiveInterpolation=!1}}},86401:(e,t,i)=>{i.d(t,{Ci:()=>n,Dq:()=>c,dB:()=>a,zK:()=>o});var r=i(48549),s=i(66470);const n=(0,r.BP)().vec3f(s.r.POSITION),o=(0,r.BP)().vec3f(s.r.POSITION).vec2f(s.r.UV0),a=(0,r.BP)().vec3f(s.r.POSITION).vec4u8(s.r.COLOR),c=(0,r.BP)().vec3f(s.r.POSITION).vec2f(s.r.UV0).vec4u8(s.r.OBJECTANDLAYERIDCOLOR)}}]);
//# sourceMappingURL=30416.44d76b8d.chunk.js.map