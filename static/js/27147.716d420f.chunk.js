"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[27147],{27147:(e,t,n)=>{n.r(t),n.d(t,{create:()=>m});var o=n(76460),i=n(31633),l=n(10851),a=n(19247),r=n(9624),s=n(79629),u=n(56623),d=n(97153);const c=()=>o.A.getLogger("esri.geometry.support.meshUtils.elevation");async function m(e,t,n){let o;if(f(e)||(0,d.Q)(e)){var i;const l=await async function(e){return f(e)?e.load():(await e.load(),await Promise.allSettled(e.layers.items.map((e=>e.load()))),e)}(e);return o=await l.createElevationSampler(t,{demResolution:null!==(i=null===n||void 0===n?void 0:n.demResolution)&&void 0!==i?i:"finest-contiguous"}),v(o,t,{material:null===n||void 0===n?void 0:n.material})}return"string"==typeof(null===n||void 0===n?void 0:n.demResolution)?(c().error("create()","demResolution must be a number when used directly with a sampler"),new l.default):v(e,t,{material:null===n||void 0===n?void 0:n.material,demResolution:null===n||void 0===n?void 0:n.demResolution})}function v(e,t,n){var o,a;if(e.demResolution.min<=0&&(null===n||void 0===n||!n.demResolution))return c().error("create()","demResolution must be specified when used with groundView.elevationSampler"),new l.default;const d=(0,i.GA)(t.spatialReference),m=(null!==(o=null===n||void 0===n?void 0:n.demResolution)&&void 0!==o?o:e.demResolution.min)/d,v=Math.round(t.width/m),f=Math.round(t.height/m),w=v+1,R=f+1,h=new Float64Array(w*R*3),y=new Float32Array(w*R*2);let g=0,A=0;const b=new Uint32Array(v*f*2*3);let k=0,x=0;const S=!e.spatialReference.equals(t.spatialReference);p.spatialReference=t.spatialReference;const{xmin:C,ymin:F,height:M,width:U}=t;for(let i=0;i<R;i++){const t=F+M*(i/f);for(let n=0;n<w;n++){var _;const o=C+U*(n/v);if(h[g++]=o,h[g++]=t,S){var j;p.x=o,p.y=t;const n=(0,r.project)(p,e.spatialReference);h[g++]=null!==(j=e.elevationAt(n.x,n.y))&&void 0!==j?j:0}else h[g++]=null!==(_=e.elevationAt(o,t))&&void 0!==_?_:0;const l=n/v,a=i/f;y[A++]=l,y[A++]=a,i!==f&&n!==v&&(b[x++]=k+1,b[x++]=k+w+1,b[x++]=k+w,b[x++]=k,b[x++]=k+1,b[x++]=k+w),k++}}return new l.default({vertexAttributes:new u.H({position:h,uv:y}),components:[new s.default({faces:b,shading:"smooth",material:null!==(a=null===n||void 0===n?void 0:n.material)&&void 0!==a?a:null})],spatialReference:t.spatialReference})}function f(e){return"type"in e&&("elevation"===e.type||"base-elevation"===e.type)}const p=new a.default}}]);
//# sourceMappingURL=27147.716d420f.chunk.js.map