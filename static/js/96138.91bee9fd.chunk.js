"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[96138],{30899:(e,t,i)=>{i.d(t,{j:()=>a});var n=i(35143),s=(i(76460),i(81806),i(47249),i(50076),i(85842)),o=i(54062),r=i(95752),l=i(54761);const a=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=e=>(0,r.isWidget)(e)&&!e.destroyed?(0,l.K)("div",{class:o.A.contentNode,key:e},e.render()):e instanceof HTMLElement?(0,l.K)("div",{afterCreate:this._attachToNode,bind:e,class:o.A.contentNode,key:e}):(0,r.hasDomNode)(e)?(0,l.K)("div",{afterCreate:this._attachToNode,bind:e.domNode,class:o.A.contentNode,key:e}):null}_attachToNode(e){e.appendChild(this)}};return t=(0,n._)([(0,s.$)("esri.widgets.Feature.support.FeatureContentMixin")],t),t}},54062:(e,t,i)=>{i.d(t,{A:()=>s});const n="esri-feature",s={base:n,container:"".concat(n,"__size-container"),title:"".concat(n,"__title"),main:"".concat(n,"__main-container"),btn:"".concat(n,"__button"),icon:"".concat(n,"__icon"),content:"".concat(n,"__content"),contentNode:"".concat(n,"__content-node"),contentNodeText:"".concat(n,"__content-node--text"),contentElement:"".concat(n,"__content-element"),text:"".concat(n,"__text"),lastEditedInfo:"".concat(n,"__last-edited-info"),fields:"".concat(n,"__fields"),fieldHeader:"".concat(n,"__field-header"),fieldData:"".concat(n,"__field-data"),fieldDataDate:"".concat(n,"__field-data--date"),loadingSpinnerContainer:"".concat(n,"__loading-container")}},58331:(e,t,i)=>{i.d(t,{A:()=>M});var n=i(35143),s=i(30726),o=i(68134),r=i(88685),l=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),d=i(25329),c=i(73843),u=i(67985),h=i(94126),p=i(98108),v=(i(76099),i(63582)),m=i(54761),_=i(91039);const g="esri-feature-utility-network-associations",f="".concat(g,"__loading-container"),w={base:g,listContainer:"".concat(g,"__list"),loadingContainer:f,loadingContainerSticky:"".concat(f,"--sticky")};let y=class extends d.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new _.A,this.messages=null,this.messagesCommon=null,this.visibleElements=new c.A}initialize(){this._featureElementInfo=new u.A,this.addHandles([(0,o.watch)((()=>[this.viewModel.description,this.viewModel.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),o.initial)])}loadDependencies(){return(0,h.W)({icon:()=>Promise.resolve().then(i.bind(i,16702)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),loader:()=>Promise.resolve().then(i.bind(i,35688)),notice:()=>i.e(12261).then(i.bind(i,12261))})}destroy(){this._featureElementInfo=(0,s.pR)(this._featureElementInfo)}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;const{state:t}=this.viewModel;return(0,m.K)("div",{class:this.classes(w.base,p.D.widget)},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),"loading"===t?this._renderLoading():"disabled"===t?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,m.K)("div",{class:w.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return(0,m.K)("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return(0,m.K)("div",{class:w.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var e;return(0,m.K)("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,m.K)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.noAssociations))}_renderAssociationType(e){const{viewModel:t}=this,i=this._getAssociationTypeTitle(e);return(0,m.K)("calcite-list-item",{description:(0,r._e)(e.description),key:"association-type-".concat(e.type),label:(0,r._e)(i),value:e.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:t,listType:e,title:i})},(0,m.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(e){const{viewModel:t}=this;return"featureForm"===t.source||t.getFeatureCountForAssociationType(e.type)>0?this._renderAssociationType(e):void 0}_renderContent(){const{messages:e,viewModel:t}=this,{state:i,associationTypes:n}=t;return(0,m.K)("div",{class:w.listContainer,key:"list-container"},"ready"===i?(0,m.K)("div",null,(0,m.K)("calcite-list",{displayMode:"flat",label:null===e||void 0===e?void 0:e.associationsList},n.map((e=>this._renderAssociations(e))))):null,this._renderStickyLoading())}_getAssociationTypeTitle(e){const{messages:t}=this;if(e.title)return e.title;switch(e.type){case"attachment":return t.associationsAttachments;case"connectivity":return t.associationsConnectivity;case"structure":return t.associationsStructure;case"content":return t.associationsContents;case"container":return t.associationsContainer}}_setupFeatureElementInfo(){var e;const{headingLevel:t,visibleElements:i}=this,n=i.description&&this.description,s=i.title&&this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:n,title:s,headingLevel:t})}};(0,n._)([(0,l.MZ)({constructOnly:!0})],y.prototype,"onSelectAssociationType",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"flowType",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"flowItems",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"parentFeatureViewModel",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"featureVisibleElements",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"description",null),(0,n._)([(0,l.MZ)()],y.prototype,"headingLevel",void 0),(0,n._)([(0,l.MZ)()],y.prototype,"title",null),(0,n._)([(0,l.MZ)({type:_.A})],y.prototype,"viewModel",void 0),(0,n._)([(0,l.MZ)(),(0,v.G)("esri/widgets/Feature/t9n/Feature")],y.prototype,"messages",void 0),(0,n._)([(0,l.MZ)(),(0,v.G)("esri/t9n/common")],y.prototype,"messagesCommon",void 0),(0,n._)([(0,l.MZ)({type:c.A,nonNullable:!0})],y.prototype,"visibleElements",void 0),y=(0,n._)([(0,a.$)("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],y);const M=y},67985:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(35143),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),r=i(25329),l=i(87540),a=(i(76099),i(54761));const d="esri-feature-element-info",c={base:d,title:"".concat(d,"__title"),description:"".concat(d,"__description")};let u=class extends r.default{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,a.K)("div",{class:c.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:e}=this;return e?(0,a.K)(l.D,{class:c.title,innerHTML:e,level:this.headingLevel}):null}_renderDescription(){const{description:e}=this;return e?(0,a.K)("div",{class:c.description,innerHTML:e,key:"description"}):null}};(0,n._)([(0,s.MZ)()],u.prototype,"description",void 0),(0,n._)([(0,s.MZ)()],u.prototype,"headingLevel",void 0),(0,n._)([(0,s.MZ)()],u.prototype,"title",void 0),u=(0,n._)([(0,o.$)("esri.widgets.Feature.support.FeatureElementInfo")],u);const h=u},73757:(e,t,i)=>{i.r(t),i.d(t,{default:()=>me});var n=i(89379),s=i(35143),o=(i(11265),i(68134)),r=i(46053),l=i(21403),a=(i(81806),i(47249),i(85842)),d=i(25329),c=(i(76460),i(75988)),u=i(18258),h=i(67985),p=i(76099),v=i(54761);const m="esri-feature-attachments";let _=class extends d.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new c.default,this.headingLevel=2,this.viewModel=new u.A}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,o.watch)((()=>{var e,t;return[null===(e=this.viewModel)||void 0===e?void 0:e.description,null===(t=this.viewModel)||void 0===t?void 0:t.title,this.headingLevel]}),(()=>this._setupFeatureElementInfo()),o.initial),(0,o.watch)((()=>this.viewModel),(e=>this.attachmentsWidget.viewModel=e),o.initial)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),null===(e=this._featureElementInfo)||void 0===e||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;const{attachmentsWidget:t}=this;return(0,v.K)("div",{class:m},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),null===t||void 0===t?void 0:t.render())}_setupFeatureElementInfo(){var e;const{description:t,title:i,headingLevel:n}=this;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:i,headingLevel:n})}};(0,s._)([(0,r.MZ)({readOnly:!0})],_.prototype,"attachmentsWidget",void 0),(0,s._)([(0,r.MZ)()],_.prototype,"description",null),(0,s._)([(0,r.MZ)()],_.prototype,"displayType",null),(0,s._)([(0,r.MZ)()],_.prototype,"graphic",null),(0,s._)([(0,r.MZ)()],_.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],_.prototype,"title",null),(0,s._)([(0,r.MZ)({type:u.A})],_.prototype,"viewModel",void 0),_=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureAttachments")],_);const g=_;var f=i(1052),w=i(9912),y=i(95752);const M="esri-feature-content",b={base:M,loaderContainer:"".concat(M,"__loader-container"),loader:"".concat(M,"__loader")};let I=class extends d.default{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{(0,w.shouldOpenInNewTab)(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))}}get creator(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}render(){var e;const t=null===(e=this.viewModel)||void 0===e?void 0:e.state;return(0,v.K)("div",{class:b.base},"loading"===t?this._renderLoading():this._renderCreated())}_renderLoading(){return(0,v.K)("div",{class:b.loaderContainer,key:"loader"},(0,v.K)("div",{class:b.loader}))}_renderCreated(){var e;const t=null===(e=this.viewModel)||void 0===e?void 0:e.created;return t?t instanceof HTMLElement?(0,v.K)("div",{afterCreate:this._attachToNode,bind:t,key:t}):(0,y.isWidget)(t)?(0,v.K)("div",{key:t},!t.destroyed&&t.render()):(0,v.K)("div",{afterCreate:this._addTargetToAnchors,innerHTML:t,key:t}):null}_attachToNode(e){e.appendChild(this)}};(0,s._)([(0,r.MZ)()],I.prototype,"creator",null),(0,s._)([(0,r.MZ)()],I.prototype,"graphic",null),(0,s._)([(0,r.MZ)({type:f.A})],I.prototype,"viewModel",void 0),I=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureContent")],I);const A=I;var C=i(38932),T=i(98108),E=i(95843),F=i(63582);const x="esri-feature-fields",k={base:x,fieldHeader:"".concat(x,"__field-header"),fieldData:"".concat(x,"__field-data"),fieldDataDate:"".concat(x,"__field-data--date")};let K=class extends d.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new C.A,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new h.A,this.addHandles((0,o.watch)((()=>{var e,t;return[null===(e=this.viewModel)||void 0===e?void 0:e.description,null===(t=this.viewModel)||void 0===t?void 0:t.title]}),(()=>this._setupFeatureElementInfo()),o.initial))}destroy(){var e;null===(e=this._featureElementInfo)||void 0===e||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return(0,v.K)("div",{class:k.base},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),this._renderFields())}_renderFieldInfo(e,t){var i;const{attributes:n}=this.viewModel,s=e.fieldName||"",o=e.label||s,r=n?null==n[s]?"":n[s]:"",l=!(null===(i=e.format)||void 0===i||!i.dateFormat),a="number"!=typeof r||l?(0,E.Q)(this.messagesURIUtils,r):this._forceLTR(r),d={[k.fieldDataDate]:l};return(0,v.K)("tr",{key:"fields-element-info-row-".concat(s,"-").concat(t)},(0,v.K)("th",{class:k.fieldHeader,innerHTML:o,key:"fields-element-info-row-header-".concat(s,"-").concat(t)}),(0,v.K)("td",{class:this.classes(k.fieldData,d),innerHTML:a,key:"fields-element-info-row-data-".concat(s,"-").concat(t)}))}_renderFields(){const{formattedFieldInfos:e}=this.viewModel;return null!==e&&void 0!==e&&e.length?(0,v.K)("table",{class:T.D.table,summary:this.messages.fieldsSummary},(0,v.K)("tbody",null,e.map(((e,t)=>this._renderFieldInfo(e,t))))):null}_setupFeatureElementInfo(){var e;const{description:t,title:i}=this;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:i})}_forceLTR(e){return"&lrm;".concat(e)}};(0,s._)([(0,r.MZ)()],K.prototype,"attributes",null),(0,s._)([(0,r.MZ)()],K.prototype,"description",null),(0,s._)([(0,r.MZ)()],K.prototype,"expressionInfos",null),(0,s._)([(0,r.MZ)()],K.prototype,"fieldInfos",null),(0,s._)([(0,r.MZ)()],K.prototype,"title",null),(0,s._)([(0,r.MZ)({type:C.A,nonNullable:!0})],K.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/widgets/Feature/t9n/Feature")],K.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/widgets/support/t9n/uriUtils")],K.prototype,"messagesURIUtils",void 0),K=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureFields")],K);const L=K;var Z=i(17555),R=i(23994),S=i(42450),N=i(94126),P=i(91896),W=i(39348);const V="esri-feature-media",D={base:V,mediaContainer:"".concat(V,"__container"),mediaItemContainer:"".concat(V,"__item-container"),mediaItem:"".concat(V,"__item"),mediaItemText:"".concat(V,"__item-text"),mediaItemTitle:"".concat(V,"__item-title"),mediaItemCaption:"".concat(V,"__item-caption"),mediaNavigation:"".concat(V,"__item-navigation"),mediaPagination:"".concat(V,"__pagination"),mediaPaginationText:"".concat(V,"__pagination-text"),mediaPrevious:"".concat(V,"__previous"),mediaPreviousIconLTR:"".concat(V,"__previous-icon"),mediaPreviousIconRTL:"".concat(V,"__previous-icon--rtl"),mediaNext:"".concat(V,"__next"),mediaNextIconLTR:"".concat(V,"__next-icon"),mediaNextIconRTL:"".concat(V,"__next-icon--rtl"),mediaChart:"".concat(V,"__chart"),mediaPaginationButton:"".concat(V,"__pagination-button"),mediaPaginationIcon:"".concat(V,"__pagination-icon"),mediaChartRendered:"".concat(V,"__chart--rendered")},O="category",H="value";let $=class extends d.default{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new S.A,this.messages=null,this._disposeChart=e=>{var t;null!==(t=this._chartRootMap.get(e))&&void 0!==t&&t.dispose(),this._chartRootMap.delete(e)},this._createChart=async e=>{const{destroyed:t,viewModel:n}=this;if(t||!n||!e)return;const{createRoot:s}=await Promise.all([i.e(73318),i.e(95429),i.e(63397),i.e(50356)]).then(i.bind(i,50356)),o=await s(e);this._chartRootMap.set(e,o),this._renderChart({mediaInfo:n.activeMediaInfo,root:o})}}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,o.watch)((()=>{var e,t;return[null===(e=this.viewModel)||void 0===e?void 0:e.activeMediaInfo,null===(t=this.viewModel)||void 0===t?void 0:t.activeMediaInfoIndex]}),(()=>this._setupMediaRefreshTimer()),o.initial),(0,o.watch)((()=>{var e,t;return[null===(e=this.viewModel)||void 0===e?void 0:e.description,null===(t=this.viewModel)||void 0===t?void 0:t.title]}),(()=>this._setupFeatureElementInfo()),o.initial)])}loadDependencies(){return(0,N.W)({icon:()=>Promise.resolve().then(i.bind(i,16702))})}destroy(){var e;this._clearMediaRefreshTimer(),null===(e=this._featureElementInfo)||void 0===e||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return(0,v.K)("div",{bind:this,class:D.base,onkeyup:this._handleMediaKeyup},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:t}=this.viewModel,i=this._renderMediaText();return e?(0,v.K)("div",{class:D.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),(0,v.K)("div",{class:D.mediaNavigation},i,e>1?(0,v.K)("div",{class:D.mediaPagination},this._renderMediaPageButton("previous"),(0,v.K)("span",{class:D.mediaPaginationText},(0,W.V)(this.messages.pageText,{index:t+1,total:e})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e&&e.title?(0,v.K)("div",{class:D.mediaItemTitle,innerHTML:e.title,key:"media-title"}):null,i=e&&e.caption?(0,v.K)("div",{class:D.mediaItemCaption,innerHTML:e.caption,key:"media-caption"}):null;return t||i?(0,v.K)("div",{class:D.mediaItemText,key:"media-text"},t,i):null}_renderImageMediaInfo(e){var t;if(!e.value)return null;const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:n,formattedMediaInfoCount:s}=this.viewModel,{value:o,refreshInterval:r,altText:l,title:a,type:d}=e,{sourceURL:c,linkURL:u}=o,h=(0,w.shouldOpenInNewTab)(null!==u&&void 0!==u?u:void 0)?"_blank":"_self",p="_blank"===h?"noreferrer":"",m=r?i:null,_=m?m.timestamp:0,g=m?m.sourceURL:c,f=(0,v.K)("img",{alt:l||a,key:"media-".concat(d,"-").concat(n,"-").concat(s,"-").concat(_),src:null!==g&&void 0!==g?g:void 0});return null!==(t=u?(0,v.K)("a",{href:u,rel:p,target:h,title:a},f):null)&&void 0!==t?t:f}_renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return(0,v.K)("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:D.mediaChart,key:"media-".concat(e.type,"-").concat(t,"-").concat(i)})}_renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this._renderImageMediaInfo(e):e.type.includes("chart")?this._renderChartMediaInfo(e):null:null}_renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?(0,v.K)("div",{class:D.mediaItemContainer,key:"media-container"},(0,v.K)("div",{class:D.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,n=t?"chevron-left":"chevron-right",s=t?"media-previous":"media-next",o=t?this._previous:this._next;return(0,v.K)("button",{"aria-label":i,bind:this,class:D.mediaPaginationButton,key:s,onclick:o,tabIndex:0,title:i,type:"button"},(0,v.K)("calcite-icon",{class:D.mediaPaginationIcon,icon:n,scale:"s"}))}_setupFeatureElementInfo(){var e;const{description:t,title:i}=this;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:e,layer:t}=this.viewModel;return e&&null!==t&&void 0!==t&&t.featureReduction&&"renderer"in t.featureReduction?t.featureReduction.renderer:null===t||void 0===t?void 0:t.renderer}async _getSeriesColors(e){const{colorAm5:t}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),n=new Map;return e.forEach((e=>{e.color&&n.set(e,t(e.color.toCss(!0)))})),n}async _getRendererColors(){const{colorAm5:e}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),t=new Map,n=this._getRenderer();if(!n)return t;const s=await(0,R.getColorsFromRenderer)(n);return s.delete("default"),Array.from(s.values()).every((e=>1===(null===e||void 0===e?void 0:e.length)))?(Array.from(s.keys()).forEach((i=>{var n;const o=null===(n=s.get(i))||void 0===n||null===(n=n[0])||void 0===n?void 0:n.toCss(!0);o&&t.set(i,e(o))})),t):t}_handleMediaKeyup(e){const{key:t}=e;"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!(0,Z.O)()}_getChartAnimationMS(){return this._canAnimateChart()?250:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?500:0}async _renderChart(e){const{root:t,mediaInfo:s}=e,{value:o,type:r}=s,{ResponsiveThemeAm5:l,DarkThemeAm5:a,AnimatedThemeAm5:d,ColorSetAm5:c,ThemeAm5:u,esriChartColorSet:h}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),p=u.new(t);p.rule("ColorSet").set("colors",h),p.rule("ColorSet").set("reuse",!0);const v=[l.new(t),p];(0,P.g4)()&&v.push(a.new(t)),this._canAnimateChart()&&v.push(d.new(t)),t.setThemes(v);const m=await this._getRendererColors(),_=await this._getSeriesColors(o.series),g=c.new(t,{}),f=_.get(o.series[0]),w=f?{lineSettings:{stroke:f}}:void 0,y=o.series.map(((e,t)=>{const i=_.get(e)||m.get(e.fieldName)||g.getIndex(t);return(0,n.A)({[O]:e.tooltip,[H]:e.value,columnSettings:{fill:i,stroke:i}},w)})).filter((e=>"pie-chart"!==r||null!=e.value&&e.value>0));"pie-chart"===r?this._createPieChart(e,y):this._createXYChart(e,y)}_getDirection(){return(0,p.V8)(this.container)?"rtl":"ltr"}async _customizeChartTooltip(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";const{colorAm5:s}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763));e.setAll({pointerOrientation:n}),null!==(t=e.get("background"))&&void 0!==t&&t.setAll({stroke:s("rgba(50, 50, 50, 1)")}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:200})}async _createPieChart(e,t){const{TooltipAm5:n}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),{PieChartAm5:s,PieSeriesAm5:o}=await Promise.all([i.e(73318),i.e(95429),i.e(38905),i.e(82818)]).then(i.bind(i,82818)),{mediaInfo:r,root:l}=e,{title:a}=r,d=(null===r||void 0===r?void 0:r.altText)||(null===r||void 0===r?void 0:r.title)||"",c=l.container.children.push(s.new(l,{ariaLabel:d,focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5})),u="{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",h=n.new(l,{labelText:u}),p=c.series.push(o.new(l,{name:a,valueField:H,categoryField:O,tooltip:h}));p.ticks.template.set("forceHidden",!0),p.labels.template.set("forceHidden",!0),p.slices.template.states.create("active",{shiftRadius:5}),this._customizeChartTooltip(h),p.slices.template.setAll({ariaLabel:u,focusable:!0,templateField:"columnSettings"}),p.data.setAll(t),p.appear(this._getChartSeriesAnimationMS()),c.appear(this._getChartAnimationMS()),c.root.dom.classList.toggle(D.mediaChartRendered,!0)}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}async _createColumnChart(e,t,n){const{TooltipAm5:s,ScrollbarAm5:o}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),{CategoryAxisAm5:r,AxisRendererXAm5:l,ValueAxisAm5:a,AxisRendererYAm5:d,ColumnSeriesAm5:c}=await Promise.all([i.e(73318),i.e(95429),i.e(38905),i.e(93640),i.e(34079)]).then(i.bind(i,34079)),{mediaInfo:u,root:h}=t,{value:v,title:m}=u;e.setAll({wheelX:"panX",wheelY:"zoomX"});const _=e.xAxes.push(r.new(h,{renderer:l.new(h,{inversed:(0,p.V8)(this.container)}),categoryField:O}));_.get("renderer").labels.template.setAll({forceHidden:!0});const g=e.yAxes.push(a.new(h,{renderer:d.new(h,{inside:!1}),min:this._getMinSeriesValue(v.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const f="{categoryX}",w=s.new(h,{labelText:f}),y=e.series.push(c.new(h,{name:m,xAxis:_,yAxis:g,valueYField:H,categoryXField:O,tooltip:w}));this._customizeChartTooltip(w),y.columns.template.setAll({ariaLabel:f,focusable:!0,templateField:"columnSettings"}),v.series.length>15&&e.set("scrollbarX",o.new(h,{orientation:"horizontal"})),_.data.setAll(n),y.data.setAll(n),y.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,t,n){const{TooltipAm5:s,ScrollbarAm5:o}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),{CategoryAxisAm5:r,AxisRendererXAm5:l,ValueAxisAm5:a,AxisRendererYAm5:d,ColumnSeriesAm5:c}=await Promise.all([i.e(73318),i.e(95429),i.e(38905),i.e(93640),i.e(34079)]).then(i.bind(i,34079)),{mediaInfo:u,root:h}=t,{value:v,title:m}=u;e.setAll({wheelX:"panY",wheelY:"zoomY"});const _=e.yAxes.push(r.new(h,{renderer:d.new(h,{inversed:!0}),categoryField:O}));_.get("renderer").labels.template.setAll({forceHidden:!0});const g=e.xAxes.push(a.new(h,{renderer:l.new(h,{inside:!1,inversed:(0,p.V8)(this.container)}),min:this._getMinSeriesValue(v.series)}));g.get("renderer").labels.template.setAll({direction:this._getDirection()});const f="{categoryY}",w=s.new(h,{labelText:f}),y=e.series.push(c.new(h,{name:m,xAxis:g,yAxis:_,valueXField:H,categoryYField:O,tooltip:w}));this._customizeChartTooltip(w,"vertical"),y.columns.template.setAll({ariaLabel:f,focusable:!0,templateField:"columnSettings"}),v.series.length>15&&e.set("scrollbarY",o.new(h,{orientation:"vertical"})),_.data.setAll(n),y.data.setAll(n),y.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,t,n){var s,o;const{TooltipAm5:r,ScrollbarAm5:l}=await Promise.all([i.e(73318),i.e(52763)]).then(i.bind(i,52763)),{CategoryAxisAm5:a,AxisRendererXAm5:d,ValueAxisAm5:c,AxisRendererYAm5:u,LineSeriesAm5:h}=await Promise.all([i.e(73318),i.e(95429),i.e(38905),i.e(93640),i.e(34079)]).then(i.bind(i,34079)),{root:v,mediaInfo:m}=t,{value:_,title:g}=m;e.setAll({wheelX:"panX",wheelY:"zoomX"});const f=e.xAxes.push(a.new(v,{renderer:d.new(v,{inversed:(0,p.V8)(this.container)}),categoryField:O}));f.get("renderer").labels.template.setAll({forceHidden:!0});const w=e.yAxes.push(c.new(v,{renderer:u.new(v,{inside:!1}),min:this._getMinSeriesValue(_.series)}));w.get("renderer").labels.template.setAll({direction:this._getDirection()});const y=null===(s=n[0])||void 0===s||null===(s=s.lineSettings)||void 0===s?void 0:s.stroke,M=r.new(v,{getFillFromSprite:!y,labelText:"{categoryX}"});y&&(null===(o=M.get("background"))||void 0===o||o.setAll({fill:y}));const b=e.series.push(h.new(v,{name:g,xAxis:f,yAxis:w,valueYField:H,categoryXField:O,tooltip:M}));b.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(M,"vertical"),_.series.length>15&&e.set("scrollbarX",l.new(v,{orientation:"horizontal"})),f.data.setAll(n),b.data.setAll(n),b.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,t){const{XYChartAm5:n,XYCursorAm5:s}=await Promise.all([i.e(73318),i.e(95429),i.e(38905),i.e(93640),i.e(34079)]).then(i.bind(i,34079)),{root:o,mediaInfo:r}=e,{type:l}=r,a=(null===r||void 0===r?void 0:r.altText)||(null===r||void 0===r?void 0:r.title)||"",d=o.container.children.push(n.new(o,{ariaLabel:a,focusable:!0,panX:!0,panY:!0}));d.set("cursor",s.new(o,{})),"column-chart"===l&&await this._createColumnChart(d,e,t),"bar-chart"===l&&await this._createBarChart(d,e,t),"line-chart"===l&&await this._createLineChart(d,e,t),d.root.dom.classList.toggle(D.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;"image"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.refreshInterval)>0&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e,n=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL)}),n);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[n,s=""]=e.split("#");return"".concat(n).concat(i,"timestamp=").concat(t).concat(s?"#":"").concat(s)}};(0,s._)([(0,r.MZ)()],$.prototype,"_refreshIntervalInfo",void 0),(0,s._)([(0,r.MZ)()],$.prototype,"attributes",null),(0,s._)([(0,r.MZ)()],$.prototype,"activeMediaInfoIndex",null),(0,s._)([(0,r.MZ)()],$.prototype,"description",null),(0,s._)([(0,r.MZ)()],$.prototype,"fieldInfoMap",null),(0,s._)([(0,r.MZ)()],$.prototype,"layer",null),(0,s._)([(0,r.MZ)()],$.prototype,"mediaInfos",null),(0,s._)([(0,r.MZ)()],$.prototype,"popupTemplate",null),(0,s._)([(0,r.MZ)()],$.prototype,"relatedInfos",null),(0,s._)([(0,r.MZ)()],$.prototype,"title",null),(0,s._)([(0,r.MZ)({type:S.A})],$.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/widgets/Feature/t9n/Feature")],$.prototype,"messages",void 0),$=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureMedia")],$);const X=$;var z=i(39492);const B="esri-feature",Y={base:"".concat(B,"-expression"),loadingSpinnerContainer:"".concat(B,"__loading-container")};let U=class extends d.default{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new z.A}initialize(){this.addHandles((0,o.watch)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.contentElementViewModel}),(()=>this._setupExpressionWidget()),o.initial))}loadDependencies(){return(0,N.W)({loader:()=>Promise.resolve().then(i.bind(i,35688))})}destroy(){this._destroyContentWidget()}render(){var e;const{state:t}=this.viewModel;return(0,v.K)("div",{class:Y.base},"loading"===t?this._renderLoading():"disabled"===t?null:null===(e=this._contentWidget)||void 0===e?void 0:e.render())}_renderLoading(){return(0,v.K)("div",{class:Y.loadingSpinnerContainer,key:"loading-container"},(0,v.K)("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=null===t||void 0===t?void 0:t.type;this._destroyContentWidget();const n=e?"fields"===i?new L({viewModel:e}):"media"===i?new X({viewModel:e}):"text"===i?new A({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};(0,s._)([(0,r.MZ)({type:z.A})],U.prototype,"viewModel",void 0),U=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureExpression")],U);const G=U;var q,Q=i(30726),j=i(50346),J=i(88685),ee=i(65023),te=i(50265);const ie="esri-feature",ne="".concat(ie,"-relationship"),se={base:ne,listContainer:"".concat(ne,"__list"),listItem:"".concat(ne,"__list-item"),listItemHidden:"".concat(ne,"__list-item--hidden"),listContainerQuerying:"".concat(ne,"__list--querying"),featureObserver:"".concat(ie,"__feature-observer"),stickySpinnerContainer:"".concat(ie,"__sticky-loading-container"),loadingSpinnerContainer:"".concat(ie,"__loading-container")},oe={title:!0,description:!0};let re=q=class extends d.default{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver((e=>{let[t]=e;(null===t||void 0===t?void 0:t.isIntersecting)&&this._increaseFeaturePage()}),{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new ee.A,this.messages=null,this.messagesCommon=null,this.visibleElements=(0,n.A)({},oe),this._increaseFeaturePage=()=>{const{state:e,showAllEnabled:t,relatedFeatures:i,featuresPerPage:n,featurePage:s}=this.viewModel;"ready"===e&&t&&i.length>=n*s&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new h.A,this.addHandles([(0,o.watch)((()=>[this.viewModel.description,this.viewModel.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),o.initial),(0,o.watch)((()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode]),(()=>this._handleRelatedFeatureObserverChange())),(0,o.on)((()=>this.viewModel.relatedFeatureViewModels),"change",(()=>this._setupRelatedFeatureViewModels()))])}loadDependencies(){return(0,N.W)({chip:()=>Promise.resolve().then(i.bind(i,10239)),icon:()=>Promise.resolve().then(i.bind(i,16702)),list:()=>Promise.all([i.e(46870),i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),loader:()=>Promise.resolve().then(i.bind(i,35688)),notice:()=>i.e(12261).then(i.bind(i,12261))})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,Q.pR)(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i,state:n,allCategoriesCount:s}=this.viewModel;return!e&&"ready"===n&&(!!s&&(s>i||0===i)||!!t&&(t>i||0===i))}get displayListItems(){const{relatedFeatureViewModels:e,allCategoriesCount:t}=this.viewModel;return this.displayShowAllButton||!!e.length||!!t}get allItemsDescription(){const{messages:e}=this,{featureCount:t,allCategories:i,allCategoriesCount:n}=this.viewModel;return(0,W.V)(null===e||void 0===e?void 0:e.numberRecords,{number:(0,te.ZV)(i?n:t)})}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){var e;const{activeCategory:t,title:i}=this.viewModel;return null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:i}set title(e){this.viewModel.title=e}castVisibleElements(e){return(0,n.A)((0,n.A)({},oe),e)}render(){var e;const{state:t}=this.viewModel;return(0,v.K)("div",{class:this.classes(se.base,T.D.widget)},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),"loading"===t?this._renderLoading():"disabled"===t?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectCategory(e){const{flowItems:t,featureVisibleElements:i,viewModel:n}=this;t&&(n.activeCategory=e,n.showAllEnabled=!0,t.push(new q({flowItems:t,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:n})))}async _selectRecord(e){const{flowItems:t,featureVisibleElements:n}=this;if(!t)return;e.abilities={relationshipContent:!0};const{default:s}=await Promise.resolve().then(i.bind(i,73757));t.push(new s({flowItems:t,flowType:this.flowType,viewModel:e,visibleElements:n}))}_showAllRecords(){const{flowItems:e}=this;if(!e)return;const{viewModel:t,featureVisibleElements:i}=this;t.showAllEnabled=!0;const n=new q({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:t});e.push(n)}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,v.K)("div",{class:se.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return(0,v.K)("calcite-loader",{inline:!0,label:""})}_renderLoading(){return(0,v.K)("div",{class:se.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return(0,v.K)("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=(0,p.V8)(this.container)?"chevron-left":"chevron-right";return(0,v.K)("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderCategory(e){const{count:t,name:i,value:n}=e,s=(0,te.ZV)(t);return(0,v.K)("calcite-list-item",{class:se.listItem,disabled:!t,key:n,label:i,onCalciteListItemSelect:()=>this._selectCategory(e)},(0,v.K)("calcite-chip",{label:s,scale:"s",slot:"content-end"},s),this._renderChevronIconNode())}_renderRelatedFeature(e){var t,i;const{itemDescriptionFieldName:n}=this.viewModel,s=e.title;e.description=n&&(null===(t=e.formattedAttributes)||void 0===t?void 0:t.global[n]);const o="loading"===e.state;return(0,v.K)("calcite-list-item",{class:this.classes(se.listItem,{[se.listItemHidden]:o}),description:(0,J._e)(null!==(i=e.description)&&void 0!==i?i:""),key:e.uid,label:(0,J._e)(s),onCalciteListItemSelect:()=>this._selectRecord(e)},this._renderChevronIconNode())}_renderShowAllListItem(){var e;return this.displayShowAllButton?(0,v.K)("calcite-list-item",{description:this.allItemsDescription,key:"show-all-item",label:null===(e=this.messages)||void 0===e?void 0:e.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var e;return(0,v.K)("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},(0,v.K)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.noRelatedFeatures))}_renderFeatureObserver(){return(0,v.K)("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:se.featureObserver,key:"feature-observer"})}_renderList(){var e,t;const{relatedFeatureViewModels:i,categories:n}=this.viewModel;return(0,v.K)("calcite-list",{displayMode:"flat",label:null===(e=this.messages)||void 0===e?void 0:e.relatedFeaturesList},null!==(t=null===n||void 0===n?void 0:n.map((e=>this._renderCategory(e))))&&void 0!==t?t:i.toArray().map((e=>this._renderRelatedFeature(e))),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return(0,v.K)("div",{class:this.classes(se.listContainer,{[se.listContainerQuerying]:"querying"===t}),key:"list-container"},e?this._renderList():"ready"===t?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var e;return(0,v.K)("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,v.K)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),null!==e&&void 0!==e&&e.forEach((e=>{this.addHandles((0,o.watch)((()=>[e.title,e.state]),(()=>this.scheduleRender()),o.initial),t)})),this.scheduleRender()}_setupFeatureElementInfo(){var e;const{headingLevel:t,visibleElements:i}=this,n=i.description&&this.description,s=i.title&&this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:n,title:s,headingLevel:t})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await(0,j.after)(0),this._relatedFeatureIntersectionObserverNode&&"ready"===e&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};(0,s._)([(0,r.MZ)()],re.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],re.prototype,"displayShowAllButton",null),(0,s._)([(0,r.MZ)({readOnly:!0})],re.prototype,"displayListItems",null),(0,s._)([(0,r.MZ)({readOnly:!0})],re.prototype,"allItemsDescription",null),(0,s._)([(0,r.MZ)()],re.prototype,"description",null),(0,s._)([(0,r.MZ)()],re.prototype,"featureVisibleElements",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"flowItems",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"flowType",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"title",null),(0,s._)([(0,r.MZ)({type:ee.A})],re.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/widgets/Feature/t9n/Feature")],re.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/t9n/common")],re.prototype,"messagesCommon",void 0),(0,s._)([(0,r.MZ)()],re.prototype,"visibleElements",void 0),(0,s._)([(0,l.w)("visibleElements")],re.prototype,"castVisibleElements",null),re=q=(0,s._)([(0,a.$)("esri.widgets.Feature.FeatureRelationship")],re);const le=re;var ae=i(58331),de=i(51007),ce=i(54062),ue=i(30899),he=i(87540);const pe={title:!0,content:!0,lastEditedInfo:!0};let ve=class extends((0,ue.j)(d.default)){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements=(0,n.A)({},pe),this.viewModel=new de.default}initialize(){this.addHandles((0,o.watch)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.contentViewModels}),(()=>this._setupContentWidgets()),o.initial))}loadDependencies(){return(0,N.W)({notice:()=>i.e(12261).then(i.bind(i,12261)),loader:()=>Promise.resolve().then(i.bind(i,35688))})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get title(){return this.viewModel.title}castVisibleElements(e){return(0,n.A)((0,n.A)({},pe),e)}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}render(){const{state:e}=this.viewModel,t=(0,v.K)("div",{class:ce.A.container,key:"container"},this._renderTitle(),"error"===e?this._renderError():"loading"===e?this._renderLoading():this._renderContentContainer());return(0,v.K)("div",{class:this.classes(ce.A.base,T.D.widget)},t)}_renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return(0,v.K)("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},i.title?(0,v.K)("div",{key:"error-title",slot:"title"},e.errorMessage):null,(0,v.K)("div",{key:"error-message",slot:"message"},t.loadingError))}_renderLoading(){return(0,v.K)("div",{class:ce.A.loadingSpinnerContainer,key:"loading-container"},(0,v.K)("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:e}=this;return e.content?(0,v.K)("div",{class:ce.A.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:e,title:t}=this;return e.title?(0,v.K)(he.D,{class:ce.A.title,innerHTML:t,level:this.headingLevel}):null}_renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?(0,v.K)("div",{class:ce.A.contentNode,key:"".concat(t,"-content-elements")},e.map(this._renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return!e||e.destroyed?null:(0,v.K)("div",{class:this.classes(ce.A.contentNode,ce.A.contentNodeText),key:"".concat(t,"-content")},e.render())}return this.renderNodeContent(e)}_renderContentElement(e,t){var i;const{visibleElements:n}=this;if("boolean"!=typeof n.content&&(null===(i=n.content)||void 0===i||!i[e.type]))return null;switch(e.type){case"attachments":return this._renderAttachments(t);case"custom":return this._renderCustom(e,t);case"fields":return this._renderFields(t);case"media":return this._renderMedia(t);case"text":return this._renderText(e,t);case"expression":return this._renderExpression(t);case"relationship":return this._renderRelationship(t);case"utility-network-associations":return this._renderAssociation(t);default:return null}}_renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:n}=t.viewModel;return"loading"===i||n.length>0?(0,v.K)("div",{class:this.classes(ce.A.contentElement),key:this._buildKey("attachments-element",e)},t.render()):null}_renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?(0,v.K)("div",{class:ce.A.contentElement,key:this._buildKey("relationship-element",e)},t.render()):null}_renderAssociation(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?(0,v.K)("div",{class:ce.A.contentElement,key:this._buildKey("utility-network-association-element",e)},t.render()):null}_renderExpression(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&t.viewModel.contentElement?(0,v.K)("div",{class:ce.A.contentElement,key:this._buildKey("expression-element",e)},t.render()):null}_renderCustom(e,t){const{creator:i}=e,n=this._contentWidgets[t];return!n||n.destroyed?null:i?(0,v.K)("div",{class:ce.A.contentElement,key:this._buildKey("custom-element",t)},n.render()):null}_renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:(0,v.K)("div",{class:ce.A.contentElement,key:this._buildKey("fields-element",e)},t.render())}_renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:(0,v.K)("div",{class:ce.A.contentElement,key:this._buildKey("media-element",e)},t.render())}_renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:n,user:s}=i,o="edit"===i.type?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,r=(0,W.V)(o,{date:n,user:s});return(0,v.K)("div",{class:this.classes(ce.A.lastEditedInfo,ce.A.contentElement),key:"edit-info-element"},r)}_renderText(e,t){const i=e.text,n=this._contentWidgets[t];return!n||n.destroyed?null:i?(0,v.K)("div",{class:this.classes(ce.A.contentElement,ce.A.text),key:this._buildKey("text-element",t)},n.render()):null}_buildKey(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return"".concat(e,"__").concat((null===(t=this.viewModel)||void 0===t||null===(t=t.graphic)||void 0===t?void 0:t.uid)||"0","-").concat(n.join("-"))}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach((e=>this._destroyContentWidget(e))),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t,flowItems:n,viewModel:s}=this,o=null===s||void 0===s?void 0:s.content,{contentViewModels:r}=s;if(Array.isArray(o))o.forEach(((o,l)=>{if("attachments"===o.type&&(this._contentWidgets[l]=new g({displayType:o.displayType,headingLevel:t.title&&e<6?e+1:e,viewModel:r[l]})),"fields"===o.type&&(this._contentWidgets[l]=new L({viewModel:r[l]})),"media"===o.type&&(this._contentWidgets[l]=new X({viewModel:r[l]})),"text"===o.type&&(this._contentWidgets[l]=new A({viewModel:r[l]})),"custom"===o.type&&(this._contentWidgets[l]=new A({viewModel:r[l]})),"expression"===o.type&&(this._contentWidgets[l]=new G({viewModel:r[l]})),"relationship"===o.type){const e=new le({flowItems:n,featureVisibleElements:t,viewModel:r[l]});this._contentWidgets[l]=e}if("utility-network-associations"===o.type){const e=async e=>{const{viewModel:o,listType:r,title:l}=e;if(!n)return;o.activeAssociationType=r;const{default:a}=await i.e(82012).then(i.bind(i,82012)),d=new a({viewModel:o,parentFeatureViewModel:s,listType:r,title:l,featureVisibleElements:t,description:s.title,flowItems:n});n.push(d)},o=new ae.A({flowItems:n,onSelectAssociationType:e,parentFeatureViewModel:s,featureVisibleElements:t,viewModel:r[l]});this._contentWidgets[l]=o}}),this);else{const e=r[0];e&&!e.destroyed&&(this._contentWidgets[0]=new A({viewModel:e}))}this.scheduleRender()}};(0,s._)([(0,r.MZ)()],ve.prototype,"flowType",void 0),(0,s._)([(0,r.MZ)()],ve.prototype,"graphic",null),(0,s._)([(0,r.MZ)()],ve.prototype,"defaultPopupTemplateEnabled",null),(0,s._)([(0,r.MZ)()],ve.prototype,"flowItems",void 0),(0,s._)([(0,r.MZ)()],ve.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],ve.prototype,"isTable",null),(0,s._)([(0,r.MZ)()],ve.prototype,"icon",null),(0,s._)([(0,r.MZ)()],ve.prototype,"label",null),(0,s._)([(0,r.MZ)()],ve.prototype,"location",null),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/widgets/Feature/t9n/Feature")],ve.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,F.G)("esri/t9n/common")],ve.prototype,"messagesCommon",void 0),(0,s._)([(0,r.MZ)()],ve.prototype,"spatialReference",null),(0,s._)([(0,r.MZ)()],ve.prototype,"timeZone",null),(0,s._)([(0,r.MZ)({readOnly:!0})],ve.prototype,"title",null),(0,s._)([(0,r.MZ)()],ve.prototype,"visibleElements",void 0),(0,s._)([(0,l.w)("visibleElements")],ve.prototype,"castVisibleElements",null),(0,s._)([(0,r.MZ)()],ve.prototype,"map",null),(0,s._)([(0,r.MZ)()],ve.prototype,"view",null),(0,s._)([(0,r.MZ)({type:de.default})],ve.prototype,"viewModel",void 0),ve=(0,s._)([(0,a.$)("esri.widgets.Feature")],ve);const me=ve},73843:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(35143),s=i(91967),o=i(46053),r=(i(81806),i(76460),i(47249),i(85842));let l=class extends s.default{constructor(e){super(e),this.title=!0,this.description=!0}};(0,n._)([(0,o.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"title",void 0),(0,n._)([(0,o.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"description",void 0),l=(0,n._)([(0,r.$)("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],l);const a=l},95843:(e,t,i)=>{i.d(t,{Q:()=>o});var n=i(88685);const s=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function o(e,t){if("string"!=typeof t||!t)return t;const i=s.find((e=>e.pattern.test(t)));if(!i)return t;const o=t.match(i.pattern),r=null===o||void 0===o?void 0:o[2],l=(0,n.HC)((0,n.HC)(i.label,{messages:e,hierPart:r}),{appName:i.appName}),a=i.target?' target="'.concat(i.target,'"'):"",d="_blank"===i.target?' rel="noreferrer"':"";return t.replace(i.pattern,"<a".concat(a,' href="$1"').concat(d,">").concat(l,"</a>"))}}}]);
//# sourceMappingURL=96138.91bee9fd.chunk.js.map